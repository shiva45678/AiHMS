var LT=Object.defineProperty;var FT=(t,n,e)=>n in t?LT(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var Fn=(t,n,e)=>FT(t,typeof n!="symbol"?n+"":n,e);function zT(t,n){for(var e=0;e<n.length;e++){const i=n[e];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const l=Object.getOwnPropertyDescriptor(i,s);l&&Object.defineProperty(t,s,l.get?l:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=e(s);fetch(s.href,l)}})();var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pv={exports:{}},Am={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function $T(){if(d1)return Am;d1=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var h in s)h!=="key"&&(l[h]=s[h])}else l=s;return s=l.ref,{$$typeof:t,type:i,key:c,ref:s!==void 0?s:null,props:l}}return Am.Fragment=n,Am.jsx=e,Am.jsxs=e,Am}var f1;function UT(){return f1||(f1=1,Pv.exports=$T()),Pv.exports}var r=UT(),Rv={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h1;function BT(){if(h1)return Ft;h1=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function S(I){return I===null||typeof I!="object"?null:(I=x&&I[x]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function A(I,de,ae){this.props=I,this.context=de,this.refs=E,this.updater=ae||w}A.prototype.isReactComponent={},A.prototype.setState=function(I,de){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,de,"setState")},A.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function k(){}k.prototype=A.prototype;function P(I,de,ae){this.props=I,this.context=de,this.refs=E,this.updater=ae||w}var R=P.prototype=new k;R.constructor=P,j(R,A.prototype),R.isPureReactComponent=!0;var Y=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function z(I,de,ae,H,ne,me){return ae=me.ref,{$$typeof:t,type:I,key:de,ref:ae!==void 0?ae:null,props:me}}function L(I,de){return z(I.type,de,void 0,void 0,void 0,I.props)}function V(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function M(I){var de={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ae){return de[ae]})}var B=/\/+/g;function ee(I,de){return typeof I=="object"&&I!==null&&I.key!=null?M(""+I.key):de.toString(36)}function ie(){}function te(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ie,ie):(I.status="pending",I.then(function(de){I.status==="pending"&&(I.status="fulfilled",I.value=de)},function(de){I.status==="pending"&&(I.status="rejected",I.reason=de)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function se(I,de,ae,H,ne){var me=typeof I;(me==="undefined"||me==="boolean")&&(I=null);var ue=!1;if(I===null)ue=!0;else switch(me){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(I.$$typeof){case t:case n:ue=!0;break;case y:return ue=I._init,se(ue(I._payload),de,ae,H,ne)}}if(ue)return ne=ne(I),ue=H===""?"."+ee(I,0):H,Y(ne)?(ae="",ue!=null&&(ae=ue.replace(B,"$&/")+"/"),se(ne,de,ae,"",function(Ge){return Ge})):ne!=null&&(V(ne)&&(ne=L(ne,ae+(ne.key==null||I&&I.key===ne.key?"":(""+ne.key).replace(B,"$&/")+"/")+ue)),de.push(ne)),1;ue=0;var je=H===""?".":H+":";if(Y(I))for(var ge=0;ge<I.length;ge++)H=I[ge],me=je+ee(H,ge),ue+=se(H,de,ae,me,ne);else if(ge=S(I),typeof ge=="function")for(I=ge.call(I),ge=0;!(H=I.next()).done;)H=H.value,me=je+ee(H,ge++),ue+=se(H,de,ae,me,ne);else if(me==="object"){if(typeof I.then=="function")return se(te(I),de,ae,H,ne);throw de=String(I),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return ue}function X(I,de,ae){if(I==null)return I;var H=[],ne=0;return se(I,H,"","",function(me){return de.call(ae,me,ne++)}),H}function K(I){if(I._status===-1){var de=I._result;de=de(),de.then(function(ae){(I._status===0||I._status===-1)&&(I._status=1,I._result=ae)},function(ae){(I._status===0||I._status===-1)&&(I._status=2,I._result=ae)}),I._status===-1&&(I._status=0,I._result=de)}if(I._status===1)return I._result.default;throw I._result}var re=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function ve(){}return Ft.Children={map:X,forEach:function(I,de,ae){X(I,function(){de.apply(this,arguments)},ae)},count:function(I){var de=0;return X(I,function(){de++}),de},toArray:function(I){return X(I,function(de){return de})||[]},only:function(I){if(!V(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Ft.Component=A,Ft.Fragment=e,Ft.Profiler=s,Ft.PureComponent=P,Ft.StrictMode=i,Ft.Suspense=m,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(I){return F.H.useMemoCache(I)}},Ft.cache=function(I){return function(){return I.apply(null,arguments)}},Ft.cloneElement=function(I,de,ae){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var H=j({},I.props),ne=I.key,me=void 0;if(de!=null)for(ue in de.ref!==void 0&&(me=void 0),de.key!==void 0&&(ne=""+de.key),de)!q.call(de,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&de.ref===void 0||(H[ue]=de[ue]);var ue=arguments.length-2;if(ue===1)H.children=ae;else if(1<ue){for(var je=Array(ue),ge=0;ge<ue;ge++)je[ge]=arguments[ge+2];H.children=je}return z(I.type,ne,void 0,void 0,me,H)},Ft.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},Ft.createElement=function(I,de,ae){var H,ne={},me=null;if(de!=null)for(H in de.key!==void 0&&(me=""+de.key),de)q.call(de,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ne[H]=de[H]);var ue=arguments.length-2;if(ue===1)ne.children=ae;else if(1<ue){for(var je=Array(ue),ge=0;ge<ue;ge++)je[ge]=arguments[ge+2];ne.children=je}if(I&&I.defaultProps)for(H in ue=I.defaultProps,ue)ne[H]===void 0&&(ne[H]=ue[H]);return z(I,me,void 0,void 0,null,ne)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(I){return{$$typeof:h,render:I}},Ft.isValidElement=V,Ft.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:K}},Ft.memo=function(I,de){return{$$typeof:f,type:I,compare:de===void 0?null:de}},Ft.startTransition=function(I){var de=F.T,ae={};F.T=ae;try{var H=I(),ne=F.S;ne!==null&&ne(ae,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(ve,re)}catch(me){re(me)}finally{F.T=de}},Ft.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ft.use=function(I){return F.H.use(I)},Ft.useActionState=function(I,de,ae){return F.H.useActionState(I,de,ae)},Ft.useCallback=function(I,de){return F.H.useCallback(I,de)},Ft.useContext=function(I){return F.H.useContext(I)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(I,de){return F.H.useDeferredValue(I,de)},Ft.useEffect=function(I,de,ae){var H=F.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(I,de)},Ft.useId=function(){return F.H.useId()},Ft.useImperativeHandle=function(I,de,ae){return F.H.useImperativeHandle(I,de,ae)},Ft.useInsertionEffect=function(I,de){return F.H.useInsertionEffect(I,de)},Ft.useLayoutEffect=function(I,de){return F.H.useLayoutEffect(I,de)},Ft.useMemo=function(I,de){return F.H.useMemo(I,de)},Ft.useOptimistic=function(I,de){return F.H.useOptimistic(I,de)},Ft.useReducer=function(I,de,ae){return F.H.useReducer(I,de,ae)},Ft.useRef=function(I){return F.H.useRef(I)},Ft.useState=function(I){return F.H.useState(I)},Ft.useSyncExternalStore=function(I,de,ae){return F.H.useSyncExternalStore(I,de,ae)},Ft.useTransition=function(){return F.H.useTransition()},Ft.version="19.1.0",Ft}var m1;function p0(){return m1||(m1=1,Rv.exports=BT()),Rv.exports}var _=p0();const ll=Jf(_),p1=zT({__proto__:null,default:ll},[_]);var Mv={exports:{}},km={},Iv={exports:{}},Ov={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function qT(){return g1||(g1=1,function(t){function n(X,K){var re=X.length;X.push(K);e:for(;0<re;){var ve=re-1>>>1,I=X[ve];if(0<s(I,K))X[ve]=K,X[re]=I,re=ve;else break e}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var K=X[0],re=X.pop();if(re!==K){X[0]=re;e:for(var ve=0,I=X.length,de=I>>>1;ve<de;){var ae=2*(ve+1)-1,H=X[ae],ne=ae+1,me=X[ne];if(0>s(H,re))ne<I&&0>s(me,H)?(X[ve]=me,X[ne]=re,ve=ne):(X[ve]=H,X[ae]=re,ve=ae);else if(ne<I&&0>s(me,re))X[ve]=me,X[ne]=re,ve=ne;else break e}}return K}function s(X,K){var re=X.sortIndex-K.sortIndex;return re!==0?re:X.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var m=[],f=[],y=1,x=null,S=3,w=!1,j=!1,E=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function Y(X){for(var K=e(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=X)i(f),K.sortIndex=K.expirationTime,n(m,K);else break;K=e(f)}}function F(X){if(E=!1,Y(X),!j)if(e(m)!==null)j=!0,q||(q=!0,ee());else{var K=e(f);K!==null&&se(F,K.startTime-X)}}var q=!1,z=-1,L=5,V=-1;function M(){return A?!0:!(t.unstable_now()-V<L)}function B(){if(A=!1,q){var X=t.unstable_now();V=X;var K=!0;try{e:{j=!1,E&&(E=!1,P(z),z=-1),w=!0;var re=S;try{t:{for(Y(X),x=e(m);x!==null&&!(x.expirationTime>X&&M());){var ve=x.callback;if(typeof ve=="function"){x.callback=null,S=x.priorityLevel;var I=ve(x.expirationTime<=X);if(X=t.unstable_now(),typeof I=="function"){x.callback=I,Y(X),K=!0;break t}x===e(m)&&i(m),Y(X)}else i(m);x=e(m)}if(x!==null)K=!0;else{var de=e(f);de!==null&&se(F,de.startTime-X),K=!1}}break e}finally{x=null,S=re,w=!1}K=void 0}}finally{K?ee():q=!1}}}var ee;if(typeof R=="function")ee=function(){R(B)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,te=ie.port2;ie.port1.onmessage=B,ee=function(){te.postMessage(null)}}else ee=function(){k(B,0)};function se(X,K){z=k(function(){X(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(X){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var re=S;S=K;try{return X()}finally{S=re}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(X,K){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var re=S;S=X;try{return K()}finally{S=re}},t.unstable_scheduleCallback=function(X,K,re){var ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ve+re:ve):re=ve,X){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=re+I,X={id:y++,callback:K,priorityLevel:X,startTime:re,expirationTime:I,sortIndex:-1},re>ve?(X.sortIndex=re,n(f,X),e(m)===null&&X===e(f)&&(E?(P(z),z=-1):E=!0,se(F,re-ve))):(X.sortIndex=I,n(m,X),j||w||(j=!0,q||(q=!0,ee()))),X},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(X){var K=S;return function(){var re=S;S=K;try{return X.apply(this,arguments)}finally{S=re}}}}(Ov)),Ov}var y1;function VT(){return y1||(y1=1,Iv.exports=qT()),Iv.exports}var Lv={exports:{}},cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function HT(){if(x1)return cr;x1=1;var t=p0();function n(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,f,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:m,containerInfo:f,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cr.createPortal=function(m,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return l(m,f,null,y)},cr.flushSync=function(m){var f=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=f,i.p=y,i.d.f()}},cr.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(m,f))},cr.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},cr.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var y=f.as,x=h(y,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?i.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:x,integrity:S,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},cr.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=h(f.as,f.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(m)},cr.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,x=h(y,f.crossOrigin);i.d.L(m,y,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},cr.preloadModule=function(m,f){if(typeof m=="string")if(f){var y=h(f.as,f.crossOrigin);i.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(m)},cr.requestFormReset=function(m){i.d.r(m)},cr.unstable_batchedUpdates=function(m,f){return m(f)},cr.useFormState=function(m,f,y){return c.H.useFormState(m,f,y)},cr.useFormStatus=function(){return c.H.useHostTransitionStatus()},cr.version="19.1.0",cr}var v1;function VN(){if(v1)return Lv.exports;v1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Lv.exports=HT(),Lv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function GT(){if(b1)return km;b1=1;var t=VT(),n=p0(),e=VN();function i(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function h(a){if(l(a)!==a)throw Error(i(188))}function m(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(i(188));return o!==a?null:a}for(var u=a,g=o;;){var v=u.return;if(v===null)break;var T=v.alternate;if(T===null){if(g=v.return,g!==null){u=g;continue}break}if(v.child===T.child){for(T=v.child;T;){if(T===u)return h(v),a;if(T===g)return h(v),o;T=T.sibling}throw Error(i(188))}if(u.return!==g.return)u=v,g=T;else{for(var $=!1,Q=v.child;Q;){if(Q===u){$=!0,u=v,g=T;break}if(Q===g){$=!0,g=v,u=T;break}Q=Q.sibling}if(!$){for(Q=T.child;Q;){if(Q===u){$=!0,u=T,g=v;break}if(Q===g){$=!0,g=T,u=v;break}Q=Q.sibling}if(!$)throw Error(i(189))}}if(u.alternate!==g)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?a:o}function f(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=f(a),o!==null)return o;a=a.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),R=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function ee(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function te(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case F:return"Suspense";case q:return"SuspenseList";case V:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case R:return(a.displayName||"Context")+".Provider";case P:return(a._context.displayName||"Context")+".Consumer";case Y:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return o=a.displayName||null,o!==null?o:te(a.type)||"Memo";case L:o=a._payload,a=a._init;try{return te(a(o))}catch{}}return null}var se=Array.isArray,X=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ve=[],I=-1;function de(a){return{current:a}}function ae(a){0>I||(a.current=ve[I],ve[I]=null,I--)}function H(a,o){I++,ve[I]=a.current,a.current=o}var ne=de(null),me=de(null),ue=de(null),je=de(null);function ge(a,o){switch(H(ue,o),H(me,a),H(ne,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?In(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=In(o),a=Ln(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae(ne),H(ne,a)}function Ge(){ae(ne),ae(me),ae(ue)}function Te(a){a.memoizedState!==null&&H(je,a);var o=ne.current,u=Ln(o,a.type);o!==u&&(H(me,a),H(ne,u))}function Ne(a){me.current===a&&(ae(ne),ae(me)),je.current===a&&(ae(je),yc._currentValue=re)}var Be=Object.prototype.hasOwnProperty,Qe=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,ht=t.unstable_shouldYield,Cn=t.unstable_requestPaint,tt=t.unstable_now,li=t.unstable_getCurrentPriorityLevel,Pi=t.unstable_ImmediatePriority,ei=t.unstable_UserBlockingPriority,tn=t.unstable_NormalPriority,vi=t.unstable_LowPriority,zn=t.unstable_IdlePriority,Hi=t.log,Qn=t.unstable_setDisableYieldValue,Ee=null,Le=null;function nt(a){if(typeof Hi=="function"&&Qn(a),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Ee,a)}catch{}}var rt=Math.clz32?Math.clz32:ci,zt=Math.log,xn=Math.LN2;function ci(a){return a>>>=0,a===0?32:31-(zt(a)/xn|0)|0}var Ie=256,Je=4194304;function Ve(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function lt(a,o,u){var g=a.pendingLanes;if(g===0)return 0;var v=0,T=a.suspendedLanes,$=a.pingedLanes;a=a.warmLanes;var Q=g&134217727;return Q!==0?(g=Q&~T,g!==0?v=Ve(g):($&=Q,$!==0?v=Ve($):u||(u=Q&~a,u!==0&&(v=Ve(u))))):(Q=g&~T,Q!==0?v=Ve(Q):$!==0?v=Ve($):u||(u=g&~a,u!==0&&(v=Ve(u)))),v===0?0:o!==0&&o!==v&&(o&T)===0&&(T=v&-v,u=o&-o,T>=u||T===32&&(u&4194048)!==0)?o:v}function Dt(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function nn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(){var a=Ie;return Ie<<=1,(Ie&4194048)===0&&(Ie=256),a}function ja(){var a=Je;return Je<<=1,(Je&62914560)===0&&(Je=4194304),a}function Si(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function Zr(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ea(a,o,u,g,v,T){var $=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var Q=a.entanglements,le=a.expirationTimes,we=a.hiddenUpdates;for(u=$&~u;0<u;){var ke=31-rt(u),Re=1<<ke;Q[ke]=0,le[ke]=-1;var Ce=we[ke];if(Ce!==null)for(we[ke]=null,ke=0;ke<Ce.length;ke++){var Se=Ce[ke];Se!==null&&(Se.lane&=-536870913)}u&=~Re}g!==0&&ad(a,g,0),T!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=T&~($&~o))}function ad(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var g=31-rt(o);a.entangledLanes|=o,a.entanglements[g]=a.entanglements[g]|1073741824|u&4194090}function Ta(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var g=31-rt(u),v=1<<g;v&o|a[g]&o&&(a[g]|=o),u&=~v}}function pl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function To(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function gl(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:ay(a.type))}function ah(a,o){var u=K.p;try{return K.p=a,o()}finally{K.p=u}}var gr=Math.random().toString(36).slice(2),Dn="__reactFiber$"+gr,Jn="__reactProps$"+gr,Ea="__reactContainer$"+gr,yl="__reactEvents$"+gr,Eo="__reactListeners$"+gr,Is="__reactHandles$"+gr,sd="__reactResources$"+gr,Os="__reactMarker$"+gr;function Ao(a){delete a[Dn],delete a[Jn],delete a[yl],delete a[Eo],delete a[Is]}function Aa(a){var o=a[Dn];if(o)return o;for(var u=a.parentNode;u;){if(o=u[Ea]||u[Dn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=Yg(a);a!==null;){if(u=a[Dn])return u;a=Yg(a)}return o}a=u,u=a.parentNode}return null}function Ls(a){if(a=a[Dn]||a[Ea]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function es(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(i(33))}function ka(a){var o=a[sd];return o||(o=a[sd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function $n(a){a[Os]=!0}var od=new Set,Mc={};function ta(a,o){Da(a,o),Da(a+"Capture",o)}function Da(a,o){for(Mc[a]=o,a=0;a<o.length;a++)od.add(o[a])}var Pa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),na={},ia={};function ld(a){return Be.call(ia,a)?!0:Be.call(na,a)?!1:Pa.test(a)?ia[a]=!0:(na[a]=!0,!1)}function ko(a,o,u){if(ld(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function Do(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function Ni(a,o,u,g){if(g===null)a.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+g)}}var ts,xl;function Ra(a){if(ts===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ts=o&&o[1]||"",xl=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ts+a+xl}var vl=!1;function bl(a,o){if(!a||vl)return"";vl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(Se){var Ce=Se}Reflect.construct(a,[],Re)}else{try{Re.call()}catch(Se){Ce=Se}a.call(Re.prototype)}}else{try{throw Error()}catch(Se){Ce=Se}(Re=a())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(Se){if(Se&&Ce&&typeof Se.stack=="string")return[Se.stack,Ce.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),$=T[0],Q=T[1];if($&&Q){var le=$.split(`
`),we=Q.split(`
`);for(v=g=0;g<le.length&&!le[g].includes("DetermineComponentFrameRoot");)g++;for(;v<we.length&&!we[v].includes("DetermineComponentFrameRoot");)v++;if(g===le.length||v===we.length)for(g=le.length-1,v=we.length-1;1<=g&&0<=v&&le[g]!==we[v];)v--;for(;1<=g&&0<=v;g--,v--)if(le[g]!==we[v]){if(g!==1||v!==1)do if(g--,v--,0>v||le[g]!==we[v]){var ke=`
`+le[g].replace(" at new "," at ");return a.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",a.displayName)),ke}while(1<=g&&0<=v);break}}}finally{vl=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?Ra(u):""}function Fs(a){switch(a.tag){case 26:case 27:case 5:return Ra(a.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 15:return bl(a.type,!1);case 11:return bl(a.type.render,!1);case 1:return bl(a.type,!0);case 31:return Ra("Activity");default:return""}}function Ic(a){try{var o="";do o+=Fs(a),a=a.return;while(a);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Ci(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function wl(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Sl(a){var o=wl(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),g=""+a[o];if(!a.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,T=u.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function($){g=""+$,T.call(this,$)}}),Object.defineProperty(a,o,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function($){g=""+$},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Po(a){a._valueTracker||(a._valueTracker=Sl(a))}function Nl(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),g="";return a&&(g=wl(a)?a.checked?"true":"false":a.value),a=g,a!==u?(o.setValue(a),!0):!1}function Ma(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Oc=/[\n"\\]/g;function Ri(a){return a.replace(Oc,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ns(a,o,u,g,v,T,$,Q){a.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?a.type=$:a.removeAttribute("type"),o!=null?$==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Ci(o)):a.value!==""+Ci(o)&&(a.value=""+Ci(o)):$!=="submit"&&$!=="reset"||a.removeAttribute("value"),o!=null?Ia(a,$,Ci(o)):u!=null?Ia(a,$,Ci(u)):g!=null&&a.removeAttribute("value"),v==null&&T!=null&&(a.defaultChecked=!!T),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?a.name=""+Ci(Q):a.removeAttribute("name")}function zs(a,o,u,g,v,T,$,Q){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(a.type=T),o!=null||u!=null){if(!(T!=="submit"&&T!=="reset"||o!=null))return;u=u!=null?""+Ci(u):"",o=o!=null?""+Ci(o):u,Q||o===a.value||(a.value=o),a.defaultValue=o}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=Q?a.checked:!!g,a.defaultChecked=!!g,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(a.name=$)}function Ia(a,o,u){o==="number"&&Ma(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function is(a,o,u,g){if(a=a.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<a.length;u++)v=o.hasOwnProperty("$"+a[u].value),a[u].selected!==v&&(a[u].selected=v),v&&g&&(a[u].defaultSelected=!0)}else{for(u=""+Ci(u),o=null,v=0;v<a.length;v++){if(a[v].value===u){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function $s(a,o,u){if(o!=null&&(o=""+Ci(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+Ci(u):""}function Us(a,o,u,g){if(o==null){if(g!=null){if(u!=null)throw Error(i(92));if(se(g)){if(1<g.length)throw Error(i(93));g=g[0]}u=g}u==null&&(u=""),o=u}u=Ci(o),a.defaultValue=u,g=a.textContent,g===u&&g!==""&&g!==null&&(a.value=g)}function kr(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(a,o,u){var g=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":g?a.setProperty(o,u):typeof u!="number"||u===0||Oa.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function Mo(a,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(a=a.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var v in o)g=o[v],o.hasOwnProperty(v)&&u[v]!==g&&Ro(a,v,g)}else for(var T in o)o.hasOwnProperty(T)&&Ro(a,T,o[T])}function Io(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_l=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gi(a){return _l.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Bs=null;function jl(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Yi=null,Dr=null;function Lc(a){var o=Ls(a);if(o&&(a=o.stateNode)){var u=a[Jn]||null;e:switch(a=o.stateNode,o.type){case"input":if(ns(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ri(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var g=u[o];if(g!==a&&g.form===a.form){var v=g[Jn]||null;if(!v)throw Error(i(90));ns(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)g=u[o],g.form===a.form&&Nl(g)}break e;case"textarea":$s(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&is(a,!!u.multiple,o,!1)}}}var qs=!1;function Fc(a,o,u){if(qs)return a(o,u);qs=!0;try{var g=a(o);return g}finally{if(qs=!1,(Yi!==null||Dr!==null)&&(sf(),Yi&&(o=Yi,a=Dr,Dr=Yi=null,Lc(o),a)))for(o=0;o<a.length;o++)Lc(a[o])}}function rs(a,o){var u=a.stateNode;if(u===null)return null;var g=u[Jn]||null;if(g===null)return null;u=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(Wi)try{var La={};Object.defineProperty(La,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{Vs=!1}var Fa=null,Tl=null,El=null;function Al(){if(El)return El;var a,o=Tl,u=o.length,g,v="value"in Fa?Fa.value:Fa.textContent,T=v.length;for(a=0;a<u&&o[a]===v[a];a++);var $=u-a;for(g=1;g<=$&&o[u-g]===v[T-g];g++);return El=v.slice(a,1<g?1-g:void 0)}function sn(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function rn(){return!0}function bt(){return!1}function ui(a){function o(u,g,v,T,$){this._reactName=u,this._targetInst=v,this.type=g,this.nativeEvent=T,this.target=$,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(u=a[Q],this[Q]=u?u(T):T[Q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?rn:bt,this.isPropagationStopped=bt,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),o}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=ui(Pr),ra=y({},Pr,{view:0,detail:0}),Oo=ui(ra),kl,Dl,vn,as=y({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==vn&&(vn&&a.type==="mousemove"?(kl=a.screenX-vn.screenX,Dl=a.screenY-vn.screenY):Dl=kl=0,vn=a),kl)},movementY:function(a){return"movementY"in a?a.movementY:Dl}}),Rr=ui(as),Lo=y({},as,{dataTransfer:0}),ss=ui(Lo),Mi=y({},ra,{relatedTarget:0}),aa=ui(Mi),cd=y({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pl=ui(cd),os=y({},Pr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ls=ui(os),Gs=y({},Pr,{data:0}),_i=ui(Gs),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=ud[a])?!!o[a]:!1}function Mr(){return $c}var Rl=y({},ra,{key:function(a){if(a.key){var o=zc[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=sn(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ji[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(a){return a.type==="keypress"?sn(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?sn(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Uc=ui(Rl),_n=y({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sa=ui(_n),Ml=y({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),sh=ui(Ml),Bc=y({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oh=ui(Bc),Fo=y({},as,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),lh=ui(Fo),oa=y({},Pr,{newState:0,oldState:0}),yr=ui(oa),la=[9,13,27,32],xr=Wi&&"CompositionEvent"in window,za=null;Wi&&"documentMode"in document&&(za=document.documentMode);var Il=Wi&&"TextEvent"in window&&!za,zo=Wi&&(!xr||za&&8<za&&11>=za),Ys=" ",Ol=!1;function dd(a,o){switch(a){case"keyup":return la.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ll(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ca=!1;function ch(a,o){switch(a){case"compositionend":return Ll(o);case"keypress":return o.which!==32?null:(Ol=!0,Ys);case"textInput":return a=o.data,a===Ys&&Ol?null:a;default:return null}}function fd(a,o){if(ca)return a==="compositionend"||!xr&&dd(a,o)?(a=Al(),El=Tl=Fa=null,ca=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zo&&o.locale!=="ko"?null:o.data;default:return null}}var Ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fl(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Ii[a.type]:o==="textarea"}function Ws(a,o,u,g){Yi?Dr?Dr.push(g):Dr=[g]:Yi=g,o=hf(o,"onChange"),0<o.length&&(u=new Hs("onChange","change",null,u,g),a.push({event:u,listeners:o}))}var Js=null,vr=null;function hd(a){zg(a,0)}function Oi(a){var o=es(a);if(Nl(o))return a}function md(a,o){if(a==="change")return o}var pd=!1;if(Wi){var qc;if(Wi){var Ir="oninput"in document;if(!Ir){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),Ir=typeof gd.oninput=="function"}qc=Ir}else qc=!1;pd=qc&&(!document.documentMode||9<document.documentMode)}function yd(){Js&&(Js.detachEvent("onpropertychange",zl),vr=Js=null)}function zl(a){if(a.propertyName==="value"&&Oi(vr)){var o=[];Ws(o,vr,a,jl(a)),Fc(hd,o)}}function xd(a,o,u){a==="focusin"?(yd(),Js=o,vr=u,Js.attachEvent("onpropertychange",zl)):a==="focusout"&&yd()}function di(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Oi(vr)}function $l(a,o){if(a==="click")return Oi(o)}function Ul(a,o){if(a==="input"||a==="change")return Oi(o)}function uh(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Li=typeof Object.is=="function"?Object.is:uh;function Or(a,o){if(Li(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),g=Object.keys(o);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var v=u[g];if(!Be.call(o,v)||!Li(a[v],o[v]))return!1}return!0}function Qi(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Vc(a,o){var u=Qi(a);a=0;for(var g;u;){if(u.nodeType===3){if(g=a+u.textContent.length,a<=o&&g>=o)return{node:u,offset:o-a};a=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Qi(u)}}function vd(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?vd(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function bd(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Ma(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Ma(a.document)}return o}function Hc(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var dh=Wi&&"documentMode"in document&&11>=document.documentMode,cs=null,ua=null,O=null,G=!1;function W(a,o,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;G||cs==null||cs!==Ma(g)||(g=cs,"selectionStart"in g&&Hc(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),O&&Or(O,g)||(O=g,g=hf(ua,"onSelect"),0<g.length&&(o=new Hs("onSelect","select",null,o,u),a.push({event:o,listeners:g}),o.target=cs)))}function ce(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var _e={animationend:ce("Animation","AnimationEnd"),animationiteration:ce("Animation","AnimationIteration"),animationstart:ce("Animation","AnimationStart"),transitionrun:ce("Transition","TransitionRun"),transitionstart:ce("Transition","TransitionStart"),transitioncancel:ce("Transition","TransitionCancel"),transitionend:ce("Transition","TransitionEnd")},Oe={},it={};Wi&&(it=document.createElement("div").style,"AnimationEvent"in window||(delete _e.animationend.animation,delete _e.animationiteration.animation,delete _e.animationstart.animation),"TransitionEvent"in window||delete _e.transitionend.transition);function Fe(a){if(Oe[a])return Oe[a];if(!_e[a])return a;var o=_e[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in it)return Oe[a]=o[u];return a}var Un=Fe("animationend"),Ye=Fe("animationiteration"),Ke=Fe("animationstart"),Ue=Fe("transitionrun"),dt=Fe("transitionstart"),ct=Fe("transitioncancel"),at=Fe("transitionend"),wt=new Map,mt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mt.push("scrollEnd");function Pt(a,o){wt.set(a,o),ta(o,[a])}var Qt=new WeakMap;function _t(a,o){if(typeof a=="object"&&a!==null){var u=Qt.get(a);return u!==void 0?u:(o={value:a,source:o,stack:Ic(o)},Qt.set(a,o),o)}return{value:a,source:o,stack:Ic(o)}}var Rt=[],ln=0,ji=0;function Kn(){for(var a=ln,o=ji=ln=0;o<a;){var u=Rt[o];Rt[o++]=null;var g=Rt[o];Rt[o++]=null;var v=Rt[o];Rt[o++]=null;var T=Rt[o];if(Rt[o++]=null,g!==null&&v!==null){var $=g.pending;$===null?v.next=v:(v.next=$.next,$.next=v),g.pending=v}T!==0&&da(u,v,T)}}function Ti(a,o,u,g){Rt[ln++]=a,Rt[ln++]=o,Rt[ln++]=u,Rt[ln++]=g,ji|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function Ki(a,o,u,g){return Ti(a,o,u,g),Gc(a)}function $a(a,o){return Ti(a,null,null,o),Gc(a)}function da(a,o,u){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u);for(var v=!1,T=a.return;T!==null;)T.childLanes|=u,g=T.alternate,g!==null&&(g.childLanes|=u),T.tag===22&&(a=T.stateNode,a===null||a._visibility&1||(v=!0)),a=T,T=T.return;return a.tag===3?(T=a.stateNode,v&&o!==null&&(v=31-rt(u),a=T.hiddenUpdates,g=a[v],g===null?a[v]=[o]:g.push(o),o.lane=u|536870912),T):null}function Gc(a){if(50<cc)throw cc=0,am=null,Error(i(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var $o={};function wd(a,o,u,g){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(a,o,u,g){return new wd(a,o,u,g)}function Uo(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Fi(a,o){var u=a.alternate;return u===null?(u=Xi(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function Yc(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Sd(a,o,u,g,v,T){var $=0;if(g=a,typeof a=="function")Uo(a)&&($=1);else if(typeof a=="string")$=xv(a,u,ne.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case V:return a=Xi(31,u,o,v),a.elementType=V,a.lanes=T,a;case j:return Bo(u.children,v,T,o);case E:$=8,v|=24;break;case A:return a=Xi(12,u,o,v|2),a.elementType=A,a.lanes=T,a;case F:return a=Xi(13,u,o,v),a.elementType=F,a.lanes=T,a;case q:return a=Xi(19,u,o,v),a.elementType=q,a.lanes=T,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:case R:$=10;break e;case P:$=9;break e;case Y:$=11;break e;case z:$=14;break e;case L:$=16,g=null;break e}$=29,u=Error(i(130,a===null?"null":typeof a,"")),g=null}return o=Xi($,u,o,v),o.elementType=a,o.type=g,o.lanes=T,o}function Bo(a,o,u,g){return a=Xi(7,a,g,o),a.lanes=u,a}function fh(a,o,u){return a=Xi(6,a,null,o),a.lanes=u,a}function Bl(a,o,u){return o=Xi(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var us=[],Qs=0,Nd=null,Wc=0,Lr=[],Fr=0,En=null,Pn=1,ds="";function qo(a,o){us[Qs++]=Wc,us[Qs++]=Nd,Nd=a,Wc=o}function hh(a,o,u){Lr[Fr++]=Pn,Lr[Fr++]=ds,Lr[Fr++]=En,En=a;var g=Pn;a=ds;var v=32-rt(g)-1;g&=~(1<<v),u+=1;var T=32-rt(o)+v;if(30<T){var $=v-v%5;T=(g&(1<<$)-1).toString(32),g>>=$,v-=$,Pn=1<<32-rt(o)+v|u<<v|g,ds=T+a}else Pn=1<<T|u<<v|g,ds=a}function mh(a){a.return!==null&&(qo(a,1),hh(a,1,0))}function Jc(a){for(;a===Nd;)Nd=us[--Qs],us[Qs]=null,Wc=us[--Qs],us[Qs]=null;for(;a===En;)En=Lr[--Fr],Lr[Fr]=null,ds=Lr[--Fr],Lr[Fr]=null,Pn=Lr[--Fr],Lr[Fr]=null}var ti=null,Rn=null,Ht=!1,fa=null,Zi=!1,ql=Error(i(519));function zr(a){var o=Error(i(418,""));throw Ks(_t(o,a)),ql}function vp(a){var o=a.stateNode,u=a.type,g=a.memoizedProps;switch(o[Dn]=a,o[Jn]=g,u){case"dialog":Vt("cancel",o),Vt("close",o);break;case"iframe":case"object":case"embed":Vt("load",o);break;case"video":case"audio":for(u=0;u<Lu.length;u++)Vt(Lu[u],o);break;case"source":Vt("error",o);break;case"img":case"image":case"link":Vt("error",o),Vt("load",o);break;case"details":Vt("toggle",o);break;case"input":Vt("invalid",o),zs(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Po(o);break;case"select":Vt("invalid",o);break;case"textarea":Vt("invalid",o),Us(o,g.value,g.defaultValue,g.children),Po(o)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||g.suppressHydrationWarning===!0||Bg(o.textContent,u)?(g.popover!=null&&(Vt("beforetoggle",o),Vt("toggle",o)),g.onScroll!=null&&Vt("scroll",o),g.onScrollEnd!=null&&Vt("scrollend",o),g.onClick!=null&&(o.onclick=mf),o=!0):o=!1,o||zr(a)}function bp(a){for(ti=a.return;ti;)switch(ti.tag){case 5:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:ti=ti.return}}function Qc(a){if(a!==ti)return!1;if(!Ht)return bp(a),Ht=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||gf(a.type,a.memoizedProps)),u=!u),u&&Rn&&zr(a),bp(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(o===0){Rn=xa(a.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;a=a.nextSibling}Rn=null}}else o===27?(o=Rn,Hr(a.type)?(a=vm,vm=null,Rn=a):Rn=o):Rn=ti?xa(a.stateNode.nextSibling):null;return!0}function Kc(){Rn=ti=null,Ht=!1}function wp(){var a=fa;return a!==null&&(or===null?or=a:or.push.apply(or,a),fa=null),a}function Ks(a){fa===null?fa=[a]:fa.push(a)}var Vo=de(null),Xs=null,J=null;function br(a,o,u){H(Vo,o._currentValue),o._currentValue=u}function $r(a){a._currentValue=Vo.current,ae(Vo)}function er(a,o,u){for(;a!==null;){var g=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),a===u)break;a=a.return}}function $t(a,o,u,g){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var T=v.dependencies;if(T!==null){var $=v.child;T=T.firstContext;e:for(;T!==null;){var Q=T;T=v;for(var le=0;le<o.length;le++)if(Q.context===o[le]){T.lanes|=u,Q=T.alternate,Q!==null&&(Q.lanes|=u),er(T.return,u,a),g||($=null);break e}T=Q.next}}else if(v.tag===18){if($=v.return,$===null)throw Error(i(341));$.lanes|=u,T=$.alternate,T!==null&&(T.lanes|=u),er($,u,a),$=null}else $=v.child;if($!==null)$.return=v;else for($=v;$!==null;){if($===a){$=null;break}if(v=$.sibling,v!==null){v.return=$.return,$=v;break}$=$.return}v=$}}function Xc(a,o,u,g){a=null;for(var v=o,T=!1;v!==null;){if(!T){if((v.flags&524288)!==0)T=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var $=v.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var Q=v.type;Li(v.pendingProps.value,$.value)||(a!==null?a.push(Q):a=[Q])}}else if(v===je.current){if($=v.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(yc):a=[yc])}v=v.return}a!==null&&$t(o,a,u,g),o.flags|=262144}function Cd(a){for(a=a.firstContext;a!==null;){if(!Li(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ho(a){Xs=a,J=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Bn(a){return Sp(Xs,a)}function _d(a,o){return Xs===null&&Ho(a),Sp(a,o)}function Sp(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},J===null){if(a===null)throw Error(i(308));J=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else J=J.next=o;return u}var Bx=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,g){a.push(g)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},qx=t.unstable_scheduleCallback,Vx=t.unstable_NormalPriority,bn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ph(){return{controller:new Bx,data:new Map,refCount:0}}function Zc(a){a.refCount--,a.refCount===0&&qx(Vx,function(){a.controller.abort()})}var eu=null,gh=0,Vl=0,tr=null;function Hx(a,o){if(eu===null){var u=eu=[];gh=0,Vl=ff(),tr={status:"pending",value:void 0,then:function(g){u.push(g)}}}return gh++,o.then(Np,Np),o}function Np(){if(--gh===0&&eu!==null){tr!==null&&(tr.status="fulfilled");var a=eu;eu=null,Vl=0,tr=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function Gx(a,o){var u=[],g={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return a.then(function(){g.status="fulfilled",g.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(g.status="rejected",g.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),g}var Cp=X.S;X.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Hx(a,o),Cp!==null&&Cp(a,o)};var Go=de(null);function fs(){var a=Go.current;return a!==null?a:jn.pooledCache}function jd(a,o){o===null?H(Go,Go.current):H(Go,o.pool)}function _p(){var a=fs();return a===null?null:{parent:bn._currentValue,pool:a}}var zi=Error(i(460)),jp=Error(i(474)),Td=Error(i(542)),yh={then:function(){}};function Tp(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ed(){}function xh(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(Ed,Ed),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ap(a),a;default:if(typeof o.status=="string")o.then(Ed,Ed);else{if(a=jn,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=o,a.status="pending",a.then(function(g){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=g}},function(g){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ap(a),a}throw Hl=o,zi}}var Hl=null;function Ep(){if(Hl===null)throw Error(i(459));var a=Hl;return Hl=null,a}function Ap(a){if(a===zi||a===Td)throw Error(i(483))}var Ua=!1;function Yo(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gl(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Zs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function hs(a,o,u){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(dn&2)!==0){var v=g.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),g.pending=o,o=Gc(a),da(a,null,u),o}return Ti(a,g,o,u),Gc(a)}function tu(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var g=o.lanes;g&=a.pendingLanes,u|=g,o.lanes=u,Ta(a,u)}}function ha(a,o){var u=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var v=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var $={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};T===null?v=T=$:T=T.next=$,u=u.next}while(u!==null);T===null?v=T=o:T=T.next=o}else v=T=o;u={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var nu=!1;function ma(){if(nu){var a=tr;if(a!==null)throw a}}function Ei(a,o,u,g){nu=!1;var v=a.updateQueue;Ua=!1;var T=v.firstBaseUpdate,$=v.lastBaseUpdate,Q=v.shared.pending;if(Q!==null){v.shared.pending=null;var le=Q,we=le.next;le.next=null,$===null?T=we:$.next=we,$=le;var ke=a.alternate;ke!==null&&(ke=ke.updateQueue,Q=ke.lastBaseUpdate,Q!==$&&(Q===null?ke.firstBaseUpdate=we:Q.next=we,ke.lastBaseUpdate=le))}if(T!==null){var Re=v.baseState;$=0,ke=we=le=null,Q=T;do{var Ce=Q.lane&-536870913,Se=Ce!==Q.lane;if(Se?(Kt&Ce)===Ce:(g&Ce)===Ce){Ce!==0&&Ce===Vl&&(nu=!0),ke!==null&&(ke=ke.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var gt=a,pt=Q;Ce=o;var gn=u;switch(pt.tag){case 1:if(gt=pt.payload,typeof gt=="function"){Re=gt.call(gn,Re,Ce);break e}Re=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=pt.payload,Ce=typeof gt=="function"?gt.call(gn,Re,Ce):gt,Ce==null)break e;Re=y({},Re,Ce);break e;case 2:Ua=!0}}Ce=Q.callback,Ce!==null&&(a.flags|=64,Se&&(a.flags|=8192),Se=v.callbacks,Se===null?v.callbacks=[Ce]:Se.push(Ce))}else Se={lane:Ce,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ke===null?(we=ke=Se,le=Re):ke=ke.next=Se,$|=Ce;if(Q=Q.next,Q===null){if(Q=v.shared.pending,Q===null)break;Se=Q,Q=Se.next,Se.next=null,v.lastBaseUpdate=Se,v.shared.pending=null}}while(!0);ke===null&&(le=Re),v.baseState=le,v.firstBaseUpdate=we,v.lastBaseUpdate=ke,T===null&&(v.shared.lanes=0),lo|=$,a.lanes=$,a.memoizedState=Re}}function kp(a,o){if(typeof a!="function")throw Error(i(191,a));a.call(o)}function vh(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)kp(u[a],o)}var Wo=de(null),eo=de(0);function ms(a,o){a=Ns,H(eo,a),H(Wo,o),Ns=a|o.baseLanes}function Ad(){H(eo,Ns),H(Wo,Wo.current)}function bh(){Ns=eo.current,ae(Wo),ae(eo)}var pa=0,Lt=null,un=null,Gt=null,Yl=!1,Jo=!1,Ai=!1,Wl=0,to=0,Ur=null,Dp=0;function Yt(){throw Error(i(321))}function iu(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!Li(a[u],o[u]))return!1;return!0}function wh(a,o,u,g,v,T){return pa=T,Lt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=a===null||a.memoizedState===null?Vp:zh,Ai=!1,T=u(g,v),Ai=!1,Jo&&(T=Rp(o,u,g,v)),Pp(a),T}function Pp(a){X.H=mu;var o=un!==null&&un.next!==null;if(pa=0,Gt=un=Lt=null,Yl=!1,to=0,Ur=null,o)throw Error(i(300));a===null||fi||(a=a.dependencies,a!==null&&Cd(a)&&(fi=!0))}function Rp(a,o,u,g){Lt=a;var v=0;do{if(Jo&&(Ur=null),to=0,Jo=!1,25<=v)throw Error(i(301));if(v+=1,Gt=un=null,a.updateQueue!=null){var T=a.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}X.H=Hp,T=o(u,g)}while(Jo);return T}function Sh(){var a=X.H,o=a.useState()[0];return o=typeof o.then=="function"?ru(o):o,a=a.useState()[0],(un!==null?un.memoizedState:null)!==a&&(Lt.flags|=1024),o}function Nh(){var a=Wl!==0;return Wl=0,a}function Qo(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function kd(a){if(Yl){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Yl=!1}pa=0,Gt=un=Lt=null,Jo=!1,to=Wl=0,Ur=null}function nr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Lt.memoizedState=Gt=a:Gt=Gt.next=a,Gt}function Xn(){if(un===null){var a=Lt.alternate;a=a!==null?a.memoizedState:null}else a=un.next;var o=Gt===null?Lt.memoizedState:Gt.next;if(o!==null)Gt=o,un=a;else{if(a===null)throw Lt.alternate===null?Error(i(467)):Error(i(310));un=a,a={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},Gt===null?Lt.memoizedState=Gt=a:Gt=Gt.next=a}return Gt}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(a){var o=to;return to+=1,Ur===null&&(Ur=[]),a=xh(Ur,a,o),o=Lt,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?Vp:zh),a}function Dd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ru(a);if(a.$$typeof===R)return Bn(a)}throw Error(i(438,String(a)))}function au(a){var o=null,u=Lt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var g=Lt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Ko(),Lt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),g=0;g<a;g++)u[g]=M;return o.index++,u}function Ba(a,o){return typeof o=="function"?o(a):o}function Pd(a){var o=Xn();return Ch(o,un,a)}function Ch(a,o,u){var g=a.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var v=a.baseQueue,T=g.pending;if(T!==null){if(v!==null){var $=v.next;v.next=T.next,T.next=$}o.baseQueue=v=T,g.pending=null}if(T=a.baseState,v===null)a.memoizedState=T;else{o=v.next;var Q=$=null,le=null,we=o,ke=!1;do{var Re=we.lane&-536870913;if(Re!==we.lane?(Kt&Re)===Re:(pa&Re)===Re){var Ce=we.revertLane;if(Ce===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Re===Vl&&(ke=!0);else if((pa&Ce)===Ce){we=we.next,Ce===Vl&&(ke=!0);continue}else Re={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},le===null?(Q=le=Re,$=T):le=le.next=Re,Lt.lanes|=Ce,lo|=Ce;Re=we.action,Ai&&u(T,Re),T=we.hasEagerState?we.eagerState:u(T,Re)}else Ce={lane:Re,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},le===null?(Q=le=Ce,$=T):le=le.next=Ce,Lt.lanes|=Re,lo|=Re;we=we.next}while(we!==null&&we!==o);if(le===null?$=T:le.next=Q,!Li(T,a.memoizedState)&&(fi=!0,ke&&(u=tr,u!==null)))throw u;a.memoizedState=T,a.baseState=$,a.baseQueue=le,g.lastRenderedState=T}return v===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function _h(a){var o=Xn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var g=u.dispatch,v=u.pending,T=o.memoizedState;if(v!==null){u.pending=null;var $=v=v.next;do T=a(T,$.action),$=$.next;while($!==v);Li(T,o.memoizedState)||(fi=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),u.lastRenderedState=T}return[T,g]}function jh(a,o,u){var g=Lt,v=Xn(),T=Ht;if(T){if(u===void 0)throw Error(i(407));u=u()}else u=o();var $=!Li((un||v).memoizedState,u);$&&(v.memoizedState=u,fi=!0),v=v.queue;var Q=Md.bind(null,g,v,a);if(lu(2048,8,Q,[a]),v.getSnapshot!==o||$||Gt!==null&&Gt.memoizedState.tag&1){if(g.flags|=2048,Jl(9,zd(),Mp.bind(null,g,v,u,o),null),jn===null)throw Error(i(349));T||(pa&124)!==0||Rd(g,o,u)}return u}function Rd(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Lt.updateQueue,o===null?(o=Ko(),Lt.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function Mp(a,o,u,g){o.value=u,o.getSnapshot=g,Th(o)&&Eh(a)}function Md(a,o,u){return u(function(){Th(o)&&Eh(a)})}function Th(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!Li(a,u)}catch{return!0}}function Eh(a){var o=$a(a,2);o!==null&&_r(o,a,2)}function Id(a){var o=nr();if(typeof a=="function"){var u=a;if(a=u(),Ai){nt(!0);try{u()}finally{nt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:a},o}function su(a,o,u,g){return a.baseState=u,Ch(a,un,typeof g=="function"?g:Ba)}function Yx(a,o,u,g,v){if(qd(a))throw Error(i(485));if(a=o.action,a!==null){var T={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){T.listeners.push($)}};X.T!==null?u(!0):T.isTransition=!1,g(T),u=o.pending,u===null?(T.next=o.pending=T,Ah(o,T)):(T.next=u.next,o.pending=u.next=T)}}function Ah(a,o){var u=o.action,g=o.payload,v=a.state;if(o.isTransition){var T=X.T,$={};X.T=$;try{var Q=u(v,g),le=X.S;le!==null&&le($,Q),kh(a,o,Q)}catch(we){Od(a,o,we)}finally{X.T=T}}else try{T=u(v,g),kh(a,o,T)}catch(we){Od(a,o,we)}}function kh(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){Ip(a,o,g)},function(g){return Od(a,o,g)}):Ip(a,o,u)}function Ip(a,o,u){o.status="fulfilled",o.value=u,Op(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,Ah(a,u)))}function Od(a,o,u){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=u,Op(o),o=o.next;while(o!==g)}a.action=null}function Op(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Ld(a,o){return o}function Dh(a,o){if(Ht){var u=jn.formState;if(u!==null){e:{var g=Lt;if(Ht){if(Rn){t:{for(var v=Rn,T=Zi;v.nodeType!==8;){if(!T){v=null;break t}if(v=xa(v.nextSibling),v===null){v=null;break t}}T=v.data,v=T==="F!"||T==="F"?v:null}if(v){Rn=xa(v.nextSibling),g=v.data==="F!";break e}}zr(g)}g=!1}g&&(o=u[0])}}return u=nr(),u.memoizedState=u.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:o},u.queue=g,u=Oh.bind(null,Lt,g),g.dispatch=u,g=Id(!1),T=Lh.bind(null,Lt,!1,g.queue),g=nr(),v={state:o,dispatch:null,action:a,pending:null},g.queue=v,u=Yx.bind(null,Lt,v,T,u),v.dispatch=u,g.memoizedState=a,[o,u,!1]}function Fd(a){var o=Xn();return Lp(o,un,a)}function Lp(a,o,u){if(o=Ch(a,o,Ld)[0],a=Pd(Ba)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=ru(o)}catch($){throw $===zi?Td:$}else g=o;o=Xn();var v=o.queue,T=v.dispatch;return u!==o.memoizedState&&(Lt.flags|=2048,Jl(9,zd(),Ph.bind(null,v,u),null)),[g,T,a]}function Ph(a,o){a.action=o}function Mt(a){var o=Xn(),u=un;if(u!==null)return Lp(o,u,a);Xn(),o=o.memoizedState,u=Xn();var g=u.queue.dispatch;return u.memoizedState=a,[o,g,!1]}function Jl(a,o,u,g){return a={tag:a,create:u,deps:g,inst:o,next:null},o=Lt.updateQueue,o===null&&(o=Ko(),Lt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(g=u.next,u.next=a,a.next=g,o.lastEffect=a),a}function zd(){return{destroy:void 0,resource:void 0}}function Ql(){return Xn().memoizedState}function ou(a,o,u,g){var v=nr();g=g===void 0?null:g,Lt.flags|=a,v.memoizedState=Jl(1|o,zd(),u,g)}function lu(a,o,u,g){var v=Xn();g=g===void 0?null:g;var T=v.memoizedState.inst;un!==null&&g!==null&&iu(g,un.memoizedState.deps)?v.memoizedState=Jl(o,T,u,g):(Lt.flags|=a,v.memoizedState=Jl(1|o,T,u,g))}function Fp(a,o){ou(8390656,8,a,o)}function wr(a,o){lu(2048,8,a,o)}function zp(a,o){return lu(4,2,a,o)}function cu(a,o){return lu(4,4,a,o)}function $d(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Rh(a,o,u){u=u!=null?u.concat([a]):null,lu(4,4,$d.bind(null,o,a),u)}function Ud(){}function ir(a,o){var u=Xn();o=o===void 0?null:o;var g=u.memoizedState;return o!==null&&iu(o,g[1])?g[0]:(u.memoizedState=[a,o],a)}function ps(a,o){var u=Xn();o=o===void 0?null:o;var g=u.memoizedState;if(o!==null&&iu(o,g[1]))return g[0];if(g=a(),Ai){nt(!0);try{a()}finally{nt(!1)}}return u.memoizedState=[g,o],g}function uu(a,o,u){return u===void 0||(pa&1073741824)!==0?a.memoizedState=o:(a.memoizedState=u,a=xg(),Lt.lanes|=a,lo|=a,u)}function Mh(a,o,u,g){return Li(u,o)?u:Wo.current!==null?(a=uu(a,u,g),Li(a,o)||(fi=!0),a):(pa&42)===0?(fi=!0,a.memoizedState=u):(a=xg(),Lt.lanes|=a,lo|=a,o)}function du(a,o,u,g,v){var T=K.p;K.p=T!==0&&8>T?T:8;var $=X.T,Q={};X.T=Q,Lh(a,!1,o,u);try{var le=v(),we=X.S;if(we!==null&&we(Q,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var ke=Gx(le,g);Xo(a,o,ke,Di(a))}else Xo(a,o,g,Di(a))}catch(Re){Xo(a,o,{then:function(){},status:"rejected",reason:Re},Di())}finally{K.p=T,X.T=$}}function $p(){}function fu(a,o,u,g){if(a.tag!==5)throw Error(i(476));var v=Ih(a).queue;du(a,v,o,re,u===null?$p:function(){return Bd(a),u(g)})}function Ih(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:re},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Bd(a){var o=Ih(a).next.queue;Xo(a,o,{},Di())}function hu(){return Bn(yc)}function gs(){return Xn().memoizedState}function Up(){return Xn().memoizedState}function no(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=Di();a=Zs(u);var g=hs(o,a,u);g!==null&&(_r(g,o,u),tu(g,o,u)),o={cache:ph()},a.payload=o;return}o=o.return}}function Bp(a,o,u){var g=Di();u={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},qd(a)?qp(o,u):(u=Ki(a,o,u,g),u!==null&&(_r(u,a,g),Fh(u,o,g)))}function Oh(a,o,u){var g=Di();Xo(a,o,u,g)}function Xo(a,o,u,g){var v={lane:g,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(qd(a))qp(o,v);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var $=o.lastRenderedState,Q=T($,u);if(v.hasEagerState=!0,v.eagerState=Q,Li(Q,$))return Ti(a,o,v,0),jn===null&&Kn(),!1}catch{}finally{}if(u=Ki(a,o,v,g),u!==null)return _r(u,a,g),Fh(u,o,g),!0}return!1}function Lh(a,o,u,g){if(g={lane:2,revertLane:ff(),action:g,hasEagerState:!1,eagerState:null,next:null},qd(a)){if(o)throw Error(i(479))}else o=Ki(a,u,g,2),o!==null&&_r(o,a,2)}function qd(a){var o=a.alternate;return a===Lt||o!==null&&o===Lt}function qp(a,o){Jo=Yl=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function Fh(a,o,u){if((u&4194048)!==0){var g=o.lanes;g&=a.pendingLanes,u|=g,o.lanes=u,Ta(a,u)}}var mu={readContext:Bn,use:Dd,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},Vp={readContext:Bn,use:Dd,useCallback:function(a,o){return nr().memoizedState=[a,o===void 0?null:o],a},useContext:Bn,useEffect:Fp,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,ou(4194308,4,$d.bind(null,o,a),u)},useLayoutEffect:function(a,o){return ou(4194308,4,a,o)},useInsertionEffect:function(a,o){ou(4,2,a,o)},useMemo:function(a,o){var u=nr();o=o===void 0?null:o;var g=a();if(Ai){nt(!0);try{a()}finally{nt(!1)}}return u.memoizedState=[g,o],g},useReducer:function(a,o,u){var g=nr();if(u!==void 0){var v=u(o);if(Ai){nt(!0);try{u(o)}finally{nt(!1)}}}else v=o;return g.memoizedState=g.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},g.queue=a,a=a.dispatch=Bp.bind(null,Lt,a),[g.memoizedState,a]},useRef:function(a){var o=nr();return a={current:a},o.memoizedState=a},useState:function(a){a=Id(a);var o=a.queue,u=Oh.bind(null,Lt,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:Ud,useDeferredValue:function(a,o){var u=nr();return uu(u,a,o)},useTransition:function(){var a=Id(!1);return a=du.bind(null,Lt,a.queue,!0,!1),nr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var g=Lt,v=nr();if(Ht){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),jn===null)throw Error(i(349));(Kt&124)!==0||Rd(g,o,u)}v.memoizedState=u;var T={value:u,getSnapshot:o};return v.queue=T,Fp(Md.bind(null,g,T,a),[a]),g.flags|=2048,Jl(9,zd(),Mp.bind(null,g,T,u,o),null),u},useId:function(){var a=nr(),o=jn.identifierPrefix;if(Ht){var u=ds,g=Pn;u=(g&~(1<<32-rt(g)-1)).toString(32)+u,o="«"+o+"R"+u,u=Wl++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=Dp++,o="«"+o+"r"+u.toString(32)+"»";return a.memoizedState=o},useHostTransitionStatus:hu,useFormState:Dh,useActionState:Dh,useOptimistic:function(a){var o=nr();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Lh.bind(null,Lt,!0,u),u.dispatch=o,[a,o]},useMemoCache:au,useCacheRefresh:function(){return nr().memoizedState=no.bind(null,Lt)}},zh={readContext:Bn,use:Dd,useCallback:ir,useContext:Bn,useEffect:wr,useImperativeHandle:Rh,useInsertionEffect:zp,useLayoutEffect:cu,useMemo:ps,useReducer:Pd,useRef:Ql,useState:function(){return Pd(Ba)},useDebugValue:Ud,useDeferredValue:function(a,o){var u=Xn();return Mh(u,un.memoizedState,a,o)},useTransition:function(){var a=Pd(Ba)[0],o=Xn().memoizedState;return[typeof a=="boolean"?a:ru(a),o]},useSyncExternalStore:jh,useId:gs,useHostTransitionStatus:hu,useFormState:Fd,useActionState:Fd,useOptimistic:function(a,o){var u=Xn();return su(u,un,a,o)},useMemoCache:au,useCacheRefresh:Up},Hp={readContext:Bn,use:Dd,useCallback:ir,useContext:Bn,useEffect:wr,useImperativeHandle:Rh,useInsertionEffect:zp,useLayoutEffect:cu,useMemo:ps,useReducer:_h,useRef:Ql,useState:function(){return _h(Ba)},useDebugValue:Ud,useDeferredValue:function(a,o){var u=Xn();return un===null?uu(u,a,o):Mh(u,un.memoizedState,a,o)},useTransition:function(){var a=_h(Ba)[0],o=Xn().memoizedState;return[typeof a=="boolean"?a:ru(a),o]},useSyncExternalStore:jh,useId:gs,useHostTransitionStatus:hu,useFormState:Mt,useActionState:Mt,useOptimistic:function(a,o){var u=Xn();return un!==null?su(u,un,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:au,useCacheRefresh:Up},ni=null,rr=0;function Vd(a){var o=rr;return rr+=1,ni===null&&(ni=[]),xh(ni,a,o)}function pu(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Zo(a,o){throw o.$$typeof===x?Error(i(525)):(a=Object.prototype.toString.call(o),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function el(a){var o=a._init;return o(a._payload)}function $h(a){function o(ye,he){if(a){var be=ye.deletions;be===null?(ye.deletions=[he],ye.flags|=16):be.push(he)}}function u(ye,he){if(!a)return null;for(;he!==null;)o(ye,he),he=he.sibling;return null}function g(ye){for(var he=new Map;ye!==null;)ye.key!==null?he.set(ye.key,ye):he.set(ye.index,ye),ye=ye.sibling;return he}function v(ye,he){return ye=Fi(ye,he),ye.index=0,ye.sibling=null,ye}function T(ye,he,be){return ye.index=be,a?(be=ye.alternate,be!==null?(be=be.index,be<he?(ye.flags|=67108866,he):be):(ye.flags|=67108866,he)):(ye.flags|=1048576,he)}function $(ye){return a&&ye.alternate===null&&(ye.flags|=67108866),ye}function Q(ye,he,be,De){return he===null||he.tag!==6?(he=fh(be,ye.mode,De),he.return=ye,he):(he=v(he,be),he.return=ye,he)}function le(ye,he,be,De){var et=be.type;return et===j?ke(ye,he,be.props.children,De,be.key):he!==null&&(he.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===L&&el(et)===he.type)?(he=v(he,be.props),pu(he,be),he.return=ye,he):(he=Sd(be.type,be.key,be.props,null,ye.mode,De),pu(he,be),he.return=ye,he)}function we(ye,he,be,De){return he===null||he.tag!==4||he.stateNode.containerInfo!==be.containerInfo||he.stateNode.implementation!==be.implementation?(he=Bl(be,ye.mode,De),he.return=ye,he):(he=v(he,be.children||[]),he.return=ye,he)}function ke(ye,he,be,De,et){return he===null||he.tag!==7?(he=Bo(be,ye.mode,De,et),he.return=ye,he):(he=v(he,be),he.return=ye,he)}function Re(ye,he,be){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=fh(""+he,ye.mode,be),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case S:return be=Sd(he.type,he.key,he.props,null,ye.mode,be),pu(be,he),be.return=ye,be;case w:return he=Bl(he,ye.mode,be),he.return=ye,he;case L:var De=he._init;return he=De(he._payload),Re(ye,he,be)}if(se(he)||ee(he))return he=Bo(he,ye.mode,be,null),he.return=ye,he;if(typeof he.then=="function")return Re(ye,Vd(he),be);if(he.$$typeof===R)return Re(ye,_d(ye,he),be);Zo(ye,he)}return null}function Ce(ye,he,be,De){var et=he!==null?he.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return et!==null?null:Q(ye,he,""+be,De);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case S:return be.key===et?le(ye,he,be,De):null;case w:return be.key===et?we(ye,he,be,De):null;case L:return et=be._init,be=et(be._payload),Ce(ye,he,be,De)}if(se(be)||ee(be))return et!==null?null:ke(ye,he,be,De,null);if(typeof be.then=="function")return Ce(ye,he,Vd(be),De);if(be.$$typeof===R)return Ce(ye,he,_d(ye,be),De);Zo(ye,be)}return null}function Se(ye,he,be,De,et){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return ye=ye.get(be)||null,Q(he,ye,""+De,et);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case S:return ye=ye.get(De.key===null?be:De.key)||null,le(he,ye,De,et);case w:return ye=ye.get(De.key===null?be:De.key)||null,we(he,ye,De,et);case L:var Ut=De._init;return De=Ut(De._payload),Se(ye,he,be,De,et)}if(se(De)||ee(De))return ye=ye.get(be)||null,ke(he,ye,De,et,null);if(typeof De.then=="function")return Se(ye,he,be,Vd(De),et);if(De.$$typeof===R)return Se(ye,he,be,_d(he,De),et);Zo(he,De)}return null}function gt(ye,he,be,De){for(var et=null,Ut=null,ot=he,yt=he=0,pi=null;ot!==null&&yt<be.length;yt++){ot.index>yt?(pi=ot,ot=null):pi=ot.sibling;var Xt=Ce(ye,ot,be[yt],De);if(Xt===null){ot===null&&(ot=pi);break}a&&ot&&Xt.alternate===null&&o(ye,ot),he=T(Xt,he,yt),Ut===null?et=Xt:Ut.sibling=Xt,Ut=Xt,ot=pi}if(yt===be.length)return u(ye,ot),Ht&&qo(ye,yt),et;if(ot===null){for(;yt<be.length;yt++)ot=Re(ye,be[yt],De),ot!==null&&(he=T(ot,he,yt),Ut===null?et=ot:Ut.sibling=ot,Ut=ot);return Ht&&qo(ye,yt),et}for(ot=g(ot);yt<be.length;yt++)pi=Se(ot,ye,yt,be[yt],De),pi!==null&&(a&&pi.alternate!==null&&ot.delete(pi.key===null?yt:pi.key),he=T(pi,he,yt),Ut===null?et=pi:Ut.sibling=pi,Ut=pi);return a&&ot.forEach(function(vo){return o(ye,vo)}),Ht&&qo(ye,yt),et}function pt(ye,he,be,De){if(be==null)throw Error(i(151));for(var et=null,Ut=null,ot=he,yt=he=0,pi=null,Xt=be.next();ot!==null&&!Xt.done;yt++,Xt=be.next()){ot.index>yt?(pi=ot,ot=null):pi=ot.sibling;var vo=Ce(ye,ot,Xt.value,De);if(vo===null){ot===null&&(ot=pi);break}a&&ot&&vo.alternate===null&&o(ye,ot),he=T(vo,he,yt),Ut===null?et=vo:Ut.sibling=vo,Ut=vo,ot=pi}if(Xt.done)return u(ye,ot),Ht&&qo(ye,yt),et;if(ot===null){for(;!Xt.done;yt++,Xt=be.next())Xt=Re(ye,Xt.value,De),Xt!==null&&(he=T(Xt,he,yt),Ut===null?et=Xt:Ut.sibling=Xt,Ut=Xt);return Ht&&qo(ye,yt),et}for(ot=g(ot);!Xt.done;yt++,Xt=be.next())Xt=Se(ot,ye,yt,Xt.value,De),Xt!==null&&(a&&Xt.alternate!==null&&ot.delete(Xt.key===null?yt:Xt.key),he=T(Xt,he,yt),Ut===null?et=Xt:Ut.sibling=Xt,Ut=Xt);return a&&ot.forEach(function(Av){return o(ye,Av)}),Ht&&qo(ye,yt),et}function gn(ye,he,be,De){if(typeof be=="object"&&be!==null&&be.type===j&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case S:e:{for(var et=be.key;he!==null;){if(he.key===et){if(et=be.type,et===j){if(he.tag===7){u(ye,he.sibling),De=v(he,be.props.children),De.return=ye,ye=De;break e}}else if(he.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===L&&el(et)===he.type){u(ye,he.sibling),De=v(he,be.props),pu(De,be),De.return=ye,ye=De;break e}u(ye,he);break}else o(ye,he);he=he.sibling}be.type===j?(De=Bo(be.props.children,ye.mode,De,be.key),De.return=ye,ye=De):(De=Sd(be.type,be.key,be.props,null,ye.mode,De),pu(De,be),De.return=ye,ye=De)}return $(ye);case w:e:{for(et=be.key;he!==null;){if(he.key===et)if(he.tag===4&&he.stateNode.containerInfo===be.containerInfo&&he.stateNode.implementation===be.implementation){u(ye,he.sibling),De=v(he,be.children||[]),De.return=ye,ye=De;break e}else{u(ye,he);break}else o(ye,he);he=he.sibling}De=Bl(be,ye.mode,De),De.return=ye,ye=De}return $(ye);case L:return et=be._init,be=et(be._payload),gn(ye,he,be,De)}if(se(be))return gt(ye,he,be,De);if(ee(be)){if(et=ee(be),typeof et!="function")throw Error(i(150));return be=et.call(be),pt(ye,he,be,De)}if(typeof be.then=="function")return gn(ye,he,Vd(be),De);if(be.$$typeof===R)return gn(ye,he,_d(ye,be),De);Zo(ye,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,he!==null&&he.tag===6?(u(ye,he.sibling),De=v(he,be),De.return=ye,ye=De):(u(ye,he),De=fh(be,ye.mode,De),De.return=ye,ye=De),$(ye)):u(ye,he)}return function(ye,he,be,De){try{rr=0;var et=gn(ye,he,be,De);return ni=null,et}catch(ot){if(ot===zi||ot===Td)throw ot;var Ut=Xi(29,ot,null,ye.mode);return Ut.lanes=De,Ut.return=ye,Ut}finally{}}}var tl=$h(!0),Gp=$h(!1),Sr=de(null),$i=null;function Br(a){var o=a.alternate;H(qn,qn.current&1),H(Sr,a),$i===null&&(o===null||Wo.current!==null||o.memoizedState!==null)&&($i=a)}function Yp(a){if(a.tag===22){if(H(qn,qn.current),H(Sr,a),$i===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&($i=a)}}else ys()}function ys(){H(qn,qn.current),H(Sr,Sr.current)}function qa(a){ae(Sr),$i===a&&($i=null),ae(qn)}var qn=de(0);function gu(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Bi(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Kl(a,o,u,g){o=a.memoizedState,u=u(g,o),u=u==null?o:y({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var yu={enqueueSetState:function(a,o,u){a=a._reactInternals;var g=Di(),v=Zs(g);v.payload=o,u!=null&&(v.callback=u),o=hs(a,v,g),o!==null&&(_r(o,a,g),tu(o,a,g))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var g=Di(),v=Zs(g);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=hs(a,v,g),o!==null&&(_r(o,a,g),tu(o,a,g))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=Di(),g=Zs(u);g.tag=2,o!=null&&(g.callback=o),o=hs(a,g,u),o!==null&&(_r(o,a,u),tu(o,a,u))}};function xu(a,o,u,g,v,T,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,T,$):o.prototype&&o.prototype.isPureReactComponent?!Or(u,g)||!Or(v,T):!0}function Wp(a,o,u,g){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,g),o.state!==a&&yu.enqueueReplaceState(o,o.state,null)}function io(a,o){var u=o;if("ref"in o){u={};for(var g in o)g!=="ref"&&(u[g]=o[g])}if(a=a.defaultProps){u===o&&(u=y({},u));for(var v in a)u[v]===void 0&&(u[v]=a[v])}return u}var nl=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Uh(a){nl(a)}function Hd(a){console.error(a)}function Jp(a){nl(a)}function vu(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function Va(a,o,u){try{var g=a.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Gd(a,o,u){return u=Zs(u),u.tag=3,u.payload={element:null},u.callback=function(){vu(a,o)},u}function Bh(a){return a=Zs(a),a.tag=3,a}function Qp(a,o,u,g){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var T=g.value;a.payload=function(){return v(T)},a.callback=function(){Va(o,u,g)}}var $=u.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(a.callback=function(){Va(o,u,g),typeof v!="function"&&(co===null?co=new Set([this]):co.add(this));var Q=g.stack;this.componentDidCatch(g.value,{componentStack:Q!==null?Q:""})})}function Kp(a,o,u,g,v){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=u.alternate,o!==null&&Xc(o,u,v,!0),u=Sr.current,u!==null){switch(u.tag){case 13:return $i===null?om():u.alternate===null&&Vn===0&&(Vn=3),u.flags&=-257,u.flags|=65536,u.lanes=v,g===yh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([g]):o.add(g),um(a,g,v)),!1;case 22:return u.flags|=65536,g===yh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([g]):u.add(g)),um(a,g,v)),!1}throw Error(i(435,u.tag))}return um(a,g,v),om(),!1}if(Ht)return o=Sr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,g!==ql&&(a=Error(i(422),{cause:g}),Ks(_t(a,u)))):(g!==ql&&(o=Error(i(423),{cause:g}),Ks(_t(o,u))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,g=_t(g,u),v=Gd(a.stateNode,g,v),ha(a,v),Vn!==4&&(Vn=2)),!1;var T=Error(i(520),{cause:g});if(T=_t(T,u),Au===null?Au=[T]:Au.push(T),Vn!==4&&(Vn=2),o===null)return!0;g=_t(g,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=v&-v,u.lanes|=a,a=Gd(u.stateNode,g,a),ha(u,a),!1;case 1:if(o=u.type,T=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(co===null||!co.has(T))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Bh(v),Qp(v,a,u,g),ha(u,v),!1}u=u.return}while(u!==null);return!1}var Xp=Error(i(461)),fi=!1;function An(a,o,u,g){o.child=a===null?Gp(o,null,u,g):tl(o,a.child,u,g)}function Yd(a,o,u,g,v){u=u.render;var T=o.ref;if("ref"in g){var $={};for(var Q in g)Q!=="ref"&&($[Q]=g[Q])}else $=g;return Ho(o),g=wh(a,o,u,$,T,v),Q=Nh(),a!==null&&!fi?(Qo(a,o,v),xs(a,o,v)):(Ht&&Q&&mh(o),o.flags|=1,An(a,o,g,v),o.child)}function Wd(a,o,u,g,v){if(a===null){var T=u.type;return typeof T=="function"&&!Uo(T)&&T.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=T,Jd(a,o,T,g,v)):(a=Sd(u.type,null,g,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(T=a.child,!ga(a,v)){var $=T.memoizedProps;if(u=u.compare,u=u!==null?u:Or,u($,g)&&a.ref===o.ref)return xs(a,o,v)}return o.flags|=1,a=Fi(T,g),a.ref=o.ref,a.return=o,o.child=a}function Jd(a,o,u,g,v){if(a!==null){var T=a.memoizedProps;if(Or(T,g)&&a.ref===o.ref)if(fi=!1,o.pendingProps=g=T,ga(a,v))(a.flags&131072)!==0&&(fi=!0);else return o.lanes=a.lanes,xs(a,o,v)}return Xl(a,o,u,g,v)}function bu(a,o,u){var g=o.pendingProps,v=g.children,T=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((o.flags&128)!==0){if(g=T!==null?T.baseLanes|u:u,a!==null){for(v=o.child=a.child,T=0;v!==null;)T=T|v.lanes|v.childLanes,v=v.sibling;o.childLanes=T&~g}else o.childLanes=0,o.child=null;return il(a,o,g,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&jd(o,T!==null?T.cachePool:null),T!==null?ms(o,T):Ad(),Yp(o);else return o.lanes=o.childLanes=536870912,il(a,o,T!==null?T.baseLanes|u:u,u)}else T!==null?(jd(o,T.cachePool),ms(o,T),ys(),o.memoizedState=null):(a!==null&&jd(o,null),Ad(),ys());return An(a,o,v,u),o.child}function il(a,o,u,g){var v=fs();return v=v===null?null:{parent:bn._currentValue,pool:v},o.memoizedState={baseLanes:u,cachePool:v},a!==null&&jd(o,null),Ad(),Yp(o),a!==null&&Xc(a,o,g,!0),null}function ut(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function Xl(a,o,u,g,v){return Ho(o),u=wh(a,o,u,g,void 0,v),g=Nh(),a!==null&&!fi?(Qo(a,o,v),xs(a,o,v)):(Ht&&g&&mh(o),o.flags|=1,An(a,o,u,v),o.child)}function Qd(a,o,u,g,v,T){return Ho(o),o.updateQueue=null,u=Rp(o,g,u,v),Pp(a),g=Nh(),a!==null&&!fi?(Qo(a,o,T),xs(a,o,T)):(Ht&&g&&mh(o),o.flags|=1,An(a,o,u,T),o.child)}function ro(a,o,u,g,v){if(Ho(o),o.stateNode===null){var T=$o,$=u.contextType;typeof $=="object"&&$!==null&&(T=Bn($)),T=new u(g,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=yu,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=g,T.state=o.memoizedState,T.refs={},Yo(o),$=u.contextType,T.context=typeof $=="object"&&$!==null?Bn($):$o,T.state=o.memoizedState,$=u.getDerivedStateFromProps,typeof $=="function"&&(Kl(o,u,$,g),T.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||($=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),$!==T.state&&yu.enqueueReplaceState(T,T.state,null),Ei(o,g,T,v),ma(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(a===null){T=o.stateNode;var Q=o.memoizedProps,le=io(u,Q);T.props=le;var we=T.context,ke=u.contextType;$=$o,typeof ke=="object"&&ke!==null&&($=Bn(ke));var Re=u.getDerivedStateFromProps;ke=typeof Re=="function"||typeof T.getSnapshotBeforeUpdate=="function",Q=o.pendingProps!==Q,ke||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(Q||we!==$)&&Wp(o,T,g,$),Ua=!1;var Ce=o.memoizedState;T.state=Ce,Ei(o,g,T,v),ma(),we=o.memoizedState,Q||Ce!==we||Ua?(typeof Re=="function"&&(Kl(o,u,Re,g),we=o.memoizedState),(le=Ua||xu(o,u,le,g,Ce,we,$))?(ke||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=we),T.props=g,T.state=we,T.context=$,g=le):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{T=o.stateNode,Gl(a,o),$=o.memoizedProps,ke=io(u,$),T.props=ke,Re=o.pendingProps,Ce=T.context,we=u.contextType,le=$o,typeof we=="object"&&we!==null&&(le=Bn(we)),Q=u.getDerivedStateFromProps,(we=typeof Q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||($!==Re||Ce!==le)&&Wp(o,T,g,le),Ua=!1,Ce=o.memoizedState,T.state=Ce,Ei(o,g,T,v),ma();var Se=o.memoizedState;$!==Re||Ce!==Se||Ua||a!==null&&a.dependencies!==null&&Cd(a.dependencies)?(typeof Q=="function"&&(Kl(o,u,Q,g),Se=o.memoizedState),(ke=Ua||xu(o,u,ke,g,Ce,Se,le)||a!==null&&a.dependencies!==null&&Cd(a.dependencies))?(we||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Se,le),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Se,le)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||$===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=Se),T.props=g,T.state=Se,T.context=le,g=ke):(typeof T.componentDidUpdate!="function"||$===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&Ce===a.memoizedState||(o.flags|=1024),g=!1)}return T=g,ut(a,o),g=(o.flags&128)!==0,T||g?(T=o.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,a!==null&&g?(o.child=tl(o,a.child,null,v),o.child=tl(o,null,u,v)):An(a,o,u,v),o.memoizedState=T.state,a=o.child):a=xs(a,o,v),a}function Zp(a,o,u,g){return Kc(),o.flags|=256,An(a,o,u,g),o.child}var wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kd(a){return{baseLanes:a,cachePool:_p()}}function hi(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=Vr),a}function eg(a,o,u){var g=o.pendingProps,v=!1,T=(o.flags&128)!==0,$;if(($=T)||($=a!==null&&a.memoizedState===null?!1:(qn.current&2)!==0),$&&(v=!0,o.flags&=-129),$=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ht){if(v?Br(o):ys(),Ht){var Q=Rn,le;if(le=Q){e:{for(le=Q,Q=Zi;le.nodeType!==8;){if(!Q){Q=null;break e}if(le=xa(le.nextSibling),le===null){Q=null;break e}}Q=le}Q!==null?(o.memoizedState={dehydrated:Q,treeContext:En!==null?{id:Pn,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},le=Xi(18,null,null,0),le.stateNode=Q,le.return=o,o.child=le,ti=o,Rn=null,le=!0):le=!1}le||zr(o)}if(Q=o.memoizedState,Q!==null&&(Q=Q.dehydrated,Q!==null))return Bi(Q)?o.lanes=32:o.lanes=536870912,null;qa(o)}return Q=g.children,g=g.fallback,v?(ys(),v=o.mode,Q=Su({mode:"hidden",children:Q},v),g=Bo(g,v,u,null),Q.return=o,g.return=o,Q.sibling=g,o.child=Q,v=o.child,v.memoizedState=Kd(u),v.childLanes=hi(a,$,u),o.memoizedState=wu,g):(Br(o),qh(o,Q))}if(le=a.memoizedState,le!==null&&(Q=le.dehydrated,Q!==null)){if(T)o.flags&256?(Br(o),o.flags&=-257,o=Vh(a,o,u)):o.memoizedState!==null?(ys(),o.child=a.child,o.flags|=128,o=null):(ys(),v=g.fallback,Q=o.mode,g=Su({mode:"visible",children:g.children},Q),v=Bo(v,Q,u,null),v.flags|=2,g.return=o,v.return=o,g.sibling=v,o.child=g,tl(o,a.child,null,u),g=o.child,g.memoizedState=Kd(u),g.childLanes=hi(a,$,u),o.memoizedState=wu,o=v);else if(Br(o),Bi(Q)){if($=Q.nextSibling&&Q.nextSibling.dataset,$)var we=$.dgst;$=we,g=Error(i(419)),g.stack="",g.digest=$,Ks({value:g,source:null,stack:null}),o=Vh(a,o,u)}else if(fi||Xc(a,o,u,!1),$=(u&a.childLanes)!==0,fi||$){if($=jn,$!==null&&(g=u&-u,g=(g&42)!==0?1:pl(g),g=(g&($.suspendedLanes|u))!==0?0:g,g!==0&&g!==le.retryLane))throw le.retryLane=g,$a(a,g),_r($,a,g),Xp;Q.data==="$?"||om(),o=Vh(a,o,u)}else Q.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=le.treeContext,Rn=xa(Q.nextSibling),ti=o,Ht=!0,fa=null,Zi=!1,a!==null&&(Lr[Fr++]=Pn,Lr[Fr++]=ds,Lr[Fr++]=En,Pn=a.id,ds=a.overflow,En=o),o=qh(o,g.children),o.flags|=4096);return o}return v?(ys(),v=g.fallback,Q=o.mode,le=a.child,we=le.sibling,g=Fi(le,{mode:"hidden",children:g.children}),g.subtreeFlags=le.subtreeFlags&65011712,we!==null?v=Fi(we,v):(v=Bo(v,Q,u,null),v.flags|=2),v.return=o,g.return=o,g.sibling=v,o.child=g,g=v,v=o.child,Q=a.child.memoizedState,Q===null?Q=Kd(u):(le=Q.cachePool,le!==null?(we=bn._currentValue,le=le.parent!==we?{parent:we,pool:we}:le):le=_p(),Q={baseLanes:Q.baseLanes|u,cachePool:le}),v.memoizedState=Q,v.childLanes=hi(a,$,u),o.memoizedState=wu,g):(Br(o),u=a.child,a=u.sibling,u=Fi(u,{mode:"visible",children:g.children}),u.return=o,u.sibling=null,a!==null&&($=o.deletions,$===null?(o.deletions=[a],o.flags|=16):$.push(a)),o.child=u,o.memoizedState=null,u)}function qh(a,o){return o=Su({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Su(a,o){return a=Xi(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Vh(a,o,u){return tl(o,a.child,null,u),a=qh(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Hh(a,o,u){a.lanes|=o;var g=a.alternate;g!==null&&(g.lanes|=o),er(a.return,o,u)}function Gh(a,o,u,g,v){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:v}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=u,T.tailMode=v)}function tg(a,o,u){var g=o.pendingProps,v=g.revealOrder,T=g.tail;if(An(a,o,g.children,u),g=qn.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Hh(a,u,o);else if(a.tag===19)Hh(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(H(qn,g),v){case"forwards":for(u=o.child,v=null;u!==null;)a=u.alternate,a!==null&&gu(a)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Gh(o,!1,v,u,T);break;case"backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&gu(a)===null){o.child=v;break}a=v.sibling,v.sibling=u,u=v,v=a}Gh(o,!0,u,null,T);break;case"together":Gh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function xs(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),lo|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(Xc(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(i(153));if(o.child!==null){for(a=o.child,u=Fi(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Fi(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function ga(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Cd(a)))}function Ui(a,o,u){switch(o.tag){case 3:ge(o,o.stateNode.containerInfo),br(o,bn,a.memoizedState.cache),Kc();break;case 27:case 5:Te(o);break;case 4:ge(o,o.stateNode.containerInfo);break;case 10:br(o,o.type,o.memoizedProps.value);break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(Br(o),o.flags|=128,null):(u&o.child.childLanes)!==0?eg(a,o,u):(Br(o),a=xs(a,o,u),a!==null?a.sibling:null);Br(o);break;case 19:var v=(a.flags&128)!==0;if(g=(u&o.childLanes)!==0,g||(Xc(a,o,u,!1),g=(u&o.childLanes)!==0),v){if(g)return tg(a,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(qn,qn.current),g)break;return null;case 22:case 23:return o.lanes=0,bu(a,o,u);case 24:br(o,bn,a.memoizedState.cache)}return xs(a,o,u)}function Xd(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)fi=!0;else{if(!ga(a,u)&&(o.flags&128)===0)return fi=!1,Ui(a,o,u);fi=(a.flags&131072)!==0}else fi=!1,Ht&&(o.flags&1048576)!==0&&hh(o,Wc,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var g=o.elementType,v=g._init;if(g=v(g._payload),o.type=g,typeof g=="function")Uo(g)?(a=io(g,a),o.tag=1,o=ro(null,o,g,a,u)):(o.tag=0,o=Xl(null,o,g,a,u));else{if(g!=null){if(v=g.$$typeof,v===Y){o.tag=11,o=Yd(null,o,g,a,u);break e}else if(v===z){o.tag=14,o=Wd(null,o,g,a,u);break e}}throw o=te(g)||g,Error(i(306,o,""))}}return o;case 0:return Xl(a,o,o.type,o.pendingProps,u);case 1:return g=o.type,v=io(g,o.pendingProps),ro(a,o,g,v,u);case 3:e:{if(ge(o,o.stateNode.containerInfo),a===null)throw Error(i(387));g=o.pendingProps;var T=o.memoizedState;v=T.element,Gl(a,o),Ei(o,g,null,u);var $=o.memoizedState;if(g=$.cache,br(o,bn,g),g!==T.cache&&$t(o,[bn],u,!0),ma(),g=$.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:$.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=Zp(a,o,g,u);break e}else if(g!==v){v=_t(Error(i(424)),o),Ks(v),o=Zp(a,o,g,u);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Rn=xa(a.firstChild),ti=o,Ht=!0,fa=null,Zi=!0,u=Gp(o,null,g,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Kc(),g===v){o=xs(a,o,u);break e}An(a,o,g,u)}o=o.child}return o;case 26:return ut(a,o),a===null?(u=Kg(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ht||(u=o.type,a=o.pendingProps,g=sl(ue.current).createElement(u),g[Dn]=o,g[Jn]=a,ai(g,u,a),$n(g),o.stateNode=g):o.memoizedState=Kg(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Te(o),a===null&&Ht&&(g=o.stateNode=Wg(o.type,o.pendingProps,ue.current),ti=o,Zi=!0,v=Rn,Hr(o.type)?(vm=v,Rn=xa(g.firstChild)):Rn=v),An(a,o,o.pendingProps.children,u),ut(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ht&&((v=g=Rn)&&(g=Gg(g,o.type,o.pendingProps,Zi),g!==null?(o.stateNode=g,ti=o,Rn=xa(g.firstChild),Zi=!1,v=!0):v=!1),v||zr(o)),Te(o),v=o.type,T=o.pendingProps,$=a!==null?a.memoizedProps:null,g=T.children,gf(v,T)?g=null:$!==null&&gf(v,$)&&(o.flags|=32),o.memoizedState!==null&&(v=wh(a,o,Sh,null,null,u),yc._currentValue=v),ut(a,o),An(a,o,g,u),o.child;case 6:return a===null&&Ht&&((a=u=Rn)&&(u=xf(u,o.pendingProps,Zi),u!==null?(o.stateNode=u,ti=o,Rn=null,a=!0):a=!1),a||zr(o)),null;case 13:return eg(a,o,u);case 4:return ge(o,o.stateNode.containerInfo),g=o.pendingProps,a===null?o.child=tl(o,null,g,u):An(a,o,g,u),o.child;case 11:return Yd(a,o,o.type,o.pendingProps,u);case 7:return An(a,o,o.pendingProps,u),o.child;case 8:return An(a,o,o.pendingProps.children,u),o.child;case 12:return An(a,o,o.pendingProps.children,u),o.child;case 10:return g=o.pendingProps,br(o,o.type,g.value),An(a,o,g.children,u),o.child;case 9:return v=o.type._context,g=o.pendingProps.children,Ho(o),v=Bn(v),g=g(v),o.flags|=1,An(a,o,g,u),o.child;case 14:return Wd(a,o,o.type,o.pendingProps,u);case 15:return Jd(a,o,o.type,o.pendingProps,u);case 19:return tg(a,o,u);case 31:return g=o.pendingProps,u=o.mode,g={mode:g.mode,children:g.children},a===null?(u=Su(g,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Fi(a.child,g),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return bu(a,o,u);case 24:return Ho(o),g=Bn(bn),a===null?(v=fs(),v===null&&(v=jn,T=ph(),v.pooledCache=T,T.refCount++,T!==null&&(v.pooledCacheLanes|=u),v=T),o.memoizedState={parent:g,cache:v},Yo(o),br(o,bn,v)):((a.lanes&u)!==0&&(Gl(a,o),Ei(o,null,null,u),ma()),v=a.memoizedState,T=o.memoizedState,v.parent!==g?(v={parent:g,cache:g},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),br(o,bn,g)):(g=T.cache,br(o,bn,g),g!==v.cache&&$t(o,[bn],u,!0))),An(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function vs(a){a.flags|=4}function Zd(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!si(o)){if(o=Sr.current,o!==null&&((Kt&4194048)===Kt?$i!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||o!==$i))throw Hl=yh,jp;a.flags|=8192}}function ef(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ja():536870912,a.lanes|=o,ac|=o)}function Nu(a,o){if(!Ht)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function wn(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,g=0;if(o)for(var v=a.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)u|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=u,o}function ng(a,o,u){var g=o.pendingProps;switch(Jc(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(o),null;case 1:return wn(o),null;case 3:return u=o.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),$r(bn),Ge(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(Qc(o)?vs(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,wp())),wn(o),null;case 26:return u=o.memoizedState,a===null?(vs(o),u!==null?(wn(o),Zd(o,u)):(wn(o),o.flags&=-16777217)):u?u!==a.memoizedState?(vs(o),wn(o),Zd(o,u)):(wn(o),o.flags&=-16777217):(a.memoizedProps!==g&&vs(o),wn(o),o.flags&=-16777217),null;case 27:Ne(o),u=ue.current;var v=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==g&&vs(o);else{if(!g){if(o.stateNode===null)throw Error(i(166));return wn(o),null}a=ne.current,Qc(o)?vp(o):(a=Wg(v,g,u),o.stateNode=a,vs(o))}return wn(o),null;case 5:if(Ne(o),u=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==g&&vs(o);else{if(!g){if(o.stateNode===null)throw Error(i(166));return wn(o),null}if(a=ne.current,Qc(o))vp(o);else{switch(v=sl(ue.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?v.createElement(u,{is:g.is}):v.createElement(u)}}a[Dn]=o,a[Jn]=g;e:for(v=o.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===o)break e;for(;v.sibling===null;){if(v.return===null||v.return===o)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}o.stateNode=a;e:switch(ai(a,u,g),u){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&vs(o)}}return wn(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==g&&vs(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(i(166));if(a=ue.current,Qc(o)){if(a=o.stateNode,u=o.memoizedProps,g=null,v=ti,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}a[Dn]=o,a=!!(a.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||Bg(a.nodeValue,u)),a||zr(o)}else a=sl(a).createTextNode(g),a[Dn]=o,o.stateNode=a}return wn(o),null;case 13:if(g=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Qc(o),g!==null&&g.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Dn]=o}else Kc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;wn(o),v=!1}else v=wp(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(qa(o),o):(qa(o),null)}if(qa(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=g!==null,a=a!==null&&a.memoizedState!==null,u){g=o.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var T=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==v&&(g.flags|=2048)}return u!==a&&u&&(o.child.flags|=8192),ef(o,o.updateQueue),wn(o),null;case 4:return Ge(),a===null&&pm(o.stateNode.containerInfo),wn(o),null;case 10:return $r(o.type),wn(o),null;case 19:if(ae(qn),v=o.memoizedState,v===null)return wn(o),null;if(g=(o.flags&128)!==0,T=v.rendering,T===null)if(g)Nu(v,!1);else{if(Vn!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(T=gu(a),T!==null){for(o.flags|=128,Nu(v,!1),a=T.updateQueue,o.updateQueue=a,ef(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)Yc(u,a),u=u.sibling;return H(qn,qn.current&1|2),o.child}a=a.sibling}v.tail!==null&&tt()>sc&&(o.flags|=128,g=!0,Nu(v,!1),o.lanes=4194304)}else{if(!g)if(a=gu(T),a!==null){if(o.flags|=128,g=!0,a=a.updateQueue,o.updateQueue=a,ef(o,a),Nu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Ht)return wn(o),null}else 2*tt()-v.renderingStartTime>sc&&u!==536870912&&(o.flags|=128,g=!0,Nu(v,!1),o.lanes=4194304);v.isBackwards?(T.sibling=o.child,o.child=T):(a=v.last,a!==null?a.sibling=T:o.child=T,v.last=T)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=tt(),o.sibling=null,a=qn.current,H(qn,g?a&1|2:a&1),o):(wn(o),null);case 22:case 23:return qa(o),bh(),g=o.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?(u&536870912)!==0&&(o.flags&128)===0&&(wn(o),o.subtreeFlags&6&&(o.flags|=8192)):wn(o),u=o.updateQueue,u!==null&&ef(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==u&&(o.flags|=2048),a!==null&&ae(Go),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),$r(bn),wn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function ig(a,o){switch(Jc(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return $r(bn),Ge(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Ne(o),null;case 13:if(qa(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Kc()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return ae(qn),null;case 4:return Ge(),null;case 10:return $r(o.type),null;case 22:case 23:return qa(o),bh(),a!==null&&ae(Go),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return $r(bn),null;case 25:return null;default:return null}}function rg(a,o){switch(Jc(o),o.tag){case 3:$r(bn),Ge();break;case 26:case 27:case 5:Ne(o);break;case 4:Ge();break;case 13:qa(o);break;case 19:ae(qn);break;case 10:$r(o.type);break;case 22:case 23:qa(o),bh(),a!==null&&ae(Go);break;case 24:$r(bn)}}function Cu(a,o){try{var u=o.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var v=g.next;u=v;do{if((u.tag&a)===a){g=void 0;var T=u.create,$=u.inst;g=T(),$.destroy=g}u=u.next}while(u!==v)}}catch(Q){Sn(o,o.return,Q)}}function ao(a,o,u){try{var g=o.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var T=v.next;g=T;do{if((g.tag&a)===a){var $=g.inst,Q=$.destroy;if(Q!==void 0){$.destroy=void 0,v=o;var le=u,we=Q;try{we()}catch(ke){Sn(v,le,ke)}}}g=g.next}while(g!==T)}}catch(ke){Sn(o,o.return,ke)}}function ag(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{vh(o,u)}catch(g){Sn(a,a.return,g)}}}function Yh(a,o,u){u.props=io(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(g){Sn(a,o,g)}}function Zl(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof u=="function"?a.refCleanup=u(g):u.current=g}}catch(v){Sn(a,o,v)}}function Ha(a,o){var u=a.ref,g=a.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(v){Sn(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){Sn(a,o,v)}else u.current=null}function tf(a){var o=a.type,u=a.memoizedProps,g=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(v){Sn(a,a.return,v)}}function nf(a,o,u){try{var g=a.stateNode;lv(g,a.type,u,o),g[Jn]=o}catch(v){Sn(a,a.return,v)}}function ec(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Hr(a.type)||a.tag===4}function _u(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ec(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Hr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function rf(a,o,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=mf));else if(g!==4&&(g===27&&Hr(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(rf(a,o,u),a=a.sibling;a!==null;)rf(a,o,u),a=a.sibling}function ju(a,o,u){var g=a.tag;if(g===5||g===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(g!==4&&(g===27&&Hr(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(ju(a,o,u),a=a.sibling;a!==null;)ju(a,o,u),a=a.sibling}function Tu(a){var o=a.stateNode,u=a.memoizedProps;try{for(var g=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);ai(o,g,u),o[Dn]=a,o[Jn]=u}catch(T){Sn(a,a.return,T)}}var Ga=!1,cn=!1,bs=!1,sg=typeof WeakSet=="function"?WeakSet:Set,ii=null;function Wx(a,o){if(a=a.containerInfo,ya=Sf,a=bd(a),Hc(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var v=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var $=0,Q=-1,le=-1,we=0,ke=0,Re=a,Ce=null;t:for(;;){for(var Se;Re!==u||v!==0&&Re.nodeType!==3||(Q=$+v),Re!==T||g!==0&&Re.nodeType!==3||(le=$+g),Re.nodeType===3&&($+=Re.nodeValue.length),(Se=Re.firstChild)!==null;)Ce=Re,Re=Se;for(;;){if(Re===a)break t;if(Ce===u&&++we===v&&(Q=$),Ce===T&&++ke===g&&(le=$),(Se=Re.nextSibling)!==null)break;Re=Ce,Ce=Re.parentNode}Re=Se}u=Q===-1||le===-1?null:{start:Q,end:le}}else u=null}u=u||{start:0,end:0}}else u=null;for(pf={focusedElem:a,selectionRange:u},Sf=!1,ii=o;ii!==null;)if(o=ii,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,ii=a;else for(;ii!==null;){switch(o=ii,T=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&T!==null){a=void 0,u=o,v=T.memoizedProps,T=T.memoizedState,g=u.stateNode;try{var gt=io(u.type,v,u.elementType===u.type);a=g.getSnapshotBeforeUpdate(gt,T),g.__reactInternalSnapshotBeforeUpdate=a}catch(pt){Sn(u,u.return,pt)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)xm(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":xm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=o.sibling,a!==null){a.return=o.return,ii=a;break}ii=o.return}}function og(a,o,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:so(a,u),g&4&&Cu(5,u);break;case 1:if(so(a,u),g&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch($){Sn(u,u.return,$)}else{var v=io(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch($){Sn(u,u.return,$)}}g&64&&ag(u),g&512&&Zl(u,u.return);break;case 3:if(so(a,u),g&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{vh(a,o)}catch($){Sn(u,u.return,$)}}break;case 27:o===null&&g&4&&Tu(u);case 26:case 5:so(a,u),o===null&&g&4&&tf(u),g&512&&Zl(u,u.return);break;case 12:so(a,u);break;case 13:so(a,u),g&4&&ug(a,u),g&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=cf.bind(null,u),fc(a,u))));break;case 22:if(g=u.memoizedState!==null||Ga,!g){o=o!==null&&o.memoizedState!==null||cn,v=Ga;var T=cn;Ga=g,(cn=o)&&!T?Ss(a,u,(u.subtreeFlags&8772)!==0):so(a,u),Ga=v,cn=T}break;case 30:break;default:so(a,u)}}function lg(a){var o=a.alternate;o!==null&&(a.alternate=null,lg(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Ao(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Mn=null,ar=!1;function ws(a,o,u){for(u=u.child;u!==null;)cg(a,o,u),u=u.sibling}function cg(a,o,u){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Ee,u)}catch{}switch(u.tag){case 26:cn||Ha(u,o),ws(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:cn||Ha(u,o);var g=Mn,v=ar;Hr(u.type)&&(Mn=u.stateNode,ar=!1),ws(a,o,u),Fu(u.stateNode),Mn=g,ar=v;break;case 5:cn||Ha(u,o);case 6:if(g=Mn,v=ar,Mn=null,ws(a,o,u),Mn=g,ar=v,Mn!==null)if(ar)try{(Mn.nodeType===9?Mn.body:Mn.nodeName==="HTML"?Mn.ownerDocument.body:Mn).removeChild(u.stateNode)}catch(T){Sn(u,o,T)}else try{Mn.removeChild(u.stateNode)}catch(T){Sn(u,o,T)}break;case 18:Mn!==null&&(ar?(a=Mn,yf(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Gu(a)):yf(Mn,u.stateNode));break;case 4:g=Mn,v=ar,Mn=u.stateNode.containerInfo,ar=!0,ws(a,o,u),Mn=g,ar=v;break;case 0:case 11:case 14:case 15:cn||ao(2,u,o),cn||ao(4,u,o),ws(a,o,u);break;case 1:cn||(Ha(u,o),g=u.stateNode,typeof g.componentWillUnmount=="function"&&Yh(u,o,g)),ws(a,o,u);break;case 21:ws(a,o,u);break;case 22:cn=(g=cn)||u.memoizedState!==null,ws(a,o,u),cn=g;break;default:ws(a,o,u)}}function ug(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Gu(a)}catch(u){Sn(o,o.return,u)}}function Jx(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new sg),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new sg),o;default:throw Error(i(435,a.tag))}}function Wh(a,o){var u=Jx(a);o.forEach(function(g){var v=tv.bind(null,a,g);u.has(g)||(u.add(g),g.then(v,v))})}function Nr(a,o){var u=o.deletions;if(u!==null)for(var g=0;g<u.length;g++){var v=u[g],T=a,$=o,Q=$;e:for(;Q!==null;){switch(Q.tag){case 27:if(Hr(Q.type)){Mn=Q.stateNode,ar=!1;break e}break;case 5:Mn=Q.stateNode,ar=!1;break e;case 3:case 4:Mn=Q.stateNode.containerInfo,ar=!0;break e}Q=Q.return}if(Mn===null)throw Error(i(160));cg(T,$,v),Mn=null,ar=!1,T=v.alternate,T!==null&&(T.return=null),v.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Jh(o,a),o=o.sibling}var qr=null;function Jh(a,o){var u=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Nr(o,a),sr(a),g&4&&(ao(3,a,a.return),Cu(3,a),ao(5,a,a.return));break;case 1:Nr(o,a),sr(a),g&512&&(cn||u===null||Ha(u,u.return)),g&64&&Ga&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var v=qr;if(Nr(o,a),sr(a),g&512&&(cn||u===null||Ha(u,u.return)),g&4){var T=u!==null?u.memoizedState:null;if(g=a.memoizedState,u===null)if(g===null)if(a.stateNode===null){e:{g=a.type,u=a.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":T=v.getElementsByTagName("title")[0],(!T||T[Os]||T[Dn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=v.createElement(g),v.head.insertBefore(T,v.querySelector("head > title"))),ai(T,g,u),T[Dn]=a,$n(T),g=T;break e;case"link":var $=ey("link","href",v).get(g+(u.href||""));if($){for(var Q=0;Q<$.length;Q++)if(T=$[Q],T.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&T.getAttribute("rel")===(u.rel==null?null:u.rel)&&T.getAttribute("title")===(u.title==null?null:u.title)&&T.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){$.splice(Q,1);break t}}T=v.createElement(g),ai(T,g,u),v.head.appendChild(T);break;case"meta":if($=ey("meta","content",v).get(g+(u.content||""))){for(Q=0;Q<$.length;Q++)if(T=$[Q],T.getAttribute("content")===(u.content==null?null:""+u.content)&&T.getAttribute("name")===(u.name==null?null:u.name)&&T.getAttribute("property")===(u.property==null?null:u.property)&&T.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&T.getAttribute("charset")===(u.charSet==null?null:u.charSet)){$.splice(Q,1);break t}}T=v.createElement(g),ai(T,g,u),v.head.appendChild(T);break;default:throw Error(i(468,g))}T[Dn]=a,$n(T),g=T}a.stateNode=g}else ty(v,a.type,a.stateNode);else a.stateNode=Zg(v,g,a.memoizedProps);else T!==g?(T===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):T.count--,g===null?ty(v,a.type,a.stateNode):Zg(v,g,a.memoizedProps)):g===null&&a.stateNode!==null&&nf(a,a.memoizedProps,u.memoizedProps)}break;case 27:Nr(o,a),sr(a),g&512&&(cn||u===null||Ha(u,u.return)),u!==null&&g&4&&nf(a,a.memoizedProps,u.memoizedProps);break;case 5:if(Nr(o,a),sr(a),g&512&&(cn||u===null||Ha(u,u.return)),a.flags&32){v=a.stateNode;try{kr(v,"")}catch(Se){Sn(a,a.return,Se)}}g&4&&a.stateNode!=null&&(v=a.memoizedProps,nf(a,v,u!==null?u.memoizedProps:v)),g&1024&&(bs=!0);break;case 6:if(Nr(o,a),sr(a),g&4){if(a.stateNode===null)throw Error(i(162));g=a.memoizedProps,u=a.stateNode;try{u.nodeValue=g}catch(Se){Sn(a,a.return,Se)}}break;case 3:if(gc=null,v=qr,qr=kt(o.containerInfo),Nr(o,a),qr=v,sr(a),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Gu(o.containerInfo)}catch(Se){Sn(a,a.return,Se)}bs&&(bs=!1,dg(a));break;case 4:g=qr,qr=kt(a.stateNode.containerInfo),Nr(o,a),sr(a),qr=g;break;case 12:Nr(o,a),sr(a);break;case 13:Nr(o,a),sr(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(nm=tt()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Wh(a,g)));break;case 22:v=a.memoizedState!==null;var le=u!==null&&u.memoizedState!==null,we=Ga,ke=cn;if(Ga=we||v,cn=ke||le,Nr(o,a),cn=ke,Ga=we,sr(a),g&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||le||Ga||cn||rl(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){le=u=o;try{if(T=le.stateNode,v)$=T.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{Q=le.stateNode;var Re=le.memoizedProps.style,Ce=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;Q.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(Se){Sn(le,le.return,Se)}}}else if(o.tag===6){if(u===null){le=o;try{le.stateNode.nodeValue=v?"":le.memoizedProps}catch(Se){Sn(le,le.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=a.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Wh(a,u))));break;case 19:Nr(o,a),sr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Wh(a,g)));break;case 30:break;case 21:break;default:Nr(o,a),sr(a)}}function sr(a){var o=a.flags;if(o&2){try{for(var u,g=a.return;g!==null;){if(ec(g)){u=g;break}g=g.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,T=_u(a);ju(a,T,v);break;case 5:var $=u.stateNode;u.flags&32&&(kr($,""),u.flags&=-33);var Q=_u(a);ju(a,Q,$);break;case 3:case 4:var le=u.stateNode.containerInfo,we=_u(a);rf(a,we,le);break;default:throw Error(i(161))}}catch(ke){Sn(a,a.return,ke)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function dg(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;dg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function so(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)og(a,o.alternate,o),o=o.sibling}function rl(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:ao(4,o,o.return),rl(o);break;case 1:Ha(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Yh(o,o.return,u),rl(o);break;case 27:Fu(o.stateNode);case 26:case 5:Ha(o,o.return),rl(o);break;case 22:o.memoizedState===null&&rl(o);break;case 30:rl(o);break;default:rl(o)}a=a.sibling}}function Ss(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,v=a,T=o,$=T.flags;switch(T.tag){case 0:case 11:case 15:Ss(v,T,u),Cu(4,T);break;case 1:if(Ss(v,T,u),g=T,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(we){Sn(g,g.return,we)}if(g=T,v=g.updateQueue,v!==null){var Q=g.stateNode;try{var le=v.shared.hiddenCallbacks;if(le!==null)for(v.shared.hiddenCallbacks=null,v=0;v<le.length;v++)kp(le[v],Q)}catch(we){Sn(g,g.return,we)}}u&&$&64&&ag(T),Zl(T,T.return);break;case 27:Tu(T);case 26:case 5:Ss(v,T,u),u&&g===null&&$&4&&tf(T),Zl(T,T.return);break;case 12:Ss(v,T,u);break;case 13:Ss(v,T,u),u&&$&4&&ug(v,T);break;case 22:T.memoizedState===null&&Ss(v,T,u),Zl(T,T.return);break;case 30:break;default:Ss(v,T,u)}o=o.sibling}}function Qh(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Zc(u))}function Kh(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Zc(a))}function Ya(a,o,u,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fg(a,o,u,g),o=o.sibling}function fg(a,o,u,g){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Ya(a,o,u,g),v&2048&&Cu(9,o);break;case 1:Ya(a,o,u,g);break;case 3:Ya(a,o,u,g),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Zc(a)));break;case 12:if(v&2048){Ya(a,o,u,g),a=o.stateNode;try{var T=o.memoizedProps,$=T.id,Q=T.onPostCommit;typeof Q=="function"&&Q($,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(le){Sn(o,o.return,le)}}else Ya(a,o,u,g);break;case 13:Ya(a,o,u,g);break;case 23:break;case 22:T=o.stateNode,$=o.alternate,o.memoizedState!==null?T._visibility&2?Ya(a,o,u,g):Eu(a,o):T._visibility&2?Ya(a,o,u,g):(T._visibility|=2,tc(a,o,u,g,(o.subtreeFlags&10256)!==0)),v&2048&&Qh($,o);break;case 24:Ya(a,o,u,g),v&2048&&Kh(o.alternate,o);break;default:Ya(a,o,u,g)}}function tc(a,o,u,g,v){for(v=v&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var T=a,$=o,Q=u,le=g,we=$.flags;switch($.tag){case 0:case 11:case 15:tc(T,$,Q,le,v),Cu(8,$);break;case 23:break;case 22:var ke=$.stateNode;$.memoizedState!==null?ke._visibility&2?tc(T,$,Q,le,v):Eu(T,$):(ke._visibility|=2,tc(T,$,Q,le,v)),v&&we&2048&&Qh($.alternate,$);break;case 24:tc(T,$,Q,le,v),v&&we&2048&&Kh($.alternate,$);break;default:tc(T,$,Q,le,v)}o=o.sibling}}function Eu(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,g=o,v=g.flags;switch(g.tag){case 22:Eu(u,g),v&2048&&Qh(g.alternate,g);break;case 24:Eu(u,g),v&2048&&Kh(g.alternate,g);break;default:Eu(u,g)}o=o.sibling}}var ki=8192;function nc(a){if(a.subtreeFlags&ki)for(a=a.child;a!==null;)hg(a),a=a.sibling}function hg(a){switch(a.tag){case 26:nc(a),a.flags&ki&&a.memoizedState!==null&&bv(qr,a.memoizedState,a.memoizedProps);break;case 5:nc(a);break;case 3:case 4:var o=qr;qr=kt(a.stateNode.containerInfo),nc(a),qr=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=ki,ki=16777216,nc(a),ki=o):nc(a));break;default:nc(a)}}function mg(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function ic(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var g=o[u];ii=g,gg(g,a)}mg(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)pg(a),a=a.sibling}function pg(a){switch(a.tag){case 0:case 11:case 15:ic(a),a.flags&2048&&ao(9,a,a.return);break;case 3:ic(a);break;case 12:ic(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,af(a)):ic(a);break;default:ic(a)}}function af(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var g=o[u];ii=g,gg(g,a)}mg(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:ao(8,o,o.return),af(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,af(o));break;default:af(o)}a=a.sibling}}function gg(a,o){for(;ii!==null;){var u=ii;switch(u.tag){case 0:case 11:case 15:ao(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Zc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,ii=g;else e:for(u=a;ii!==null;){g=ii;var v=g.sibling,T=g.return;if(lg(g),g===u){ii=null;break e}if(v!==null){v.return=T,ii=v;break e}ii=T}}}var Qx={getCacheForType:function(a){var o=Bn(bn),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u}},Xh=typeof WeakMap=="function"?WeakMap:Map,dn=0,jn=null,qt=null,Kt=0,fn=0,Cr=null,oo=!1,rc=!1,Zh=!1,Ns=0,Vn=0,lo=0,al=0,em=0,Vr=0,ac=0,Au=null,or=null,tm=!1,nm=0,sc=1/0,ku=null,co=null,bi=0,uo=null,oc=null,lc=0,im=0,rm=null,yg=null,cc=0,am=null;function Di(){if((dn&2)!==0&&Kt!==0)return Kt&-Kt;if(X.T!==null){var a=Vl;return a!==0?a:ff()}return gl()}function xg(){Vr===0&&(Vr=(Kt&536870912)===0||Ht?_a():536870912);var a=Sr.current;return a!==null&&(a.flags|=32),Vr}function _r(a,o,u){(a===jn&&(fn===2||fn===9)||a.cancelPendingCommit!==null)&&(uc(a,0),fo(a,Kt,Vr,!1)),Zr(a,u),((dn&2)===0||a!==jn)&&(a===jn&&((dn&2)===0&&(al|=u),Vn===4&&fo(a,Kt,Vr,!1)),Wa(a))}function vg(a,o,u){if((dn&6)!==0)throw Error(i(327));var g=!u&&(o&124)===0&&(o&a.expiredLanes)===0||Dt(a,o),v=g?Zx(a,o):lm(a,o,!0),T=g;do{if(v===0){rc&&!g&&fo(a,o,0,!1);break}else{if(u=a.current.alternate,T&&!Kx(u)){v=lm(a,o,!1),T=!1;continue}if(v===2){if(T=o,a.errorRecoveryDisabledLanes&T)var $=0;else $=a.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){o=$;e:{var Q=a;v=Au;var le=Q.current.memoizedState.isDehydrated;if(le&&(uc(Q,$).flags|=256),$=lm(Q,$,!1),$!==2){if(Zh&&!le){Q.errorRecoveryDisabledLanes|=T,al|=T,v=4;break e}T=or,or=v,T!==null&&(or===null?or=T:or.push.apply(or,T))}v=$}if(T=!1,v!==2)continue}}if(v===1){uc(a,0),fo(a,o,0,!0);break}e:{switch(g=a,T=v,T){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:fo(g,o,Vr,!oo);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=nm+300-tt(),10<v)){if(fo(g,o,Vr,!oo),lt(g,0,!0)!==0)break e;g.timeoutHandle=qg(bg.bind(null,g,u,or,ku,tm,o,Vr,al,ac,oo,T,2,-0,0),v);break e}bg(g,u,or,ku,tm,o,Vr,al,ac,oo,T,0,-0,0)}}break}while(!0);Wa(a)}function bg(a,o,u,g,v,T,$,Q,le,we,ke,Re,Ce,Se){if(a.timeoutHandle=-1,Re=o.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(mi={stylesheets:null,count:0,unsuspend:vv},hg(o),Re=wv(),Re!==null)){a.cancelPendingCommit=Re(Du.bind(null,a,o,T,u,g,v,$,Q,le,ke,1,Ce,Se)),fo(a,T,$,!we);return}Du(a,o,T,u,g,v,$,Q,le)}function Kx(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var v=u[g],T=v.getSnapshot;v=v.value;try{if(!Li(T(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fo(a,o,u,g){o&=~em,o&=~al,a.suspendedLanes|=o,a.pingedLanes&=~o,g&&(a.warmLanes|=o),g=a.expirationTimes;for(var v=o;0<v;){var T=31-rt(v),$=1<<T;g[T]=-1,v&=~$}u!==0&&ad(a,u,o)}function sf(){return(dn&6)===0?(Mu(0),!1):!0}function sm(){if(qt!==null){if(fn===0)var a=qt.return;else a=qt,J=Xs=null,kd(a),ni=null,rr=0,a=qt;for(;a!==null;)rg(a.alternate,a),a=a.return;qt=null}}function uc(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,uv(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),sm(),jn=a,qt=u=Fi(a.current,null),Kt=o,fn=0,Cr=null,oo=!1,rc=Dt(a,o),Zh=!1,ac=Vr=em=al=lo=Vn=0,or=Au=null,tm=!1,(o&8)!==0&&(o|=o&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=o;0<g;){var v=31-rt(g),T=1<<v;o|=a[v],g&=~T}return Ns=o,Kn(),u}function wg(a,o){Lt=null,X.H=mu,o===zi||o===Td?(o=Ep(),fn=3):o===jp?(o=Ep(),fn=4):fn=o===Xp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Cr=o,qt===null&&(Vn=1,vu(a,_t(o,a.current)))}function Sg(){var a=X.H;return X.H=mu,a===null?mu:a}function Ng(){var a=X.A;return X.A=Qx,a}function om(){Vn=4,oo||(Kt&4194048)!==Kt&&Sr.current!==null||(rc=!0),(lo&134217727)===0&&(al&134217727)===0||jn===null||fo(jn,Kt,Vr,!1)}function lm(a,o,u){var g=dn;dn|=2;var v=Sg(),T=Ng();(jn!==a||Kt!==o)&&(ku=null,uc(a,o)),o=!1;var $=Vn;e:do try{if(fn!==0&&qt!==null){var Q=qt,le=Cr;switch(fn){case 8:sm(),$=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(o=!0);var we=fn;if(fn=0,Cr=null,dc(a,Q,le,we),u&&rc){$=0;break e}break;default:we=fn,fn=0,Cr=null,dc(a,Q,le,we)}}Xx(),$=Vn;break}catch(ke){wg(a,ke)}while(!0);return o&&a.shellSuspendCounter++,J=Xs=null,dn=g,X.H=v,X.A=T,qt===null&&(jn=null,Kt=0,Kn()),$}function Xx(){for(;qt!==null;)cm(qt)}function Zx(a,o){var u=dn;dn|=2;var g=Sg(),v=Ng();jn!==a||Kt!==o?(ku=null,sc=tt()+500,uc(a,o)):rc=Dt(a,o);e:do try{if(fn!==0&&qt!==null){o=qt;var T=Cr;t:switch(fn){case 1:fn=0,Cr=null,dc(a,o,T,1);break;case 2:case 9:if(Tp(T)){fn=0,Cr=null,_g(o);break}o=function(){fn!==2&&fn!==9||jn!==a||(fn=7),Wa(a)},T.then(o,o);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:Tp(T)?(fn=0,Cr=null,_g(o)):(fn=0,Cr=null,dc(a,o,T,7));break;case 5:var $=null;switch(qt.tag){case 26:$=qt.memoizedState;case 5:case 27:var Q=qt;if(!$||si($)){fn=0,Cr=null;var le=Q.sibling;if(le!==null)qt=le;else{var we=Q.return;we!==null?(qt=we,of(we)):qt=null}break t}}fn=0,Cr=null,dc(a,o,T,5);break;case 6:fn=0,Cr=null,dc(a,o,T,6);break;case 8:sm(),Vn=6;break e;default:throw Error(i(462))}}Cg();break}catch(ke){wg(a,ke)}while(!0);return J=Xs=null,X.H=g,X.A=v,dn=u,qt!==null?0:(jn=null,Kt=0,Kn(),Vn)}function Cg(){for(;qt!==null&&!ht();)cm(qt)}function cm(a){var o=Xd(a.alternate,a,Ns);a.memoizedProps=a.pendingProps,o===null?of(a):qt=o}function _g(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=Qd(u,o,o.pendingProps,o.type,void 0,Kt);break;case 11:o=Qd(u,o,o.pendingProps,o.type.render,o.ref,Kt);break;case 5:kd(o);default:rg(u,o),o=qt=Yc(o,Ns),o=Xd(u,o,Ns)}a.memoizedProps=a.pendingProps,o===null?of(a):qt=o}function dc(a,o,u,g){J=Xs=null,kd(o),ni=null,rr=0;var v=o.return;try{if(Kp(a,v,o,u,Kt)){Vn=1,vu(a,_t(u,a.current)),qt=null;return}}catch(T){if(v!==null)throw qt=v,T;Vn=1,vu(a,_t(u,a.current)),qt=null;return}o.flags&32768?(Ht||g===1?a=!0:rc||(Kt&536870912)!==0?a=!1:(oo=a=!0,(g===2||g===9||g===3||g===6)&&(g=Sr.current,g!==null&&g.tag===13&&(g.flags|=16384))),jg(o,a)):of(o)}function of(a){var o=a;do{if((o.flags&32768)!==0){jg(o,oo);return}a=o.return;var u=ng(o.alternate,o,Ns);if(u!==null){qt=u;return}if(o=o.sibling,o!==null){qt=o;return}qt=o=a}while(o!==null);Vn===0&&(Vn=5)}function jg(a,o){do{var u=ig(a.alternate,a);if(u!==null){u.flags&=32767,qt=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){qt=a;return}qt=a=u}while(a!==null);Vn=6,qt=null}function Du(a,o,u,g,v,T,$,Q,le){a.cancelPendingCommit=null;do lf();while(bi!==0);if((dn&6)!==0)throw Error(i(327));if(o!==null){if(o===a.current)throw Error(i(177));if(T=o.lanes|o.childLanes,T|=ji,ea(a,u,T,$,Q,le),a===jn&&(qt=jn=null,Kt=0),oc=o,uo=a,lc=u,im=T,rm=v,yg=g,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Mg(tn,function(){return Dg(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||g){g=X.T,X.T=null,v=K.p,K.p=2,$=dn,dn|=4;try{Wx(a,o,u)}finally{dn=$,K.p=v,X.T=g}}bi=1,Tg(),Eg(),Ag()}}function Tg(){if(bi===1){bi=0;var a=uo,o=oc,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=X.T,X.T=null;var g=K.p;K.p=2;var v=dn;dn|=4;try{Jh(o,a);var T=pf,$=bd(a.containerInfo),Q=T.focusedElem,le=T.selectionRange;if($!==Q&&Q&&Q.ownerDocument&&vd(Q.ownerDocument.documentElement,Q)){if(le!==null&&Hc(Q)){var we=le.start,ke=le.end;if(ke===void 0&&(ke=we),"selectionStart"in Q)Q.selectionStart=we,Q.selectionEnd=Math.min(ke,Q.value.length);else{var Re=Q.ownerDocument||document,Ce=Re&&Re.defaultView||window;if(Ce.getSelection){var Se=Ce.getSelection(),gt=Q.textContent.length,pt=Math.min(le.start,gt),gn=le.end===void 0?pt:Math.min(le.end,gt);!Se.extend&&pt>gn&&($=gn,gn=pt,pt=$);var ye=Vc(Q,pt),he=Vc(Q,gn);if(ye&&he&&(Se.rangeCount!==1||Se.anchorNode!==ye.node||Se.anchorOffset!==ye.offset||Se.focusNode!==he.node||Se.focusOffset!==he.offset)){var be=Re.createRange();be.setStart(ye.node,ye.offset),Se.removeAllRanges(),pt>gn?(Se.addRange(be),Se.extend(he.node,he.offset)):(be.setEnd(he.node,he.offset),Se.addRange(be))}}}}for(Re=[],Se=Q;Se=Se.parentNode;)Se.nodeType===1&&Re.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Re.length;Q++){var De=Re[Q];De.element.scrollLeft=De.left,De.element.scrollTop=De.top}}Sf=!!ya,pf=ya=null}finally{dn=v,K.p=g,X.T=u}}a.current=o,bi=2}}function Eg(){if(bi===2){bi=0;var a=uo,o=oc,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=X.T,X.T=null;var g=K.p;K.p=2;var v=dn;dn|=4;try{og(a,o.alternate,o)}finally{dn=v,K.p=g,X.T=u}}bi=3}}function Ag(){if(bi===4||bi===3){bi=0,Cn();var a=uo,o=oc,u=lc,g=yg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?bi=5:(bi=0,oc=uo=null,kg(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(co=null),To(u),o=o.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Ee,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=X.T,v=K.p,K.p=2,X.T=null;try{for(var T=a.onRecoverableError,$=0;$<g.length;$++){var Q=g[$];T(Q.value,{componentStack:Q.stack})}}finally{X.T=o,K.p=v}}(lc&3)!==0&&lf(),Wa(a),v=a.pendingLanes,(u&4194090)!==0&&(v&42)!==0?a===am?cc++:(cc=0,am=a):cc=0,Mu(0)}}function kg(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Zc(o)))}function lf(a){return Tg(),Eg(),Ag(),Dg()}function Dg(){if(bi!==5)return!1;var a=uo,o=im;im=0;var u=To(lc),g=X.T,v=K.p;try{K.p=32>u?32:u,X.T=null,u=rm,rm=null;var T=uo,$=lc;if(bi=0,oc=uo=null,lc=0,(dn&6)!==0)throw Error(i(331));var Q=dn;if(dn|=4,pg(T.current),fg(T,T.current,$,u),dn=Q,Mu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Ee,T)}catch{}return!0}finally{K.p=v,X.T=g,kg(a,o)}}function Pg(a,o,u){o=_t(u,o),o=Gd(a.stateNode,o,2),a=hs(a,o,2),a!==null&&(Zr(a,2),Wa(a))}function Sn(a,o,u){if(a.tag===3)Pg(a,a,u);else for(;o!==null;){if(o.tag===3){Pg(o,a,u);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(co===null||!co.has(g))){a=_t(u,a),u=Bh(2),g=hs(o,u,2),g!==null&&(Qp(u,g,o,a),Zr(g,2),Wa(g));break}}o=o.return}}function um(a,o,u){var g=a.pingCache;if(g===null){g=a.pingCache=new Xh;var v=new Set;g.set(o,v)}else v=g.get(o),v===void 0&&(v=new Set,g.set(o,v));v.has(u)||(Zh=!0,v.add(u),a=ev.bind(null,a,o,u),o.then(a,a))}function ev(a,o,u){var g=a.pingCache;g!==null&&g.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,jn===a&&(Kt&u)===u&&(Vn===4||Vn===3&&(Kt&62914560)===Kt&&300>tt()-nm?(dn&2)===0&&uc(a,0):em|=u,ac===Kt&&(ac=0)),Wa(a)}function Rg(a,o){o===0&&(o=ja()),a=$a(a,o),a!==null&&(Zr(a,o),Wa(a))}function cf(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),Rg(a,u)}function tv(a,o){var u=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(u=v.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(o),Rg(a,u)}function Mg(a,o){return Qe(a,o)}var Pu=null,ho=null,uf=!1,Ru=!1,df=!1,mo=0;function Wa(a){a!==ho&&a.next===null&&(ho===null?Pu=ho=a:ho=ho.next=a),Ru=!0,uf||(uf=!0,dm())}function Mu(a,o){if(!df&&Ru){df=!0;do for(var u=!1,g=Pu;g!==null;){if(a!==0){var v=g.pendingLanes;if(v===0)var T=0;else{var $=g.suspendedLanes,Q=g.pingedLanes;T=(1<<31-rt(42|a)+1)-1,T&=v&~($&~Q),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(u=!0,Og(g,T))}else T=Kt,T=lt(g,g===jn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Dt(g,T)||(u=!0,Og(g,T));g=g.next}while(u);df=!1}}function nv(){Iu()}function Iu(){Ru=uf=!1;var a=0;mo!==0&&(cv()&&(a=mo),mo=0);for(var o=tt(),u=null,g=Pu;g!==null;){var v=g.next,T=Ou(g,o);T===0?(g.next=null,u===null?Pu=v:u.next=v,v===null&&(ho=u)):(u=g,(a!==0||(T&3)!==0)&&(Ru=!0)),g=v}Mu(a)}function Ou(a,o){for(var u=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,T=a.pendingLanes&-62914561;0<T;){var $=31-rt(T),Q=1<<$,le=v[$];le===-1?((Q&u)===0||(Q&g)!==0)&&(v[$]=nn(Q,o)):le<=o&&(a.expiredLanes|=Q),T&=~Q}if(o=jn,u=Kt,u=lt(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,u===0||a===o&&(fn===2||fn===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&$e(g),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Dt(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(g!==null&&$e(g),To(u)){case 2:case 8:u=ei;break;case 32:u=tn;break;case 268435456:u=zn;break;default:u=tn}return g=Ig.bind(null,a),u=Qe(u,g),a.callbackPriority=o,a.callbackNode=u,o}return g!==null&&g!==null&&$e(g),a.callbackPriority=2,a.callbackNode=null,2}function Ig(a,o){if(bi!==0&&bi!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(lf()&&a.callbackNode!==u)return null;var g=Kt;return g=lt(a,a===jn?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(vg(a,g,o),Ou(a,tt()),a.callbackNode!=null&&a.callbackNode===u?Ig.bind(null,a):null)}function Og(a,o){if(lf())return null;vg(a,o,!0)}function dm(){dv(function(){(dn&6)!==0?Qe(Pi,nv):Iu()})}function ff(){return mo===0&&(mo=_a()),mo}function Lg(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Gi(""+a)}function Fg(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function iv(a,o,u,g,v){if(o==="submit"&&u&&u.stateNode===v){var T=Lg((v[Jn]||null).action),$=g.submitter;$&&(o=(o=$[Jn]||null)?Lg(o.formAction):$.getAttribute("formAction"),o!==null&&(T=o,$=null));var Q=new Hs("action","action",null,g,v);a.push({event:Q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(mo!==0){var le=$?Fg(v,$):new FormData(v);fu(u,{pending:!0,data:le,method:v.method,action:T},null,le)}}else typeof T=="function"&&(Q.preventDefault(),le=$?Fg(v,$):new FormData(v),fu(u,{pending:!0,data:le,method:v.method,action:T},T,le))},currentTarget:v}]})}}for(var fm=0;fm<mt.length;fm++){var hm=mt[fm],rv=hm.toLowerCase(),av=hm[0].toUpperCase()+hm.slice(1);Pt(rv,"on"+av)}Pt(Un,"onAnimationEnd"),Pt(Ye,"onAnimationIteration"),Pt(Ke,"onAnimationStart"),Pt("dblclick","onDoubleClick"),Pt("focusin","onFocus"),Pt("focusout","onBlur"),Pt(Ue,"onTransitionRun"),Pt(dt,"onTransitionStart"),Pt(ct,"onTransitionCancel"),Pt(at,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function zg(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var g=a[u],v=g.event;g=g.listeners;e:{var T=void 0;if(o)for(var $=g.length-1;0<=$;$--){var Q=g[$],le=Q.instance,we=Q.currentTarget;if(Q=Q.listener,le!==T&&v.isPropagationStopped())break e;T=Q,v.currentTarget=we;try{T(v)}catch(ke){nl(ke)}v.currentTarget=null,T=le}else for($=0;$<g.length;$++){if(Q=g[$],le=Q.instance,we=Q.currentTarget,Q=Q.listener,le!==T&&v.isPropagationStopped())break e;T=Q,v.currentTarget=we;try{T(v)}catch(ke){nl(ke)}v.currentTarget=null,T=le}}}}function Vt(a,o){var u=o[yl];u===void 0&&(u=o[yl]=new Set);var g=a+"__bubble";u.has(g)||($g(o,a,2,!1),u.add(g))}function mm(a,o,u){var g=0;o&&(g|=4),$g(u,a,g,o)}var lr="_reactListening"+Math.random().toString(36).slice(2);function pm(a){if(!a[lr]){a[lr]=!0,od.forEach(function(u){u!=="selectionchange"&&(sv.has(u)||mm(u,!1,a),mm(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[lr]||(o[lr]=!0,mm("selectionchange",!1,o))}}function $g(a,o,u,g){switch(ay(o)){case 2:var v=Cv;break;case 8:v=xc;break;default:v=_m}u=v.bind(null,o,u,a),v=void 0,!Vs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(o,u,{capture:!0,passive:v}):a.addEventListener(o,u,!0):v!==void 0?a.addEventListener(o,u,{passive:v}):a.addEventListener(o,u,!1)}function Cs(a,o,u,g,v){var T=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var $=g.tag;if($===3||$===4){var Q=g.stateNode.containerInfo;if(Q===v)break;if($===4)for($=g.return;$!==null;){var le=$.tag;if((le===3||le===4)&&$.stateNode.containerInfo===v)return;$=$.return}for(;Q!==null;){if($=Aa(Q),$===null)return;if(le=$.tag,le===5||le===6||le===26||le===27){g=T=$;continue e}Q=Q.parentNode}}g=g.return}Fc(function(){var we=T,ke=jl(u),Re=[];e:{var Ce=wt.get(a);if(Ce!==void 0){var Se=Hs,gt=a;switch(a){case"keypress":if(sn(u)===0)break e;case"keydown":case"keyup":Se=Uc;break;case"focusin":gt="focus",Se=aa;break;case"focusout":gt="blur",Se=aa;break;case"beforeblur":case"afterblur":Se=aa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=ss;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=sh;break;case Un:case Ye:case Ke:Se=Pl;break;case at:Se=oh;break;case"scroll":case"scrollend":Se=Oo;break;case"wheel":Se=lh;break;case"copy":case"cut":case"paste":Se=ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=sa;break;case"toggle":case"beforetoggle":Se=yr}var pt=(o&4)!==0,gn=!pt&&(a==="scroll"||a==="scrollend"),ye=pt?Ce!==null?Ce+"Capture":null:Ce;pt=[];for(var he=we,be;he!==null;){var De=he;if(be=De.stateNode,De=De.tag,De!==5&&De!==26&&De!==27||be===null||ye===null||(De=rs(he,ye),De!=null&&pt.push(jt(he,De,be))),gn)break;he=he.return}0<pt.length&&(Ce=new Se(Ce,gt,null,u,ke),Re.push({event:Ce,listeners:pt}))}}if((o&7)===0){e:{if(Ce=a==="mouseover"||a==="pointerover",Se=a==="mouseout"||a==="pointerout",Ce&&u!==Bs&&(gt=u.relatedTarget||u.fromElement)&&(Aa(gt)||gt[Ea]))break e;if((Se||Ce)&&(Ce=ke.window===ke?ke:(Ce=ke.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Se?(gt=u.relatedTarget||u.toElement,Se=we,gt=gt?Aa(gt):null,gt!==null&&(gn=l(gt),pt=gt.tag,gt!==gn||pt!==5&&pt!==27&&pt!==6)&&(gt=null)):(Se=null,gt=we),Se!==gt)){if(pt=Rr,De="onMouseLeave",ye="onMouseEnter",he="mouse",(a==="pointerout"||a==="pointerover")&&(pt=sa,De="onPointerLeave",ye="onPointerEnter",he="pointer"),gn=Se==null?Ce:es(Se),be=gt==null?Ce:es(gt),Ce=new pt(De,he+"leave",Se,u,ke),Ce.target=gn,Ce.relatedTarget=be,De=null,Aa(ke)===we&&(pt=new pt(ye,he+"enter",gt,u,ke),pt.target=be,pt.relatedTarget=gn,De=pt),gn=De,Se&&gt)t:{for(pt=Se,ye=gt,he=0,be=pt;be;be=ri(be))he++;for(be=0,De=ye;De;De=ri(De))be++;for(;0<he-be;)pt=ri(pt),he--;for(;0<be-he;)ye=ri(ye),be--;for(;he--;){if(pt===ye||ye!==null&&pt===ye.alternate)break t;pt=ri(pt),ye=ri(ye)}pt=null}else pt=null;Se!==null&&Hn(Re,Ce,Se,pt,!1),gt!==null&&gn!==null&&Hn(Re,gn,gt,pt,!0)}}e:{if(Ce=we?es(we):window,Se=Ce.nodeName&&Ce.nodeName.toLowerCase(),Se==="select"||Se==="input"&&Ce.type==="file")var et=md;else if(Fl(Ce))if(pd)et=Ul;else{et=di;var Ut=xd}else Se=Ce.nodeName,!Se||Se.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?we&&Io(we.elementType)&&(et=md):et=$l;if(et&&(et=et(a,we))){Ws(Re,et,u,ke);break e}Ut&&Ut(a,Ce,we),a==="focusout"&&we&&Ce.type==="number"&&we.memoizedProps.value!=null&&Ia(Ce,"number",Ce.value)}switch(Ut=we?es(we):window,a){case"focusin":(Fl(Ut)||Ut.contentEditable==="true")&&(cs=Ut,ua=we,O=null);break;case"focusout":O=ua=cs=null;break;case"mousedown":G=!0;break;case"contextmenu":case"mouseup":case"dragend":G=!1,W(Re,u,ke);break;case"selectionchange":if(dh)break;case"keydown":case"keyup":W(Re,u,ke)}var ot;if(xr)e:{switch(a){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ca?dd(a,u)&&(yt="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(yt="onCompositionStart");yt&&(zo&&u.locale!=="ko"&&(ca||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ca&&(ot=Al()):(Fa=ke,Tl="value"in Fa?Fa.value:Fa.textContent,ca=!0)),Ut=hf(we,yt),0<Ut.length&&(yt=new _i(yt,a,null,u,ke),Re.push({event:yt,listeners:Ut}),ot?yt.data=ot:(ot=Ll(u),ot!==null&&(yt.data=ot)))),(ot=Il?ch(a,u):fd(a,u))&&(yt=hf(we,"onBeforeInput"),0<yt.length&&(Ut=new _i("onBeforeInput","beforeinput",null,u,ke),Re.push({event:Ut,listeners:yt}),Ut.data=ot)),iv(Re,a,we,u,ke)}zg(Re,o)})}function jt(a,o,u){return{instance:a,listener:o,currentTarget:u}}function hf(a,o){for(var u=o+"Capture",g=[];a!==null;){var v=a,T=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||T===null||(v=rs(a,u),v!=null&&g.unshift(jt(a,v,T)),v=rs(a,o),v!=null&&g.push(jt(a,v,T))),a.tag===3)return g;a=a.return}return[]}function ri(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Hn(a,o,u,g,v){for(var T=o._reactName,$=[];u!==null&&u!==g;){var Q=u,le=Q.alternate,we=Q.stateNode;if(Q=Q.tag,le!==null&&le===g)break;Q!==5&&Q!==26&&Q!==27||we===null||(le=we,v?(we=rs(u,T),we!=null&&$.unshift(jt(u,we,le))):v||(we=rs(u,T),we!=null&&$.push(jt(u,we,le)))),u=u.return}$.length!==0&&a.push({event:o,listeners:$})}var ov=/\r\n?/g,po=/\u0000|\uFFFD/g;function Ug(a){return(typeof a=="string"?a:""+a).replace(ov,`
`).replace(po,"")}function Bg(a,o){return o=Ug(o),Ug(a)===o}function mf(){}function pn(a,o,u,g,v,T){switch(u){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||kr(a,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&kr(a,""+g);break;case"className":Do(a,"class",g);break;case"tabIndex":Do(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(a,u,g);break;case"style":Mo(a,g,T);break;case"data":if(o!=="object"){Do(a,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Gi(""+g),a.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(u==="formAction"?(o!=="input"&&pn(a,o,"name",v.name,v,null),pn(a,o,"formEncType",v.formEncType,v,null),pn(a,o,"formMethod",v.formMethod,v,null),pn(a,o,"formTarget",v.formTarget,v,null)):(pn(a,o,"encType",v.encType,v,null),pn(a,o,"method",v.method,v,null),pn(a,o,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(u);break}g=Gi(""+g),a.setAttribute(u,g);break;case"onClick":g!=null&&(a.onclick=mf);break;case"onScroll":g!=null&&Vt("scroll",a);break;case"onScrollEnd":g!=null&&Vt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(u=g.__html,u!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}u=Gi(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""+g):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":g===!0?a.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(u,g):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(u,g):a.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(u):a.setAttribute(u,g);break;case"popover":Vt("beforetoggle",a),Vt("toggle",a),ko(a,"popover",g);break;case"xlinkActuate":Ni(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ni(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ni(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ni(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ni(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ni(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ni(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ni(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ni(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ko(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Cl.get(u)||u,ko(a,u,g))}}function gm(a,o,u,g,v,T){switch(u){case"style":Mo(a,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(u=g.__html,u!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"children":typeof g=="string"?kr(a,g):(typeof g=="number"||typeof g=="bigint")&&kr(a,""+g);break;case"onScroll":g!=null&&Vt("scroll",a);break;case"onScrollEnd":g!=null&&Vt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=mf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),T=a[Jn]||null,T=T!=null?T[u]:null,typeof T=="function"&&a.removeEventListener(o,T,v),typeof g=="function")){typeof T!="function"&&T!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,g,v);break e}u in a?a[u]=g:g===!0?a.setAttribute(u,""):ko(a,u,g)}}}function ai(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",a),Vt("load",a);var g=!1,v=!1,T;for(T in u)if(u.hasOwnProperty(T)){var $=u[T];if($!=null)switch(T){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pn(a,o,T,$,u,null)}}v&&pn(a,o,"srcSet",u.srcSet,u,null),g&&pn(a,o,"src",u.src,u,null);return;case"input":Vt("invalid",a);var Q=T=$=v=null,le=null,we=null;for(g in u)if(u.hasOwnProperty(g)){var ke=u[g];if(ke!=null)switch(g){case"name":v=ke;break;case"type":$=ke;break;case"checked":le=ke;break;case"defaultChecked":we=ke;break;case"value":T=ke;break;case"defaultValue":Q=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,o));break;default:pn(a,o,g,ke,u,null)}}zs(a,T,Q,le,we,$,v,!1),Po(a);return;case"select":Vt("invalid",a),g=$=T=null;for(v in u)if(u.hasOwnProperty(v)&&(Q=u[v],Q!=null))switch(v){case"value":T=Q;break;case"defaultValue":$=Q;break;case"multiple":g=Q;default:pn(a,o,v,Q,u,null)}o=T,u=$,a.multiple=!!g,o!=null?is(a,!!g,o,!1):u!=null&&is(a,!!g,u,!0);return;case"textarea":Vt("invalid",a),T=v=g=null;for($ in u)if(u.hasOwnProperty($)&&(Q=u[$],Q!=null))switch($){case"value":g=Q;break;case"defaultValue":v=Q;break;case"children":T=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(91));break;default:pn(a,o,$,Q,u,null)}Us(a,g,v,T),Po(a);return;case"option":for(le in u)if(u.hasOwnProperty(le)&&(g=u[le],g!=null))switch(le){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:pn(a,o,le,g,u,null)}return;case"dialog":Vt("beforetoggle",a),Vt("toggle",a),Vt("cancel",a),Vt("close",a);break;case"iframe":case"object":Vt("load",a);break;case"video":case"audio":for(g=0;g<Lu.length;g++)Vt(Lu[g],a);break;case"image":Vt("error",a),Vt("load",a);break;case"details":Vt("toggle",a);break;case"embed":case"source":case"link":Vt("error",a),Vt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in u)if(u.hasOwnProperty(we)&&(g=u[we],g!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:pn(a,o,we,g,u,null)}return;default:if(Io(o)){for(ke in u)u.hasOwnProperty(ke)&&(g=u[ke],g!==void 0&&gm(a,o,ke,g,u,void 0));return}}for(Q in u)u.hasOwnProperty(Q)&&(g=u[Q],g!=null&&pn(a,o,Q,g,u,null))}function lv(a,o,u,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,T=null,$=null,Q=null,le=null,we=null,ke=null;for(Se in u){var Re=u[Se];if(u.hasOwnProperty(Se)&&Re!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":le=Re;default:g.hasOwnProperty(Se)||pn(a,o,Se,null,g,Re)}}for(var Ce in g){var Se=g[Ce];if(Re=u[Ce],g.hasOwnProperty(Ce)&&(Se!=null||Re!=null))switch(Ce){case"type":T=Se;break;case"name":v=Se;break;case"checked":we=Se;break;case"defaultChecked":ke=Se;break;case"value":$=Se;break;case"defaultValue":Q=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,o));break;default:Se!==Re&&pn(a,o,Ce,Se,g,Re)}}ns(a,$,Q,le,we,ke,T,v);return;case"select":Se=$=Q=Ce=null;for(T in u)if(le=u[T],u.hasOwnProperty(T)&&le!=null)switch(T){case"value":break;case"multiple":Se=le;default:g.hasOwnProperty(T)||pn(a,o,T,null,g,le)}for(v in g)if(T=g[v],le=u[v],g.hasOwnProperty(v)&&(T!=null||le!=null))switch(v){case"value":Ce=T;break;case"defaultValue":Q=T;break;case"multiple":$=T;default:T!==le&&pn(a,o,v,T,g,le)}o=Q,u=$,g=Se,Ce!=null?is(a,!!u,Ce,!1):!!g!=!!u&&(o!=null?is(a,!!u,o,!0):is(a,!!u,u?[]:"",!1));return;case"textarea":Se=Ce=null;for(Q in u)if(v=u[Q],u.hasOwnProperty(Q)&&v!=null&&!g.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:pn(a,o,Q,null,g,v)}for($ in g)if(v=g[$],T=u[$],g.hasOwnProperty($)&&(v!=null||T!=null))switch($){case"value":Ce=v;break;case"defaultValue":Se=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==T&&pn(a,o,$,v,g,T)}$s(a,Ce,Se);return;case"option":for(var gt in u)if(Ce=u[gt],u.hasOwnProperty(gt)&&Ce!=null&&!g.hasOwnProperty(gt))switch(gt){case"selected":a.selected=!1;break;default:pn(a,o,gt,null,g,Ce)}for(le in g)if(Ce=g[le],Se=u[le],g.hasOwnProperty(le)&&Ce!==Se&&(Ce!=null||Se!=null))switch(le){case"selected":a.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:pn(a,o,le,Ce,g,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in u)Ce=u[pt],u.hasOwnProperty(pt)&&Ce!=null&&!g.hasOwnProperty(pt)&&pn(a,o,pt,null,g,Ce);for(we in g)if(Ce=g[we],Se=u[we],g.hasOwnProperty(we)&&Ce!==Se&&(Ce!=null||Se!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,o));break;default:pn(a,o,we,Ce,g,Se)}return;default:if(Io(o)){for(var gn in u)Ce=u[gn],u.hasOwnProperty(gn)&&Ce!==void 0&&!g.hasOwnProperty(gn)&&gm(a,o,gn,void 0,g,Ce);for(ke in g)Ce=g[ke],Se=u[ke],!g.hasOwnProperty(ke)||Ce===Se||Ce===void 0&&Se===void 0||gm(a,o,ke,Ce,g,Se);return}}for(var ye in u)Ce=u[ye],u.hasOwnProperty(ye)&&Ce!=null&&!g.hasOwnProperty(ye)&&pn(a,o,ye,null,g,Ce);for(Re in g)Ce=g[Re],Se=u[Re],!g.hasOwnProperty(Re)||Ce===Se||Ce==null&&Se==null||pn(a,o,Re,Ce,g,Se)}var ya=null,pf=null;function sl(a){return a.nodeType===9?a:a.ownerDocument}function In(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ln(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function gf(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ym=null;function cv(){var a=window.event;return a&&a.type==="popstate"?a===ym?!1:(ym=a,!0):(ym=null,!1)}var qg=typeof setTimeout=="function"?setTimeout:void 0,uv=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,dv=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(a){return Vg.resolve(null).then(a).catch(Hg)}:qg;function Hg(a){setTimeout(function(){throw a})}function Hr(a){return a==="head"}function yf(a,o){var u=o,g=0,v=0;do{var T=u.nextSibling;if(a.removeChild(u),T&&T.nodeType===8)if(u=T.data,u==="/$"){if(0<g&&8>g){u=g;var $=a.ownerDocument;if(u&1&&Fu($.documentElement),u&2&&Fu($.body),u&4)for(u=$.head,Fu(u),$=u.firstChild;$;){var Q=$.nextSibling,le=$.nodeName;$[Os]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&$.rel.toLowerCase()==="stylesheet"||u.removeChild($),$=Q}}if(v===0){a.removeChild(T),Gu(o);return}v--}else u==="$"||u==="$?"||u==="$!"?v++:g=u.charCodeAt(0)-48;else g=0;u=T}while(u);Gu(o)}function xm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":xm(u),Ao(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function Gg(a,o,u,g){for(;a.nodeType===1;){var v=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Os])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(T=a.getAttribute("rel"),T==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(T!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(T=a.getAttribute("src"),(T!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&T&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var T=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===T)return a}else return a;if(a=xa(a.nextSibling),a===null)break}return null}function xf(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=xa(a.nextSibling),a===null))return null;return a}function Bi(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function fc(a,o){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")o();else{var g=function(){o(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function xa(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var vm=null;function Yg(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return a;o--}else u==="/$"&&o++}a=a.previousSibling}return null}function Wg(a,o,u){switch(o=sl(u),a){case"html":if(a=o.documentElement,!a)throw Error(i(452));return a;case"head":if(a=o.head,!a)throw Error(i(453));return a;case"body":if(a=o.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Fu(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ao(a)}var jr=new Map,Ja=new Set;function kt(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Qa=K.d;K.d={f:Gr,r:Jg,D:fv,C:Qg,L:vf,m:hv,X:pv,S:mv,M:gv};function Gr(){var a=Qa.f(),o=sf();return a||o}function Jg(a){var o=Ls(a);o!==null&&o.tag===5&&o.type==="form"?Bd(o):Qa.r(a)}var hc=typeof document>"u"?null:document;function on(a,o,u){var g=hc;if(g&&typeof o=="string"&&o){var v=Ri(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Ja.has(v)||(Ja.add(v),a={rel:a,crossOrigin:u,href:o},g.querySelector(v)===null&&(o=g.createElement("link"),ai(o,"link",a),$n(o),g.head.appendChild(o)))}}function fv(a){Qa.D(a),on("dns-prefetch",a,null)}function Qg(a,o){Qa.C(a,o),on("preconnect",a,o)}function vf(a,o,u){Qa.L(a,o,u);var g=hc;if(g&&a&&o){var v='link[rel="preload"][as="'+Ri(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Ri(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Ri(u.imageSizes)+'"]')):v+='[href="'+Ri(a)+'"]';var T=v;switch(o){case"style":T=mc(a);break;case"script":T=pc(a)}jr.has(T)||(a=y({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),jr.set(T,a),g.querySelector(v)!==null||o==="style"&&g.querySelector(zu(T))||o==="script"&&g.querySelector($u(T))||(o=g.createElement("link"),ai(o,"link",a),$n(o),g.head.appendChild(o)))}}function hv(a,o){Qa.m(a,o);var u=hc;if(u&&a){var g=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Ri(g)+'"][href="'+Ri(a)+'"]',T=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=pc(a)}if(!jr.has(T)&&(a=y({rel:"modulepreload",href:a},o),jr.set(T,a),u.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($u(T)))return}g=u.createElement("link"),ai(g,"link",a),$n(g),u.head.appendChild(g)}}}function mv(a,o,u){Qa.S(a,o,u);var g=hc;if(g&&a){var v=ka(g).hoistableStyles,T=mc(a);o=o||"default";var $=v.get(T);if(!$){var Q={loading:0,preload:null};if($=g.querySelector(zu(T)))Q.loading=5;else{a=y({rel:"stylesheet",href:a,"data-precedence":o},u),(u=jr.get(T))&&Uu(a,u);var le=$=g.createElement("link");$n(le),ai(le,"link",a),le._p=new Promise(function(we,ke){le.onload=we,le.onerror=ke}),le.addEventListener("load",function(){Q.loading|=1}),le.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,bf($,o,g)}$={type:"stylesheet",instance:$,count:1,state:Q},v.set(T,$)}}}function pv(a,o){Qa.X(a,o);var u=hc;if(u&&a){var g=ka(u).hoistableScripts,v=pc(a),T=g.get(v);T||(T=u.querySelector($u(v)),T||(a=y({src:a,async:!0},o),(o=jr.get(v))&&bm(a,o),T=u.createElement("script"),$n(T),ai(T,"link",a),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(v,T))}}function gv(a,o){Qa.M(a,o);var u=hc;if(u&&a){var g=ka(u).hoistableScripts,v=pc(a),T=g.get(v);T||(T=u.querySelector($u(v)),T||(a=y({src:a,async:!0,type:"module"},o),(o=jr.get(v))&&bm(a,o),T=u.createElement("script"),$n(T),ai(T,"link",a),u.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(v,T))}}function Kg(a,o,u,g){var v=(v=ue.current)?kt(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=mc(u.href),u=ka(v).hoistableStyles,g=u.get(o),g||(g={type:"style",instance:null,count:0,state:null},u.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=mc(u.href);var T=ka(v).hoistableStyles,$=T.get(a);if($||(v=v.ownerDocument||v,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(a,$),(T=v.querySelector(zu(a)))&&!T._p&&($.instance=T,$.state.loading=5),jr.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},jr.set(a,u),T||yv(v,a,u,$.state))),o&&g===null)throw Error(i(528,""));return $}if(o&&g!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=pc(u),u=ka(v).hoistableScripts,g=u.get(o),g||(g={type:"script",instance:null,count:0,state:null},u.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function mc(a){return'href="'+Ri(a)+'"'}function zu(a){return'link[rel="stylesheet"]['+a+"]"}function Xg(a){return y({},a,{"data-precedence":a.precedence,precedence:null})}function yv(a,o,u,g){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=a.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),ai(o,"link",u),$n(o),a.head.appendChild(o))}function pc(a){return'[src="'+Ri(a)+'"]'}function $u(a){return"script[async]"+a}function Zg(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var g=a.querySelector('style[data-href~="'+Ri(u.href)+'"]');if(g)return o.instance=g,$n(g),g;var v=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),$n(g),ai(g,"style",v),bf(g,u.precedence,a),o.instance=g;case"stylesheet":v=mc(u.href);var T=a.querySelector(zu(v));if(T)return o.state.loading|=4,o.instance=T,$n(T),T;g=Xg(u),(v=jr.get(v))&&Uu(g,v),T=(a.ownerDocument||a).createElement("link"),$n(T);var $=T;return $._p=new Promise(function(Q,le){$.onload=Q,$.onerror=le}),ai(T,"link",g),o.state.loading|=4,bf(T,u.precedence,a),o.instance=T;case"script":return T=pc(u.src),(v=a.querySelector($u(T)))?(o.instance=v,$n(v),v):(g=u,(v=jr.get(T))&&(g=y({},u),bm(g,v)),a=a.ownerDocument||a,v=a.createElement("script"),$n(v),ai(v,"link",g),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(g=o.instance,o.state.loading|=4,bf(g,u.precedence,a));return o.instance}function bf(a,o,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,T=v,$=0;$<g.length;$++){var Q=g[$];if(Q.dataset.precedence===o)T=Q;else if(T!==v)break}T?T.parentNode.insertBefore(a,T.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function Uu(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function bm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var gc=null;function ey(a,o,u){if(gc===null){var g=new Map,v=gc=new Map;v.set(u,g)}else v=gc,g=v.get(u),g||(g=new Map,v.set(u,g));if(g.has(a))return g;for(g.set(a,null),u=u.getElementsByTagName(a),v=0;v<u.length;v++){var T=u[v];if(!(T[Os]||T[Dn]||a==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var $=T.getAttribute(o)||"";$=a+$;var Q=g.get($);Q?Q.push(T):g.set($,[T])}}return g}function ty(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function xv(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function si(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var mi=null;function vv(){}function bv(a,o,u){if(mi===null)throw Error(i(475));var g=mi;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var v=mc(u.href),T=a.querySelector(zu(v));if(T){a=T._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=Bu.bind(g),a.then(g,g)),o.state.loading|=4,o.instance=T,$n(T);return}T=a.ownerDocument||a,u=Xg(u),(v=jr.get(v))&&Uu(u,v),T=T.createElement("link"),$n(T);var $=T;$._p=new Promise(function(Q,le){$.onload=Q,$.onerror=le}),ai(T,"link",u),o.instance=T}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(g.count++,o=Bu.bind(g),a.addEventListener("load",o),a.addEventListener("error",o))}}function wv(){if(mi===null)throw Error(i(475));var a=mi;return a.stylesheets&&a.count===0&&wm(a,a.stylesheets),0<a.count?function(o){var u=setTimeout(function(){if(a.stylesheets&&wm(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(u)}}:null}function Bu(){if(this.count--,this.count===0){if(this.stylesheets)wm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var wf=null;function wm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,wf=new Map,o.forEach(Sv,a),wf=null,Bu.call(a))}function Sv(a,o){if(!(o.state.loading&4)){var u=wf.get(a);if(u)var g=u.get(null);else{u=new Map,wf.set(a,u);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<v.length;T++){var $=v[T];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(u.set($.dataset.precedence,$),g=$)}g&&u.set(null,g)}v=o.instance,$=v.getAttribute("data-precedence"),T=u.get($)||g,T===g&&u.set(null,v),u.set($,v),this.count++,g=Bu.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),T?T.parentNode.insertBefore(v,T.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var yc={$$typeof:R,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Nv(a,o,u,g,v,T,$,Q){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=T,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function ny(a,o,u,g,v,T,$,Q,le,we,ke,Re){return a=new Nv(a,o,u,$,Q,le,we,Re),o=1,T===!0&&(o|=24),T=Xi(3,null,null,o),a.current=T,T.stateNode=a,o=ph(),o.refCount++,a.pooledCache=o,o.refCount++,T.memoizedState={element:g,isDehydrated:u,cache:o},Yo(T),a}function iy(a){return a?(a=$o,a):$o}function Sm(a,o,u,g,v,T){v=iy(v),g.context===null?g.context=v:g.pendingContext=v,g=Zs(o),g.payload={element:u},T=T===void 0?null:T,T!==null&&(g.callback=T),u=hs(a,g,o),u!==null&&(_r(u,a,o),tu(u,a,o))}function Nm(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function Cm(a,o){Nm(a,o),(a=a.alternate)&&Nm(a,o)}function ry(a){if(a.tag===13){var o=$a(a,67108864);o!==null&&_r(o,a,67108864),Cm(a,67108864)}}var Sf=!0;function Cv(a,o,u,g){var v=X.T;X.T=null;var T=K.p;try{K.p=2,_m(a,o,u,g)}finally{K.p=T,X.T=v}}function xc(a,o,u,g){var v=X.T;X.T=null;var T=K.p;try{K.p=8,_m(a,o,u,g)}finally{K.p=T,X.T=v}}function _m(a,o,u,g){if(Sf){var v=jm(g);if(v===null)Cs(a,o,g,Nf,u),sy(a,g);else if(jv(v,a,o,u,g))g.stopPropagation();else if(sy(a,g),o&4&&-1<_v.indexOf(a)){for(;v!==null;){var T=Ls(v);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var $=Ve(T.pendingLanes);if($!==0){var Q=T;for(Q.pendingLanes|=2,Q.entangledLanes|=2;$;){var le=1<<31-rt($);Q.entanglements[1]|=le,$&=~le}Wa(T),(dn&6)===0&&(sc=tt()+500,Mu(0))}}break;case 13:Q=$a(T,2),Q!==null&&_r(Q,T,2),sf(),Cm(T,2)}if(T=jm(g),T===null&&Cs(a,o,g,Nf,u),T===v)break;v=T}v!==null&&g.stopPropagation()}else Cs(a,o,g,null,u)}}function jm(a){return a=jl(a),Tm(a)}var Nf=null;function Tm(a){if(Nf=null,a=Aa(a),a!==null){var o=l(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=c(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Nf=a,null}function ay(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(li()){case Pi:return 2;case ei:return 8;case tn:case vi:return 32;case zn:return 268435456;default:return 32}default:return 32}}var Cf=!1,_s=null,go=null,yo=null,qu=new Map,Vu=new Map,xo=[],_v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sy(a,o){switch(a){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":qu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(o.pointerId)}}function Hu(a,o,u,g,v,T){return a===null||a.nativeEvent!==T?(a={blockedOn:o,domEventName:u,eventSystemFlags:g,nativeEvent:T,targetContainers:[v]},o!==null&&(o=Ls(o),o!==null&&ry(o)),a):(a.eventSystemFlags|=g,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function jv(a,o,u,g,v){switch(o){case"focusin":return _s=Hu(_s,a,o,u,g,v),!0;case"dragenter":return go=Hu(go,a,o,u,g,v),!0;case"mouseover":return yo=Hu(yo,a,o,u,g,v),!0;case"pointerover":var T=v.pointerId;return qu.set(T,Hu(qu.get(T)||null,a,o,u,g,v)),!0;case"gotpointercapture":return T=v.pointerId,Vu.set(T,Hu(Vu.get(T)||null,a,o,u,g,v)),!0}return!1}function oy(a){var o=Aa(a.target);if(o!==null){var u=l(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){a.blockedOn=o,ah(a.priority,function(){if(u.tag===13){var g=Di();g=pl(g);var v=$a(u,g);v!==null&&_r(v,u,g),Cm(u,g)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _f(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=jm(a.nativeEvent);if(u===null){u=a.nativeEvent;var g=new u.constructor(u.type,u);Bs=g,u.target.dispatchEvent(g),Bs=null}else return o=Ls(u),o!==null&&ry(o),a.blockedOn=u,!1;o.shift()}return!0}function ly(a,o,u){_f(a)&&u.delete(o)}function Tv(){Cf=!1,_s!==null&&_f(_s)&&(_s=null),go!==null&&_f(go)&&(go=null),yo!==null&&_f(yo)&&(yo=null),qu.forEach(ly),Vu.forEach(ly)}function jf(a,o){a.blockedOn===o&&(a.blockedOn=null,Cf||(Cf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Tv)))}var Tf=null;function cy(a){Tf!==a&&(Tf=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Tf===a&&(Tf=null);for(var o=0;o<a.length;o+=3){var u=a[o],g=a[o+1],v=a[o+2];if(typeof g!="function"){if(Tm(g||u)===null)continue;break}var T=Ls(u);T!==null&&(a.splice(o,3),o-=3,fu(T,{pending:!0,data:v,method:u.method,action:g},g,v))}}))}function Gu(a){function o(le){return jf(le,a)}_s!==null&&jf(_s,a),go!==null&&jf(go,a),yo!==null&&jf(yo,a),qu.forEach(o),Vu.forEach(o);for(var u=0;u<xo.length;u++){var g=xo[u];g.blockedOn===a&&(g.blockedOn=null)}for(;0<xo.length&&(u=xo[0],u.blockedOn===null);)oy(u),u.blockedOn===null&&xo.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var v=u[g],T=u[g+1],$=v[Jn]||null;if(typeof T=="function")$||cy(u);else if($){var Q=null;if(T&&T.hasAttribute("formAction")){if(v=T,$=T[Jn]||null)Q=$.formAction;else if(Tm(v)!==null)continue}else Q=$.action;typeof Q=="function"?u[g+1]=Q:(u.splice(g,3),g-=3),cy(u)}}}function Em(a){this._internalRoot=a}Ef.prototype.render=Em.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,g=Di();Sm(u,g,a,o,null,null)},Ef.prototype.unmount=Em.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Sm(a.current,2,null,a,null,null),sf(),o[Ea]=null}};function Ef(a){this._internalRoot=a}Ef.prototype.unstable_scheduleHydration=function(a){if(a){var o=gl();a={blockedOn:null,target:a,priority:o};for(var u=0;u<xo.length&&o!==0&&o<xo[u].priority;u++);xo.splice(u,0,a),u===0&&oy(a)}};var uy=n.version;if(uy!=="19.1.0")throw Error(i(527,uy,"19.1.0"));K.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=m(o),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Ev={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Ee=Af.inject(Ev),Le=Af}catch{}}return km.createRoot=function(a,o){if(!s(a))throw Error(i(299));var u=!1,g="",v=Uh,T=Hd,$=Jp,Q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&($=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(Q=o.unstable_transitionCallbacks)),o=ny(a,1,!1,null,null,u,g,v,T,$,Q,null),a[Ea]=o.current,pm(a),new Em(o)},km.hydrateRoot=function(a,o,u){if(!s(a))throw Error(i(299));var g=!1,v="",T=Uh,$=Hd,Q=Jp,le=null,we=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&($=u.onCaughtError),u.onRecoverableError!==void 0&&(Q=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(le=u.unstable_transitionCallbacks),u.formState!==void 0&&(we=u.formState)),o=ny(a,1,!0,o,u??null,g,v,T,$,Q,le,we),o.context=iy(null),u=o.current,g=Di(),g=pl(g),v=Zs(g),v.callback=null,hs(u,v,g),u=g,o.current.lanes=u,Zr(o,u),Wa(o),a[Ea]=o.current,pm(a),new Ef(o)},km.version="19.1.0",km}var w1;function YT(){if(w1)return Mv.exports;w1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Mv.exports=GT(),Mv.exports}var WT=YT(),Dm={},S1;function JT(){if(S1)return Dm;S1=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.parse=c,Dm.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function c(S,w){const j=new l,E=S.length;if(E<2)return j;const A=(w==null?void 0:w.decode)||y;let k=0;do{const P=S.indexOf("=",k);if(P===-1)break;const R=S.indexOf(";",k),Y=R===-1?E:R;if(P>Y){k=S.lastIndexOf(";",P-1)+1;continue}const F=h(S,k,P),q=m(S,P,F),z=S.slice(F,q);if(j[z]===void 0){let L=h(S,P+1,Y),V=m(S,Y,L);const M=A(S.slice(L,V));j[z]=M}k=Y+1}while(k<E);return j}function h(S,w,j){do{const E=S.charCodeAt(w);if(E!==32&&E!==9)return w}while(++w<j);return j}function m(S,w,j){for(;w>j;){const E=S.charCodeAt(--w);if(E!==32&&E!==9)return w+1}return j}function f(S,w,j){const E=(j==null?void 0:j.encode)||encodeURIComponent;if(!t.test(S))throw new TypeError(`argument name is invalid: ${S}`);const A=E(w);if(!n.test(A))throw new TypeError(`argument val is invalid: ${w}`);let k=S+"="+A;if(!j)return k;if(j.maxAge!==void 0){if(!Number.isInteger(j.maxAge))throw new TypeError(`option maxAge is invalid: ${j.maxAge}`);k+="; Max-Age="+j.maxAge}if(j.domain){if(!e.test(j.domain))throw new TypeError(`option domain is invalid: ${j.domain}`);k+="; Domain="+j.domain}if(j.path){if(!i.test(j.path))throw new TypeError(`option path is invalid: ${j.path}`);k+="; Path="+j.path}if(j.expires){if(!x(j.expires)||!Number.isFinite(j.expires.valueOf()))throw new TypeError(`option expires is invalid: ${j.expires}`);k+="; Expires="+j.expires.toUTCString()}if(j.httpOnly&&(k+="; HttpOnly"),j.secure&&(k+="; Secure"),j.partitioned&&(k+="; Partitioned"),j.priority)switch(typeof j.priority=="string"?j.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${j.priority}`)}if(j.sameSite)switch(typeof j.sameSite=="string"?j.sameSite.toLowerCase():j.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${j.sameSite}`)}return k}function y(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function x(S){return s.call(S)==="[object Date]"}return Dm}JT();var N1="popstate";function QT(t={}){function n(i,s){let{pathname:l,search:c,hash:h}=i.location;return Tb("",{pathname:l,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Km(s)}return XT(n,e,null,t)}function Gn(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function As(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function KT(){return Math.random().toString(36).substring(2,10)}function C1(t,n){return{usr:t.state,key:t.key,idx:n}}function Tb(t,n,e=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?Qf(n):n,state:e,key:n&&n.key||i||KT()}}function Km({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Qf(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let i=t.indexOf("?");i>=0&&(n.search=t.substring(i),t=t.substring(0,i)),t&&(n.pathname=t)}return n}function XT(t,n,e,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,h="POP",m=null,f=y();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function y(){return(c.state||{idx:null}).idx}function x(){h="POP";let A=y(),k=A==null?null:A-f;f=A,m&&m({action:h,location:E.location,delta:k})}function S(A,k){h="PUSH";let P=Tb(E.location,A,k);f=y()+1;let R=C1(P,f),Y=E.createHref(P);try{c.pushState(R,"",Y)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(Y)}l&&m&&m({action:h,location:E.location,delta:1})}function w(A,k){h="REPLACE";let P=Tb(E.location,A,k);f=y();let R=C1(P,f),Y=E.createHref(P);c.replaceState(R,"",Y),l&&m&&m({action:h,location:E.location,delta:0})}function j(A){return ZT(A)}let E={get action(){return h},get location(){return t(s,c)},listen(A){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(N1,x),m=A,()=>{s.removeEventListener(N1,x),m=null}},createHref(A){return n(s,A)},createURL:j,encodeLocation(A){let k=j(A);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:S,replace:w,go(A){return c.go(A)}};return E}function ZT(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Gn(e,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Km(t);return i=i.replace(/ $/,"%20"),!n&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function HN(t,n,e="/"){return e2(t,n,e,!1)}function e2(t,n,e,i){let s=typeof n=="string"?Qf(n):n,l=dl(s.pathname||"/",e);if(l==null)return null;let c=GN(t);t2(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let f=f2(l);h=u2(c[m],f,i)}return h}function GN(t,n=[],e=[],i=""){let s=(l,c,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(Gn(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let f=cl([i,m.relativePath]),y=e.concat(m);l.children&&l.children.length>0&&(Gn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),GN(l.children,n,y,f)),!(l.path==null&&!l.index)&&n.push({path:f,score:l2(f,l.index),routesMeta:y})};return t.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))s(l,c);else for(let m of YN(l.path))s(l,c,m)}),n}function YN(t){let n=t.split("/");if(n.length===0)return[];let[e,...i]=n,s=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=YN(i.join("/")),h=[];return h.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&h.push(...c),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function t2(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:c2(n.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var n2=/^:[\w-]+$/,i2=3,r2=2,a2=1,s2=10,o2=-2,_1=t=>t==="*";function l2(t,n){let e=t.split("/"),i=e.length;return e.some(_1)&&(i+=o2),n&&(i+=r2),e.filter(s=>!_1(s)).reduce((s,l)=>s+(n2.test(l)?i2:l===""?a2:s2),i)}function c2(t,n){return t.length===n.length&&t.slice(0,-1).every((i,s)=>i===n[s])?t[t.length-1]-n[n.length-1]:0}function u2(t,n,e=!1){let{routesMeta:i}=t,s={},l="/",c=[];for(let h=0;h<i.length;++h){let m=i[h],f=h===i.length-1,y=l==="/"?n:n.slice(l.length)||"/",x=Hy({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},y),S=m.route;if(!x&&f&&e&&!i[i.length-1].route.index&&(x=Hy({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!x)return null;Object.assign(s,x.params),c.push({params:s,pathname:cl([l,x.pathname]),pathnameBase:g2(cl([l,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(l=cl([l,x.pathnameBase]))}return c}function Hy(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,i]=d2(t.path,t.caseSensitive,t.end),s=n.match(e);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((f,{paramName:y,isOptional:x},S)=>{if(y==="*"){let j=h[S]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const w=h[S];return x&&!w?f[y]=void 0:f[y]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:t}}function d2(t,n=!1,e=!0){As(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,n?void 0:"i"),i]}function f2(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return As(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function dl(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,i=t.charAt(e);return i&&i!=="/"?null:t.slice(e)||"/"}function h2(t,n="/"){let{pathname:e,search:i="",hash:s=""}=typeof t=="string"?Qf(t):t;return{pathname:e?e.startsWith("/")?e:m2(e,n):n,search:y2(i),hash:x2(s)}}function m2(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function Fv(t,n,e,i){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function p2(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function g0(t){let n=p2(t);return n.map((e,i)=>i===n.length-1?e.pathname:e.pathnameBase)}function y0(t,n,e,i=!1){let s;typeof t=="string"?s=Qf(t):(s={...t},Gn(!s.pathname||!s.pathname.includes("?"),Fv("?","pathname","search",s)),Gn(!s.pathname||!s.pathname.includes("#"),Fv("#","pathname","hash",s)),Gn(!s.search||!s.search.includes("#"),Fv("#","search","hash",s)));let l=t===""||s.pathname==="",c=l?"/":s.pathname,h;if(c==null)h=e;else{let x=n.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),x-=1;s.pathname=S.join("/")}h=x>=0?n[x]:"/"}let m=h2(s,h),f=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(f||y)&&(m.pathname+="/"),m}var cl=t=>t.join("/").replace(/\/\/+/g,"/"),g2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),y2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function v2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var WN=["POST","PUT","PATCH","DELETE"];new Set(WN);var b2=["GET",...WN];new Set(b2);var Kf=_.createContext(null);Kf.displayName="DataRouter";var gx=_.createContext(null);gx.displayName="DataRouterState";var JN=_.createContext({isTransitioning:!1});JN.displayName="ViewTransition";var w2=_.createContext(new Map);w2.displayName="Fetchers";var S2=_.createContext(null);S2.displayName="Await";var Ps=_.createContext(null);Ps.displayName="Navigation";var lp=_.createContext(null);lp.displayName="Location";var Rs=_.createContext({outlet:null,matches:[],isDataRoute:!1});Rs.displayName="Route";var x0=_.createContext(null);x0.displayName="RouteError";function N2(t,{relative:n}={}){Gn(Xf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=_.useContext(Ps),{hash:s,pathname:l,search:c}=cp(t,{relative:n}),h=l;return e!=="/"&&(h=l==="/"?e:cl([e,l])),i.createHref({pathname:h,search:c,hash:s})}function Xf(){return _.useContext(lp)!=null}function Kr(){return Gn(Xf(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(lp).location}var QN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KN(t){_.useContext(Ps).static||_.useLayoutEffect(t)}function Tt(){let{isDataRoute:t}=_.useContext(Rs);return t?O2():C2()}function C2(){Gn(Xf(),"useNavigate() may be used only in the context of a <Router> component.");let t=_.useContext(Kf),{basename:n,navigator:e}=_.useContext(Ps),{matches:i}=_.useContext(Rs),{pathname:s}=Kr(),l=JSON.stringify(g0(i)),c=_.useRef(!1);return KN(()=>{c.current=!0}),_.useCallback((m,f={})=>{if(As(c.current,QN),!c.current)return;if(typeof m=="number"){e.go(m);return}let y=y0(m,JSON.parse(l),s,f.relative==="path");t==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:cl([n,y.pathname])),(f.replace?e.replace:e.push)(y,f.state,f)},[n,e,l,s,t])}_.createContext(null);function Ar(){let{matches:t}=_.useContext(Rs),n=t[t.length-1];return n?n.params:{}}function cp(t,{relative:n}={}){let{matches:e}=_.useContext(Rs),{pathname:i}=Kr(),s=JSON.stringify(g0(e));return _.useMemo(()=>y0(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function _2(t,n){return XN(t,n)}function XN(t,n,e,i){var P;Gn(Xf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=_.useContext(Ps),{matches:c}=_.useContext(Rs),h=c[c.length-1],m=h?h.params:{},f=h?h.pathname:"/",y=h?h.pathnameBase:"/",x=h&&h.route;{let R=x&&x.path||"";ZN(f,!x||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let S=Kr(),w;if(n){let R=typeof n=="string"?Qf(n):n;Gn(y==="/"||((P=R.pathname)==null?void 0:P.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=S;let j=w.pathname||"/",E=j;if(y!=="/"){let R=y.replace(/^\//,"").split("/");E="/"+j.replace(/^\//,"").split("/").slice(R.length).join("/")}let A=!l&&e&&e.matches&&e.matches.length>0?e.matches:HN(t,{pathname:E});As(x||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),As(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=k2(A&&A.map(R=>Object.assign({},R,{params:Object.assign({},m,R.params),pathname:cl([y,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?y:cl([y,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),c,e,i);return n&&k?_.createElement(lp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function j2(){let t=I2(),n=v2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:l},"ErrorBoundary")," or"," ",_.createElement("code",{style:l},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},n),e?_.createElement("pre",{style:s},e):null,c)}var T2=_.createElement(j2,null),E2=class extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(Rs.Provider,{value:this.props.routeContext},_.createElement(x0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A2({routeContext:t,match:n,children:e}){let i=_.useContext(Kf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Rs.Provider,{value:t},e)}function k2(t,n=[],e=null,i=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let s=t,l=e==null?void 0:e.errors;if(l!=null){let m=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Gn(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,m+1))}let c=!1,h=-1;if(e)for(let m=0;m<s.length;m++){let f=s[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=m),f.route.id){let{loaderData:y,errors:x}=e,S=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||S){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((m,f,y)=>{let x,S=!1,w=null,j=null;e&&(x=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||T2,c&&(h<0&&y===0?(ZN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,j=null):h===y&&(S=!0,j=f.route.hydrateFallbackElement||null)));let E=n.concat(s.slice(0,y+1)),A=()=>{let k;return x?k=w:S?k=j:f.route.Component?k=_.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=m,_.createElement(A2,{match:f,routeContext:{outlet:m,matches:E,isDataRoute:e!=null},children:k})};return e&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?_.createElement(E2,{location:e.location,revalidation:e.revalidation,component:w,error:x,children:A(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):A()},null)}function v0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D2(t){let n=_.useContext(Kf);return Gn(n,v0(t)),n}function P2(t){let n=_.useContext(gx);return Gn(n,v0(t)),n}function R2(t){let n=_.useContext(Rs);return Gn(n,v0(t)),n}function b0(t){let n=R2(t),e=n.matches[n.matches.length-1];return Gn(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function M2(){return b0("useRouteId")}function I2(){var i;let t=_.useContext(x0),n=P2("useRouteError"),e=b0("useRouteError");return t!==void 0?t:(i=n.errors)==null?void 0:i[e]}function O2(){let{router:t}=D2("useNavigate"),n=b0("useNavigate"),e=_.useRef(!1);return KN(()=>{e.current=!0}),_.useCallback(async(s,l={})=>{As(e.current,QN),e.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:n,...l}))},[t,n])}var j1={};function ZN(t,n,e){!n&&!j1[t]&&(j1[t]=!0,As(!1,e))}_.memo(L2);function L2({routes:t,future:n,state:e}){return XN(t,void 0,e,n)}function Tn({to:t,replace:n,state:e,relative:i}){Gn(Xf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=_.useContext(Ps);As(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=_.useContext(Rs),{pathname:c}=Kr(),h=Tt(),m=y0(t,g0(l),c,i==="path"),f=JSON.stringify(m);return _.useEffect(()=>{h(JSON.parse(f),{replace:n,state:e,relative:i})},[h,f,i,n,e]),null}function Xe(t){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function F2({basename:t="/",children:n=null,location:e,navigationType:i="POP",navigator:s,static:l=!1}){Gn(!Xf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof e=="string"&&(e=Qf(e));let{pathname:m="/",search:f="",hash:y="",state:x=null,key:S="default"}=e,w=_.useMemo(()=>{let j=dl(m,c);return j==null?null:{location:{pathname:j,search:f,hash:y,state:x,key:S},navigationType:i}},[c,m,f,y,x,S,i]);return As(w!=null,`<Router basename="${c}"> is not able to match the URL "${m}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:_.createElement(Ps.Provider,{value:h},_.createElement(lp.Provider,{children:n,value:w}))}function Of({children:t,location:n}){return _2(Eb(t),n)}function Eb(t,n=[]){let e=[];return _.Children.forEach(t,(i,s)=>{if(!_.isValidElement(i))return;let l=[...n,s];if(i.type===_.Fragment){e.push.apply(e,Eb(i.props.children,l));return}Gn(i.type===Xe,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Eb(i.props.children,l)),e.push(c)}),e}var Ry="get",My="application/x-www-form-urlencoded";function yx(t){return t!=null&&typeof t.tagName=="string"}function z2(t){return yx(t)&&t.tagName.toLowerCase()==="button"}function $2(t){return yx(t)&&t.tagName.toLowerCase()==="form"}function U2(t){return yx(t)&&t.tagName.toLowerCase()==="input"}function B2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function q2(t,n){return t.button===0&&(!n||n==="_self")&&!B2(t)}var dy=null;function V2(){if(dy===null)try{new FormData(document.createElement("form"),0),dy=!1}catch{dy=!0}return dy}var H2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zv(t){return t!=null&&!H2.has(t)?(As(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${My}"`),null):t}function G2(t,n){let e,i,s,l,c;if($2(t)){let h=t.getAttribute("action");i=h?dl(h,n):null,e=t.getAttribute("method")||Ry,s=zv(t.getAttribute("enctype"))||My,l=new FormData(t)}else if(z2(t)||U2(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||h.getAttribute("action");if(i=m?dl(m,n):null,e=t.getAttribute("formmethod")||h.getAttribute("method")||Ry,s=zv(t.getAttribute("formenctype"))||zv(h.getAttribute("enctype"))||My,l=new FormData(h,t),!V2()){let{name:f,type:y,value:x}=t;if(y==="image"){let S=f?`${f}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else f&&l.append(f,x)}}else{if(yx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Ry,i=null,s=My,c=t}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:l,body:c}}function w0(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}async function Y2(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function W2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function J2(t,n,e){let i=await Promise.all(t.map(async s=>{let l=n.routes[s.route.id];if(l){let c=await Y2(l,e);return c.links?c.links():[]}return[]}));return Z2(i.flat(1).filter(W2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function T1(t,n,e,i,s,l){let c=(m,f)=>e[f]?m.route.id!==e[f].route.id:!0,h=(m,f)=>{var y;return e[f].pathname!==m.pathname||((y=e[f].route.path)==null?void 0:y.endsWith("*"))&&e[f].params["*"]!==m.params["*"]};return l==="assets"?n.filter((m,f)=>c(m,f)||h(m,f)):l==="data"?n.filter((m,f)=>{var x;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,f)||h(m,f))return!0;if(m.route.shouldRevalidate){let S=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((x=e[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function Q2(t,n,{includeHydrateFallback:e}={}){return K2(t.map(i=>{let s=n.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function K2(t){return[...new Set(t)]}function X2(t){let n={},e=Object.keys(t).sort();for(let i of e)n[i]=t[i];return n}function Z2(t,n){let e=new Set;return new Set(n),t.reduce((i,s)=>{let l=JSON.stringify(X2(s));return e.has(l)||(e.add(l),i.push({key:l,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eE=new Set([100,101,204,205]);function tE(t,n){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":n&&dl(e.pathname,n)==="/"?e.pathname=`${n.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function eC(){let t=_.useContext(Kf);return w0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nE(){let t=_.useContext(gx);return w0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var S0=_.createContext(void 0);S0.displayName="FrameworkContext";function tC(){let t=_.useContext(S0);return w0(t,"You must render this element inside a <HydratedRouter> element"),t}function iE(t,n){let e=_.useContext(S0),[i,s]=_.useState(!1),[l,c]=_.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:f,onMouseLeave:y,onTouchStart:x}=n,S=_.useRef(null);_.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let E=k=>{k.forEach(P=>{c(P.isIntersecting)})},A=new IntersectionObserver(E,{threshold:.5});return S.current&&A.observe(S.current),()=>{A.disconnect()}}},[t]),_.useEffect(()=>{if(i){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[i]);let w=()=>{s(!0)},j=()=>{s(!1),c(!1)};return e?t!=="intent"?[l,S,{}]:[l,S,{onFocus:Pm(h,w),onBlur:Pm(m,j),onMouseEnter:Pm(f,w),onMouseLeave:Pm(y,j),onTouchStart:Pm(x,w)}]:[!1,S,{}]}function Pm(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function rE({page:t,...n}){let{router:e}=eC(),i=_.useMemo(()=>HN(e.routes,t,e.basename),[e.routes,t,e.basename]);return i?_.createElement(sE,{page:t,matches:i,...n}):null}function aE(t){let{manifest:n,routeModules:e}=tC(),[i,s]=_.useState([]);return _.useEffect(()=>{let l=!1;return J2(t,n,e).then(c=>{l||s(c)}),()=>{l=!0}},[t,n,e]),i}function sE({page:t,matches:n,...e}){let i=Kr(),{manifest:s,routeModules:l}=tC(),{basename:c}=eC(),{loaderData:h,matches:m}=nE(),f=_.useMemo(()=>T1(t,n,m,s,i,"data"),[t,n,m,s,i]),y=_.useMemo(()=>T1(t,n,m,s,i,"assets"),[t,n,m,s,i]),x=_.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let j=new Set,E=!1;if(n.forEach(k=>{var R;let P=s.routes[k.route.id];!P||!P.hasLoader||(!f.some(Y=>Y.route.id===k.route.id)&&k.route.id in h&&((R=l[k.route.id])!=null&&R.shouldRevalidate)||P.hasClientLoader?E=!0:j.add(k.route.id))}),j.size===0)return[];let A=tE(t,c);return E&&j.size>0&&A.searchParams.set("_routes",n.filter(k=>j.has(k.route.id)).map(k=>k.route.id).join(",")),[A.pathname+A.search]},[c,h,i,s,f,n,t,l]),S=_.useMemo(()=>Q2(y,s),[y,s]),w=aE(y);return _.createElement(_.Fragment,null,x.map(j=>_.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...e})),S.map(j=>_.createElement("link",{key:j,rel:"modulepreload",href:j,...e})),w.map(({key:j,link:E})=>_.createElement("link",{key:j,...E})))}function oE(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var nC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nC&&(window.__reactRouterVersion="7.6.0")}catch{}function lE({basename:t,children:n,window:e}){let i=_.useRef();i.current==null&&(i.current=QT({window:e,v5Compat:!0}));let s=i.current,[l,c]=_.useState({action:s.action,location:s.location}),h=_.useCallback(m=>{_.startTransition(()=>c(m))},[c]);return _.useLayoutEffect(()=>s.listen(h),[s,h]),_.createElement(F2,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s})}var iC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ks=_.forwardRef(function({onClick:n,discover:e="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:h,target:m,to:f,preventScrollReset:y,viewTransition:x,...S},w){let{basename:j}=_.useContext(Ps),E=typeof f=="string"&&iC.test(f),A,k=!1;if(typeof f=="string"&&E&&(A=f,nC))try{let V=new URL(window.location.href),M=f.startsWith("//")?new URL(V.protocol+f):new URL(f),B=dl(M.pathname,j);M.origin===V.origin&&B!=null?f=B+M.search+M.hash:k=!0}catch{As(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=N2(f,{relative:s}),[R,Y,F]=iE(i,S),q=fE(f,{replace:c,state:h,target:m,preventScrollReset:y,relative:s,viewTransition:x});function z(V){n&&n(V),V.defaultPrevented||q(V)}let L=_.createElement("a",{...S,...F,href:A||P,onClick:k||l?n:z,ref:oE(w,Y),target:m,"data-discover":!E&&e==="render"?"true":void 0});return R&&!E?_.createElement(_.Fragment,null,L,_.createElement(rE,{page:P})):L});ks.displayName="Link";var cE=_.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:h,children:m,...f},y){let x=cp(c,{relative:f.relative}),S=Kr(),w=_.useContext(gx),{navigator:j,basename:E}=_.useContext(Ps),A=w!=null&&yE(x)&&h===!0,k=j.encodeLocation?j.encodeLocation(x).pathname:x.pathname,P=S.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(P=P.toLowerCase(),R=R?R.toLowerCase():null,k=k.toLowerCase()),R&&E&&(R=dl(R,E)||R);const Y=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let F=P===k||!s&&P.startsWith(k)&&P.charAt(Y)==="/",q=R!=null&&(R===k||!s&&R.startsWith(k)&&R.charAt(k.length)==="/"),z={isActive:F,isPending:q,isTransitioning:A},L=F?n:void 0,V;typeof i=="function"?V=i(z):V=[i,F?"active":null,q?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(z):l;return _.createElement(ks,{...f,"aria-current":L,className:V,ref:y,style:M,to:c,viewTransition:h},typeof m=="function"?m(z):m)});cE.displayName="NavLink";var uE=_.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:i,replace:s,state:l,method:c=Ry,action:h,onSubmit:m,relative:f,preventScrollReset:y,viewTransition:x,...S},w)=>{let j=pE(),E=gE(h,{relative:f}),A=c.toLowerCase()==="get"?"get":"post",k=typeof h=="string"&&iC.test(h),P=R=>{if(m&&m(R),R.defaultPrevented)return;R.preventDefault();let Y=R.nativeEvent.submitter,F=(Y==null?void 0:Y.getAttribute("formmethod"))||c;j(Y||R.currentTarget,{fetcherKey:n,method:F,navigate:e,replace:s,state:l,relative:f,preventScrollReset:y,viewTransition:x})};return _.createElement("form",{ref:w,method:A,action:E,onSubmit:i?m:P,...S,"data-discover":!k&&t==="render"?"true":void 0})});uE.displayName="Form";function dE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rC(t){let n=_.useContext(Kf);return Gn(n,dE(t)),n}function fE(t,{target:n,replace:e,state:i,preventScrollReset:s,relative:l,viewTransition:c}={}){let h=Tt(),m=Kr(),f=cp(t,{relative:l});return _.useCallback(y=>{if(q2(y,n)){y.preventDefault();let x=e!==void 0?e:Km(m)===Km(f);h(t,{replace:x,state:i,preventScrollReset:s,relative:l,viewTransition:c})}},[m,h,f,e,i,n,t,s,l,c])}var hE=0,mE=()=>`__${String(++hE)}__`;function pE(){let{router:t}=rC("useSubmit"),{basename:n}=_.useContext(Ps),e=M2();return _.useCallback(async(i,s={})=>{let{action:l,method:c,encType:h,formData:m,body:f}=G2(i,n);if(s.navigate===!1){let y=s.fetcherKey||mE();await t.fetch(y,e,s.action||l,{preventScrollReset:s.preventScrollReset,formData:m,body:f,formMethod:s.method||c,formEncType:s.encType||h,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:m,body:f,formMethod:s.method||c,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,n,e])}function gE(t,{relative:n}={}){let{basename:e}=_.useContext(Ps),i=_.useContext(Rs);Gn(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...cp(t||".",{relative:n})},c=Kr();if(t==null){l.search=c.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(x=>x).forEach(x=>h.append("index",x));let y=h.toString();l.search=y?`?${y}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:cl([e,l.pathname])),Km(l)}function yE(t,n={}){let e=_.useContext(JN);Gn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=rC("useViewTransitionState"),s=cp(t,{relative:n.relative});if(!e.isTransitioning)return!1;let l=dl(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=dl(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Hy(s.pathname,c)!=null||Hy(s.pathname,l)!=null}[...eE];var xE=VN();const vE="https://backend.newtons.in",bE=()=>localStorage.getItem("authToken"),pe=async(t,n={})=>{const e=bE(),i={...n.headers};e&&(i.Authorization=`Bearer ${e}`),!(n.body instanceof FormData)&&!i["Content-Type"]&&(i["Content-Type"]="application/json");const s=i;let l=t.startsWith("/")?t:`/${t}`;l.startsWith("/api/")||(l=`/api${l}`);const c=`${vE}${l}`;try{console.log(`Making API call to: ${c}`);const h=await fetch(c,{...n,headers:s});if(h.status===401)throw console.error("Unauthorized access - Token might be invalid or expired. Logging out."),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser"),window.location.href="/login",new Error("Unauthorized");if(!h.ok){let m=`HTTP error! status: ${h.status}`;try{const f=await h.json();m=(f==null?void 0:f.message)||(f==null?void 0:f.error)||m}catch{}throw console.error(`API Error: ${h.status} ${h.statusText} - ${m}`),new Error(m)}return h}catch(h){throw h instanceof TypeError&&h.message==="Failed to fetch"?console.error("API Fetch Error: Network error or CORS issue. Check backend CORS configuration.",h):console.error("API Fetch Error:",h),h}},wE=({onLoginSuccess:t})=>{const[n,e]=_.useState(""),[i,s]=_.useState(""),[l,c]=_.useState(null),[h,m]=_.useState(!1),f=Tt(),y=async x=>{x.preventDefault(),m(!0),c(null);try{const S=await pe("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:i})});if(!S.ok){let j=`Login failed with status: ${S.status}`;try{j=(await S.json()).message||j}catch{try{const A=await S.text();A&&(j=`${j} - ${A}`)}catch{}}throw new Error(j)}const w=await S.json();console.log("Login successful:",w),localStorage.setItem("authToken",w.token),localStorage.setItem("currentUser",JSON.stringify(w.user)),w.user.clinic_id&&localStorage.setItem("currentClinicId",w.user.clinic_id),t(w.user),w.user.role==="doctor"?f("/dashboard/queue"):f("/dashboard")}catch(S){console.error("Login failed:",S),c(S.message||"Login failed. Please check your credentials.")}finally{m(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Sign in to Newtons OPD Zero"}),r.jsxs("form",{onSubmit:y,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email address"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:x=>e(x.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:x=>s(x.target.value),className:"auth-text-input",placeholder:"Password"})]}),l&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:l})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:h,className:"auth-submit-button",children:h?"Signing in...":"Sign In"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Don't have an account?"," ",r.jsx(ks,{to:"/register",className:"auth-navigation-link",children:"Register a new clinic"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})},SE=()=>{const[t,n]=_.useState(""),[e,i]=_.useState(""),[s,l]=_.useState(""),[c,h]=_.useState(""),[m,f]=_.useState(null),[y,x]=_.useState(!1),S=Tt(),w=async j=>{j.preventDefault(),x(!0),f(null);try{const E=await pe("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicName:t,userName:e,userEmail:s,userPassword:c})}),A=await E.json();if(!E.ok)throw new Error(A.message||`HTTP error! status: ${E.status}`);console.log("Registration successful:",A),alert("Registration successful! Please log in."),S("/login")}catch(E){console.error("Registration failed:",E),f(E.message||"Registration failed. Please try again.")}finally{x(!1)}};return r.jsx("div",{className:"auth-page-container",children:r.jsxs("div",{className:"auth-form-card",children:[r.jsx("h2",{className:"auth-title",children:"Register Clinic & Admin"}),r.jsxs("form",{onSubmit:w,className:"auth-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"clinicName",children:"Clinic Name"}),r.jsx("input",{id:"clinicName",name:"clinicName",type:"text",required:!0,value:t,onChange:j=>n(j.target.value),className:"auth-text-input",placeholder:"Your Clinic's Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userName",children:"Your Name (Admin)"}),r.jsx("input",{id:"userName",name:"userName",type:"text",required:!0,value:e,onChange:j=>i(j.target.value),className:"auth-text-input",placeholder:"Your Full Name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userEmail",children:"Your Email (Admin Login)"}),r.jsx("input",{id:"userEmail",name:"userEmail",type:"email",autoComplete:"email",required:!0,value:s,onChange:j=>l(j.target.value),className:"auth-text-input",placeholder:"you@example.com"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"userPassword",children:"Password"}),r.jsx("input",{id:"userPassword",name:"userPassword",type:"password",required:!0,minLength:6,value:c,onChange:j=>h(j.target.value),className:"auth-text-input",placeholder:"Min. 6 characters"})]}),m&&r.jsx("div",{className:"auth-error-message",children:r.jsx("p",{children:m})}),r.jsx("div",{className:"form-group",children:r.jsx("button",{type:"submit",disabled:y,className:"auth-submit-button",children:y?"Registering...":"Register Clinic & Admin"})})]}),r.jsxs("div",{className:"auth-navigation-link-container",children:["Already have an account?"," ",r.jsx(ks,{to:"/login",className:"auth-navigation-link",children:"Sign in"})]}),r.jsx("p",{className:"auth-attribution",children:"from Newtons AI"})]})})};var aC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E1=ll.createContext&&ll.createContext(aC),NE=["attr","size","title"];function CE(t,n){if(t==null)return{};var e=_E(t,n),i,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)i=l[s],!(n.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(e[i]=t[i])}return e}function _E(t,n){if(t==null)return{};var e={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(n.indexOf(i)>=0)continue;e[i]=t[i]}return e}function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gy.apply(this,arguments)}function A1(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,i)}return e}function Yy(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?A1(Object(e),!0).forEach(function(i){jE(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):A1(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function jE(t,n,e){return n=TE(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function TE(t){var n=EE(t,"string");return typeof n=="symbol"?n:n+""}function EE(t,n){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function sC(t){return t&&t.map((n,e)=>ll.createElement(n.tag,Yy({key:e},n.attr),sC(n.child)))}function Za(t){return n=>ll.createElement(AE,Gy({attr:Yy({},t.attr)},n),sC(t.child))}function AE(t){var n=e=>{var{attr:i,size:s,title:l}=t,c=CE(t,NE),h=s||e.size||"1em",m;return e.className&&(m=e.className),t.className&&(m=(m?m+" ":"")+t.className),ll.createElement("svg",Gy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,c,{className:m,style:Yy(Yy({color:t.color||e.color},e.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&ll.createElement("title",null,l),t.children)};return E1!==void 0?ll.createElement(E1.Consumer,null,e=>n(e)):n(aC)}function $v(t){return Za({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function k1(t){return Za({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function D1(t){return Za({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"},child:[]}]})(t)}function Lf(t){return Za({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function fy(t){return Za({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z"},child:[]}]})(t)}function hy(t){return Za({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M352 288h-16v-88c0-4.42-3.58-8-8-8h-13.58c-4.74 0-9.37 1.4-13.31 4.03l-15.33 10.22a7.994 7.994 0 0 0-2.22 11.09l8.88 13.31a7.994 7.994 0 0 0 11.09 2.22l.47-.31V288h-16c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h64c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 192c-53.02 0-96-50.15-96-112 0-61.86 42.98-112 96-112s96 50.14 96 112c0 61.87-43 112-96 112zm272 32h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(t)}function my(t){return Za({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M112 32C50.1 32 0 82.1 0 144v224c0 61.9 50.1 112 112 112s112-50.1 112-112V144c0-61.9-50.1-112-112-112zm48 224H64V144c0-26.5 21.5-48 48-48s48 21.5 48 48v112zm139.7-29.7c-3.5-3.5-9.4-3.1-12.3.8-45.3 62.5-40.4 150.1 15.9 206.4 56.3 56.3 143.9 61.2 206.4 15.9 4-2.9 4.3-8.8.8-12.3L299.7 226.3zm229.8-19c-56.3-56.3-143.9-61.2-206.4-15.9-4 2.9-4.3 8.8-.8 12.3l210.8 210.8c3.5 3.5 9.4 3.1 12.3-.8 45.3-62.6 40.5-150.1-15.9-206.4z"},child:[]}]})(t)}function Ff(t){return Za({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function kE(t){return Za({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function P1(t){return Za({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function Uv(t){return Za({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zM104 424c0 13.3 10.7 24 24 24s24-10.7 24-24-10.7-24-24-24-24 10.7-24 24zm216-135.4v49c36.5 7.4 64 39.8 64 78.4v41.7c0 7.6-5.4 14.2-12.9 15.7l-32.2 6.4c-4.3.9-8.5-1.9-9.4-6.3l-3.1-15.7c-.9-4.3 1.9-8.6 6.3-9.4l19.3-3.9V416c0-62.8-96-65.1-96 1.9v26.7l19.3 3.9c4.3.9 7.1 5.1 6.3 9.4l-3.1 15.7c-.9 4.3-5.1 7.1-9.4 6.3l-31.2-4.2c-7.9-1.1-13.8-7.8-13.8-15.9V416c0-38.6 27.5-70.9 64-78.4v-45.2c-2.2.7-4.4 1.1-6.6 1.9-18 6.3-37.3 9.8-57.4 9.8s-39.4-3.5-57.4-9.8c-7.4-2.6-14.9-4.2-22.6-5.2v81.6c23.1 6.9 40 28.1 40 53.4 0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.3 16.9-46.5 40-53.4v-80.4C48.5 301 0 355.8 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-72-56.8-130.3-128-133.8z"},child:[]}]})(t)}function py(t){return Za({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const DE={superadmin:[{title:"Admin Pages",links:[{path:"/dashboard",name:"Super Admin Dashboard",icon:Lf},{path:"/dashboard/clinic-subscriptions",name:"Clinic Subscriptions",icon:fy},{path:"/dashboard/users",name:"User Management",icon:py}]}],admin:[{title:"Dashboard",links:[{path:"/dashboard",name:"Admin Dashboard",icon:Lf}]},{title:"Staff Management",links:[{path:"/dashboard/staff",name:"Manage Staff",icon:py},{path:"/dashboard/staff/add",name:"Add Staff",icon:Uv}]},{title:"Patient Management",links:[{path:"/dashboard/patients/add",name:"Add Patient",icon:fy},{path:"/dashboard/patients",name:"All Patients",icon:py},{path:"/dashboard/patients/search",name:"Search Patient",icon:Ff}]},{title:"Inventory & Pharmacy",links:[{path:"/dashboard/analysis",name:"Inventory Analysis",icon:$v},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:my},{path:"/dashboard/inventory/add",name:"Add Drug",icon:my}]},{title:"Queue & Subscriptions",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:P1},{path:"/dashboard/subscriptions",name:"Manage Subscriptions",icon:hy},{path:"/dashboard/subscriptions/add",name:"Add Subscription Plan",icon:hy}]},{title:"AI Settings",links:[{path:"/dashboard/gemini-api-key-settings",name:"Gemini API Key",icon:k1}]}],doctor:[{title:"Patient & Admissions",links:[{path:"/dashboard/search",name:"Patient Search",icon:Ff},{path:"/dashboard/add-patient",name:"Add Patient",icon:fy},{path:"/manage-admission",name:"Manage Admission",icon:Uv}]},{title:"Lab & Billing",links:[{path:"/create-lab-order",name:"Create Lab Order",icon:D1},{path:"/billing",name:"Billing",icon:hy}]},{title:"Queue",links:[{path:"/dashboard/queue",name:"Doctor Queue",icon:P1}]}],receptionist:[{title:"Reception",links:[{path:"/dashboard",name:"Reception Dashboard",icon:Lf}]},{title:"Patient Management",links:[{path:"/dashboard/all-patients",name:"All Patients",icon:py},{path:"/dashboard/patients/add",name:"Add Patient",icon:fy},{path:"/dashboard/patients/search",name:"Search Patient",icon:Ff}]},{title:"Billing & Admissions",links:[{path:"/billing",name:"Billing",icon:hy},{path:"/manage-admission",name:"Manage Admission",icon:Uv}]}],lab:[{title:"Lab Operations",links:[{path:"/dashboard",name:"Lab Dashboard",icon:Lf},{path:"/lab-inventory",name:"Lab Test Inventory",icon:D1},{path:"/lab/search-report",name:"Search Lab Report",icon:Ff}]}],pharmacy:[{title:"Pharmacy Operations",links:[{path:"/dashboard",name:"Pharmacy Queue",icon:Lf},{path:"/dashboard/inventory",name:"Pharmacy Inventory",icon:my},{path:"/dashboard/inventory/add",name:"Add Drug",icon:my},{path:"/dashboard/add-order",name:"Add Pharmacy Order",icon:$v}]},{title:"Analysis & Settings",links:[{path:"/dashboard/analysis",name:"Inventory Analysis",icon:$v},{path:"/dashboard/settings",name:"Pharmacy Settings",icon:k1},{path:"/dashboard/search-patient-records",name:"Search Patient Records",icon:Ff}]}]},PE=({user:t,onLogout:n,userRole:e,isOpen:i,onClose:s})=>{const l=Kr(),[c,h]=_.useState(""),m=DE[e]||[],[f,y]=_.useState(500),x=_.useRef(!1),S=_.useCallback(A=>{x.current=!0,A.preventDefault()},[]),w=_.useCallback(()=>{x.current=!1},[]),j=_.useCallback(A=>{if(x.current){const k=window.innerWidth-A.clientX;k>250&&k<window.innerWidth*.8&&y(k)}},[]);_.useEffect(()=>(window.addEventListener("mousemove",j),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",w)}),[j,w]);const E=m.map(A=>({...A,links:A.links.filter(k=>k.name.toLowerCase().includes(c.toLowerCase()))})).filter(A=>A.links.length>0);return r.jsxs("div",{className:`side-panel ${i?"open":""}`,style:{width:`${f}px`,right:i?"0":`-${f}px`},children:[r.jsx("div",{className:"resizer",onMouseDown:S}),r.jsxs("div",{className:"side-panel-header",children:[r.jsx(ks,{to:"/dashboard",className:"home-button",onClick:s,children:r.jsx(Lf,{})}),r.jsxs("div",{style:{position:"relative"},children:[r.jsx(Ff,{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),r.jsx("input",{type:"text",placeholder:"Search pages...",className:"search-bar",value:c,onChange:A=>h(A.target.value)})]}),r.jsx("button",{className:"close-button",onClick:s,children:"×"})]}),r.jsx("nav",{children:E.map((A,k)=>r.jsxs("div",{className:"page-section",children:[r.jsx("div",{className:"page-title",children:A.title}),r.jsx("ul",{className:"sub-page-list",children:A.links.map(P=>{const R=P.icon;return r.jsx("li",{children:r.jsxs(ks,{to:P.path,className:l.pathname===P.path?"active":"",onClick:s,children:[R&&r.jsx(R,{})," ",P.name]})},P.path)})})]},k))}),r.jsxs("div",{className:"user-info-section",children:[r.jsxs("span",{className:"user-name",children:["Welcome, ",t.name]}),r.jsxs("button",{onClick:n,className:"logout-button-sidebar",children:[r.jsx(kE,{})," Logout"]})]})]})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ME=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,e,i)=>i?i.toUpperCase():e.toLowerCase()),R1=t=>{const n=ME(t);return n.charAt(0).toUpperCase()+n.slice(1)},oC=(...t)=>t.filter((n,e,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===e).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=_.forwardRef(({color:t="currentColor",size:n=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...h},m)=>_.createElement("svg",{ref:m,...IE,width:n,height:n,stroke:t,strokeWidth:i?Number(e)*24/Number(n):e,className:oC("lucide",s),...h},[...c.map(([f,y])=>_.createElement(f,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(t,n)=>{const e=_.forwardRef(({className:i,...s},l)=>_.createElement(OE,{ref:l,iconNode:n,className:oC(`lucide-${RE(R1(t))}`,`lucide-${t}`,i),...s}));return e.displayName=R1(t),e};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],M1=Ze("arrow-down",LE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],en=Ze("arrow-left",FE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Ab=Ze("arrow-up",zE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],N0=Ze("beaker",$E);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],BE=Ze("bed-double",UE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],VE=Ze("bell",qE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],lC=Ze("brain",HE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],YE=Ze("building",GE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]],JE=Ze("calendar-check-2",WE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],KE=Ze("calendar-days",QE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ZE=Ze("chart-no-axes-column",XE);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wy=Ze("chevron-down",eA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],C0=Ze("chevron-left",tA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xx=Ze("chevron-right",nA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Jy=Ze("chevron-up",iA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wi=Ze("circle-alert",rA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xa=Ze("circle-check-big",aA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],up=Ze("circle-plus",sA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],lA=Ze("circle-user",oA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uA=Ze("circle-x",cA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],I1=Ze("clipboard-list",dA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],hA=Ze("clipboard",fA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pA=Ze("copy",mA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],O1=Ze("credit-card",gA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ku=Ze("dollar-sign",yA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],L1=Ze("file-check",xA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Tc=Ze("file-text",vA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Qy=Ze("flask-conical",bA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],SA=Ze("funnel",wA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],CA=Ze("hash",NA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],cC=Ze("house",_A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jc=Ze("info",jA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],EA=Ze("list-ordered",TA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],kA=Ze("list-plus",AA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],PA=Ze("list",DA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zu=Ze("loader-circle",RA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],F1=Ze("lock",MA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],OA=Ze("message-square",IA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],FA=Ze("mic-off",LA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],uC=Ze("mic",zA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],UA=Ze("monitor",$A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xm=Ze("package",BA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],VA=Ze("paperclip",qA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],GA=Ze("pause",HA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ym=Ze("pencil",YA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],JA=Ze("phone",WA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],_0=Ze("pill",QA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],XA=Ze("play",KA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vx=Ze("plus",ZA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ky=Ze("printer",ek);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kb=Ze("refresh-cw",tk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],id=Ze("save",nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ts=Ze("search",ik);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ak=Ze("send",rk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]],z1=Ze("server-crash",sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dp=Ze("settings",ok);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ck=Ze("share-2",lk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dk=Ze("shield-check",uk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],qf=Ze("square-pen",fk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],mk=Ze("stethoscope",hk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gk=Ze("tag",pk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Co=Ze("trash-2",yk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vk=Ze("triangle-alert",xk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],wk=Ze("upload",bk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],dC=Ze("user-check",Sk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fC=Ze("user-plus",Nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bx=Ze("user",Ck);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Zm=Ze("users",_k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Tk=Ze("video",jk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Vi=Ze("x",Ek),Ak="_container_1cy0o_1",kk="_title_1cy0o_17",Dk="_filtersContainer_1cy0o_31",Pk="_dateInputLabel_1cy0o_55",Rk="_dateInput_1cy0o_55",Mk="_fetchButton_1cy0o_105",Ik="_summarySection_1cy0o_145",Ok="_totalRevenue_1cy0o_153",Lk="_totalRevenueAmount_1cy0o_175",Fk="_card_1cy0o_187",zk="_cardTitle_1cy0o_203",$k="_cardList_1cy0o_217",Uk="_cardListItem_1cy0o_227",Bk="_cardListItemAmount_1cy0o_247",qk="_revenueGrid_1cy0o_257",Vk="_revenueCard_1cy0o_271",Hk="_revenueCardTitle_1cy0o_285",Gk="_revenueCardAmount_1cy0o_297",Yk="_revenueCardSubtitle_1cy0o_307",Wk="_receptionRevenue_1cy0o_317",Jk="_pharmacyRevenue_1cy0o_323",Qk="_labRevenue_1cy0o_329",Kk="_tableSectionTitle_1cy0o_339",Xk="_tableContainer_1cy0o_359",Zk="_styledTable_1cy0o_373",eD="_capitalize_1cy0o_423",tD="_noDataMessage_1cy0o_431",nD="_errorAlert_1cy0o_451",iD="_loadingContainer_1cy0o_483",rD="_breathingBall_1cy0o_505",Et={container:Ak,title:kk,filtersContainer:Dk,dateInputLabel:Pk,dateInput:Rk,fetchButton:Mk,summarySection:Ik,totalRevenue:Ok,totalRevenueAmount:Lk,card:Fk,cardTitle:zk,cardList:$k,cardListItem:Uk,cardListItemAmount:Bk,revenueGrid:qk,revenueCard:Vk,revenueCardTitle:Hk,revenueCardAmount:Gk,revenueCardSubtitle:Yk,receptionRevenue:Wk,pharmacyRevenue:Jk,labRevenue:Qk,tableSectionTitle:Kk,tableContainer:Xk,styledTable:Zk,capitalize:eD,noDataMessage:tD,errorAlert:nD,loadingContainer:iD,breathingBall:rD},aD=()=>{const t=new Date().toISOString().split("T")[0],[n,e]=_.useState(t),[i,s]=_.useState(t),[l,c]=_.useState([]),[h,m]=_.useState([]),[f,y]=_.useState([]),[x,S]=_.useState(0),[w,j]=_.useState(null),[E,A]=_.useState(null),[k,P]=_.useState(!1),[R,Y]=_.useState(null),F=async()=>{if(P(!0),Y(null),c([]),m([]),y([]),S(0),j(null),A(null),!n||!i){Y("Please select both start and end dates."),P(!1);return}if(new Date(n)>new Date(i)){Y("Start date cannot be after end date."),P(!1);return}try{const[z,L,V]=await Promise.all([pe(`/api/bills?startDate=${n}&endDate=${i}`),pe(`/api/payment/admission?startDate=${n}&endDate=${i}`),pe(`/api/subscriptions/transactions/manual?startDate=${n}&endDate=${i}`)]);if(!z.ok){const ve=await z.json().catch(()=>({}));throw new Error(`Bills fetch error: ${ve.message||z.statusText}`)}if(!L.ok){const ve=await L.json().catch(()=>({}));throw new Error(`Admission Payments fetch error: ${ve.message||L.statusText}`)}if(!V.ok){const ve=await V.json().catch(()=>({}));throw new Error(`Manual Subscriptions fetch error: ${ve.message||V.statusText}`)}const M=await z.json(),B=await L.json(),ee=await V.json(),ie=M.bills||[],te=B.admissionPayments||[],se=ee||[];c(ie),m(te),y(se);let X=0;const K={},re={consultation:0,pharmacy:0,lab:0,other:0};ie.forEach(ve=>{if(ve.status==="paid"){const I=parseFloat(ve.amount.toString()),de=ve.payment_mode||"Unknown",ae=ve.type||"other";X+=I,K[de]=(K[de]||0)+I,re.hasOwnProperty(ae)?re[ae]=(re[ae]||0)+I:re.other=(re.other||0)+I}}),te.forEach(ve=>{const I=parseFloat(ve.amount_paid.toString()),de=ve.payment_mode||"Unknown";X+=I,K[de]=(K[de]||0)+I}),se.forEach(ve=>{var ae,H;const I=parseFloat(((H=(ae=ve.subscriptionPlan)==null?void 0:ae.price)==null?void 0:H.toString())??"0"),de=ve.subscription_payment_method||"Unknown";X+=I,K[de]=(K[de]||0)+I}),j(K),A(re),S(X)}catch(z){console.error("Failed to fetch money flow data:",z),Y(z.message||"Failed to fetch data. Check console for details.")}finally{P(!1)}},q=()=>{F()};return r.jsxs("div",{className:Et.container,children:[r.jsx("h2",{className:Et.title,children:"Money Flow Analysis"}),r.jsxs("div",{className:Et.filtersContainer,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start-date-money",className:Et.dateInputLabel,children:"Start Date:"}),r.jsx("input",{type:"date",id:"start-date-money",value:n,onChange:z=>e(z.target.value),className:Et.dateInput})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end-date-money",className:Et.dateInputLabel,children:"End Date:"}),r.jsx("input",{type:"date",id:"end-date-money",value:i,onChange:z=>s(z.target.value),className:Et.dateInput})]}),r.jsx("button",{onClick:q,disabled:k,className:Et.fetchButton,children:k?"Loading...":"Fetch Data"})]}),R&&r.jsxs("div",{className:Et.errorAlert,role:"alert",children:[r.jsx(wi,{size:20})," ",r.jsxs("span",{children:["Error: ",R]})]}),!k&&!R&&(l.length>0||h.length>0||f.length>0)&&r.jsxs("div",{className:Et.summarySection,children:[r.jsxs("h3",{className:Et.totalRevenue,children:["Total Paid Revenue (",n," to ",i,"):",r.jsxs("span",{className:Et.totalRevenueAmount,children:["₹",x.toFixed(2)]})]}),w&&Object.keys(w).length>0&&r.jsxs("div",{className:Et.card,children:[r.jsx("h4",{className:Et.cardTitle,children:"Revenue by Payment Mode:"}),r.jsx("ul",{className:Et.cardList,children:Object.entries(w).map(([z,L])=>r.jsxs("li",{className:Et.cardListItem,children:[z,": ",r.jsxs("span",{className:Et.cardListItemAmount,children:["₹",L.toFixed(2)]})]},z))})]}),E&&r.jsxs("div",{className:Et.revenueGrid,children:[r.jsxs("div",{className:`${Et.revenueCard} ${Et.receptionRevenue}`,children:[r.jsx("h4",{className:Et.revenueCardTitle,children:"Reception Revenue"}),r.jsxs("p",{className:Et.revenueCardAmount,children:["₹",(E.consultation+E.other).toFixed(2)]}),r.jsx("span",{className:Et.revenueCardSubtitle,children:"(Consultation + Other)"})]}),r.jsxs("div",{className:`${Et.revenueCard} ${Et.pharmacyRevenue}`,children:[r.jsx("h4",{className:Et.revenueCardTitle,children:"Pharmacy Revenue"}),r.jsxs("p",{className:Et.revenueCardAmount,children:["₹",E.pharmacy.toFixed(2)]})]}),r.jsxs("div",{className:`${Et.revenueCard} ${Et.labRevenue}`,children:[r.jsx("h4",{className:Et.revenueCardTitle,children:"Lab Revenue"}),r.jsxs("p",{className:Et.revenueCardAmount,children:["₹",E.lab.toFixed(2)]})]})]}),r.jsxs("h4",{className:Et.tableSectionTitle,children:["Individual Paid Bills (",l.filter(z=>z.status==="paid").length,"):"]}),l.filter(z=>z.status==="paid").length>0?r.jsx("div",{className:Et.tableContainer,children:r.jsxs("table",{className:Et.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Bill ID"}),r.jsx("th",{children:"Patient ID"}),r.jsx("th",{children:"Type"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:l.filter(z=>z.status==="paid").map(z=>r.jsxs("tr",{children:[r.jsx("td",{children:new Date(z.createdAt).toLocaleDateString()}),r.jsx("td",{children:z.id}),r.jsx("td",{children:z.patient_id}),r.jsx("td",{className:Et.capitalize,children:z.type}),r.jsxs("td",{children:["₹",parseFloat(z.amount.toString()).toFixed(2)]}),r.jsx("td",{children:z.payment_mode})]},`bill-${z.id}`))})]})}):r.jsx("p",{className:Et.noDataMessage,children:"No paid bills found for the selected period."}),r.jsxs("h4",{className:Et.tableSectionTitle,children:["Admission Payments (",h.length,"):"]}),h.length>0?r.jsx("div",{className:Et.tableContainer,children:r.jsxs("table",{className:Et.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Payment ID"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:h.map(z=>{var L;return r.jsxs("tr",{children:[r.jsx("td",{children:new Date(z.payment_date).toLocaleDateString()}),r.jsx("td",{children:z.id}),r.jsx("td",{children:((L=z.Patient)==null?void 0:L.name)??z.patient_id})," ",r.jsxs("td",{children:["₹",parseFloat(z.amount_paid.toString()).toFixed(2)]}),r.jsx("td",{children:z.payment_mode})]},`admission-${z.id}`)})})]})}):r.jsx("p",{className:Et.noDataMessage,children:"No admission payments found for the selected period."}),r.jsxs("h4",{className:Et.tableSectionTitle,children:["Manual Subscription Payments (",f.length,"):"]}),f.length>0?r.jsx("div",{className:Et.tableContainer,children:r.jsxs("table",{className:Et.styledTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Start Date"}),r.jsx("th",{children:"Patient ID"}),r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Plan Name"}),r.jsx("th",{children:"Plan Amount"}),r.jsx("th",{children:"Payment Mode"})]})}),r.jsx("tbody",{children:f.map(z=>{var L,V,M;return r.jsxs("tr",{children:[r.jsx("td",{children:new Date(z.subscription_start_date).toLocaleDateString()}),r.jsx("td",{children:z.id}),r.jsx("td",{children:z.name}),r.jsx("td",{children:((L=z.subscriptionPlan)==null?void 0:L.name)??"N/A"}),r.jsxs("td",{children:["₹",parseFloat(((M=(V=z.subscriptionPlan)==null?void 0:V.price)==null?void 0:M.toString())??"0").toFixed(2)]}),r.jsx("td",{className:Et.capitalize,children:z.subscription_payment_method})]},`sub-patient-${z.id}`)})})]})}):r.jsx("p",{className:Et.noDataMessage,children:"No manual subscription payments found for the selected period."})]}),k&&r.jsxs("div",{className:Et.loadingContainer,children:[r.jsx("div",{className:Et.breathingBall}),r.jsx("p",{children:"Loading data..."})]}),!k&&!R&&l.length===0&&h.length===0&&f.length===0&&r.jsx("p",{className:Et.noDataMessage,children:"No data found for the selected period. Click 'Fetch Data'."})]})},sD=()=>{const t=localStorage.getItem("currentClinicId");return t||(console.warn("getCurrentClinicId: Clinic ID not found. Returning null. Ensure this is implemented correctly."),null)},hC=()=>localStorage.getItem("token"),j0=()=>{const[t,n]=_.useState([]),[e,i]=_.useState(!1),[s,l]=_.useState(null),[c,h]=_.useState(!1),[m,f]=_.useState(null),y=_.useRef(null),[x,S]=_.useState(!1),[w,j]=_.useState(null),[E,A]=_.useState(!1),[k,P]=_.useState(!1),[R,Y]=_.useState(null),[F,q]=_.useState({name:"",description:"",price:"",default_parameters:[]}),z=_.useCallback(async()=>{i(!0),l(null),f(null),j(null);try{const ae=await pe("/api/lab-tests");if(!ae.ok)throw new Error(`HTTP error! status: ${ae.status}`);const H=await ae.json();n(H)}catch(ae){console.error("Error fetching lab tests:",ae),l(ae.message||"Failed to fetch lab tests.")}finally{i(!1)}},[]);_.useEffect(()=>{z()},[z]);const L=ae=>{const{name:H,value:ne}=ae.target;q(me=>({...me,[H]:ne}))},V=(ae,H,ne)=>{const me=[...F.default_parameters],ue=me[ae];if(H==="type")switch(ue.type=ne,ne){case"number":ue.defaultValue=0,ue.lower_limit=null,ue.upper_limit=null,ue.unit="";break;case"boolean":ue.defaultValue=!1,ue.lower_limit=void 0,ue.upper_limit=void 0,ue.unit=void 0;break;case"string":default:ue.defaultValue="",ue.lower_limit=void 0,ue.upper_limit=void 0,ue.unit=void 0;break}else H==="defaultValue"?ue.type==="number"?ue.defaultValue=parseFloat(ne)||0:(ue.type,ue.defaultValue=ne):H==="lower_limit"||H==="upper_limit"?ue[H]=ne===""?null:parseFloat(ne):ue[H]=ne;q(je=>({...je,default_parameters:me}))},M=()=>{q(ae=>({...ae,default_parameters:[...ae.default_parameters,{name:"",type:"string",defaultValue:"",unit:"",lower_limit:null,upper_limit:null}]}))},B=ae=>{q(H=>({...H,default_parameters:H.default_parameters.filter((ne,me)=>me!==ae)}))},ee=async ae=>{ae.preventDefault(),i(!0),l(null);const H=R!==null,ne=H?`/api/lab-tests/${R}`:"/api/lab-tests",me=H?"PUT":"POST";try{const ue=await pe(ne,{method:me,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:F.name,description:F.description,price:parseFloat(F.price),default_parameters:F.default_parameters})});if(!ue.ok){const je=await ue.json();throw new Error(je.message||`HTTP error! status: ${ue.status}`)}P(!1),Y(null),q({name:"",description:"",price:"",default_parameters:[]}),z()}catch(ue){console.error(`Error ${H?"updating":"adding"} lab test:`,ue),l(ue.message||`Failed to ${H?"update":"add"} lab test.`)}finally{i(!1)}},ie=()=>{Y(null),q({name:"",description:"",price:"",default_parameters:[]}),P(!0)},te=ae=>{if(R===ae.id)Y(null);else{Y(ae.id);const H=(ae.default_parameters||[]).map(ne=>({...ne,unit:ne.unit||"",lower_limit:ne.lower_limit===void 0?null:ne.lower_limit,upper_limit:ne.upper_limit===void 0?null:ne.upper_limit}));q({name:ae.name,description:ae.description||"",price:ae.price,default_parameters:H}),P(!1)}},se=async ae=>{if(window.confirm("Are you sure you want to delete this lab test?")){i(!0),l(null);try{const H=await pe(`/api/lab-tests/${ae}`,{method:"DELETE"});if(!H.ok){const ne=await H.json();throw new Error(ne.message||`HTTP error! status: ${H.status}`)}z()}catch(H){console.error("Error deleting lab test:",H),l(H.message||"Failed to delete lab test.")}finally{i(!1)}}},X=()=>{P(!1),Y(null),l(null),q({name:"",description:"",price:"",default_parameters:[]})},K=async ae=>{if(!ae){f("No file selected.");return}h(!0),f(null),l(null);const H=new FormData;H.append("file",ae);try{const ne=await pe("/api/lab-tests/import",{method:"POST",body:H});if(!ne.ok){const me=await ne.json();throw new Error(me.message||`Import failed: ${ne.statusText}`)}z()}catch(ne){console.error("Error importing lab tests from Excel:",ne),f(ne.message||"Failed to import lab tests from Excel.")}finally{h(!1)}},re=async ae=>{if(ae.target.files&&ae.target.files[0]){const H=ae.target.files[0];await K(H),ae.target&&(ae.target.value="")}},ve=async()=>{if(window.confirm("Are you sure you want to import default biochemistry and pathology tests? This will add new tests and may duplicate existing ones if names match.")){S(!0),j(null),l(null);try{const ae=await pe("/api/lab-tests/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!ae.ok){const H=await ae.json();throw new Error(H.message||`Default import failed: ${ae.statusText}`)}z()}catch(ae){console.error("Error importing default lab tests:",ae),j(ae.message||"Failed to import default lab tests.")}finally{S(!1)}}},I=async()=>{if(window.confirm("Are you sure you want to delete ALL lab tests? This action cannot be undone.")){A(!0),l(null),f(null),j(null);try{const ae=await pe("/api/lab-tests/all",{method:"DELETE"});if(!ae.ok){const H=await ae.json();throw new Error(H.message||`Delete all failed: ${ae.statusText}`)}z()}catch(ae){console.error("Error deleting all lab tests:",ae),l(ae.message||"Failed to delete all lab tests.")}finally{A(!1)}}},de=e||c||x||E;return r.jsxs("div",{className:"lab-inventory-card",children:[r.jsx("h2",{className:"lab-inventory-header",children:"Available Lab Tests"}),r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px"},children:[r.jsx("button",{onClick:ie,className:"lab-inventory-button",disabled:de,children:"Add New Test"}),r.jsx("button",{onClick:()=>{var ae;return(ae=y.current)==null?void 0:ae.click()},className:"lab-inventory-button lab-inventory-button-secondary",disabled:de,children:c?"Importing...":"Import from Excel"}),r.jsx("input",{type:"file",ref:y,onChange:re,accept:".xlsx, .xls",style:{display:"none"},disabled:c}),r.jsx("button",{onClick:ve,className:"lab-inventory-button lab-inventory-button-secondary",disabled:de,children:x?"Importing Defaults...":"Import Default Tests"}),r.jsx("button",{onClick:I,className:"lab-inventory-button lab-inventory-button-danger",disabled:de,style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white"},children:E?"Deleting All...":"Delete All Tests"})]}),s&&r.jsx("div",{className:"error-text mb-4",children:s}),m&&r.jsxs("div",{className:"error-text mb-4",children:["Import Excel Error: ",m]}),w&&r.jsxs("div",{className:"error-text mb-4",children:["Import Default Error: ",w]}),k&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",marginBottom:"20px"},children:[" ",r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Add New Lab Test"}),r.jsxs("form",{onSubmit:ee,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:F.name,onChange:L,className:"lab-inventory-input",required:!0,disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:F.description,onChange:L,rows:3,className:"lab-inventory-input",disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:F.price,onChange:L,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginTop:"20px",marginBottom:"10px"},children:"Default Parameters"}),F.default_parameters.map((ae,H)=>{var ne,me;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ae.name,onChange:ue=>V(H,"name",ue.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ae.type,onChange:ue=>V(H,"type",ue.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ae.type==="boolean"?r.jsxs("select",{value:ae.defaultValue.toString(),onChange:ue=>V(H,"defaultValue",ue.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ae.type==="number"?"number":"text",placeholder:"Default Value",value:ae.defaultValue.toString(),onChange:ue=>V(H,"defaultValue",ue.target.value),className:"lab-inventory-input"}),ae.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ae.lower_limit===null?"":((ne=ae.lower_limit)==null?void 0:ne.toString())??"",onChange:ue=>V(H,"lower_limit",ue.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ae.upper_limit===null?"":((me=ae.upper_limit)==null?void 0:me.toString())??"",onChange:ue=>V(H,"upper_limit",ue.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ae.unit||"",onChange:ue=>V(H,"unit",ue.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>B(H),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},H)}),r.jsx("button",{type:"button",onClick:M,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:X,className:"lab-inventory-button lab-inventory-button-secondary",disabled:de,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:de,children:e?"Saving...":"Add Test"})]})]})]}),de&&!k&&r.jsxs("p",{className:"loading-text",children:[" ",c?"Importing Excel data...":x?"Importing default data...":"Loading tests..."]}),!de&&t.length===0&&!s&&!m&&!w&&r.jsx("p",{className:"no-data-message",children:"No lab tests found. Add one or import from Excel to get started."}),!de&&t.length>0&&r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Description"})," ",r.jsx("th",{children:"Price"}),r.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),r.jsx("tbody",{children:t.map(ae=>{const H=R===ae.id,ne=ae.price&&typeof ae.price=="string"?parseFloat(ae.price):NaN,me=isNaN(ne)?"0.00":ne.toFixed(2);return r.jsxs(ll.Fragment,{children:[r.jsxs("tr",{onClick:()=>te(ae),style:{cursor:"pointer"},children:[r.jsx("td",{children:ae.name}),r.jsx("td",{className:"hidden md:table-cell",style:{whiteSpace:"pre-wrap"},children:ae.description||"-"}),r.jsxs("td",{children:["₹",me]}),r.jsx("td",{style:{textAlign:"right"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{onClick:ue=>{ue.stopPropagation(),te(ae)},className:"lab-inventory-link",disabled:de,style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Edit"}),r.jsx("button",{onClick:ue=>{ue.stopPropagation(),se(ae.id)},className:"lab-inventory-link",disabled:de,style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:"Delete"})]})})]}),H&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"10px",marginBottom:"10px",border:"1px solid #ddd",padding:"15px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em"},children:"Edit Lab Test"}),r.jsxs("form",{onSubmit:ee,children:[r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Test Name ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:F.name,onChange:L,className:"lab-inventory-input",required:!0,disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",value:F.description,onChange:L,rows:3,className:"lab-inventory-input",disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price ",r.jsx("span",{style:{color:"red"},children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",value:F.price,onChange:L,min:"0",step:"0.01",className:"lab-inventory-input",required:!0,disabled:de})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",marginTop:"15px"},children:"Default Parameters"}),F.default_parameters.map((ue,je)=>{var ge,Ge;return r.jsxs("div",{className:"parameter-item",style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr auto",gap:"10px",alignItems:"center",marginBottom:"10px"},children:[r.jsx("input",{type:"text",placeholder:"Parameter Name",value:ue.name,onChange:Te=>V(je,"name",Te.target.value),className:"lab-inventory-input"}),r.jsxs("select",{value:ue.type,onChange:Te=>V(je,"type",Te.target.value),className:"lab-inventory-input",children:[r.jsx("option",{value:"string",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Yes/No"})]}),ue.type==="boolean"?r.jsxs("select",{value:ue.defaultValue.toString(),onChange:Te=>V(je,"defaultValue",Te.target.value==="true"),className:"lab-inventory-input",children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-reactive"})]}):r.jsx("input",{type:ue.type==="number"?"number":"text",placeholder:"Default Value",value:ue.defaultValue.toString(),onChange:Te=>V(je,"defaultValue",Te.target.value),className:"lab-inventory-input"}),ue.type==="number"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",placeholder:"Lower Limit",value:ue.lower_limit===null?"":((ge=ue.lower_limit)==null?void 0:ge.toString())??"",onChange:Te=>V(je,"lower_limit",Te.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"number",placeholder:"Upper Limit",value:ue.upper_limit===null?"":((Ge=ue.upper_limit)==null?void 0:Ge.toString())??"",onChange:Te=>V(je,"upper_limit",Te.target.value),className:"lab-inventory-input"}),r.jsx("input",{type:"text",placeholder:"Unit (e.g., mg/dL)",value:ue.unit||"",onChange:Te=>V(je,"unit",Te.target.value),className:"lab-inventory-input"})]}),r.jsx("button",{type:"button",onClick:()=>B(je),className:"lab-inventory-button lab-inventory-button-danger",children:"Remove"})]},je)}),r.jsx("button",{type:"button",onClick:M,className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"10px"},children:"Add Parameter"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[r.jsx("button",{type:"button",onClick:X,className:"lab-inventory-button lab-inventory-button-secondary",disabled:de,children:"Cancel"}),r.jsx("button",{type:"submit",className:"lab-inventory-button",disabled:de,children:e?"Saving...":"Update Test"})]})]})]})})})]},ae.id)})})]})]})]})},mC=6048e5,oD=864e5,pC=6e4,gC=36e5,$1=Symbol.for("constructDateFrom");function Ds(t,n){return typeof t=="function"?t(n):t&&typeof t=="object"&&$1 in t?t[$1](n):t instanceof Date?new t.constructor(n):new Date(n)}function mr(t,n){return Ds(n||t,t)}function Db(t,n,e){const i=mr(t,e==null?void 0:e.in);if(isNaN(n))return Ds(t,NaN);if(!n)return i;const s=i.getDate(),l=Ds(t,i.getTime());l.setMonth(i.getMonth()+n+1,0);const c=l.getDate();return s>=c?l:(i.setFullYear(l.getFullYear(),l.getMonth(),s),i)}let lD={};function wx(){return lD}function ep(t,n){var h,m,f,y;const e=wx(),i=(n==null?void 0:n.weekStartsOn)??((m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??e.weekStartsOn??((y=(f=e.locale)==null?void 0:f.options)==null?void 0:y.weekStartsOn)??0,s=mr(t,n==null?void 0:n.in),l=s.getDay(),c=(l<i?7:0)+l-i;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function Xy(t,n){return ep(t,{...n,weekStartsOn:1})}function yC(t,n){const e=mr(t,n==null?void 0:n.in),i=e.getFullYear(),s=Ds(e,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const l=Xy(s),c=Ds(e,0);c.setFullYear(i,0,4),c.setHours(0,0,0,0);const h=Xy(c);return e.getTime()>=l.getTime()?i+1:e.getTime()>=h.getTime()?i:i-1}function U1(t){const n=mr(t),e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+t-+e}function cD(t,...n){const e=Ds.bind(null,n.find(i=>typeof i=="object"));return n.map(e)}function B1(t,n){const e=mr(t,n==null?void 0:n.in);return e.setHours(0,0,0,0),e}function uD(t,n,e){const[i,s]=cD(e==null?void 0:e.in,t,n),l=B1(i),c=B1(s),h=+l-U1(l),m=+c-U1(c);return Math.round((h-m)/oD)}function dD(t,n){const e=yC(t,n),i=Ds(t,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),Xy(i)}function fD(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tp(t){return!(!fD(t)&&typeof t!="number"||isNaN(+mr(t)))}function hD(t,n){const e=mr(t,n==null?void 0:n.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const mD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pD=(t,n,e)=>{let i;const s=mD[t];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Bv(t){return(n={})=>{const e=n.width?String(n.width):t.defaultWidth;return t.formats[e]||t.formats[t.defaultWidth]}}const gD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vD={date:Bv({formats:gD,defaultWidth:"full"}),time:Bv({formats:yD,defaultWidth:"full"}),dateTime:Bv({formats:xD,defaultWidth:"full"})},bD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wD=(t,n,e,i)=>bD[t];function Rm(t){return(n,e)=>{const i=e!=null&&e.context?String(e.context):"standalone";let s;if(i==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,h=e!=null&&e.width?String(e.width):c;s=t.formattingValues[h]||t.formattingValues[c]}else{const c=t.defaultWidth,h=e!=null&&e.width?String(e.width):t.defaultWidth;s=t.values[h]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(n):n;return s[l]}}const SD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ND={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},CD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_D={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ED=(t,n)=>{const e=Number(t),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},AD={ordinalNumber:ED,era:Rm({values:SD,defaultWidth:"wide"}),quarter:Rm({values:ND,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Rm({values:CD,defaultWidth:"wide"}),day:Rm({values:_D,defaultWidth:"wide"}),dayPeriod:Rm({values:jD,defaultWidth:"wide",formattingValues:TD,defaultFormattingWidth:"wide"})};function Mm(t){return(n,e={})=>{const i=e.width,s=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],l=n.match(s);if(!l)return null;const c=l[0],h=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(h)?DD(h,x=>x.test(c)):kD(h,x=>x.test(c));let f;f=t.valueCallback?t.valueCallback(m):m,f=e.valueCallback?e.valueCallback(f):f;const y=n.slice(c.length);return{value:f,rest:y}}}function kD(t,n){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n(t[e]))return e}function DD(t,n){for(let e=0;e<t.length;e++)if(n(t[e]))return e}function PD(t){return(n,e={})=>{const i=n.match(t.matchPattern);if(!i)return null;const s=i[0],l=n.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=e.valueCallback?e.valueCallback(c):c;const h=n.slice(s.length);return{value:c,rest:h}}}const RD=/^(\d+)(th|st|nd|rd)?/i,MD=/\d+/i,ID={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OD={any:[/^b/i,/^(a|c)/i]},LD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FD={any:[/1/i,/2/i,/3/i,/4/i]},zD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$D={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},UD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},HD={ordinalNumber:PD({matchPattern:RD,parsePattern:MD,valueCallback:t=>parseInt(t,10)}),era:Mm({matchPatterns:ID,defaultMatchWidth:"wide",parsePatterns:OD,defaultParseWidth:"any"}),quarter:Mm({matchPatterns:LD,defaultMatchWidth:"wide",parsePatterns:FD,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mm({matchPatterns:zD,defaultMatchWidth:"wide",parsePatterns:$D,defaultParseWidth:"any"}),day:Mm({matchPatterns:UD,defaultMatchWidth:"wide",parsePatterns:BD,defaultParseWidth:"any"}),dayPeriod:Mm({matchPatterns:qD,defaultMatchWidth:"any",parsePatterns:VD,defaultParseWidth:"any"})},GD={code:"en-US",formatDistance:pD,formatLong:vD,formatRelative:wD,localize:AD,match:HD,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YD(t,n){const e=mr(t,n==null?void 0:n.in);return uD(e,hD(e))+1}function WD(t,n){const e=mr(t,n==null?void 0:n.in),i=+Xy(e)-+dD(e);return Math.round(i/mC)+1}function xC(t,n){var y,x,S,w;const e=mr(t,n==null?void 0:n.in),i=e.getFullYear(),s=wx(),l=(n==null?void 0:n.firstWeekContainsDate)??((x=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??s.firstWeekContainsDate??((w=(S=s.locale)==null?void 0:S.options)==null?void 0:w.firstWeekContainsDate)??1,c=Ds((n==null?void 0:n.in)||t,0);c.setFullYear(i+1,0,l),c.setHours(0,0,0,0);const h=ep(c,n),m=Ds((n==null?void 0:n.in)||t,0);m.setFullYear(i,0,l),m.setHours(0,0,0,0);const f=ep(m,n);return+e>=+h?i+1:+e>=+f?i:i-1}function JD(t,n){var h,m,f,y;const e=wx(),i=(n==null?void 0:n.firstWeekContainsDate)??((m=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??e.firstWeekContainsDate??((y=(f=e.locale)==null?void 0:f.options)==null?void 0:y.firstWeekContainsDate)??1,s=xC(t,n),l=Ds((n==null?void 0:n.in)||t,0);return l.setFullYear(s,0,i),l.setHours(0,0,0,0),ep(l,n)}function QD(t,n){const e=mr(t,n==null?void 0:n.in),i=+ep(e,n)-+JD(e,n);return Math.round(i/mC)+1}function Nn(t,n){const e=t<0?"-":"",i=Math.abs(t).toString().padStart(n,"0");return e+i}const vc={y(t,n){const e=t.getFullYear(),i=e>0?e:1-e;return Nn(n==="yy"?i%100:i,n.length)},M(t,n){const e=t.getMonth();return n==="M"?String(e+1):Nn(e+1,2)},d(t,n){return Nn(t.getDate(),n.length)},a(t,n){const e=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(t,n){return Nn(t.getHours()%12||12,n.length)},H(t,n){return Nn(t.getHours(),n.length)},m(t,n){return Nn(t.getMinutes(),n.length)},s(t,n){return Nn(t.getSeconds(),n.length)},S(t,n){const e=n.length,i=t.getMilliseconds(),s=Math.trunc(i*Math.pow(10,e-3));return Nn(s,n.length)}},kf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},q1={G:function(t,n,e){const i=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){const i=t.getFullYear(),s=i>0?i:1-i;return e.ordinalNumber(s,{unit:"year"})}return vc.y(t,n)},Y:function(t,n,e,i){const s=xC(t,i),l=s>0?s:1-s;if(n==="YY"){const c=l%100;return Nn(c,2)}return n==="Yo"?e.ordinalNumber(l,{unit:"year"}):Nn(l,n.length)},R:function(t,n){const e=yC(t);return Nn(e,n.length)},u:function(t,n){const e=t.getFullYear();return Nn(e,n.length)},Q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Nn(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,n,e){const i=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Nn(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,n,e){const i=t.getMonth();switch(n){case"M":case"MM":return vc.M(t,n);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(t,n,e){const i=t.getMonth();switch(n){case"L":return String(i+1);case"LL":return Nn(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(t,n,e,i){const s=QD(t,i);return n==="wo"?e.ordinalNumber(s,{unit:"week"}):Nn(s,n.length)},I:function(t,n,e){const i=WD(t);return n==="Io"?e.ordinalNumber(i,{unit:"week"}):Nn(i,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getDate(),{unit:"date"}):vc.d(t,n)},D:function(t,n,e){const i=YD(t);return n==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):Nn(i,n.length)},E:function(t,n,e){const i=t.getDay();switch(n){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(t,n,e,i){const s=t.getDay(),l=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(l);case"ee":return Nn(l,2);case"eo":return e.ordinalNumber(l,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(t,n,e,i){const s=t.getDay(),l=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(l);case"cc":return Nn(l,n.length);case"co":return e.ordinalNumber(l,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(t,n,e){const i=t.getDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Nn(s,n.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(t,n,e){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,n,e){const i=t.getHours();let s;switch(i===12?s=kf.noon:i===0?s=kf.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,n,e){const i=t.getHours();let s;switch(i>=17?s=kf.evening:i>=12?s=kf.afternoon:i>=4?s=kf.morning:s=kf.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){let i=t.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return vc.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getHours(),{unit:"hour"}):vc.H(t,n)},K:function(t,n,e){const i=t.getHours()%12;return n==="Ko"?e.ordinalNumber(i,{unit:"hour"}):Nn(i,n.length)},k:function(t,n,e){let i=t.getHours();return i===0&&(i=24),n==="ko"?e.ordinalNumber(i,{unit:"hour"}):Nn(i,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getMinutes(),{unit:"minute"}):vc.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getSeconds(),{unit:"second"}):vc.s(t,n)},S:function(t,n){return vc.S(t,n)},X:function(t,n,e){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return H1(i);case"XXXX":case"XX":return Wu(i);case"XXXXX":case"XXX":default:return Wu(i,":")}},x:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"x":return H1(i);case"xxxx":case"xx":return Wu(i);case"xxxxx":case"xxx":default:return Wu(i,":")}},O:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+V1(i,":");case"OOOO":default:return"GMT"+Wu(i,":")}},z:function(t,n,e){const i=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+V1(i,":");case"zzzz":default:return"GMT"+Wu(i,":")}},t:function(t,n,e){const i=Math.trunc(+t/1e3);return Nn(i,n.length)},T:function(t,n,e){return Nn(+t,n.length)}};function V1(t,n=""){const e=t>0?"-":"+",i=Math.abs(t),s=Math.trunc(i/60),l=i%60;return l===0?e+String(s):e+String(s)+n+Nn(l,2)}function H1(t,n){return t%60===0?(t>0?"-":"+")+Nn(Math.abs(t)/60,2):Wu(t,n)}function Wu(t,n=""){const e=t>0?"-":"+",i=Math.abs(t),s=Nn(Math.trunc(i/60),2),l=Nn(i%60,2);return e+s+n+l}const G1=(t,n)=>{switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},vC=(t,n)=>{switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},KD=(t,n)=>{const e=t.match(/(P+)(p+)?/)||[],i=e[1],s=e[2];if(!s)return G1(t,n);let l;switch(i){case"P":l=n.dateTime({width:"short"});break;case"PP":l=n.dateTime({width:"medium"});break;case"PPP":l=n.dateTime({width:"long"});break;case"PPPP":default:l=n.dateTime({width:"full"});break}return l.replace("{{date}}",G1(i,n)).replace("{{time}}",vC(s,n))},XD={p:vC,P:KD},ZD=/^D+$/,eP=/^Y+$/,tP=["D","DD","YY","YYYY"];function nP(t){return ZD.test(t)}function iP(t){return eP.test(t)}function rP(t,n,e){const i=aP(t,n,e);if(console.warn(i),tP.includes(t))throw new RangeError(i)}function aP(t,n,e){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lP=/^'([^]*?)'?$/,cP=/''/g,uP=/[a-zA-Z]/;function Vf(t,n,e){var y,x,S,w;const i=wx(),s=i.locale??GD,l=i.firstWeekContainsDate??((x=(y=i.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)??1,c=i.weekStartsOn??((w=(S=i.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,h=mr(t,e==null?void 0:e.in);if(!tp(h))throw new RangeError("Invalid time value");let m=n.match(oP).map(j=>{const E=j[0];if(E==="p"||E==="P"){const A=XD[E];return A(j,s.formatLong)}return j}).join("").match(sP).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const E=j[0];if(E==="'")return{isToken:!1,value:dP(j)};if(q1[E])return{isToken:!0,value:j};if(E.match(uP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:j}});s.localize.preprocessor&&(m=s.localize.preprocessor(h,m));const f={firstWeekContainsDate:l,weekStartsOn:c,locale:s};return m.map(j=>{if(!j.isToken)return j.value;const E=j.value;(iP(E)||nP(E))&&rP(E,n,String(t));const A=q1[E[0]];return A(h,E,s.localize,f)}).join("")}function dP(t){const n=t.match(lP);return n?n[1].replace(cP,"'"):t}function Ju(t,n){return+mr(t)<+mr(n)}function Zy(t,n){const e=()=>Ds(n==null?void 0:n.in,NaN),s=pP(t);let l;if(s.date){const f=gP(s.date,2);l=yP(f.restDateString,f.year)}if(!l||isNaN(+l))return e();const c=+l;let h=0,m;if(s.time&&(h=xP(s.time),isNaN(h)))return e();if(s.timezone){if(m=vP(s.timezone),isNaN(m))return e()}else{const f=new Date(c+h),y=mr(0,n==null?void 0:n.in);return y.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),y.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),y}return mr(c+h+m,n==null?void 0:n.in)}const gy={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fP=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,hP=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mP=/^([+-])(\d{2})(?::?(\d{2}))?$/;function pP(t){const n={},e=t.split(gy.dateTimeDelimiter);let i;if(e.length>2)return n;if(/:/.test(e[0])?i=e[0]:(n.date=e[0],i=e[1],gy.timeZoneDelimiter.test(n.date)&&(n.date=t.split(gy.timeZoneDelimiter)[0],i=t.substr(n.date.length,t.length))),i){const s=gy.timezone.exec(i);s?(n.time=i.replace(s[1],""),n.timezone=s[1]):n.time=i}return n}function gP(t,n){const e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),i=t.match(e);if(!i)return{year:NaN,restDateString:""};const s=i[1]?parseInt(i[1]):null,l=i[2]?parseInt(i[2]):null;return{year:l===null?s:l*100,restDateString:t.slice((i[1]||i[2]).length)}}function yP(t,n){if(n===null)return new Date(NaN);const e=t.match(fP);if(!e)return new Date(NaN);const i=!!e[4],s=Im(e[1]),l=Im(e[2])-1,c=Im(e[3]),h=Im(e[4]),m=Im(e[5])-1;if(i)return CP(n,h,m)?bP(n,h,m):new Date(NaN);{const f=new Date(0);return!SP(n,l,c)||!NP(n,s)?new Date(NaN):(f.setUTCFullYear(n,l,Math.max(s,c)),f)}}function Im(t){return t?parseInt(t):1}function xP(t){const n=t.match(hP);if(!n)return NaN;const e=qv(n[1]),i=qv(n[2]),s=qv(n[3]);return _P(e,i,s)?e*gC+i*pC+s*1e3:NaN}function qv(t){return t&&parseFloat(t.replace(",","."))||0}function vP(t){if(t==="Z")return 0;const n=t.match(mP);if(!n)return 0;const e=n[1]==="+"?-1:1,i=parseInt(n[2]),s=n[3]&&parseInt(n[3])||0;return jP(i,s)?e*(i*gC+s*pC):NaN}function bP(t,n,e){const i=new Date(0);i.setUTCFullYear(t,0,4);const s=i.getUTCDay()||7,l=(n-1)*7+e+1-s;return i.setUTCDate(i.getUTCDate()+l),i}const wP=[31,null,31,30,31,30,31,31,30,31,30,31];function bC(t){return t%400===0||t%4===0&&t%100!==0}function SP(t,n,e){return n>=0&&n<=11&&e>=1&&e<=(wP[n]||(bC(t)?29:28))}function NP(t,n){return n>=1&&n<=(bC(t)?366:365)}function CP(t,n,e){return n>=1&&n<=53&&e>=0&&e<=6}function _P(t,n,e){return t===24?n===0&&e===0:e>=0&&e<60&&n>=0&&n<60&&t>=0&&t<25}function jP(t,n){return n>=0&&n<=59}const TP=10,EP=3,wC=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState([]),[l,c]=_.useState(""),[h,m]=_.useState(!0),[f,y]=_.useState(null),[x,S]=_.useState(!1),[w,j]=_.useState(!1),E=_.useRef(null),[A,k]=_.useState(new Set),[P,R]=_.useState("all"),[Y,F]=_.useState(!1),[q,z]=_.useState(!1),[L,V]=_.useState(null),[M,B]=_.useState(!1),[ee,ie]=_.useState(null),[te,se]=_.useState(0),X=_.useCallback(async()=>{m(!0),y(null);try{const Te=await pe("/api/drugs");if(!Te.ok)throw new Error(`Failed to fetch drugs: ${Te.statusText} (${Te.status})`);let Ne=await Te.json();Ne=Ne.map(Be=>({...Be,price:parseFloat(String(Be.price))||0,buying_price:Be.buying_price!==null&&Be.buying_price!==void 0?parseFloat(String(Be.buying_price)):null,quantity_in_stock:parseInt(String(Be.quantity_in_stock),10)||0})),e(Ne),s(Ne)}catch(Te){console.error("Failed to fetch drugs:",Te),y(Te.message||"Failed to load inventory. Please try again.")}finally{m(!1)}},[]);_.useEffect(()=>{X()},[X]),_.useEffect(()=>{const Te=l.toLowerCase();let Ne=n.filter($e=>$e.name.toLowerCase().includes(Te)||$e.description&&$e.description.toLowerCase().includes(Te)||$e.supplier&&$e.supplier.toLowerCase().includes(Te)||$e.box_number&&$e.box_number.toLowerCase().includes(Te));const Be=new Date,Qe=Db(Be,EP);P==="low-stock"?Ne=Ne.filter($e=>$e.quantity_in_stock<=TP):P==="near-expiry"?Ne=Ne.filter($e=>{if(!$e.expiry_date)return!1;const ht=Zy($e.expiry_date);return tp(ht)&&Ju(ht,Qe)&&!Ju(ht,Be)}):P==="expired"&&(Ne=Ne.filter($e=>{if(!$e.expiry_date)return!1;const ht=Zy($e.expiry_date);return tp(ht)&&Ju(ht,Be)})),s(Ne)},[l,n,P]);const K=()=>{F(!1),ie(null)},re=Te=>{se(parseInt(Te.target.value,10)||0)},ve=async Te=>{if(Te.preventDefault(),y(null),!ee||!ee.id||te===0){y("No drug selected or adjustment amount is zero.");return}try{const Ne=await pe(`/api/drugs/${ee.id}/adjust-stock`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantityChange:te})});if(!Ne.ok){const Qe=await Ne.json();throw new Error(Qe.message||`Failed to adjust stock: ${Ne.statusText}`)}const Be=await Ne.json();e(Qe=>Qe.map($e=>$e.id===Be.id?Be:$e)),K(),alert(`Stock for "${Be.name}" adjusted successfully. New stock: ${Be.quantity_in_stock}`)}catch(Ne){console.error("Failed to adjust stock:",Ne),y(Ne.message||"Failed to adjust stock. Please try again.")}},I=async Te=>{if(!Te){y("No file provided for import.");return}S(!0),y(null);const Ne=new FormData;Ne.append("inventoryFile",Te);try{const Be=await pe("/api/drugs/import",{method:"POST",body:Ne});if(!Be.ok){const $e=await Be.json();throw new Error($e.message||`Failed to import data: ${Be.statusText}`)}const Qe=await Be.json();alert(`Import successful! ${Qe.message||"Inventory updated."}`),X()}catch(Be){console.error("Failed to import drugs:",Be),y(Be.message||"Failed to import data. Please check the file format and try again."),alert(`Import failed: ${Be.message||"Please check the file format and try again."}`)}finally{E.current&&(E.current.value=""),S(!1)}},de=Te=>{if(Te.target.files&&Te.target.files[0]){const Ne=Te.target.files[0];y(null),I(Ne)}},ae=()=>{var Te;(Te=E.current)==null||Te.click()},H=async()=>{j(!0),y(null);try{const Te=await pe("/api/drugs/import-defaults",{method:"POST",headers:{"Content-Type":"application/json"}});if(!Te.ok){const Be=await Te.json();throw new Error(Be.message||`Failed to import default medications: ${Te.statusText}`)}const Ne=await Te.json();alert(`Default medications import successful! ${Ne.message||"Inventory updated with default medications."}`),X()}catch(Te){console.error("Failed to import default medications:",Te),y(Te.message||"Failed to import default medications. Please try again."),alert(`Default medications import failed: ${Te.message||"Please try again."}`)}finally{j(!1)}},ne=Te=>{V(Te),z(!0)},me=()=>{z(!1),V(null)},ue=async()=>{if(!L||!L.id){y("No drug selected for deletion.");return}m(!0),y(null);try{const Te=await pe(`/api/drugs/${L.id}`,{method:"DELETE"});if(!Te.ok){const Ne=await Te.json();throw new Error(Ne.message||`Failed to delete drug: ${Te.statusText}`)}alert(`Drug "${L.name}" deleted successfully.`),X(),me()}catch(Te){console.error("Failed to delete drug:",Te),y(Te.message||"Failed to delete drug. Please try again.")}finally{m(!1)}},je=()=>{B(!0)},ge=()=>{B(!1)},Ge=async()=>{m(!0),y(null);try{const Te=await pe("/api/drugs/all",{method:"DELETE"});if(!Te.ok){const Ne=await Te.json();throw new Error(Ne.message||`Failed to delete all drugs: ${Te.statusText}`)}alert("All drugs deleted successfully."),X(),ge()}catch(Te){console.error("Failed to delete all drugs:",Te),y(Te.message||"Failed to delete all drugs. Please try again.")}finally{m(!1)}};return h?r.jsx("div",{className:"loading-indicator",children:"Loading Inventory..."}):f?r.jsxs("div",{className:"error-indicator",children:["Error: ",f]}):r.jsxs("div",{className:"pharmacy-inventory-page",children:[r.jsxs("div",{className:"inventory-header-controls",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("button",{onClick:()=>t(-1),className:"action-icon-button",title:"Go Back",children:r.jsx(en,{size:24})}),r.jsx("h2",{className:"inventory-page-title",children:"Pharmacy Inventory"})]}),r.jsxs("div",{className:"inventory-actions-group",children:[r.jsxs("div",{children:[" ",r.jsx("input",{ref:E,id:"excel-upload",name:"excel-upload",type:"file",className:"sr-only",accept:".xlsx, .xls",onChange:de}),r.jsxs("button",{onClick:ae,disabled:x,className:`action-button import-button ${x?"importing":""}`,children:[r.jsx(wk,{size:18,className:"button-icon"}),x?"Importing...":"Import from Excel"]})]}),r.jsxs("button",{onClick:je,className:"action-button delete-all-drugs-button",children:[r.jsx(Co,{size:18,className:"button-icon"}),"Delete All Drugs"]}),r.jsxs("button",{onClick:H,disabled:w,className:`action-button import-defaults-button ${w?"importing":""}`,children:[r.jsx(kA,{size:18,className:"button-icon"}),w?"Importing...":"Add Default Medications"]}),r.jsxs("button",{onClick:()=>t("add"),className:"action-button add-drug-button",children:[r.jsx(up,{size:18,className:"button-icon"}),"Add New Drug"]})]})]}),r.jsxs("div",{className:"search-bar-container",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search drugs by name, description, or supplier...",value:l,onChange:Te=>c(Te.target.value),className:"inventory-search-input"}),r.jsx(Ts,{size:18,className:"search-input-icon"})]}),r.jsxs("div",{className:"filter-dropdown-wrapper",children:[r.jsx("label",{htmlFor:"filter-option",className:"sr-only",children:"Filter Inventory"}),r.jsxs("select",{id:"filter-option",value:P,onChange:Te=>R(Te.target.value),className:"inventory-filter-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})]})]}),r.jsx("div",{className:"inventory-table-container",children:r.jsxs("table",{className:"inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"text-price",children:"Price"}),r.jsx("th",{className:"text-stock",children:"Stock"}),r.jsx("th",{children:"Unit"}),r.jsx("th",{children:"Expiry"}),r.jsx("th",{children:"Box Number"}),r.jsx("th",{className:"actions-cell",children:"Actions"}),r.jsx("th",{})," "]})}),r.jsxs("tbody",{children:[i.length===0&&r.jsxs("tr",{className:"no-results-message",children:[r.jsx("td",{colSpan:8,children:"No drugs found matching your search."})," "]}),i.map(Te=>r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:"drug-row",children:[r.jsx("td",{className:"text-drug-name",children:Te.name}),r.jsxs("td",{className:"text-muted text-price",children:["₹",typeof Te.price=="number"?Te.price.toFixed(2):"N/A"]}),r.jsx("td",{className:`text-stock ${Te.quantity_in_stock<=10?"low-stock":""}`,children:Te.quantity_in_stock}),r.jsx("td",{className:"text-muted",children:Te.unit||"-"}),r.jsx("td",{className:"text-muted",children:Te.expiry_date?new Date(Te.expiry_date).toLocaleDateString():"-"}),r.jsx("td",{className:"text-muted",children:Te.box_number||"-"}),r.jsx("td",{className:"actions-cell",children:r.jsxs("div",{className:"actions-buttons-group",children:[r.jsx("button",{onClick:()=>t(`/dashboard/inventory/edit/${Te.id}`),className:"action-icon-button",title:"Edit Drug",children:r.jsx(qf,{size:16})}),r.jsx("button",{onClick:()=>ne(Te),className:"action-icon-button delete-button",title:"Delete Drug",children:r.jsx(Co,{size:16})})]})}),r.jsx("td",{className:"expand-collapse-cell",children:r.jsx("button",{onClick:()=>{const Ne=new Set(A);Ne.has(Te.id)?Ne.delete(Te.id):Ne.add(Te.id),k(Ne)},className:"action-icon-button expand-collapse-button",title:A.has(Te.id)?"Collapse Details":"Expand Details",children:A.has(Te.id)?r.jsx(Jy,{size:18}):r.jsx(Wy,{size:18})})})]},Te.id),A.has(Te.id)&&r.jsx("tr",{className:"collapsible-row",children:r.jsx("td",{colSpan:8,children:r.jsxs("div",{className:"collapsible-content",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Description:"})," ",Te.description||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Supplier:"})," ",Te.supplier||"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Cost:"})," ",Te.buying_price!==null&&Te.buying_price!==void 0?`₹${Te.buying_price.toFixed(2)}`:"-"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",new Date(Te.last_updated).toLocaleString()]})]})})})]}))]})]})}),q&&L&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:me,className:"modal-close-button",children:r.jsx(Vi,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),r.jsxs("p",{className:"modal-description",children:['Are you sure you want to delete "',r.jsx("span",{className:"drug-name",children:L.name}),'"? This action cannot be undone.']}),f&&r.jsx("div",{className:"modal-error-message",children:f}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:me,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:ue,className:"button-delete",children:"Delete"})]})]})}),Y&&ee&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:K,className:"modal-close-button",children:r.jsx(Vi,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Adjust Stock"}),r.jsxs("p",{className:"modal-description",children:["Drug: ",r.jsx("span",{className:"drug-name",children:ee.name}),r.jsx("br",{}),"Current Stock: ",ee.quantity_in_stock]}),f&&r.jsx("div",{className:"modal-error-message",children:f}),r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"adjustment",className:"form-label",children:"Adjustment Amount"}),r.jsx("input",{type:"number",name:"adjustment",id:"adjustment",required:!0,step:"1",value:te,onChange:re,placeholder:"e.g., 10 or -5",className:"form-input"}),r.jsx("p",{className:"form-help-text",children:"Enter a positive number to add stock, negative to remove."})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:K,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"submit",className:"button-submit",children:"Adjust Stock"})]})]})]})}),M&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("button",{onClick:ge,className:"modal-close-button",children:r.jsx(Vi,{size:20})}),r.jsx("h3",{className:"modal-title",children:"Confirm Deletion of All Drugs"}),r.jsxs("p",{className:"modal-description",children:["Are you sure you want to delete ",r.jsx("span",{className:"drug-name",children:"ALL"})," drugs from the inventory? This action cannot be undone."]}),f&&r.jsx("div",{className:"modal-error-message",children:f}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{type:"button",onClick:ge,className:"button-cancel",children:"Cancel"}),r.jsx("button",{type:"button",onClick:Ge,className:"button-delete",children:"Delete All"})]})]})})]})},AP="_container_1ihgb_1",kP="_title_1ihgb_17",DP="_dateRangeContainer_1ihgb_31",PP="_dateInputLabel_1ihgb_51",RP="_dateInput_1ihgb_51",MP="_fetchButton_1ihgb_87",IP="_sectionTitle_1ihgb_123",OP="_tableContainer_1ihgb_137",LP="_analysisTable_1ihgb_153",FP="_textRight_1ihgb_217",zP="_textGreen_1ihgb_225",$P="_textRed_1ihgb_233",UP="_textBlue_1ihgb_241",BP="_textOrange_1ihgb_249",qP="_fontMedium_1ihgb_257",VP="_alertBox_1ihgb_265",HP="_alertBoxError_1ihgb_283",GP="_alertBoxIcon_1ihgb_295",YP="_loadingContainer_1ihgb_303",WP="_viewSwitcher_1ihgb_321",JP="_viewButton_1ihgb_339",QP="_viewButtonActive_1ihgb_365",KP="_viewButtonInactive_1ihgb_383",XP="_totalsSummaryContainer_1ihgb_413",ZP="_totalsGrid_1ihgb_423",eR="_totalCard_1ihgb_443",tR="_totalLabel_1ihgb_459",nR="_totalValue_1ihgb_471",iR="_totalValueGreen_1ihgb_481",rR="_totalValueBlue_1ihgb_489",aR="_reasonDistribution_1ihgb_497",sR="_totalRow_1ihgb_513",qe={container:AP,title:kP,dateRangeContainer:DP,dateInputLabel:PP,dateInput:RP,fetchButton:MP,sectionTitle:IP,tableContainer:OP,analysisTable:LP,textRight:FP,textGreen:zP,textRed:$P,textBlue:UP,textOrange:BP,fontMedium:qP,alertBox:VP,alertBoxError:HP,alertBoxIcon:GP,loadingContainer:YP,viewSwitcher:WP,viewButton:JP,viewButtonActive:QP,viewButtonInactive:KP,totalsSummaryContainer:XP,totalsGrid:ZP,totalCard:eR,totalLabel:tR,totalValue:nR,totalValueGreen:iR,totalValueBlue:rR,reasonDistribution:aR,totalRow:sR},Pb=()=>{const t=Tt(),n=new Date().toISOString().split("T")[0],[e,i]=_.useState(n),[s,l]=_.useState(n),[c,h]=_.useState(null),[m,f]=_.useState(!1),[y,x]=_.useState(null),[S,w]=_.useState("analysis"),j=async()=>{if(f(!0),x(null),h(null),!e||!s){x("Please select both start and end dates."),f(!1);return}if(new Date(e)>new Date(s)){x("Start date cannot be after end date."),f(!1);return}try{const k=sD();if(!k){x("Clinic ID not found. Please log in again."),f(!1);return}const P=await pe(`/api/inventory/comprehensive-analysis?startDate=${e}&endDate=${s}&clinicId=${k}`);if(!P.ok){const Y=await P.json();throw new Error(Y.message||`HTTP error! status: ${P.status}`)}const R=await P.json();h(R)}catch(k){console.error("Failed to fetch comprehensive inventory analysis data:",k),x(k.message||"Failed to fetch data. Check console for details.")}finally{f(!1)}},E=()=>{j()},A=k=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(k);return r.jsxs("div",{className:qe.container,children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[" ",r.jsx("h2",{className:qe.title,children:"Inventory Analysis & Management"}),r.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 text-sm",children:"Back"})]}),r.jsxs("div",{className:qe.viewSwitcher,children:[r.jsxs("button",{onClick:()=>w("analysis"),className:`${qe.viewButton} ${S==="analysis"?qe.viewButtonActive:qe.viewButtonInactive}`,children:[r.jsx(ZE,{size:16})," ","Analysis"]}),r.jsxs("button",{onClick:()=>w("labInventory"),className:`${qe.viewButton} ${S==="labInventory"?qe.viewButtonActive:qe.viewButtonInactive}`,children:[r.jsx(N0,{size:16}),"Lab Test Inventory"]}),r.jsxs("button",{onClick:()=>t("/dashboard/inventory"),className:`${qe.viewButton} ${S==="pharmacyInventory"?qe.viewButtonActive:qe.viewButtonInactive}`,children:[r.jsx(_0,{size:16}),"Pharmacy Inventory"]})]}),S==="analysis"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:qe.dateRangeContainer,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start-date-inventory",className:qe.dateInputLabel,children:"Start Date:"}),r.jsx("input",{type:"date",id:"start-date-inventory",value:e,onChange:k=>i(k.target.value),className:qe.dateInput})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end-date-inventory",className:qe.dateInputLabel,children:"End Date:"}),r.jsx("input",{type:"date",id:"end-date-inventory",value:s,onChange:k=>l(k.target.value),className:qe.dateInput})]}),r.jsx("button",{onClick:E,disabled:m,className:qe.fetchButton,children:m?"Loading...":"Fetch Comprehensive Analysis"})]}),y&&r.jsxs("div",{className:`${qe.alertBox} ${qe.alertBoxError}`,role:"alert",children:[r.jsx("div",{className:qe.alertBoxIcon,children:r.jsx(wi,{size:18})}),r.jsxs("div",{children:[" ",r.jsxs("span",{children:["Error: ",y]})]})]}),m&&r.jsxs("div",{className:qe.loadingContainer,children:[" ",r.jsx("p",{children:"Loading data..."})]}),c&&!m&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:qe.sectionTitle,children:["Pharmacy Inventory Changes (",c.startDate," to ",c.endDate,")"]}),c.pharmacyAnalysis.length>0?r.jsx("div",{className:qe.tableContainer,children:r.jsxs("table",{className:qe.analysisTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Drug Name"}),r.jsx("th",{children:"Unit"}),r.jsx("th",{className:qe.textRight,children:"Price"}),r.jsx("th",{children:"Qty In (+)"}),r.jsx("th",{className:qe.textRight,children:"Qty Out (-)"}),r.jsx("th",{className:qe.textRight,children:"Net Change"}),r.jsx("th",{className:qe.textRight,children:"Buying Price"}),r.jsx("th",{className:qe.textRight,children:"Revenue (from Out)"}),r.jsx("th",{className:qe.textRight,children:"Profit"}),r.jsx("th",{children:"Supplier"})]})}),r.jsx("tbody",{children:c.pharmacyAnalysis.map(k=>r.jsxs("tr",{children:[r.jsx("td",{children:k.name}),r.jsx("td",{children:k.unit||"N/A"}),r.jsx("td",{className:qe.textRight,children:A(k.price)}),r.jsxs("td",{className:qe.textGreen,children:[" ",r.jsxs("div",{className:qe.reasonDistribution,children:[Object.entries(k.quantity_in_by_reason).map(([P,R])=>r.jsxs("div",{children:[r.jsxs("span",{children:[P,":"]}),r.jsx("span",{children:R})]},P)),Object.keys(k.quantity_in_by_reason).length>0&&r.jsxs("div",{className:qe.totalRow,children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:k.quantity_in})]})]})]}),r.jsxs("td",{className:qe.textRed,children:[" ",r.jsxs("div",{className:qe.reasonDistribution,children:[Object.entries(k.quantity_out_by_reason||{}).map(([P,R])=>r.jsxs("div",{children:[r.jsxs("span",{children:[P,":"]}),r.jsx("span",{children:R})]},P)),Object.keys(k.quantity_out_by_reason||{}).length>0&&r.jsxs("div",{className:qe.totalRow,children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:k.quantity_out})]}),(!k.quantity_out_by_reason||Object.keys(k.quantity_out_by_reason).length===0)&&r.jsx("div",{className:qe.textRight,children:k.quantity_out})]})]}),r.jsx("td",{className:`${qe.fontMedium} ${qe.textRight} ${k.net_change>=0?qe.textBlue:qe.textOrange}`,children:k.net_change}),r.jsx("td",{className:qe.textRight,children:A(k.buying_price)}),r.jsx("td",{className:`${qe.fontMedium} ${qe.textGreen} ${qe.textRight}`,children:A(k.revenue)}),r.jsx("td",{className:`${qe.fontMedium} ${qe.textBlue} ${qe.textRight}`,children:A(k.profit)}),r.jsx("td",{children:k.supplier||"N/A"})]},k.drug_id))}),r.jsx("tfoot",{children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:6,className:`${qe.textRight} ${qe.fontMedium}`,children:"Pharmacy Total Revenue:"}),r.jsx("td",{className:qe.textRight}),r.jsx("td",{className:`${qe.textRight} ${qe.fontMedium} ${qe.textGreen}`,children:A(c.totals.pharmacyRevenue)}),r.jsx("td",{className:`${qe.textRight} ${qe.fontMedium} ${qe.textBlue}`,children:A(c.totals.pharmacyProfit)}),r.jsx("td",{})]})})]})}):r.jsx("p",{className:"text-gray-500",children:"No pharmacy inventory changes found for the selected period."})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:qe.sectionTitle,children:[" ","Lab Test Usage (",c.startDate," to ",c.endDate,")"]}),c.labAnalysis.length>0?r.jsx("div",{className:qe.tableContainer,children:r.jsxs("table",{className:qe.analysisTable,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Test ID"}),r.jsx("th",{children:"Test Name"}),r.jsx("th",{className:qe.textRight,children:"Price"}),r.jsx("th",{className:qe.textRight,children:"Quantity Used"}),r.jsx("th",{className:qe.textRight,children:"Revenue"})]})}),r.jsx("tbody",{children:c.labAnalysis.map(k=>r.jsxs("tr",{children:[r.jsx("td",{children:k.test_id}),r.jsx("td",{children:k.name}),r.jsx("td",{className:qe.textRight,children:A(k.price)}),r.jsx("td",{className:`${qe.textRed} ${qe.textRight}`,children:k.quantity_out}),r.jsx("td",{className:`${qe.fontMedium} ${qe.textGreen} ${qe.textRight}`,children:A(k.revenue)})]},k.test_id))}),r.jsx("tfoot",{children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:4,className:`${qe.textRight} ${qe.fontMedium}`,children:"Lab Total Revenue:"}),r.jsx("td",{className:`${qe.textRight} ${qe.fontMedium} ${qe.textGreen}`,children:A(c.totals.labRevenue)})]})})]})}):r.jsx("p",{className:"text-gray-500",children:"No lab test usage found for the selected period."})]}),r.jsxs("div",{className:qe.totalsSummaryContainer,children:[r.jsx("h3",{className:qe.sectionTitle,children:"Overall Totals"}),r.jsxs("div",{className:qe.totalsGrid,children:[r.jsxs("div",{className:qe.totalCard,children:[r.jsx("p",{className:qe.totalLabel,children:"Total Pharmacy Revenue"}),r.jsx("p",{className:`${qe.totalValue} ${qe.totalValueGreen}`,children:A(c.totals.pharmacyRevenue)})]}),r.jsxs("div",{className:qe.totalCard,children:[r.jsx("p",{className:qe.totalLabel,children:"Total Pharmacy Profit"}),r.jsx("p",{className:`${qe.totalValue} ${qe.totalValueBlue}`,children:A(c.totals.pharmacyProfit)})]}),r.jsxs("div",{className:qe.totalCard,children:[r.jsx("p",{className:qe.totalLabel,children:"Total Lab Revenue"}),r.jsx("p",{className:`${qe.totalValue} ${qe.totalValueGreen}`,children:A(c.totals.labRevenue)})]}),r.jsxs("div",{className:qe.totalCard,children:[r.jsx("p",{className:qe.totalLabel,children:"Combined Revenue"}),r.jsx("p",{className:`${qe.totalValue} ${qe.totalValueBlue}`,children:A(c.totals.pharmacyRevenue+c.totals.labRevenue)})]})]})]})]})]}),S==="labInventory"&&r.jsxs("div",{className:"mt-4",children:[" ",r.jsx(j0,{})]}),S==="pharmacyInventory"&&r.jsxs("div",{className:"mt-4",children:[" ",r.jsx(wC,{})]})]})};var Vv,Y1;function oR(){if(Y1)return Vv;Y1=1;var t="Expected a function",n=NaN,e="[object Symbol]",i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt,m=typeof Cc=="object"&&Cc&&Cc.Object===Object&&Cc,f=typeof self=="object"&&self&&self.Object===Object&&self,y=m||f||Function("return this")(),x=Object.prototype,S=x.toString,w=Math.max,j=Math.min,E=function(){return y.Date.now()};function A(F,q,z){var L,V,M,B,ee,ie,te=0,se=!1,X=!1,K=!0;if(typeof F!="function")throw new TypeError(t);q=Y(q)||0,k(z)&&(se=!!z.leading,X="maxWait"in z,M=X?w(Y(z.maxWait)||0,q):M,K="trailing"in z?!!z.trailing:K);function re(je){var ge=L,Ge=V;return L=V=void 0,te=je,B=F.apply(Ge,ge),B}function ve(je){return te=je,ee=setTimeout(ae,q),se?re(je):B}function I(je){var ge=je-ie,Ge=je-te,Te=q-ge;return X?j(Te,M-Ge):Te}function de(je){var ge=je-ie,Ge=je-te;return ie===void 0||ge>=q||ge<0||X&&Ge>=M}function ae(){var je=E();if(de(je))return H(je);ee=setTimeout(ae,I(je))}function H(je){return ee=void 0,K&&L?re(je):(L=V=void 0,B)}function ne(){ee!==void 0&&clearTimeout(ee),te=0,L=ie=V=ee=void 0}function me(){return ee===void 0?B:H(E())}function ue(){var je=E(),ge=de(je);if(L=arguments,V=this,ie=je,ge){if(ee===void 0)return ve(ie);if(X)return ee=setTimeout(ae,q),re(ie)}return ee===void 0&&(ee=setTimeout(ae,q)),B}return ue.cancel=ne,ue.flush=me,ue}function k(F){var q=typeof F;return!!F&&(q=="object"||q=="function")}function P(F){return!!F&&typeof F=="object"}function R(F){return typeof F=="symbol"||P(F)&&S.call(F)==e}function Y(F){if(typeof F=="number")return F;if(R(F))return n;if(k(F)){var q=typeof F.valueOf=="function"?F.valueOf():F;F=k(q)?q+"":q}if(typeof F!="string")return F===0?F:+F;F=F.replace(i,"");var z=l.test(F);return z||c.test(F)?h(F.slice(2),z?2:8):s.test(F)?n:+F}return Vv=A,Vv}var lR=oR();const T0=Jf(lR);var Hv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var W1;function cR(){return W1||(W1=1,function(t){(function(){var n={}.hasOwnProperty;function e(){for(var l="",c=0;c<arguments.length;c++){var h=arguments[c];h&&(l=s(l,i(h)))}return l}function i(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return e.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var c="";for(var h in l)n.call(l,h)&&l[h]&&(c=s(c,h));return c}function s(l,c){return c?l?l+" "+c:l+c:l}t.exports?(e.default=e,t.exports=e):window.classNames=e})()}(Hv)),Hv.exports}var uR=cR();const _c=Jf(uR);function ed(t){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ed(t)}function dR(t,n){if(ed(t)!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var i=e.call(t,n);if(ed(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function SC(t){var n=dR(t,"string");return ed(n)=="symbol"?n:n+""}function Hm(t,n,e){return(n=SC(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function J1(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),e.push.apply(e,i)}return e}function xt(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?J1(Object(e),!0).forEach(function(i){Hm(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):J1(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function fR(t){if(Array.isArray(t))return t}function hR(t,n){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var i,s,l,c,h=[],m=!0,f=!1;try{if(l=(e=e.call(t)).next,n===0){if(Object(e)!==e)return;m=!1}else for(;!(m=(i=l.call(e)).done)&&(h.push(i.value),h.length!==n);m=!0);}catch(y){f=!0,s=y}finally{try{if(!m&&e.return!=null&&(c=e.return(),Object(c)!==c))return}finally{if(f)throw s}}return h}}function Rb(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,i=Array(n);e<n;e++)i[e]=t[e];return i}function NC(t,n){if(t){if(typeof t=="string")return Rb(t,n);var e={}.toString.call(t).slice(8,-1);return e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set"?Array.from(t):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Rb(t,n):void 0}}function mR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ul(t,n){return fR(t)||hR(t,n)||NC(t,n)||mR()}function pR(t,n){if(t==null)return{};var e={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(n.indexOf(i)!==-1)continue;e[i]=t[i]}return e}function hl(t,n){if(t==null)return{};var e,i,s=pR(t,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)e=l[i],n.indexOf(e)===-1&&{}.propertyIsEnumerable.call(t,e)&&(s[e]=t[e])}return s}var gR=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function yR(t){var n=t.defaultInputValue,e=n===void 0?"":n,i=t.defaultMenuIsOpen,s=i===void 0?!1:i,l=t.defaultValue,c=l===void 0?null:l,h=t.inputValue,m=t.menuIsOpen,f=t.onChange,y=t.onInputChange,x=t.onMenuClose,S=t.onMenuOpen,w=t.value,j=hl(t,gR),E=_.useState(h!==void 0?h:e),A=ul(E,2),k=A[0],P=A[1],R=_.useState(m!==void 0?m:s),Y=ul(R,2),F=Y[0],q=Y[1],z=_.useState(w!==void 0?w:c),L=ul(z,2),V=L[0],M=L[1],B=_.useCallback(function(re,ve){typeof f=="function"&&f(re,ve),M(re)},[f]),ee=_.useCallback(function(re,ve){var I;typeof y=="function"&&(I=y(re,ve)),P(I!==void 0?I:re)},[y]),ie=_.useCallback(function(){typeof S=="function"&&S(),q(!0)},[S]),te=_.useCallback(function(){typeof x=="function"&&x(),q(!1)},[x]),se=h!==void 0?h:k,X=m!==void 0?m:F,K=w!==void 0?w:V;return xt(xt({},j),{},{inputValue:se,menuIsOpen:X,onChange:B,onInputChange:ee,onMenuClose:te,onMenuOpen:ie,value:K})}function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ct.apply(null,arguments)}function xR(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Q1(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,SC(i.key),i)}}function vR(t,n,e){return n&&Q1(t.prototype,n),e&&Q1(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mb(t,n){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Mb(t,n)}function bR(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Mb(t,n)}function ex(t){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ex(t)}function CC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CC=function(){return!!t})()}function wR(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SR(t,n){if(n&&(ed(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wR(t)}function NR(t){var n=CC();return function(){var e,i=ex(t);if(n){var s=ex(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return SR(this,e)}}function CR(t){if(Array.isArray(t))return Rb(t)}function _R(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E0(t){return CR(t)||_R(t)||NC(t)||jR()}function TR(t){if(t.sheet)return t.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===t)return document.styleSheets[n]}function ER(t){var n=document.createElement("style");return n.setAttribute("data-emotion",t.key),t.nonce!==void 0&&n.setAttribute("nonce",t.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var AR=function(){function t(e){var i=this;this._insertTag=function(s){var l;i.tags.length===0?i.insertionPoint?l=i.insertionPoint.nextSibling:i.prepend?l=i.container.firstChild:l=i.before:l=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,l),i.tags.push(s)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var n=t.prototype;return n.hydrate=function(i){i.forEach(this._insertTag)},n.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ER(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var l=TR(s);try{l.insertRule(i,l.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},n.flush=function(){this.tags.forEach(function(i){var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ur="-ms-",tx="-moz-",hn="-webkit-",_C="comm",A0="rule",k0="decl",kR="@import",jC="@keyframes",DR="@layer",PR=Math.abs,Sx=String.fromCharCode,RR=Object.assign;function MR(t,n){return qi(t,0)^45?(((n<<2^qi(t,0))<<2^qi(t,1))<<2^qi(t,2))<<2^qi(t,3):0}function TC(t){return t.trim()}function IR(t,n){return(t=n.exec(t))?t[0]:t}function mn(t,n,e){return t.replace(n,e)}function Ib(t,n){return t.indexOf(n)}function qi(t,n){return t.charCodeAt(n)|0}function np(t,n,e){return t.slice(n,e)}function So(t){return t.length}function D0(t){return t.length}function yy(t,n){return n.push(t),t}function OR(t,n){return t.map(n).join("")}var Nx=1,Hf=1,EC=0,Qr=0,xi=0,Zf="";function Cx(t,n,e,i,s,l,c){return{value:t,root:n,parent:e,type:i,props:s,children:l,line:Nx,column:Hf,length:c,return:""}}function Om(t,n){return RR(Cx("",null,null,"",null,null,0),t,{length:-t.length},n)}function LR(){return xi}function FR(){return xi=Qr>0?qi(Zf,--Qr):0,Hf--,xi===10&&(Hf=1,Nx--),xi}function Sa(){return xi=Qr<EC?qi(Zf,Qr++):0,Hf++,xi===10&&(Hf=1,Nx++),xi}function _o(){return qi(Zf,Qr)}function Iy(){return Qr}function fp(t,n){return np(Zf,t,n)}function ip(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AC(t){return Nx=Hf=1,EC=So(Zf=t),Qr=0,[]}function kC(t){return Zf="",t}function Oy(t){return TC(fp(Qr-1,Ob(t===91?t+2:t===40?t+1:t)))}function zR(t){for(;(xi=_o())&&xi<33;)Sa();return ip(t)>2||ip(xi)>3?"":" "}function $R(t,n){for(;--n&&Sa()&&!(xi<48||xi>102||xi>57&&xi<65||xi>70&&xi<97););return fp(t,Iy()+(n<6&&_o()==32&&Sa()==32))}function Ob(t){for(;Sa();)switch(xi){case t:return Qr;case 34:case 39:t!==34&&t!==39&&Ob(xi);break;case 40:t===41&&Ob(t);break;case 92:Sa();break}return Qr}function UR(t,n){for(;Sa()&&t+xi!==57;)if(t+xi===84&&_o()===47)break;return"/*"+fp(n,Qr-1)+"*"+Sx(t===47?t:Sa())}function BR(t){for(;!ip(_o());)Sa();return fp(t,Qr)}function qR(t){return kC(Ly("",null,null,null,[""],t=AC(t),0,[0],t))}function Ly(t,n,e,i,s,l,c,h,m){for(var f=0,y=0,x=c,S=0,w=0,j=0,E=1,A=1,k=1,P=0,R="",Y=s,F=l,q=i,z=R;A;)switch(j=P,P=Sa()){case 40:if(j!=108&&qi(z,x-1)==58){Ib(z+=mn(Oy(P),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:z+=Oy(P);break;case 9:case 10:case 13:case 32:z+=zR(j);break;case 92:z+=$R(Iy()-1,7);continue;case 47:switch(_o()){case 42:case 47:yy(VR(UR(Sa(),Iy()),n,e),m);break;default:z+="/"}break;case 123*E:h[f++]=So(z)*k;case 125*E:case 59:case 0:switch(P){case 0:case 125:A=0;case 59+y:k==-1&&(z=mn(z,/\f/g,"")),w>0&&So(z)-x&&yy(w>32?X1(z+";",i,e,x-1):X1(mn(z," ","")+";",i,e,x-2),m);break;case 59:z+=";";default:if(yy(q=K1(z,n,e,f,y,s,h,R,Y=[],F=[],x),l),P===123)if(y===0)Ly(z,n,q,q,Y,l,x,h,F);else switch(S===99&&qi(z,3)===110?100:S){case 100:case 108:case 109:case 115:Ly(t,q,q,i&&yy(K1(t,q,q,0,0,s,h,R,s,Y=[],x),F),s,F,x,h,i?Y:F);break;default:Ly(z,q,q,q,[""],F,0,h,F)}}f=y=w=0,E=k=1,R=z="",x=c;break;case 58:x=1+So(z),w=j;default:if(E<1){if(P==123)--E;else if(P==125&&E++==0&&FR()==125)continue}switch(z+=Sx(P),P*E){case 38:k=y>0?1:(z+="\f",-1);break;case 44:h[f++]=(So(z)-1)*k,k=1;break;case 64:_o()===45&&(z+=Oy(Sa())),S=_o(),y=x=So(R=z+=BR(Iy())),P++;break;case 45:j===45&&So(z)==2&&(E=0)}}return l}function K1(t,n,e,i,s,l,c,h,m,f,y){for(var x=s-1,S=s===0?l:[""],w=D0(S),j=0,E=0,A=0;j<i;++j)for(var k=0,P=np(t,x+1,x=PR(E=c[j])),R=t;k<w;++k)(R=TC(E>0?S[k]+" "+P:mn(P,/&\f/g,S[k])))&&(m[A++]=R);return Cx(t,n,e,s===0?A0:h,m,f,y)}function VR(t,n,e){return Cx(t,n,e,_C,Sx(LR()),np(t,2,-2),0)}function X1(t,n,e,i){return Cx(t,n,e,k0,np(t,0,i),np(t,i+1,-1),i)}function Uf(t,n){for(var e="",i=D0(t),s=0;s<i;s++)e+=n(t[s],s,t,n)||"";return e}function HR(t,n,e,i){switch(t.type){case DR:if(t.children.length)break;case kR:case k0:return t.return=t.return||t.value;case _C:return"";case jC:return t.return=t.value+"{"+Uf(t.children,i)+"}";case A0:t.value=t.props.join(",")}return So(e=Uf(t.children,i))?t.return=t.value+"{"+e+"}":""}function GR(t){var n=D0(t);return function(e,i,s,l){for(var c="",h=0;h<n;h++)c+=t[h](e,i,s,l)||"";return c}}function YR(t){return function(n){n.root||(n=n.return)&&t(n)}}function WR(t){var n=Object.create(null);return function(e){return n[e]===void 0&&(n[e]=t(e)),n[e]}}var JR=function(n,e,i){for(var s=0,l=0;s=l,l=_o(),s===38&&l===12&&(e[i]=1),!ip(l);)Sa();return fp(n,Qr)},QR=function(n,e){var i=-1,s=44;do switch(ip(s)){case 0:s===38&&_o()===12&&(e[i]=1),n[i]+=JR(Qr-1,e,i);break;case 2:n[i]+=Oy(s);break;case 4:if(s===44){n[++i]=_o()===58?"&\f":"",e[i]=n[i].length;break}default:n[i]+=Sx(s)}while(s=Sa());return n},KR=function(n,e){return kC(QR(AC(n),e))},Z1=new WeakMap,XR=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var e=n.value,i=n.parent,s=n.column===i.column&&n.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(n.props.length===1&&e.charCodeAt(0)!==58&&!Z1.get(i))&&!s){Z1.set(n,!0);for(var l=[],c=KR(e,l),h=i.props,m=0,f=0;m<c.length;m++)for(var y=0;y<h.length;y++,f++)n.props[f]=l[m]?c[m].replace(/&\f/g,h[y]):h[y]+" "+c[m]}}},ZR=function(n){if(n.type==="decl"){var e=n.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(n.return="",n.value="")}};function DC(t,n){switch(MR(t,n)){case 5103:return hn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return hn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return hn+t+tx+t+ur+t+t;case 6828:case 4268:return hn+t+ur+t+t;case 6165:return hn+t+ur+"flex-"+t+t;case 5187:return hn+t+mn(t,/(\w+).+(:[^]+)/,hn+"box-$1$2"+ur+"flex-$1$2")+t;case 5443:return hn+t+ur+"flex-item-"+mn(t,/flex-|-self/,"")+t;case 4675:return hn+t+ur+"flex-line-pack"+mn(t,/align-content|flex-|-self/,"")+t;case 5548:return hn+t+ur+mn(t,"shrink","negative")+t;case 5292:return hn+t+ur+mn(t,"basis","preferred-size")+t;case 6060:return hn+"box-"+mn(t,"-grow","")+hn+t+ur+mn(t,"grow","positive")+t;case 4554:return hn+mn(t,/([^-])(transform)/g,"$1"+hn+"$2")+t;case 6187:return mn(mn(mn(t,/(zoom-|grab)/,hn+"$1"),/(image-set)/,hn+"$1"),t,"")+t;case 5495:case 3959:return mn(t,/(image-set\([^]*)/,hn+"$1$`$1");case 4968:return mn(mn(t,/(.+:)(flex-)?(.*)/,hn+"box-pack:$3"+ur+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+hn+t+t;case 4095:case 3583:case 4068:case 2532:return mn(t,/(.+)-inline(.+)/,hn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(So(t)-1-n>6)switch(qi(t,n+1)){case 109:if(qi(t,n+4)!==45)break;case 102:return mn(t,/(.+:)(.+)-([^]+)/,"$1"+hn+"$2-$3$1"+tx+(qi(t,n+3)==108?"$3":"$2-$3"))+t;case 115:return~Ib(t,"stretch")?DC(mn(t,"stretch","fill-available"),n)+t:t}break;case 4949:if(qi(t,n+1)!==115)break;case 6444:switch(qi(t,So(t)-3-(~Ib(t,"!important")&&10))){case 107:return mn(t,":",":"+hn)+t;case 101:return mn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+hn+(qi(t,14)===45?"inline-":"")+"box$3$1"+hn+"$2$3$1"+ur+"$2box$3")+t}break;case 5936:switch(qi(t,n+11)){case 114:return hn+t+ur+mn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return hn+t+ur+mn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return hn+t+ur+mn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return hn+t+ur+t+t}return t}var eM=function(n,e,i,s){if(n.length>-1&&!n.return)switch(n.type){case k0:n.return=DC(n.value,n.length);break;case jC:return Uf([Om(n,{value:mn(n.value,"@","@"+hn)})],s);case A0:if(n.length)return OR(n.props,function(l){switch(IR(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Uf([Om(n,{props:[mn(l,/:(read-\w+)/,":"+tx+"$1")]})],s);case"::placeholder":return Uf([Om(n,{props:[mn(l,/:(plac\w+)/,":"+hn+"input-$1")]}),Om(n,{props:[mn(l,/:(plac\w+)/,":"+tx+"$1")]}),Om(n,{props:[mn(l,/:(plac\w+)/,ur+"input-$1")]})],s)}return""})}},tM=[eM],nM=function(n){var e=n.key;if(e==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(E){var A=E.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(E),E.setAttribute("data-s",""))})}var s=n.stylisPlugins||tM,l={},c,h=[];c=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(E){for(var A=E.getAttribute("data-emotion").split(" "),k=1;k<A.length;k++)l[A[k]]=!0;h.push(E)});var m,f=[XR,ZR];{var y,x=[HR,YR(function(E){y.insert(E)})],S=GR(f.concat(s,x)),w=function(A){return Uf(qR(A),S)};m=function(A,k,P,R){y=P,w(A?A+"{"+k.styles+"}":k.styles),R&&(j.inserted[k.name]=!0)}}var j={key:e,sheet:new AR({key:e,container:c,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:l,registered:{},insert:m};return j.sheet.hydrate(h),j},Gv={exports:{}},yn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function iM(){if(ew)return yn;ew=1;var t=typeof Symbol=="function"&&Symbol.for,n=t?Symbol.for("react.element"):60103,e=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,l=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,h=t?Symbol.for("react.context"):60110,m=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,y=t?Symbol.for("react.forward_ref"):60112,x=t?Symbol.for("react.suspense"):60113,S=t?Symbol.for("react.suspense_list"):60120,w=t?Symbol.for("react.memo"):60115,j=t?Symbol.for("react.lazy"):60116,E=t?Symbol.for("react.block"):60121,A=t?Symbol.for("react.fundamental"):60117,k=t?Symbol.for("react.responder"):60118,P=t?Symbol.for("react.scope"):60119;function R(F){if(typeof F=="object"&&F!==null){var q=F.$$typeof;switch(q){case n:switch(F=F.type,F){case m:case f:case i:case l:case s:case x:return F;default:switch(F=F&&F.$$typeof,F){case h:case y:case j:case w:case c:return F;default:return q}}case e:return q}}}function Y(F){return R(F)===f}return yn.AsyncMode=m,yn.ConcurrentMode=f,yn.ContextConsumer=h,yn.ContextProvider=c,yn.Element=n,yn.ForwardRef=y,yn.Fragment=i,yn.Lazy=j,yn.Memo=w,yn.Portal=e,yn.Profiler=l,yn.StrictMode=s,yn.Suspense=x,yn.isAsyncMode=function(F){return Y(F)||R(F)===m},yn.isConcurrentMode=Y,yn.isContextConsumer=function(F){return R(F)===h},yn.isContextProvider=function(F){return R(F)===c},yn.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===n},yn.isForwardRef=function(F){return R(F)===y},yn.isFragment=function(F){return R(F)===i},yn.isLazy=function(F){return R(F)===j},yn.isMemo=function(F){return R(F)===w},yn.isPortal=function(F){return R(F)===e},yn.isProfiler=function(F){return R(F)===l},yn.isStrictMode=function(F){return R(F)===s},yn.isSuspense=function(F){return R(F)===x},yn.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===i||F===f||F===l||F===s||F===x||F===S||typeof F=="object"&&F!==null&&(F.$$typeof===j||F.$$typeof===w||F.$$typeof===c||F.$$typeof===h||F.$$typeof===y||F.$$typeof===A||F.$$typeof===k||F.$$typeof===P||F.$$typeof===E)},yn.typeOf=R,yn}var tw;function rM(){return tw||(tw=1,Gv.exports=iM()),Gv.exports}var Yv,nw;function aM(){if(nw)return Yv;nw=1;var t=rM(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[t.ForwardRef]=i,l[t.Memo]=s;function c(j){return t.isMemo(j)?s:l[j.$$typeof]||n}var h=Object.defineProperty,m=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,x=Object.getPrototypeOf,S=Object.prototype;function w(j,E,A){if(typeof E!="string"){if(S){var k=x(E);k&&k!==S&&w(j,k,A)}var P=m(E);f&&(P=P.concat(f(E)));for(var R=c(j),Y=c(E),F=0;F<P.length;++F){var q=P[F];if(!e[q]&&!(A&&A[q])&&!(Y&&Y[q])&&!(R&&R[q])){var z=y(E,q);try{h(j,q,z)}catch{}}}}return j}return Yv=w,Yv}aM();var sM=!0;function oM(t,n,e){var i="";return e.split(" ").forEach(function(s){t[s]!==void 0?n.push(t[s]+";"):s&&(i+=s+" ")}),i}var PC=function(n,e,i){var s=n.key+"-"+e.name;(i===!1||sM===!1)&&n.registered[s]===void 0&&(n.registered[s]=e.styles)},lM=function(n,e,i){PC(n,e,i);var s=n.key+"-"+e.name;if(n.inserted[e.name]===void 0){var l=e;do n.insert(e===l?"."+s:"",l,n.sheet,!0),l=l.next;while(l!==void 0)}};function cM(t){for(var n=0,e,i=0,s=t.length;s>=4;++i,s-=4)e=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,n=(e&65535)*1540483477+((e>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(s){case 3:n^=(t.charCodeAt(i+2)&255)<<16;case 2:n^=(t.charCodeAt(i+1)&255)<<8;case 1:n^=t.charCodeAt(i)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var uM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dM=/[A-Z]|^ms/g,fM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RC=function(n){return n.charCodeAt(1)===45},iw=function(n){return n!=null&&typeof n!="boolean"},Wv=WR(function(t){return RC(t)?t:t.replace(dM,"-$&").toLowerCase()}),rw=function(n,e){switch(n){case"animation":case"animationName":if(typeof e=="string")return e.replace(fM,function(i,s,l){return No={name:s,styles:l,next:No},s})}return uM[n]!==1&&!RC(n)&&typeof e=="number"&&e!==0?e+"px":e};function rp(t,n,e){if(e==null)return"";var i=e;if(i.__emotion_styles!==void 0)return i;switch(typeof e){case"boolean":return"";case"object":{var s=e;if(s.anim===1)return No={name:s.name,styles:s.styles,next:No},s.name;var l=e;if(l.styles!==void 0){var c=l.next;if(c!==void 0)for(;c!==void 0;)No={name:c.name,styles:c.styles,next:No},c=c.next;var h=l.styles+";";return h}return hM(t,n,e)}case"function":{if(t!==void 0){var m=No,f=e(t);return No=m,rp(t,n,f)}break}}var y=e;return y}function hM(t,n,e){var i="";if(Array.isArray(e))for(var s=0;s<e.length;s++)i+=rp(t,n,e[s])+";";else for(var l in e){var c=e[l];if(typeof c!="object"){var h=c;iw(h)&&(i+=Wv(l)+":"+rw(l,h)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&n==null)for(var m=0;m<c.length;m++)iw(c[m])&&(i+=Wv(l)+":"+rw(l,c[m])+";");else{var f=rp(t,n,c);switch(l){case"animation":case"animationName":{i+=Wv(l)+":"+f+";";break}default:i+=l+"{"+f+"}"}}}return i}var aw=/label:\s*([^\s;{]+)\s*(;|$)/g,No;function MC(t,n,e){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";No=void 0;var l=t[0];if(l==null||l.raw===void 0)i=!1,s+=rp(e,n,l);else{var c=l;s+=c[0]}for(var h=1;h<t.length;h++)if(s+=rp(e,n,t[h]),i){var m=l;s+=m[h]}aw.lastIndex=0;for(var f="",y;(y=aw.exec(s))!==null;)f+="-"+y[1];var x=cM(s)+f;return{name:x,styles:s,next:No}}var mM=function(n){return n()},pM=p1.useInsertionEffect?p1.useInsertionEffect:!1,gM=pM||mM,IC=_.createContext(typeof HTMLElement<"u"?nM({key:"css"}):null);IC.Provider;var yM=function(n){return _.forwardRef(function(e,i){var s=_.useContext(IC);return n(e,s,i)})},xM=_.createContext({}),P0={}.hasOwnProperty,Lb="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",vM=function(n,e){var i={};for(var s in e)P0.call(e,s)&&(i[s]=e[s]);return i[Lb]=n,i},bM=function(n){var e=n.cache,i=n.serialized,s=n.isStringTag;return PC(e,i,s),gM(function(){return lM(e,i,s)}),null},wM=yM(function(t,n,e){var i=t.css;typeof i=="string"&&n.registered[i]!==void 0&&(i=n.registered[i]);var s=t[Lb],l=[i],c="";typeof t.className=="string"?c=oM(n.registered,l,t.className):t.className!=null&&(c=t.className+" ");var h=MC(l,void 0,_.useContext(xM));c+=n.key+"-"+h.name;var m={};for(var f in t)P0.call(t,f)&&f!=="css"&&f!==Lb&&(m[f]=t[f]);return m.className=c,e&&(m.ref=e),_.createElement(_.Fragment,null,_.createElement(bM,{cache:n,serialized:h,isStringTag:typeof s=="string"}),_.createElement(s,m))}),SM=wM,ft=function(n,e){var i=arguments;if(e==null||!P0.call(e,"css"))return _.createElement.apply(void 0,i);var s=i.length,l=new Array(s);l[0]=SM,l[1]=vM(n,e);for(var c=2;c<s;c++)l[c]=i[c];return _.createElement.apply(null,l)};(function(t){var n;n||(n=t.JSX||(t.JSX={}))})(ft||(ft={}));function R0(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return MC(n)}function NM(){var t=R0.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function CM(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}const _M=Math.min,jM=Math.max,nx=Math.round,xy=Math.floor,ix=t=>({x:t,y:t});function TM(t){const{x:n,y:e,width:i,height:s}=t;return{width:i,height:s,top:e,left:n,right:n+i,bottom:e+s,x:n,y:e}}function _x(){return typeof window<"u"}function OC(t){return FC(t)?(t.nodeName||"").toLowerCase():"#document"}function fl(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function LC(t){var n;return(n=(FC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function FC(t){return _x()?t instanceof Node||t instanceof fl(t).Node:!1}function EM(t){return _x()?t instanceof Element||t instanceof fl(t).Element:!1}function M0(t){return _x()?t instanceof HTMLElement||t instanceof fl(t).HTMLElement:!1}function sw(t){return!_x()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fl(t).ShadowRoot}const AM=new Set(["inline","contents"]);function zC(t){const{overflow:n,overflowX:e,overflowY:i,display:s}=I0(t);return/auto|scroll|overlay|hidden|clip/.test(n+i+e)&&!AM.has(s)}function kM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const DM=new Set(["html","body","#document"]);function PM(t){return DM.has(OC(t))}function I0(t){return fl(t).getComputedStyle(t)}function RM(t){if(OC(t)==="html")return t;const n=t.assignedSlot||t.parentNode||sw(t)&&t.host||LC(t);return sw(n)?n.host:n}function $C(t){const n=RM(t);return PM(n)?t.ownerDocument?t.ownerDocument.body:t.body:M0(n)&&zC(n)?n:$C(n)}function rx(t,n,e){var i;n===void 0&&(n=[]),e===void 0&&(e=!0);const s=$C(t),l=s===((i=t.ownerDocument)==null?void 0:i.body),c=fl(s);if(l){const h=Fb(c);return n.concat(c,c.visualViewport||[],zC(s)?s:[],h&&e?rx(h):[])}return n.concat(s,rx(s,[],e))}function Fb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function MM(t){const n=I0(t);let e=parseFloat(n.width)||0,i=parseFloat(n.height)||0;const s=M0(t),l=s?t.offsetWidth:e,c=s?t.offsetHeight:i,h=nx(e)!==l||nx(i)!==c;return h&&(e=l,i=c),{width:e,height:i,$:h}}function O0(t){return EM(t)?t:t.contextElement}function ow(t){const n=O0(t);if(!M0(n))return ix(1);const e=n.getBoundingClientRect(),{width:i,height:s,$:l}=MM(n);let c=(l?nx(e.width):e.width)/i,h=(l?nx(e.height):e.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const IM=ix(0);function OM(t){const n=fl(t);return!kM()||!n.visualViewport?IM:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function LM(t,n,e){return!1}function lw(t,n,e,i){n===void 0&&(n=!1);const s=t.getBoundingClientRect(),l=O0(t);let c=ix(1);n&&(c=ow(t));const h=LM()?OM(l):ix(0);let m=(s.left+h.x)/c.x,f=(s.top+h.y)/c.y,y=s.width/c.x,x=s.height/c.y;if(l){const S=fl(l),w=i;let j=S,E=Fb(j);for(;E&&i&&w!==j;){const A=ow(E),k=E.getBoundingClientRect(),P=I0(E),R=k.left+(E.clientLeft+parseFloat(P.paddingLeft))*A.x,Y=k.top+(E.clientTop+parseFloat(P.paddingTop))*A.y;m*=A.x,f*=A.y,y*=A.x,x*=A.y,m+=R,f+=Y,j=fl(E),E=Fb(j)}}return TM({width:y,height:x,x:m,y:f})}function UC(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function FM(t,n){let e=null,i;const s=LC(t);function l(){var h;clearTimeout(i),(h=e)==null||h.disconnect(),e=null}function c(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),l();const f=t.getBoundingClientRect(),{left:y,top:x,width:S,height:w}=f;if(h||n(),!S||!w)return;const j=xy(x),E=xy(s.clientWidth-(y+S)),A=xy(s.clientHeight-(x+w)),k=xy(y),R={rootMargin:-j+"px "+-E+"px "+-A+"px "+-k+"px",threshold:jM(0,_M(1,m))||1};let Y=!0;function F(q){const z=q[0].intersectionRatio;if(z!==m){if(!Y)return c();z?c(!1,z):i=setTimeout(()=>{c(!1,1e-7)},1e3)}z===1&&!UC(f,t.getBoundingClientRect())&&c(),Y=!1}try{e=new IntersectionObserver(F,{...R,root:s.ownerDocument})}catch{e=new IntersectionObserver(F,R)}e.observe(t)}return c(!0),l}function zM(t,n,e,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=i,f=O0(t),y=s||l?[...f?rx(f):[],...rx(n)]:[];y.forEach(k=>{s&&k.addEventListener("scroll",e,{passive:!0}),l&&k.addEventListener("resize",e)});const x=f&&h?FM(f,e):null;let S=-1,w=null;c&&(w=new ResizeObserver(k=>{let[P]=k;P&&P.target===f&&w&&(w.unobserve(n),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var R;(R=w)==null||R.observe(n)})),e()}),f&&!m&&w.observe(f),w.observe(n));let j,E=m?lw(t):null;m&&A();function A(){const k=lw(t);E&&!UC(E,k)&&e(),E=k,j=requestAnimationFrame(A)}return e(),()=>{var k;y.forEach(P=>{s&&P.removeEventListener("scroll",e),l&&P.removeEventListener("resize",e)}),x==null||x(),(k=w)==null||k.disconnect(),w=null,m&&cancelAnimationFrame(j)}}var zb=_.useLayoutEffect,$M=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ax=function(){};function UM(t,n){return n?n[0]==="-"?t+n:t+"__"+n:t}function BM(t,n){for(var e=arguments.length,i=new Array(e>2?e-2:0),s=2;s<e;s++)i[s-2]=arguments[s];var l=[].concat(i);if(n&&t)for(var c in n)n.hasOwnProperty(c)&&n[c]&&l.push("".concat(UM(t,c)));return l.filter(function(h){return h}).map(function(h){return String(h).trim()}).join(" ")}var cw=function(n){return KM(n)?n.filter(Boolean):ed(n)==="object"&&n!==null?[n]:[]},BC=function(n){n.className,n.clearValue,n.cx,n.getStyles,n.getClassNames,n.getValue,n.hasValue,n.isMulti,n.isRtl,n.options,n.selectOption,n.selectProps,n.setValue,n.theme;var e=hl(n,$M);return xt({},e)},Zn=function(n,e,i){var s=n.cx,l=n.getStyles,c=n.getClassNames,h=n.className;return{css:l(e,n),className:s(i??{},c(e,n),h)}};function jx(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function qM(t){return jx(t)?window.innerHeight:t.clientHeight}function qC(t){return jx(t)?window.pageYOffset:t.scrollTop}function sx(t,n){if(jx(t)){window.scrollTo(0,n);return}t.scrollTop=n}function VM(t){var n=getComputedStyle(t),e=n.position==="absolute",i=/(auto|scroll)/;if(n.position==="fixed")return document.documentElement;for(var s=t;s=s.parentElement;)if(n=getComputedStyle(s),!(e&&n.position==="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return s;return document.documentElement}function HM(t,n,e,i){return e*((t=t/i-1)*t*t+1)+n}function vy(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ax,s=qC(t),l=n-s,c=10,h=0;function m(){h+=c;var f=HM(h,s,l,e);sx(t,f),h<e?window.requestAnimationFrame(m):i(t)}m()}function uw(t,n){var e=t.getBoundingClientRect(),i=n.getBoundingClientRect(),s=n.offsetHeight/3;i.bottom+s>e.bottom?sx(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+s,t.scrollHeight)):i.top-s<e.top&&sx(t,Math.max(n.offsetTop-s,0))}function GM(t){var n=t.getBoundingClientRect();return{bottom:n.bottom,height:n.height,left:n.left,right:n.right,top:n.top,width:n.width}}function dw(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function YM(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var VC=!1,WM={get passive(){return VC=!0}},by=typeof window<"u"?window:{};by.addEventListener&&by.removeEventListener&&(by.addEventListener("p",ax,WM),by.removeEventListener("p",ax,!1));var JM=VC;function QM(t){return t!=null}function KM(t){return Array.isArray(t)}function wy(t,n,e){return t?n:e}var XM=function(n){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var l=Object.entries(n).filter(function(c){var h=ul(c,1),m=h[0];return!i.includes(m)});return l.reduce(function(c,h){var m=ul(h,2),f=m[0],y=m[1];return c[f]=y,c},{})},ZM=["children","innerProps"],eI=["children","innerProps"];function tI(t){var n=t.maxHeight,e=t.menuEl,i=t.minHeight,s=t.placement,l=t.shouldScroll,c=t.isFixedPosition,h=t.controlHeight,m=VM(e),f={placement:"bottom",maxHeight:n};if(!e||!e.offsetParent)return f;var y=m.getBoundingClientRect(),x=y.height,S=e.getBoundingClientRect(),w=S.bottom,j=S.height,E=S.top,A=e.offsetParent.getBoundingClientRect(),k=A.top,P=c?window.innerHeight:qM(m),R=qC(m),Y=parseInt(getComputedStyle(e).marginBottom,10),F=parseInt(getComputedStyle(e).marginTop,10),q=k-F,z=P-E,L=q+R,V=x-R-E,M=w-P+R+Y,B=R+E-F,ee=160;switch(s){case"auto":case"bottom":if(z>=j)return{placement:"bottom",maxHeight:n};if(V>=j&&!c)return l&&vy(m,M,ee),{placement:"bottom",maxHeight:n};if(!c&&V>=i||c&&z>=i){l&&vy(m,M,ee);var ie=c?z-Y:V-Y;return{placement:"bottom",maxHeight:ie}}if(s==="auto"||c){var te=n,se=c?q:L;return se>=i&&(te=Math.min(se-Y-h,n)),{placement:"top",maxHeight:te}}if(s==="bottom")return l&&sx(m,M),{placement:"bottom",maxHeight:n};break;case"top":if(q>=j)return{placement:"top",maxHeight:n};if(L>=j&&!c)return l&&vy(m,B,ee),{placement:"top",maxHeight:n};if(!c&&L>=i||c&&q>=i){var X=n;return(!c&&L>=i||c&&q>=i)&&(X=c?q-F:L-F),l&&vy(m,B,ee),{placement:"top",maxHeight:X}}return{placement:"bottom",maxHeight:n};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return f}function nI(t){var n={bottom:"top",top:"bottom"};return t?n[t]:"bottom"}var HC=function(n){return n==="auto"?"bottom":n},iI=function(n,e){var i,s=n.placement,l=n.theme,c=l.borderRadius,h=l.spacing,m=l.colors;return xt((i={label:"menu"},Hm(i,nI(s),"100%"),Hm(i,"position","absolute"),Hm(i,"width","100%"),Hm(i,"zIndex",1),i),e?{}:{backgroundColor:m.neutral0,borderRadius:c,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:h.menuGutter,marginTop:h.menuGutter})},GC=_.createContext(null),rI=function(n){var e=n.children,i=n.minMenuHeight,s=n.maxMenuHeight,l=n.menuPlacement,c=n.menuPosition,h=n.menuShouldScrollIntoView,m=n.theme,f=_.useContext(GC)||{},y=f.setPortalPlacement,x=_.useRef(null),S=_.useState(s),w=ul(S,2),j=w[0],E=w[1],A=_.useState(null),k=ul(A,2),P=k[0],R=k[1],Y=m.spacing.controlHeight;return zb(function(){var F=x.current;if(F){var q=c==="fixed",z=h&&!q,L=tI({maxHeight:s,menuEl:F,minHeight:i,placement:l,shouldScroll:z,isFixedPosition:q,controlHeight:Y});E(L.maxHeight),R(L.placement),y==null||y(L.placement)}},[s,l,c,h,i,y,Y]),e({ref:x,placerProps:xt(xt({},n),{},{placement:P||HC(l),maxHeight:j})})},aI=function(n){var e=n.children,i=n.innerRef,s=n.innerProps;return ft("div",Ct({},Zn(n,"menu",{menu:!0}),{ref:i},s),e)},sI=aI,oI=function(n,e){var i=n.maxHeight,s=n.theme.spacing.baseUnit;return xt({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e?{}:{paddingBottom:s,paddingTop:s})},lI=function(n){var e=n.children,i=n.innerProps,s=n.innerRef,l=n.isMulti;return ft("div",Ct({},Zn(n,"menuList",{"menu-list":!0,"menu-list--is-multi":l}),{ref:s},i),e)},YC=function(n,e){var i=n.theme,s=i.spacing.baseUnit,l=i.colors;return xt({textAlign:"center"},e?{}:{color:l.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},cI=YC,uI=YC,dI=function(n){var e=n.children,i=e===void 0?"No options":e,s=n.innerProps,l=hl(n,ZM);return ft("div",Ct({},Zn(xt(xt({},l),{},{children:i,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),i)},fI=function(n){var e=n.children,i=e===void 0?"Loading...":e,s=n.innerProps,l=hl(n,eI);return ft("div",Ct({},Zn(xt(xt({},l),{},{children:i,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),i)},hI=function(n){var e=n.rect,i=n.offset,s=n.position;return{left:e.left,position:s,top:i,width:e.width,zIndex:1}},mI=function(n){var e=n.appendTo,i=n.children,s=n.controlElement,l=n.innerProps,c=n.menuPlacement,h=n.menuPosition,m=_.useRef(null),f=_.useRef(null),y=_.useState(HC(c)),x=ul(y,2),S=x[0],w=x[1],j=_.useMemo(function(){return{setPortalPlacement:w}},[]),E=_.useState(null),A=ul(E,2),k=A[0],P=A[1],R=_.useCallback(function(){if(s){var z=GM(s),L=h==="fixed"?0:window.pageYOffset,V=z[S]+L;(V!==(k==null?void 0:k.offset)||z.left!==(k==null?void 0:k.rect.left)||z.width!==(k==null?void 0:k.rect.width))&&P({offset:V,rect:z})}},[s,h,S,k==null?void 0:k.offset,k==null?void 0:k.rect.left,k==null?void 0:k.rect.width]);zb(function(){R()},[R]);var Y=_.useCallback(function(){typeof f.current=="function"&&(f.current(),f.current=null),s&&m.current&&(f.current=zM(s,m.current,R,{elementResize:"ResizeObserver"in window}))},[s,R]);zb(function(){Y()},[Y]);var F=_.useCallback(function(z){m.current=z,Y()},[Y]);if(!e&&h!=="fixed"||!k)return null;var q=ft("div",Ct({ref:F},Zn(xt(xt({},n),{},{offset:k.offset,position:h,rect:k.rect}),"menuPortal",{"menu-portal":!0}),l),i);return ft(GC.Provider,{value:j},e?xE.createPortal(q,e):q)},pI=function(n){var e=n.isDisabled,i=n.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:e?"none":void 0,position:"relative"}},gI=function(n){var e=n.children,i=n.innerProps,s=n.isDisabled,l=n.isRtl;return ft("div",Ct({},Zn(n,"container",{"--is-disabled":s,"--is-rtl":l}),i),e)},yI=function(n,e){var i=n.theme.spacing,s=n.isMulti,l=n.hasValue,c=n.selectProps.controlShouldRenderValue;return xt({alignItems:"center",display:s&&l&&c?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},e?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},xI=function(n){var e=n.children,i=n.innerProps,s=n.isMulti,l=n.hasValue;return ft("div",Ct({},Zn(n,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":l}),i),e)},vI=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},bI=function(n){var e=n.children,i=n.innerProps;return ft("div",Ct({},Zn(n,"indicatorsContainer",{indicators:!0}),i),e)},fw,wI=["size"],SI=["innerProps","isRtl","size"],NI={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},WC=function(n){var e=n.size,i=hl(n,wI);return ft("svg",Ct({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:NI},i))},L0=function(n){return ft(WC,Ct({size:20},n),ft("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},JC=function(n){return ft(WC,Ct({size:20},n),ft("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},QC=function(n,e){var i=n.isFocused,s=n.theme,l=s.spacing.baseUnit,c=s.colors;return xt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},e?{}:{color:i?c.neutral60:c.neutral20,padding:l*2,":hover":{color:i?c.neutral80:c.neutral40}})},CI=QC,_I=function(n){var e=n.children,i=n.innerProps;return ft("div",Ct({},Zn(n,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),e||ft(JC,null))},jI=QC,TI=function(n){var e=n.children,i=n.innerProps;return ft("div",Ct({},Zn(n,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),e||ft(L0,null))},EI=function(n,e){var i=n.isDisabled,s=n.theme,l=s.spacing.baseUnit,c=s.colors;return xt({label:"indicatorSeparator",alignSelf:"stretch",width:1},e?{}:{backgroundColor:i?c.neutral10:c.neutral20,marginBottom:l*2,marginTop:l*2})},AI=function(n){var e=n.innerProps;return ft("span",Ct({},e,Zn(n,"indicatorSeparator",{"indicator-separator":!0})))},kI=NM(fw||(fw=CM([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),DI=function(n,e){var i=n.isFocused,s=n.size,l=n.theme,c=l.colors,h=l.spacing.baseUnit;return xt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},e?{}:{color:i?c.neutral60:c.neutral20,padding:h*2})},Jv=function(n){var e=n.delay,i=n.offset;return ft("span",{css:R0({animation:"".concat(kI," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},PI=function(n){var e=n.innerProps,i=n.isRtl,s=n.size,l=s===void 0?4:s,c=hl(n,SI);return ft("div",Ct({},Zn(xt(xt({},c),{},{innerProps:e,isRtl:i,size:l}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),e),ft(Jv,{delay:0,offset:i}),ft(Jv,{delay:160,offset:!0}),ft(Jv,{delay:320,offset:!i}))},RI=function(n,e){var i=n.isDisabled,s=n.isFocused,l=n.theme,c=l.colors,h=l.borderRadius,m=l.spacing;return xt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:m.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},e?{}:{backgroundColor:i?c.neutral5:c.neutral0,borderColor:i?c.neutral10:s?c.primary:c.neutral20,borderRadius:h,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(c.primary):void 0,"&:hover":{borderColor:s?c.primary:c.neutral30}})},MI=function(n){var e=n.children,i=n.isDisabled,s=n.isFocused,l=n.innerRef,c=n.innerProps,h=n.menuIsOpen;return ft("div",Ct({ref:l},Zn(n,"control",{control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":h}),c,{"aria-disabled":i||void 0}),e)},II=MI,OI=["data"],LI=function(n,e){var i=n.theme.spacing;return e?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},FI=function(n){var e=n.children,i=n.cx,s=n.getStyles,l=n.getClassNames,c=n.Heading,h=n.headingProps,m=n.innerProps,f=n.label,y=n.theme,x=n.selectProps;return ft("div",Ct({},Zn(n,"group",{group:!0}),m),ft(c,Ct({},h,{selectProps:x,theme:y,getStyles:s,getClassNames:l,cx:i}),f),ft("div",null,e))},zI=function(n,e){var i=n.theme,s=i.colors,l=i.spacing;return xt({label:"group",cursor:"default",display:"block"},e?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:l.baseUnit*3,paddingRight:l.baseUnit*3,textTransform:"uppercase"})},$I=function(n){var e=BC(n);e.data;var i=hl(e,OI);return ft("div",Ct({},Zn(n,"groupHeading",{"group-heading":!0}),i))},UI=FI,BI=["innerRef","isDisabled","isHidden","inputClassName"],qI=function(n,e){var i=n.isDisabled,s=n.value,l=n.theme,c=l.spacing,h=l.colors;return xt(xt({visibility:i?"hidden":"visible",transform:s?"translateZ(0)":""},VI),e?{}:{margin:c.baseUnit/2,paddingBottom:c.baseUnit/2,paddingTop:c.baseUnit/2,color:h.neutral80})},KC={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},VI={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":xt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},KC)},HI=function(n){return xt({label:"input",color:"inherit",background:0,opacity:n?0:1,width:"100%"},KC)},GI=function(n){var e=n.cx,i=n.value,s=BC(n),l=s.innerRef,c=s.isDisabled,h=s.isHidden,m=s.inputClassName,f=hl(s,BI);return ft("div",Ct({},Zn(n,"input",{"input-container":!0}),{"data-value":i||""}),ft("input",Ct({className:e({input:!0},m),ref:l,style:HI(h),disabled:c},f)))},YI=GI,WI=function(n,e){var i=n.theme,s=i.spacing,l=i.borderRadius,c=i.colors;return xt({label:"multiValue",display:"flex",minWidth:0},e?{}:{backgroundColor:c.neutral10,borderRadius:l/2,margin:s.baseUnit/2})},JI=function(n,e){var i=n.theme,s=i.borderRadius,l=i.colors,c=n.cropWithEllipsis;return xt({overflow:"hidden",textOverflow:c||c===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},e?{}:{borderRadius:s/2,color:l.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},QI=function(n,e){var i=n.theme,s=i.spacing,l=i.borderRadius,c=i.colors,h=n.isFocused;return xt({alignItems:"center",display:"flex"},e?{}:{borderRadius:l/2,backgroundColor:h?c.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:c.dangerLight,color:c.danger}})},XC=function(n){var e=n.children,i=n.innerProps;return ft("div",i,e)},KI=XC,XI=XC;function ZI(t){var n=t.children,e=t.innerProps;return ft("div",Ct({role:"button"},e),n||ft(L0,{size:14}))}var e4=function(n){var e=n.children,i=n.components,s=n.data,l=n.innerProps,c=n.isDisabled,h=n.removeProps,m=n.selectProps,f=i.Container,y=i.Label,x=i.Remove;return ft(f,{data:s,innerProps:xt(xt({},Zn(n,"multiValue",{"multi-value":!0,"multi-value--is-disabled":c})),l),selectProps:m},ft(y,{data:s,innerProps:xt({},Zn(n,"multiValueLabel",{"multi-value__label":!0})),selectProps:m},e),ft(x,{data:s,innerProps:xt(xt({},Zn(n,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(e||"option")},h),selectProps:m}))},t4=e4,n4=function(n,e){var i=n.isDisabled,s=n.isFocused,l=n.isSelected,c=n.theme,h=c.spacing,m=c.colors;return xt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},e?{}:{backgroundColor:l?m.primary:s?m.primary25:"transparent",color:i?m.neutral20:l?m.neutral0:"inherit",padding:"".concat(h.baseUnit*2,"px ").concat(h.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:l?m.primary:m.primary50}})},i4=function(n){var e=n.children,i=n.isDisabled,s=n.isFocused,l=n.isSelected,c=n.innerRef,h=n.innerProps;return ft("div",Ct({},Zn(n,"option",{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":l}),{ref:c,"aria-disabled":i},h),e)},r4=i4,a4=function(n,e){var i=n.theme,s=i.spacing,l=i.colors;return xt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},e?{}:{color:l.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},s4=function(n){var e=n.children,i=n.innerProps;return ft("div",Ct({},Zn(n,"placeholder",{placeholder:!0}),i),e)},o4=s4,l4=function(n,e){var i=n.isDisabled,s=n.theme,l=s.spacing,c=s.colors;return xt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e?{}:{color:i?c.neutral40:c.neutral80,marginLeft:l.baseUnit/2,marginRight:l.baseUnit/2})},c4=function(n){var e=n.children,i=n.isDisabled,s=n.innerProps;return ft("div",Ct({},Zn(n,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),s),e)},u4=c4,d4={ClearIndicator:TI,Control:II,DropdownIndicator:_I,DownChevron:JC,CrossIcon:L0,Group:UI,GroupHeading:$I,IndicatorsContainer:bI,IndicatorSeparator:AI,Input:YI,LoadingIndicator:PI,Menu:sI,MenuList:lI,MenuPortal:mI,LoadingMessage:fI,NoOptionsMessage:dI,MultiValue:t4,MultiValueContainer:KI,MultiValueLabel:XI,MultiValueRemove:ZI,Option:r4,Placeholder:o4,SelectContainer:gI,SingleValue:u4,ValueContainer:xI},f4=function(n){return xt(xt({},d4),n.components)},hw=Number.isNaN||function(n){return typeof n=="number"&&n!==n};function h4(t,n){return!!(t===n||hw(t)&&hw(n))}function m4(t,n){if(t.length!==n.length)return!1;for(var e=0;e<t.length;e++)if(!h4(t[e],n[e]))return!1;return!0}function p4(t,n){n===void 0&&(n=m4);var e=null;function i(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(e&&e.lastThis===this&&n(s,e.lastArgs))return e.lastResult;var c=t.apply(this,s);return e={lastResult:c,lastArgs:s,lastThis:this},c}return i.clear=function(){e=null},i}var g4={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},y4=function(n){return ft("span",Ct({css:g4},n))},mw=y4,x4={guidance:function(n){var e=n.isSearchable,i=n.isMulti,s=n.tabSelectsValue,l=n.context,c=n.isInitialFocus;switch(l){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return c?"".concat(n["aria-label"]||"Select"," is focused ").concat(e?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(n){var e=n.action,i=n.label,s=i===void 0?"":i,l=n.labels,c=n.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(l.length>1?"s":""," ").concat(l.join(","),", selected.");case"select-option":return c?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(n){var e=n.context,i=n.focused,s=n.options,l=n.label,c=l===void 0?"":l,h=n.selectValue,m=n.isDisabled,f=n.isSelected,y=n.isAppleDevice,x=function(E,A){return E&&E.length?"".concat(E.indexOf(A)+1," of ").concat(E.length):""};if(e==="value"&&h)return"value ".concat(c," focused, ").concat(x(h,i),".");if(e==="menu"&&y){var S=m?" disabled":"",w="".concat(f?" selected":"").concat(S);return"".concat(c).concat(w,", ").concat(x(s,i),".")}return""},onFilter:function(n){var e=n.inputValue,i=n.resultsMessage;return"".concat(i).concat(e?" for search term "+e:"",".")}},v4=function(n){var e=n.ariaSelection,i=n.focusedOption,s=n.focusedValue,l=n.focusableOptions,c=n.isFocused,h=n.selectValue,m=n.selectProps,f=n.id,y=n.isAppleDevice,x=m.ariaLiveMessages,S=m.getOptionLabel,w=m.inputValue,j=m.isMulti,E=m.isOptionDisabled,A=m.isSearchable,k=m.menuIsOpen,P=m.options,R=m.screenReaderStatus,Y=m.tabSelectsValue,F=m.isLoading,q=m["aria-label"],z=m["aria-live"],L=_.useMemo(function(){return xt(xt({},x4),x||{})},[x]),V=_.useMemo(function(){var se="";if(e&&L.onChange){var X=e.option,K=e.options,re=e.removedValue,ve=e.removedValues,I=e.value,de=function(ge){return Array.isArray(ge)?null:ge},ae=re||X||de(I),H=ae?S(ae):"",ne=K||ve||void 0,me=ne?ne.map(S):[],ue=xt({isDisabled:ae&&E(ae,h),label:H,labels:me},e);se=L.onChange(ue)}return se},[e,L,E,h,S]),M=_.useMemo(function(){var se="",X=i||s,K=!!(i&&h&&h.includes(i));if(X&&L.onFocus){var re={focused:X,label:S(X),isDisabled:E(X,h),isSelected:K,options:l,context:X===i?"menu":"value",selectValue:h,isAppleDevice:y};se=L.onFocus(re)}return se},[i,s,S,E,L,l,h,y]),B=_.useMemo(function(){var se="";if(k&&P.length&&!F&&L.onFilter){var X=R({count:l.length});se=L.onFilter({inputValue:w,resultsMessage:X})}return se},[l,w,k,L,P,R,F]),ee=(e==null?void 0:e.action)==="initial-input-focus",ie=_.useMemo(function(){var se="";if(L.guidance){var X=s?"value":k?"menu":"input";se=L.guidance({"aria-label":q,context:X,isDisabled:i&&E(i,h),isMulti:j,isSearchable:A,tabSelectsValue:Y,isInitialFocus:ee})}return se},[q,i,s,j,E,A,k,L,h,Y,ee]),te=ft(_.Fragment,null,ft("span",{id:"aria-selection"},V),ft("span",{id:"aria-focused"},M),ft("span",{id:"aria-results"},B),ft("span",{id:"aria-guidance"},ie));return ft(_.Fragment,null,ft(mw,{id:f},ee&&te),ft(mw,{"aria-live":z,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},c&&!ee&&te))},b4=v4,$b=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],w4=new RegExp("["+$b.map(function(t){return t.letters}).join("")+"]","g"),ZC={};for(var Qv=0;Qv<$b.length;Qv++)for(var Kv=$b[Qv],Xv=0;Xv<Kv.letters.length;Xv++)ZC[Kv.letters[Xv]]=Kv.base;var e_=function(n){return n.replace(w4,function(e){return ZC[e]})},S4=p4(e_),pw=function(n){return n.replace(/^\s+|\s+$/g,"")},N4=function(n){return"".concat(n.label," ").concat(n.value)},C4=function(n){return function(e,i){if(e.data.__isNew__)return!0;var s=xt({ignoreCase:!0,ignoreAccents:!0,stringify:N4,trim:!0,matchFrom:"any"},n),l=s.ignoreCase,c=s.ignoreAccents,h=s.stringify,m=s.trim,f=s.matchFrom,y=m?pw(i):i,x=m?pw(h(e)):h(e);return l&&(y=y.toLowerCase(),x=x.toLowerCase()),c&&(y=S4(y),x=e_(x)),f==="start"?x.substr(0,y.length)===y:x.indexOf(y)>-1}},_4=["innerRef"];function j4(t){var n=t.innerRef,e=hl(t,_4),i=XM(e,"onExited","in","enter","exit","appear");return ft("input",Ct({ref:n},i,{css:R0({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var T4=function(n){n.cancelable&&n.preventDefault(),n.stopPropagation()};function E4(t){var n=t.isEnabled,e=t.onBottomArrive,i=t.onBottomLeave,s=t.onTopArrive,l=t.onTopLeave,c=_.useRef(!1),h=_.useRef(!1),m=_.useRef(0),f=_.useRef(null),y=_.useCallback(function(A,k){if(f.current!==null){var P=f.current,R=P.scrollTop,Y=P.scrollHeight,F=P.clientHeight,q=f.current,z=k>0,L=Y-F-R,V=!1;L>k&&c.current&&(i&&i(A),c.current=!1),z&&h.current&&(l&&l(A),h.current=!1),z&&k>L?(e&&!c.current&&e(A),q.scrollTop=Y,V=!0,c.current=!0):!z&&-k>R&&(s&&!h.current&&s(A),q.scrollTop=0,V=!0,h.current=!0),V&&T4(A)}},[e,i,s,l]),x=_.useCallback(function(A){y(A,A.deltaY)},[y]),S=_.useCallback(function(A){m.current=A.changedTouches[0].clientY},[]),w=_.useCallback(function(A){var k=m.current-A.changedTouches[0].clientY;y(A,k)},[y]),j=_.useCallback(function(A){if(A){var k=JM?{passive:!1}:!1;A.addEventListener("wheel",x,k),A.addEventListener("touchstart",S,k),A.addEventListener("touchmove",w,k)}},[w,S,x]),E=_.useCallback(function(A){A&&(A.removeEventListener("wheel",x,!1),A.removeEventListener("touchstart",S,!1),A.removeEventListener("touchmove",w,!1))},[w,S,x]);return _.useEffect(function(){if(n){var A=f.current;return j(A),function(){E(A)}}},[n,j,E]),function(A){f.current=A}}var gw=["boxSizing","height","overflow","paddingRight","position"],yw={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function xw(t){t.cancelable&&t.preventDefault()}function vw(t){t.stopPropagation()}function bw(){var t=this.scrollTop,n=this.scrollHeight,e=t+this.offsetHeight;t===0?this.scrollTop=1:e===n&&(this.scrollTop=t-1)}function ww(){return"ontouchstart"in window||navigator.maxTouchPoints}var Sw=!!(typeof window<"u"&&window.document&&window.document.createElement),Lm=0,Df={capture:!1,passive:!1};function A4(t){var n=t.isEnabled,e=t.accountForScrollbars,i=e===void 0?!0:e,s=_.useRef({}),l=_.useRef(null),c=_.useCallback(function(m){if(Sw){var f=document.body,y=f&&f.style;if(i&&gw.forEach(function(j){var E=y&&y[j];s.current[j]=E}),i&&Lm<1){var x=parseInt(s.current.paddingRight,10)||0,S=document.body?document.body.clientWidth:0,w=window.innerWidth-S+x||0;Object.keys(yw).forEach(function(j){var E=yw[j];y&&(y[j]=E)}),y&&(y.paddingRight="".concat(w,"px"))}f&&ww()&&(f.addEventListener("touchmove",xw,Df),m&&(m.addEventListener("touchstart",bw,Df),m.addEventListener("touchmove",vw,Df))),Lm+=1}},[i]),h=_.useCallback(function(m){if(Sw){var f=document.body,y=f&&f.style;Lm=Math.max(Lm-1,0),i&&Lm<1&&gw.forEach(function(x){var S=s.current[x];y&&(y[x]=S)}),f&&ww()&&(f.removeEventListener("touchmove",xw,Df),m&&(m.removeEventListener("touchstart",bw,Df),m.removeEventListener("touchmove",vw,Df)))}},[i]);return _.useEffect(function(){if(n){var m=l.current;return c(m),function(){h(m)}}},[n,c,h]),function(m){l.current=m}}var k4=function(n){var e=n.target;return e.ownerDocument.activeElement&&e.ownerDocument.activeElement.blur()},D4={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function P4(t){var n=t.children,e=t.lockEnabled,i=t.captureEnabled,s=i===void 0?!0:i,l=t.onBottomArrive,c=t.onBottomLeave,h=t.onTopArrive,m=t.onTopLeave,f=E4({isEnabled:s,onBottomArrive:l,onBottomLeave:c,onTopArrive:h,onTopLeave:m}),y=A4({isEnabled:e}),x=function(w){f(w),y(w)};return ft(_.Fragment,null,e&&ft("div",{onClick:k4,css:D4}),n(x))}var R4={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},M4=function(n){var e=n.name,i=n.onFocus;return ft("input",{required:!0,name:e,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:R4,value:"",onChange:function(){}})},I4=M4;function F0(t){var n;return typeof window<"u"&&window.navigator!=null?t.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function O4(){return F0(/^iPhone/i)}function t_(){return F0(/^Mac/i)}function L4(){return F0(/^iPad/i)||t_()&&navigator.maxTouchPoints>1}function F4(){return O4()||L4()}function z4(){return t_()||F4()}var $4=function(n){return n.label},U4=function(n){return n.label},B4=function(n){return n.value},q4=function(n){return!!n.isDisabled},V4={clearIndicator:jI,container:pI,control:RI,dropdownIndicator:CI,group:LI,groupHeading:zI,indicatorsContainer:vI,indicatorSeparator:EI,input:qI,loadingIndicator:DI,loadingMessage:uI,menu:iI,menuList:oI,menuPortal:hI,multiValue:WI,multiValueLabel:JI,multiValueRemove:QI,noOptionsMessage:cI,option:n4,placeholder:a4,singleValue:l4,valueContainer:yI},H4={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},G4=4,n_=4,Y4=38,W4=n_*2,J4={baseUnit:n_,controlHeight:Y4,menuGutter:W4},Zv={borderRadius:G4,colors:H4,spacing:J4},Q4={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:dw(),captureMenuScroll:!dw(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:C4(),formatGroupLabel:$4,getOptionLabel:U4,getOptionValue:B4,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:q4,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!YM(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(n){var e=n.count;return"".concat(e," result").concat(e!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Nw(t,n,e,i){var s=a_(t,n,e),l=s_(t,n,e),c=r_(t,n),h=ox(t,n);return{type:"option",data:n,isDisabled:s,isSelected:l,label:c,value:h,index:i}}function Fy(t,n){return t.options.map(function(e,i){if("options"in e){var s=e.options.map(function(c,h){return Nw(t,c,n,h)}).filter(function(c){return _w(t,c)});return s.length>0?{type:"group",data:e,options:s,index:i}:void 0}var l=Nw(t,e,n,i);return _w(t,l)?l:void 0}).filter(QM)}function i_(t){return t.reduce(function(n,e){return e.type==="group"?n.push.apply(n,E0(e.options.map(function(i){return i.data}))):n.push(e.data),n},[])}function Cw(t,n){return t.reduce(function(e,i){return i.type==="group"?e.push.apply(e,E0(i.options.map(function(s){return{data:s.data,id:"".concat(n,"-").concat(i.index,"-").concat(s.index)}}))):e.push({data:i.data,id:"".concat(n,"-").concat(i.index)}),e},[])}function K4(t,n){return i_(Fy(t,n))}function _w(t,n){var e=t.inputValue,i=e===void 0?"":e,s=n.data,l=n.isSelected,c=n.label,h=n.value;return(!l_(t)||!l)&&o_(t,{label:c,value:h,data:s},i)}function X4(t,n){var e=t.focusedValue,i=t.selectValue,s=i.indexOf(e);if(s>-1){var l=n.indexOf(e);if(l>-1)return e;if(s<n.length)return n[s]}return null}function Z4(t,n){var e=t.focusedOption;return e&&n.indexOf(e)>-1?e:n[0]}var eb=function(n,e){var i,s=(i=n.find(function(l){return l.data===e}))===null||i===void 0?void 0:i.id;return s||null},r_=function(n,e){return n.getOptionLabel(e)},ox=function(n,e){return n.getOptionValue(e)};function a_(t,n,e){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(n,e):!1}function s_(t,n,e){if(e.indexOf(n)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(n,e);var i=ox(t,n);return e.some(function(s){return ox(t,s)===i})}function o_(t,n,e){return t.filterOption?t.filterOption(n,e):!0}var l_=function(n){var e=n.hideSelectedOptions,i=n.isMulti;return e===void 0?i:e},eO=1,c_=function(t){bR(e,t);var n=NR(e);function e(i){var s;if(xR(this,e),s=n.call(this,i),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(m){s.controlRef=m},s.focusedOptionRef=null,s.getFocusedOptionRef=function(m){s.focusedOptionRef=m},s.menuListRef=null,s.getMenuListRef=function(m){s.menuListRef=m},s.inputRef=null,s.getInputRef=function(m){s.inputRef=m},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(m,f){var y=s.props,x=y.onChange,S=y.name;f.name=S,s.ariaOnChange(m,f),x(m,f)},s.setValue=function(m,f,y){var x=s.props,S=x.closeMenuOnSelect,w=x.isMulti,j=x.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:j}),S&&(s.setState({inputIsHiddenAfterUpdate:!w}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(m,{action:f,option:y})},s.selectOption=function(m){var f=s.props,y=f.blurInputOnSelect,x=f.isMulti,S=f.name,w=s.state.selectValue,j=x&&s.isOptionSelected(m,w),E=s.isOptionDisabled(m,w);if(j){var A=s.getOptionValue(m);s.setValue(w.filter(function(k){return s.getOptionValue(k)!==A}),"deselect-option",m)}else if(!E)x?s.setValue([].concat(E0(w),[m]),"select-option",m):s.setValue(m,"select-option");else{s.ariaOnChange(m,{action:"select-option",option:m,name:S});return}y&&s.blurInput()},s.removeValue=function(m){var f=s.props.isMulti,y=s.state.selectValue,x=s.getOptionValue(m),S=y.filter(function(j){return s.getOptionValue(j)!==x}),w=wy(f,S,S[0]||null);s.onChange(w,{action:"remove-value",removedValue:m}),s.focusInput()},s.clearValue=function(){var m=s.state.selectValue;s.onChange(wy(s.props.isMulti,[],null),{action:"clear",removedValues:m})},s.popValue=function(){var m=s.props.isMulti,f=s.state.selectValue,y=f[f.length-1],x=f.slice(0,f.length-1),S=wy(m,x,x[0]||null);y&&s.onChange(S,{action:"pop-value",removedValue:y})},s.getFocusedOptionId=function(m){return eb(s.state.focusableOptionsWithIds,m)},s.getFocusableOptionsWithIds=function(){return Cw(Fy(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var m=arguments.length,f=new Array(m),y=0;y<m;y++)f[y]=arguments[y];return BM.apply(void 0,[s.props.classNamePrefix].concat(f))},s.getOptionLabel=function(m){return r_(s.props,m)},s.getOptionValue=function(m){return ox(s.props,m)},s.getStyles=function(m,f){var y=s.props.unstyled,x=V4[m](f,y);x.boxSizing="border-box";var S=s.props.styles[m];return S?S(x,f):x},s.getClassNames=function(m,f){var y,x;return(y=(x=s.props.classNames)[m])===null||y===void 0?void 0:y.call(x,f)},s.getElementId=function(m){return"".concat(s.state.instancePrefix,"-").concat(m)},s.getComponents=function(){return f4(s.props)},s.buildCategorizedOptions=function(){return Fy(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return i_(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(m,f){s.setState({ariaSelection:xt({value:m},f)})},s.onMenuMouseDown=function(m){m.button===0&&(m.stopPropagation(),m.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(m){s.blockOptionHover=!1},s.onControlMouseDown=function(m){if(!m.defaultPrevented){var f=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&s.onMenuClose():f&&s.openMenu("first"):(f&&(s.openAfterFocus=!0),s.focusInput()),m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"&&m.preventDefault()}},s.onDropdownIndicatorMouseDown=function(m){if(!(m&&m.type==="mousedown"&&m.button!==0)&&!s.props.isDisabled){var f=s.props,y=f.isMulti,x=f.menuIsOpen;s.focusInput(),x?(s.setState({inputIsHiddenAfterUpdate:!y}),s.onMenuClose()):s.openMenu("first"),m.preventDefault()}},s.onClearIndicatorMouseDown=function(m){m&&m.type==="mousedown"&&m.button!==0||(s.clearValue(),m.preventDefault(),s.openAfterFocus=!1,m.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(m){typeof s.props.closeMenuOnScroll=="boolean"?m.target instanceof HTMLElement&&jx(m.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(m)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(m){var f=m.touches,y=f&&f.item(0);y&&(s.initialTouchX=y.clientX,s.initialTouchY=y.clientY,s.userIsDragging=!1)},s.onTouchMove=function(m){var f=m.touches,y=f&&f.item(0);if(y){var x=Math.abs(y.clientX-s.initialTouchX),S=Math.abs(y.clientY-s.initialTouchY),w=5;s.userIsDragging=x>w||S>w}},s.onTouchEnd=function(m){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(m.target)&&s.menuListRef&&!s.menuListRef.contains(m.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(m){s.userIsDragging||s.onControlMouseDown(m)},s.onClearIndicatorTouchEnd=function(m){s.userIsDragging||s.onClearIndicatorMouseDown(m)},s.onDropdownIndicatorTouchEnd=function(m){s.userIsDragging||s.onDropdownIndicatorMouseDown(m)},s.handleInputChange=function(m){var f=s.props.inputValue,y=m.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(y,{action:"input-change",prevInputValue:f}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(m){s.props.onFocus&&s.props.onFocus(m),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(m){var f=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(m),s.onInputChange("",{action:"input-blur",prevInputValue:f}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(m){if(!(s.blockOptionHover||s.state.focusedOption===m)){var f=s.getFocusableOptions(),y=f.indexOf(m);s.setState({focusedOption:m,focusedOptionId:y>-1?s.getFocusedOptionId(m):null})}},s.shouldHideSelectedOptions=function(){return l_(s.props)},s.onValueInputFocus=function(m){m.preventDefault(),m.stopPropagation(),s.focus()},s.onKeyDown=function(m){var f=s.props,y=f.isMulti,x=f.backspaceRemovesValue,S=f.escapeClearsValue,w=f.inputValue,j=f.isClearable,E=f.isDisabled,A=f.menuIsOpen,k=f.onKeyDown,P=f.tabSelectsValue,R=f.openMenuOnFocus,Y=s.state,F=Y.focusedOption,q=Y.focusedValue,z=Y.selectValue;if(!E&&!(typeof k=="function"&&(k(m),m.defaultPrevented))){switch(s.blockOptionHover=!0,m.key){case"ArrowLeft":if(!y||w)return;s.focusValue("previous");break;case"ArrowRight":if(!y||w)return;s.focusValue("next");break;case"Delete":case"Backspace":if(w)return;if(q)s.removeValue(q);else{if(!x)return;y?s.popValue():j&&s.clearValue()}break;case"Tab":if(s.isComposing||m.shiftKey||!A||!P||!F||R&&s.isOptionSelected(F,z))return;s.selectOption(F);break;case"Enter":if(m.keyCode===229)break;if(A){if(!F||s.isComposing)return;s.selectOption(F);break}return;case"Escape":A?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:w}),s.onMenuClose()):j&&S&&s.clearValue();break;case" ":if(w)return;if(!A){s.openMenu("first");break}if(!F)return;s.selectOption(F);break;case"ArrowUp":A?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":A?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!A)return;s.focusOption("pageup");break;case"PageDown":if(!A)return;s.focusOption("pagedown");break;case"Home":if(!A)return;s.focusOption("first");break;case"End":if(!A)return;s.focusOption("last");break;default:return}m.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++eO),s.state.selectValue=cw(i.value),i.menuIsOpen&&s.state.selectValue.length){var l=s.getFocusableOptionsWithIds(),c=s.buildFocusableOptions(),h=c.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=l,s.state.focusedOption=c[h],s.state.focusedOptionId=eb(l,c[h])}return s}return vR(e,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&uw(this.menuListRef,this.focusedOptionRef),z4()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var l=this.props,c=l.isDisabled,h=l.menuIsOpen,m=this.state.isFocused;(m&&!c&&s.isDisabled||m&&h&&!s.menuIsOpen)&&this.focusInput(),m&&c&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!m&&!c&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(uw(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,l){this.props.onInputChange(s,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var l=this,c=this.state,h=c.selectValue,m=c.isFocused,f=this.buildFocusableOptions(),y=s==="first"?0:f.length-1;if(!this.props.isMulti){var x=f.indexOf(h[0]);x>-1&&(y=x)}this.scrollToFocusedOptionOnUpdate=!(m&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[y],focusedOptionId:this.getFocusedOptionId(f[y])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(s){var l=this.state,c=l.selectValue,h=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var m=c.indexOf(h);h||(m=-1);var f=c.length-1,y=-1;if(c.length){switch(s){case"previous":m===0?y=0:m===-1?y=f:y=m-1;break;case"next":m>-1&&m<f&&(y=m+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:c[y]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,c=this.state.focusedOption,h=this.getFocusableOptions();if(h.length){var m=0,f=h.indexOf(c);c||(f=-1),s==="up"?m=f>0?f-1:h.length-1:s==="down"?m=(f+1)%h.length:s==="pageup"?(m=f-l,m<0&&(m=0)):s==="pagedown"?(m=f+l,m>h.length-1&&(m=h.length-1)):s==="last"&&(m=h.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:h[m],focusedValue:null,focusedOptionId:this.getFocusedOptionId(h[m])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Zv):xt(xt({},Zv),this.props.theme):Zv}},{key:"getCommonProps",value:function(){var s=this.clearValue,l=this.cx,c=this.getStyles,h=this.getClassNames,m=this.getValue,f=this.selectOption,y=this.setValue,x=this.props,S=x.isMulti,w=x.isRtl,j=x.options,E=this.hasValue();return{clearValue:s,cx:l,getStyles:c,getClassNames:h,getValue:m,hasValue:E,isMulti:S,isRtl:w,options:j,selectOption:f,selectProps:x,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,l=s.isClearable,c=s.isMulti;return l===void 0?c:l}},{key:"isOptionDisabled",value:function(s,l){return a_(this.props,s,l)}},{key:"isOptionSelected",value:function(s,l){return s_(this.props,s,l)}},{key:"filterOption",value:function(s,l){return o_(this.props,s,l)}},{key:"formatOptionLabel",value:function(s,l){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,h=this.state.selectValue;return this.props.formatOptionLabel(s,{context:l,inputValue:c,selectValue:h})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,l=s.isDisabled,c=s.isSearchable,h=s.inputId,m=s.inputValue,f=s.tabIndex,y=s.form,x=s.menuIsOpen,S=s.required,w=this.getComponents(),j=w.Input,E=this.state,A=E.inputIsHidden,k=E.ariaSelection,P=this.commonProps,R=h||this.getElementId("input"),Y=xt(xt(xt({"aria-autocomplete":"list","aria-expanded":x,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":S,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},x&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(k==null?void 0:k.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?_.createElement(j,Ct({},P,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:R,innerRef:this.getInputRef,isDisabled:l,isHidden:A,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:y,type:"text",value:m},Y)):_.createElement(j4,Ct({id:R,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ax,onFocus:this.onInputFocus,disabled:l,tabIndex:f,inputMode:"none",form:y,value:""},Y))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,l=this.getComponents(),c=l.MultiValue,h=l.MultiValueContainer,m=l.MultiValueLabel,f=l.MultiValueRemove,y=l.SingleValue,x=l.Placeholder,S=this.commonProps,w=this.props,j=w.controlShouldRenderValue,E=w.isDisabled,A=w.isMulti,k=w.inputValue,P=w.placeholder,R=this.state,Y=R.selectValue,F=R.focusedValue,q=R.isFocused;if(!this.hasValue()||!j)return k?null:_.createElement(x,Ct({},S,{key:"placeholder",isDisabled:E,isFocused:q,innerProps:{id:this.getElementId("placeholder")}}),P);if(A)return Y.map(function(L,V){var M=L===F,B="".concat(s.getOptionLabel(L),"-").concat(s.getOptionValue(L));return _.createElement(c,Ct({},S,{components:{Container:h,Label:m,Remove:f},isFocused:M,isDisabled:E,key:B,index:V,removeProps:{onClick:function(){return s.removeValue(L)},onTouchEnd:function(){return s.removeValue(L)},onMouseDown:function(ie){ie.preventDefault()}},data:L}),s.formatOptionLabel(L,"value"))});if(k)return null;var z=Y[0];return _.createElement(y,Ct({},S,{data:z,isDisabled:E}),this.formatOptionLabel(z,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),l=s.ClearIndicator,c=this.commonProps,h=this.props,m=h.isDisabled,f=h.isLoading,y=this.state.isFocused;if(!this.isClearable()||!l||m||!this.hasValue()||f)return null;var x={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(l,Ct({},c,{innerProps:x,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),l=s.LoadingIndicator,c=this.commonProps,h=this.props,m=h.isDisabled,f=h.isLoading,y=this.state.isFocused;if(!l||!f)return null;var x={"aria-hidden":"true"};return _.createElement(l,Ct({},c,{innerProps:x,isDisabled:m,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),l=s.DropdownIndicator,c=s.IndicatorSeparator;if(!l||!c)return null;var h=this.commonProps,m=this.props.isDisabled,f=this.state.isFocused;return _.createElement(c,Ct({},h,{isDisabled:m,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),l=s.DropdownIndicator;if(!l)return null;var c=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused,f={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(l,Ct({},c,{innerProps:f,isDisabled:h,isFocused:m}))}},{key:"renderMenu",value:function(){var s=this,l=this.getComponents(),c=l.Group,h=l.GroupHeading,m=l.Menu,f=l.MenuList,y=l.MenuPortal,x=l.LoadingMessage,S=l.NoOptionsMessage,w=l.Option,j=this.commonProps,E=this.state.focusedOption,A=this.props,k=A.captureMenuScroll,P=A.inputValue,R=A.isLoading,Y=A.loadingMessage,F=A.minMenuHeight,q=A.maxMenuHeight,z=A.menuIsOpen,L=A.menuPlacement,V=A.menuPosition,M=A.menuPortalTarget,B=A.menuShouldBlockScroll,ee=A.menuShouldScrollIntoView,ie=A.noOptionsMessage,te=A.onMenuScrollToTop,se=A.onMenuScrollToBottom;if(!z)return null;var X=function(H,ne){var me=H.type,ue=H.data,je=H.isDisabled,ge=H.isSelected,Ge=H.label,Te=H.value,Ne=E===ue,Be=je?void 0:function(){return s.onOptionHover(ue)},Qe=je?void 0:function(){return s.selectOption(ue)},$e="".concat(s.getElementId("option"),"-").concat(ne),ht={id:$e,onClick:Qe,onMouseMove:Be,onMouseOver:Be,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:ge};return _.createElement(w,Ct({},j,{innerProps:ht,data:ue,isDisabled:je,isSelected:ge,key:$e,label:Ge,type:me,value:Te,isFocused:Ne,innerRef:Ne?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(H.data,"menu"))},K;if(this.hasOptions())K=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var H=ae.data,ne=ae.options,me=ae.index,ue="".concat(s.getElementId("group"),"-").concat(me),je="".concat(ue,"-heading");return _.createElement(c,Ct({},j,{key:ue,data:H,options:ne,Heading:h,headingProps:{id:je,data:ae.data},label:s.formatGroupLabel(ae.data)}),ae.options.map(function(ge){return X(ge,"".concat(me,"-").concat(ge.index))}))}else if(ae.type==="option")return X(ae,"".concat(ae.index))});else if(R){var re=Y({inputValue:P});if(re===null)return null;K=_.createElement(x,j,re)}else{var ve=ie({inputValue:P});if(ve===null)return null;K=_.createElement(S,j,ve)}var I={minMenuHeight:F,maxMenuHeight:q,menuPlacement:L,menuPosition:V,menuShouldScrollIntoView:ee},de=_.createElement(rI,Ct({},j,I),function(ae){var H=ae.ref,ne=ae.placerProps,me=ne.placement,ue=ne.maxHeight;return _.createElement(m,Ct({},j,I,{innerRef:H,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:R,placement:me}),_.createElement(P4,{captureEnabled:k,onTopArrive:te,onBottomArrive:se,lockEnabled:B},function(je){return _.createElement(f,Ct({},j,{innerRef:function(Ge){s.getMenuListRef(Ge),je(Ge)},innerProps:{role:"listbox","aria-multiselectable":j.isMulti,id:s.getElementId("listbox")},isLoading:R,maxHeight:ue,focusedOption:E}),K)}))});return M||V==="fixed"?_.createElement(y,Ct({},j,{appendTo:M,controlElement:this.controlRef,menuPlacement:L,menuPosition:V}),de):de}},{key:"renderFormField",value:function(){var s=this,l=this.props,c=l.delimiter,h=l.isDisabled,m=l.isMulti,f=l.name,y=l.required,x=this.state.selectValue;if(y&&!this.hasValue()&&!h)return _.createElement(I4,{name:f,onFocus:this.onValueInputFocus});if(!(!f||h))if(m)if(c){var S=x.map(function(E){return s.getOptionValue(E)}).join(c);return _.createElement("input",{name:f,type:"hidden",value:S})}else{var w=x.length>0?x.map(function(E,A){return _.createElement("input",{key:"i-".concat(A),name:f,type:"hidden",value:s.getOptionValue(E)})}):_.createElement("input",{name:f,type:"hidden",value:""});return _.createElement("div",null,w)}else{var j=x[0]?this.getOptionValue(x[0]):"";return _.createElement("input",{name:f,type:"hidden",value:j})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,l=this.state,c=l.ariaSelection,h=l.focusedOption,m=l.focusedValue,f=l.isFocused,y=l.selectValue,x=this.getFocusableOptions();return _.createElement(b4,Ct({},s,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:h,focusedValue:m,isFocused:f,selectValue:y,focusableOptions:x,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),l=s.Control,c=s.IndicatorsContainer,h=s.SelectContainer,m=s.ValueContainer,f=this.props,y=f.className,x=f.id,S=f.isDisabled,w=f.menuIsOpen,j=this.state.isFocused,E=this.commonProps=this.getCommonProps();return _.createElement(h,Ct({},E,{className:y,innerProps:{id:x,onKeyDown:this.onKeyDown},isDisabled:S,isFocused:j}),this.renderLiveRegion(),_.createElement(l,Ct({},E,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:S,isFocused:j,menuIsOpen:w}),_.createElement(m,Ct({},E,{isDisabled:S}),this.renderPlaceholderOrValue(),this.renderInput()),_.createElement(c,Ct({},E,{isDisabled:S}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,l){var c=l.prevProps,h=l.clearFocusValueOnUpdate,m=l.inputIsHiddenAfterUpdate,f=l.ariaSelection,y=l.isFocused,x=l.prevWasFocused,S=l.instancePrefix,w=s.options,j=s.value,E=s.menuIsOpen,A=s.inputValue,k=s.isMulti,P=cw(j),R={};if(c&&(j!==c.value||w!==c.options||E!==c.menuIsOpen||A!==c.inputValue)){var Y=E?K4(s,P):[],F=E?Cw(Fy(s,P),"".concat(S,"-option")):[],q=h?X4(l,P):null,z=Z4(l,Y),L=eb(F,z);R={selectValue:P,focusedOption:z,focusedOptionId:L,focusableOptionsWithIds:F,focusedValue:q,clearFocusValueOnUpdate:!1}}var V=m!=null&&s!==c?{inputIsHidden:m,inputIsHiddenAfterUpdate:void 0}:{},M=f,B=y&&x;return y&&!B&&(M={value:wy(k,P,P[0]||null),options:P,action:"initial-input-focus"},B=!x),(f==null?void 0:f.action)==="initial-input-focus"&&(M=null),xt(xt(xt({},R),V),{},{prevProps:s,ariaSelection:M,prevWasFocused:B})}}]),e}(_.Component);c_.defaultProps=Q4;var tO=_.forwardRef(function(t,n){var e=yR(t);return _.createElement(c_,Ct({ref:n},e))}),u_=tO;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nO,iO;function rO(){return{geminiUrl:nO,vertexUrl:iO}}function aO(t,n,e){var i,s,l;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const c=rO();return t.vertexai?(s=c.vertexUrl)!==null&&s!==void 0?s:n:(l=c.geminiUrl)!==null&&l!==void 0?l:e}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hp{}function At(t,n){const e=/\{([^}]+)\}/g;return t.replace(e,(i,s)=>{if(Object.prototype.hasOwnProperty.call(n,s)){const l=n[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function N(t,n,e){for(let l=0;l<n.length-1;l++){const c=n[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(e))t[h]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const m=t[h];if(Array.isArray(e))for(let f=0;f<m.length;f++){const y=m[f];N(y,n.slice(l+1),e[f])}else for(const f of m)N(f,n.slice(l+1),e)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const m=t[h];N(m[0],n.slice(l+1),e);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=n[n.length-1],s=t[i];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=e}function b(t,n){try{if(n.length===1&&n[0]==="_self")return t;for(let e=0;e<n.length;e++){if(typeof t!="object"||t===null)return;const i=n[e];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const l=t[s];return Array.isArray(l)?l.map(c=>b(c,n.slice(e+1))):void 0}else return}else t=t[i]}return t}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yn(t,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function d_(t,n){const e=Yn(t,n);return e?e.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:e.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${e}`:e:""}function f_(t,n){return Array.isArray(n)?n.map(e=>lx(t,e)):[lx(t,n)]}function lx(t,n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function sO(t,n){const e=lx(t,n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oO(t,n){const e=lx(t,n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jw(t,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function h_(t,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>jw(t,e)):[jw(t,n)]}function Ub(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Tw(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ew(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wr(t,n){if(n==null)throw new Error("ContentUnion is required");return Ub(n)?n:{role:"user",parts:h_(t,n)}}function m_(t,n){if(!n)return[];if(t.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{const i=Wr(t,e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const e=Wr(t,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>Wr(t,e)):[Wr(t,n)]}function Ac(t,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Tw(n)||Ew(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wr(t,n)]}const e=[],i=[],s=Ub(n[0]);for(const l of n){const c=Ub(l);if(c!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(l);else{if(Tw(l)||Ew(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(l)}}return s||e.push({role:"user",parts:h_(t,i)}),e}function p_(t,n){return n}function g_(t,n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Tx(t,n){return n}function Ex(t,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function lO(t,n,e,i=1){const s=!n.startsWith(`${e}/`)&&n.split("/").length===i;return t.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${t.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}/${n}`:n:s?`${e}/${n}`:n}function kc(t,n){if(typeof n!="string")throw new Error("name must be a string");return lO(t,n,"cachedContents")}function y_(t,n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Dc(t,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function cO(t){return t!=null&&typeof t=="object"&&"name"in t}function uO(t){return t!=null&&typeof t=="object"&&"video"in t}function dO(t){return t!=null&&typeof t=="object"&&"uri"in t}function x_(t,n){var e;let i;if(cO(n)&&(i=n.name),!(dO(n)&&(i=n.uri,i===void 0))&&!(uO(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const l=i.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${i}`);i=l[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function v_(t,n){let e;return t.isVertexAI()?e=n?"publishers/google/models":"models":e=n?"models":"tunedModels",e}function b_(t,n){for(const e of["models","tunedModels","publisherModels"])if(fO(n,e))return n[e];return[]}function fO(t,n){return t!==null&&typeof t=="object"&&n in t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hO(t,n){const e={};if(b(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(n,["data"]);i!=null&&N(e,["data"],i);const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function mO(t,n){const e={};if(b(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=b(n,["thought"]);i!=null&&N(e,["thought"],i);const s=b(n,["inlineData"]);s!=null&&N(e,["inlineData"],hO(t,s));const l=b(n,["codeExecutionResult"]);l!=null&&N(e,["codeExecutionResult"],l);const c=b(n,["executableCode"]);c!=null&&N(e,["executableCode"],c);const h=b(n,["fileData"]);h!=null&&N(e,["fileData"],h);const m=b(n,["functionCall"]);m!=null&&N(e,["functionCall"],m);const f=b(n,["functionResponse"]);f!=null&&N(e,["functionResponse"],f);const y=b(n,["text"]);return y!=null&&N(e,["text"],y),e}function Aw(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>mO(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function pO(){return{}}function gO(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function yO(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],gO(t,i)),e}function xO(t,n){const e={};if(b(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");b(n,["googleSearch"])!=null&&N(e,["googleSearch"],pO());const s=b(n,["googleSearchRetrieval"]);if(s!=null&&N(e,["googleSearchRetrieval"],yO(t,s)),b(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=b(n,["codeExecution"]);l!=null&&N(e,["codeExecution"],l);const c=b(n,["functionDeclarations"]);return c!=null&&N(e,["functionDeclarations"],c),e}function vO(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["allowedFunctionNames"]);return s!=null&&N(e,["allowedFunctionNames"],s),e}function bO(t,n){const e={},i=b(n,["functionCallingConfig"]);if(i!=null&&N(e,["functionCallingConfig"],vO(t,i)),b(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function wO(t,n,e){const i={},s=b(n,["ttl"]);e!==void 0&&s!=null&&N(e,["ttl"],s);const l=b(n,["expireTime"]);e!==void 0&&l!=null&&N(e,["expireTime"],l);const c=b(n,["displayName"]);e!==void 0&&c!=null&&N(e,["displayName"],c);const h=b(n,["contents"]);if(e!==void 0&&h!=null){let x=Ac(t,h);Array.isArray(x)&&(x=x.map(S=>Aw(t,S))),N(e,["contents"],x)}const m=b(n,["systemInstruction"]);e!==void 0&&m!=null&&N(e,["systemInstruction"],Aw(t,Wr(t,m)));const f=b(n,["tools"]);if(e!==void 0&&f!=null){let x=f;Array.isArray(x)&&(x=x.map(S=>xO(t,S))),N(e,["tools"],x)}const y=b(n,["toolConfig"]);return e!==void 0&&y!=null&&N(e,["toolConfig"],bO(t,y)),i}function SO(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["model"],d_(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],wO(t,s,e)),e}function NO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function CO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function _O(t,n,e){const i={},s=b(n,["ttl"]);e!==void 0&&s!=null&&N(e,["ttl"],s);const l=b(n,["expireTime"]);return e!==void 0&&l!=null&&N(e,["expireTime"],l),i}function jO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],_O(t,s,e)),e}function TO(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);return e!==void 0&&l!=null&&N(e,["_query","pageToken"],l),i}function EO(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],TO(t,i,e)),e}function AO(t,n){const e={},i=b(n,["displayName"]);i!=null&&N(e,["displayName"],i);const s=b(n,["data"]);s!=null&&N(e,["data"],s);const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function kO(t,n){const e={},i=b(n,["videoMetadata"]);i!=null&&N(e,["videoMetadata"],i);const s=b(n,["thought"]);s!=null&&N(e,["thought"],s);const l=b(n,["inlineData"]);l!=null&&N(e,["inlineData"],AO(t,l));const c=b(n,["codeExecutionResult"]);c!=null&&N(e,["codeExecutionResult"],c);const h=b(n,["executableCode"]);h!=null&&N(e,["executableCode"],h);const m=b(n,["fileData"]);m!=null&&N(e,["fileData"],m);const f=b(n,["functionCall"]);f!=null&&N(e,["functionCall"],f);const y=b(n,["functionResponse"]);y!=null&&N(e,["functionResponse"],y);const x=b(n,["text"]);return x!=null&&N(e,["text"],x),e}function kw(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>kO(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function DO(){return{}}function PO(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function RO(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],PO(t,i)),e}function MO(){return{}}function IO(t,n){const e={},i=b(n,["apiKeyString"]);return i!=null&&N(e,["apiKeyString"],i),e}function OO(t,n){const e={},i=b(n,["apiKeyConfig"]);i!=null&&N(e,["apiKeyConfig"],IO(t,i));const s=b(n,["authType"]);s!=null&&N(e,["authType"],s);const l=b(n,["googleServiceAccountConfig"]);l!=null&&N(e,["googleServiceAccountConfig"],l);const c=b(n,["httpBasicAuthConfig"]);c!=null&&N(e,["httpBasicAuthConfig"],c);const h=b(n,["oauthConfig"]);h!=null&&N(e,["oauthConfig"],h);const m=b(n,["oidcConfig"]);return m!=null&&N(e,["oidcConfig"],m),e}function LO(t,n){const e={},i=b(n,["authConfig"]);return i!=null&&N(e,["authConfig"],OO(t,i)),e}function FO(t,n){const e={},i=b(n,["retrieval"]);i!=null&&N(e,["retrieval"],i),b(n,["googleSearch"])!=null&&N(e,["googleSearch"],DO());const l=b(n,["googleSearchRetrieval"]);l!=null&&N(e,["googleSearchRetrieval"],RO(t,l)),b(n,["enterpriseWebSearch"])!=null&&N(e,["enterpriseWebSearch"],MO());const h=b(n,["googleMaps"]);h!=null&&N(e,["googleMaps"],LO(t,h));const m=b(n,["codeExecution"]);m!=null&&N(e,["codeExecution"],m);const f=b(n,["functionDeclarations"]);return f!=null&&N(e,["functionDeclarations"],f),e}function zO(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["allowedFunctionNames"]);return s!=null&&N(e,["allowedFunctionNames"],s),e}function $O(t,n){const e={},i=b(n,["latitude"]);i!=null&&N(e,["latitude"],i);const s=b(n,["longitude"]);return s!=null&&N(e,["longitude"],s),e}function UO(t,n){const e={},i=b(n,["latLng"]);return i!=null&&N(e,["latLng"],$O(t,i)),e}function BO(t,n){const e={},i=b(n,["functionCallingConfig"]);i!=null&&N(e,["functionCallingConfig"],zO(t,i));const s=b(n,["retrievalConfig"]);return s!=null&&N(e,["retrievalConfig"],UO(t,s)),e}function qO(t,n,e){const i={},s=b(n,["ttl"]);e!==void 0&&s!=null&&N(e,["ttl"],s);const l=b(n,["expireTime"]);e!==void 0&&l!=null&&N(e,["expireTime"],l);const c=b(n,["displayName"]);e!==void 0&&c!=null&&N(e,["displayName"],c);const h=b(n,["contents"]);if(e!==void 0&&h!=null){let x=Ac(t,h);Array.isArray(x)&&(x=x.map(S=>kw(t,S))),N(e,["contents"],x)}const m=b(n,["systemInstruction"]);e!==void 0&&m!=null&&N(e,["systemInstruction"],kw(t,Wr(t,m)));const f=b(n,["tools"]);if(e!==void 0&&f!=null){let x=f;Array.isArray(x)&&(x=x.map(S=>FO(t,S))),N(e,["tools"],x)}const y=b(n,["toolConfig"]);return e!==void 0&&y!=null&&N(e,["toolConfig"],BO(t,y)),i}function VO(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["model"],d_(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],qO(t,s,e)),e}function HO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function GO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function YO(t,n,e){const i={},s=b(n,["ttl"]);e!==void 0&&s!=null&&N(e,["ttl"],s);const l=b(n,["expireTime"]);return e!==void 0&&l!=null&&N(e,["expireTime"],l),i}function WO(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],kc(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],YO(t,s,e)),e}function JO(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);return e!==void 0&&l!=null&&N(e,["_query","pageToken"],l),i}function QO(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],JO(t,i,e)),e}function zy(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["model"]);l!=null&&N(e,["model"],l);const c=b(n,["createTime"]);c!=null&&N(e,["createTime"],c);const h=b(n,["updateTime"]);h!=null&&N(e,["updateTime"],h);const m=b(n,["expireTime"]);m!=null&&N(e,["expireTime"],m);const f=b(n,["usageMetadata"]);return f!=null&&N(e,["usageMetadata"],f),e}function KO(){return{}}function XO(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zy(t,c))),N(e,["cachedContents"],l)}return e}function $y(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["model"]);l!=null&&N(e,["model"],l);const c=b(n,["createTime"]);c!=null&&N(e,["createTime"],c);const h=b(n,["updateTime"]);h!=null&&N(e,["updateTime"],h);const m=b(n,["expireTime"]);m!=null&&N(e,["expireTime"],m);const f=b(n,["usageMetadata"]);return f!=null&&N(e,["usageMetadata"],f),e}function ZO(){return{}}function eL(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$y(t,c))),N(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gf;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Gf||(Gf={}));class Ax{constructor(n,e,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,i,s)}init(n,e,i){var s,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};i?typeof i=="object"?c=Object.assign({},i):c=i:c={config:{}},c.config&&(c.config.pageToken=e.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(s=c.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dw;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dw||(Dw={}));var Pw;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Pw||(Pw={}));var Rw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Rw||(Rw={}));var Mw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Mw||(Mw={}));var Iw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Iw||(Iw={}));var Ow;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ow||(Ow={}));var Lw;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Lw||(Lw={}));var Yf;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT"})(Yf||(Yf={}));var Fw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Fw||(Fw={}));var zw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zw||(zw={}));var $w;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($w||($w={}));var Uw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Uw||(Uw={}));var Bw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Bw||(Bw={}));var Ec;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ec||(Ec={}));var qw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qw||(qw={}));var Bb;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bb||(Bb={}));var Vw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Vw||(Vw={}));var Hw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Hw||(Hw={}));var Gw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gw||(Gw={}));var Yw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Yw||(Yw={}));var Ww;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ww||(Ww={}));var Jw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Jw||(Jw={}));var Qw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(Qw||(Qw={}));var Kw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Kw||(Kw={}));var Xw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Xw||(Xw={}));var Zw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Zw||(Zw={}));var eS;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(eS||(eS={}));var tS;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(tS||(tS={}));var nS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(nS||(nS={}));var iS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(iS||(iS={}));var rS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rS||(rS={}));var aS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(aS||(aS={}));var sS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(sS||(sS={}));var oS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oS||(oS={}));class Sy{get text(){var n,e,i,s,l,c,h,m;if(((s=(i=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const x=[];for(const S of(m=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[w,j]of Object.entries(S))w!=="text"&&w!=="thought"&&(j!==null||j!==void 0)&&x.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;y=!0,f+=S.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var n,e,i,s,l,c,h,m;if(((s=(i=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const x of(m=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&m!==void 0?m:[]){for(const[S,w]of Object.entries(x))S!=="inlineData"&&(w!==null||w!==void 0)&&y.push(S);x.inlineData&&typeof x.inlineData.data=="string"&&(f+=atob(x.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var n,e,i,s,l,c,h,m;if(((s=(i=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(m=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var n,e,i,s,l,c,h,m,f;if(((s=(i=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(m=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var n,e,i,s,l,c,h,m,f;if(((s=(i=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(m=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||m===void 0?void 0:m.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class lS{}class cS{}class tL{}class nL{}class uS{}class dS{}class fS{}class iL{}class hS{}class mS{}class pS{}class rL{}class qb{constructor(n){const e={};for(const i of n.headers.entries())e[i[0]]=i[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}}class aL{}class sL{}class oL{get text(){var n,e,i;let s="",l=!1;const c=[];for(const h of(i=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[m,f]of Object.entries(h))m!=="text"&&m!=="thought"&&f!==null&&c.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,s+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var n,e,i;let s="";const l=[];for(const c of(i=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(c))h!=="inlineData"&&m!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(s+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lL extends hp{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new Ax(Gf.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(e),e)}async create(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=VO(this.apiClient,n);return h=At("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>$y(this.apiClient,y))}else{const f=SO(this.apiClient,n);return h=At("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>zy(this.apiClient,y))}}async get(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=HO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>$y(this.apiClient,y))}else{const f=NO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>zy(this.apiClient,y))}}async delete(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=GO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(()=>{const y=ZO(),x=new mS;return Object.assign(x,y),x})}else{const f=CO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=KO(),x=new mS;return Object.assign(x,y),x})}}async update(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=WO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>$y(this.apiClient,y))}else{const f=jO(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>zy(this.apiClient,y))}}async listInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=QO(this.apiClient,n);return h=At("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=eL(this.apiClient,y),S=new pS;return Object.assign(S,x),S})}else{const f=EO(this.apiClient,n);return h=At("cachedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=XO(this.apiClient,y),S=new pS;return Object.assign(S,x),S})}}}function gS(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(t){return this instanceof dr?(this.v=t,this):new dr(t)}function cx(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(t,n||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(w){return function(j){return Promise.resolve(j).then(w,x)}}function h(w,j){i[w]&&(s[w]=function(E){return new Promise(function(A,k){l.push([w,E,A,k])>1||m(w,E)})},j&&(s[w]=j(s[w])))}function m(w,j){try{f(i[w](j))}catch(E){S(l[0][3],E)}}function f(w){w.value instanceof dr?Promise.resolve(w.value.v).then(y,x):S(l[0][2],w)}function y(w){m("next",w)}function x(w){m("throw",w)}function S(w,j){w(j),l.shift(),l.length&&m(l[0][0],l[0][1])}}function Vb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof gS=="function"?gS(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(l){e[l]=t[l]&&function(c){return new Promise(function(h,m){c=t[l](c),s(h,m,c.done,c.value)})}}function s(l,c,h,m){Promise.resolve(m).then(function(f){l({value:f,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cL(t){var n;if(t.candidates==null||t.candidates.length===0)return!1;const e=(n=t.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:w_(e)}function w_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function uL(t){if(t.length!==0){if(t[0].role!=="user")throw new Error("History must start with a user turn.");for(const n of t)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function dL(t){if(t===void 0||t.length===0)return[];const n=[],e=t.length;let i=0,s=t[0];for(;i<e;)if(t[i].role==="user")s=t[i],i++;else{const l=[];let c=!0;for(;i<e&&t[i].role==="model";)l.push(t[i]),c&&!w_(t[i])&&(c=!1),i++;c&&(n.push(s),n.push(...l))}return n}class fL{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new hL(this.apiClient,this.modelsModule,n.model,n.config,n.history)}}class hL{constructor(n,e,i,s={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=i,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),uL(l)}async sendMessage(n){var e;await this.sendPromise;const i=Wr(this.apiClient,n.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,c;const m=(c=(l=(await s).candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,f=m?[m]:[];this.recordHistory(i,f)})(),await this.sendPromise,s}async sendMessageStream(n){var e;await this.sendPromise;const i=Wr(this.apiClient,n.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,i)}getHistory(n=!1){return n?dL(this.history):this.history}processStreamResponse(n,e){var i,s;return cx(this,arguments,function*(){var c,h,m,f;const y=[];try{for(var x=!0,S=Vb(n),w;w=yield dr(S.next()),c=w.done,!c;x=!0){f=w.value,x=!1;const j=f;if(cL(j)){const E=(s=(i=j.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;E!==void 0&&y.push(E)}yield yield dr(j)}}catch(j){h={error:j}}finally{try{!x&&!c&&(m=S.return)&&(yield dr(m.call(S)))}finally{if(h)throw h.error}}this.recordHistory(e,y)})}recordHistory(n,e){let i=[];e.length>0&&e.every(s=>s.role==="model")?i=e:i.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mL(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);return e!==void 0&&l!=null&&N(e,["_query","pageToken"],l),i}function pL(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],mL(t,i,e)),e}function gL(t,n){const e={},i=b(n,["details"]);i!=null&&N(e,["details"],i);const s=b(n,["message"]);s!=null&&N(e,["message"],s);const l=b(n,["code"]);return l!=null&&N(e,["code"],l),e}function yL(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["mimeType"]);l!=null&&N(e,["mimeType"],l);const c=b(n,["sizeBytes"]);c!=null&&N(e,["sizeBytes"],c);const h=b(n,["createTime"]);h!=null&&N(e,["createTime"],h);const m=b(n,["expirationTime"]);m!=null&&N(e,["expirationTime"],m);const f=b(n,["updateTime"]);f!=null&&N(e,["updateTime"],f);const y=b(n,["sha256Hash"]);y!=null&&N(e,["sha256Hash"],y);const x=b(n,["uri"]);x!=null&&N(e,["uri"],x);const S=b(n,["downloadUri"]);S!=null&&N(e,["downloadUri"],S);const w=b(n,["state"]);w!=null&&N(e,["state"],w);const j=b(n,["source"]);j!=null&&N(e,["source"],j);const E=b(n,["videoMetadata"]);E!=null&&N(e,["videoMetadata"],E);const A=b(n,["error"]);return A!=null&&N(e,["error"],gL(t,A)),e}function xL(t,n){const e={},i=b(n,["file"]);i!=null&&N(e,["file"],yL(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function vL(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","file"],x_(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function bL(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","file"],x_(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function wL(t,n){const e={},i=b(n,["details"]);i!=null&&N(e,["details"],i);const s=b(n,["message"]);s!=null&&N(e,["message"],s);const l=b(n,["code"]);return l!=null&&N(e,["code"],l),e}function Hb(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["mimeType"]);l!=null&&N(e,["mimeType"],l);const c=b(n,["sizeBytes"]);c!=null&&N(e,["sizeBytes"],c);const h=b(n,["createTime"]);h!=null&&N(e,["createTime"],h);const m=b(n,["expirationTime"]);m!=null&&N(e,["expirationTime"],m);const f=b(n,["updateTime"]);f!=null&&N(e,["updateTime"],f);const y=b(n,["sha256Hash"]);y!=null&&N(e,["sha256Hash"],y);const x=b(n,["uri"]);x!=null&&N(e,["uri"],x);const S=b(n,["downloadUri"]);S!=null&&N(e,["downloadUri"],S);const w=b(n,["state"]);w!=null&&N(e,["state"],w);const j=b(n,["source"]);j!=null&&N(e,["source"],j);const E=b(n,["videoMetadata"]);E!=null&&N(e,["videoMetadata"],E);const A=b(n,["error"]);return A!=null&&N(e,["error"],wL(t,A)),e}function SL(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Hb(t,c))),N(e,["files"],l)}return e}function NL(){return{}}function CL(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _L extends hp{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new Ax(Gf.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(e),e)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>Hb(this.apiClient,e))}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=pL(this.apiClient,n);return l=At("files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const f=SL(this.apiClient,m),y=new rL;return Object.assign(y,f),y})}}async createInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xL(this.apiClient,n);return l=At("upload/v1beta/files",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(()=>{const m=NL(),f=new aL;return Object.assign(f,m),f})}}async get(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vL(this.apiClient,n);return l=At("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>Hb(this.apiClient,m))}}async delete(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bL(this.apiClient,n);return l=At("files/{file}",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(()=>{const m=CL(),f=new sL;return Object.assign(f,m),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jL(t,n){const e={};if(b(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(n,["data"]);i!=null&&N(e,["data"],i);const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function TL(t,n){const e={},i=b(n,["displayName"]);i!=null&&N(e,["displayName"],i);const s=b(n,["data"]);s!=null&&N(e,["data"],s);const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function EL(t,n){const e={};if(b(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=b(n,["thought"]);i!=null&&N(e,["thought"],i);const s=b(n,["inlineData"]);s!=null&&N(e,["inlineData"],jL(t,s));const l=b(n,["codeExecutionResult"]);l!=null&&N(e,["codeExecutionResult"],l);const c=b(n,["executableCode"]);c!=null&&N(e,["executableCode"],c);const h=b(n,["fileData"]);h!=null&&N(e,["fileData"],h);const m=b(n,["functionCall"]);m!=null&&N(e,["functionCall"],m);const f=b(n,["functionResponse"]);f!=null&&N(e,["functionResponse"],f);const y=b(n,["text"]);return y!=null&&N(e,["text"],y),e}function AL(t,n){const e={},i=b(n,["videoMetadata"]);i!=null&&N(e,["videoMetadata"],i);const s=b(n,["thought"]);s!=null&&N(e,["thought"],s);const l=b(n,["inlineData"]);l!=null&&N(e,["inlineData"],TL(t,l));const c=b(n,["codeExecutionResult"]);c!=null&&N(e,["codeExecutionResult"],c);const h=b(n,["executableCode"]);h!=null&&N(e,["executableCode"],h);const m=b(n,["fileData"]);m!=null&&N(e,["fileData"],m);const f=b(n,["functionCall"]);f!=null&&N(e,["functionCall"],f);const y=b(n,["functionResponse"]);y!=null&&N(e,["functionResponse"],y);const x=b(n,["text"]);return x!=null&&N(e,["text"],x),e}function kL(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>EL(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function DL(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>AL(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function PL(){return{}}function RL(){return{}}function ML(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function IL(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function OL(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],ML(t,i)),e}function LL(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],IL(t,i)),e}function FL(){return{}}function zL(t,n){const e={},i=b(n,["apiKeyString"]);return i!=null&&N(e,["apiKeyString"],i),e}function $L(t,n){const e={},i=b(n,["apiKeyConfig"]);i!=null&&N(e,["apiKeyConfig"],zL(t,i));const s=b(n,["authType"]);s!=null&&N(e,["authType"],s);const l=b(n,["googleServiceAccountConfig"]);l!=null&&N(e,["googleServiceAccountConfig"],l);const c=b(n,["httpBasicAuthConfig"]);c!=null&&N(e,["httpBasicAuthConfig"],c);const h=b(n,["oauthConfig"]);h!=null&&N(e,["oauthConfig"],h);const m=b(n,["oidcConfig"]);return m!=null&&N(e,["oidcConfig"],m),e}function UL(t,n){const e={},i=b(n,["authConfig"]);return i!=null&&N(e,["authConfig"],$L(t,i)),e}function BL(t,n){const e={};if(b(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");b(n,["googleSearch"])!=null&&N(e,["googleSearch"],PL());const s=b(n,["googleSearchRetrieval"]);if(s!=null&&N(e,["googleSearchRetrieval"],OL(t,s)),b(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=b(n,["codeExecution"]);l!=null&&N(e,["codeExecution"],l);const c=b(n,["functionDeclarations"]);return c!=null&&N(e,["functionDeclarations"],c),e}function qL(t,n){const e={},i=b(n,["retrieval"]);i!=null&&N(e,["retrieval"],i),b(n,["googleSearch"])!=null&&N(e,["googleSearch"],RL());const l=b(n,["googleSearchRetrieval"]);l!=null&&N(e,["googleSearchRetrieval"],LL(t,l)),b(n,["enterpriseWebSearch"])!=null&&N(e,["enterpriseWebSearch"],FL());const h=b(n,["googleMaps"]);h!=null&&N(e,["googleMaps"],UL(t,h));const m=b(n,["codeExecution"]);m!=null&&N(e,["codeExecution"],m);const f=b(n,["functionDeclarations"]);return f!=null&&N(e,["functionDeclarations"],f),e}function VL(t,n){const e={},i=b(n,["handle"]);if(i!=null&&N(e,["handle"],i),b(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function HL(t,n){const e={},i=b(n,["handle"]);i!=null&&N(e,["handle"],i);const s=b(n,["transparent"]);return s!=null&&N(e,["transparent"],s),e}function yS(){return{}}function xS(){return{}}function GL(t,n){const e={},i=b(n,["disabled"]);i!=null&&N(e,["disabled"],i);const s=b(n,["startOfSpeechSensitivity"]);s!=null&&N(e,["startOfSpeechSensitivity"],s);const l=b(n,["endOfSpeechSensitivity"]);l!=null&&N(e,["endOfSpeechSensitivity"],l);const c=b(n,["prefixPaddingMs"]);c!=null&&N(e,["prefixPaddingMs"],c);const h=b(n,["silenceDurationMs"]);return h!=null&&N(e,["silenceDurationMs"],h),e}function YL(t,n){const e={},i=b(n,["disabled"]);i!=null&&N(e,["disabled"],i);const s=b(n,["startOfSpeechSensitivity"]);s!=null&&N(e,["startOfSpeechSensitivity"],s);const l=b(n,["endOfSpeechSensitivity"]);l!=null&&N(e,["endOfSpeechSensitivity"],l);const c=b(n,["prefixPaddingMs"]);c!=null&&N(e,["prefixPaddingMs"],c);const h=b(n,["silenceDurationMs"]);return h!=null&&N(e,["silenceDurationMs"],h),e}function WL(t,n){const e={},i=b(n,["automaticActivityDetection"]);i!=null&&N(e,["automaticActivityDetection"],GL(t,i));const s=b(n,["activityHandling"]);s!=null&&N(e,["activityHandling"],s);const l=b(n,["turnCoverage"]);return l!=null&&N(e,["turnCoverage"],l),e}function JL(t,n){const e={},i=b(n,["automaticActivityDetection"]);i!=null&&N(e,["automaticActivityDetection"],YL(t,i));const s=b(n,["activityHandling"]);s!=null&&N(e,["activityHandling"],s);const l=b(n,["turnCoverage"]);return l!=null&&N(e,["turnCoverage"],l),e}function QL(t,n){const e={},i=b(n,["targetTokens"]);return i!=null&&N(e,["targetTokens"],i),e}function KL(t,n){const e={},i=b(n,["targetTokens"]);return i!=null&&N(e,["targetTokens"],i),e}function XL(t,n){const e={},i=b(n,["triggerTokens"]);i!=null&&N(e,["triggerTokens"],i);const s=b(n,["slidingWindow"]);return s!=null&&N(e,["slidingWindow"],QL(t,s)),e}function ZL(t,n){const e={},i=b(n,["triggerTokens"]);i!=null&&N(e,["triggerTokens"],i);const s=b(n,["slidingWindow"]);return s!=null&&N(e,["slidingWindow"],KL(t,s)),e}function e3(t,n,e){const i={},s=b(n,["generationConfig"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig"],s);const l=b(n,["responseModalities"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","responseModalities"],l);const c=b(n,["temperature"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","temperature"],c);const h=b(n,["topP"]);e!==void 0&&h!=null&&N(e,["setup","generationConfig","topP"],h);const m=b(n,["topK"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","topK"],m);const f=b(n,["maxOutputTokens"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","maxOutputTokens"],f);const y=b(n,["mediaResolution"]);e!==void 0&&y!=null&&N(e,["setup","generationConfig","mediaResolution"],y);const x=b(n,["seed"]);e!==void 0&&x!=null&&N(e,["setup","generationConfig","seed"],x);const S=b(n,["speechConfig"]);e!==void 0&&S!=null&&N(e,["setup","generationConfig","speechConfig"],S);const w=b(n,["systemInstruction"]);e!==void 0&&w!=null&&N(e,["setup","systemInstruction"],kL(t,Wr(t,w)));const j=b(n,["tools"]);if(e!==void 0&&j!=null){let Y=Ex(t,j);Array.isArray(Y)&&(Y=Y.map(F=>BL(t,Tx(t,F)))),N(e,["setup","tools"],Y)}const E=b(n,["sessionResumption"]);e!==void 0&&E!=null&&N(e,["setup","sessionResumption"],VL(t,E));const A=b(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&N(e,["setup","inputAudioTranscription"],yS());const k=b(n,["outputAudioTranscription"]);e!==void 0&&k!=null&&N(e,["setup","outputAudioTranscription"],yS());const P=b(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&N(e,["setup","realtimeInputConfig"],WL(t,P));const R=b(n,["contextWindowCompression"]);return e!==void 0&&R!=null&&N(e,["setup","contextWindowCompression"],XL(t,R)),i}function t3(t,n,e){const i={},s=b(n,["generationConfig"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig"],s);const l=b(n,["responseModalities"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","responseModalities"],l);const c=b(n,["temperature"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","temperature"],c);const h=b(n,["topP"]);e!==void 0&&h!=null&&N(e,["setup","generationConfig","topP"],h);const m=b(n,["topK"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","topK"],m);const f=b(n,["maxOutputTokens"]);e!==void 0&&f!=null&&N(e,["setup","generationConfig","maxOutputTokens"],f);const y=b(n,["mediaResolution"]);e!==void 0&&y!=null&&N(e,["setup","generationConfig","mediaResolution"],y);const x=b(n,["seed"]);e!==void 0&&x!=null&&N(e,["setup","generationConfig","seed"],x);const S=b(n,["speechConfig"]);e!==void 0&&S!=null&&N(e,["setup","generationConfig","speechConfig"],S);const w=b(n,["systemInstruction"]);e!==void 0&&w!=null&&N(e,["setup","systemInstruction"],DL(t,Wr(t,w)));const j=b(n,["tools"]);if(e!==void 0&&j!=null){let Y=Ex(t,j);Array.isArray(Y)&&(Y=Y.map(F=>qL(t,Tx(t,F)))),N(e,["setup","tools"],Y)}const E=b(n,["sessionResumption"]);e!==void 0&&E!=null&&N(e,["setup","sessionResumption"],HL(t,E));const A=b(n,["inputAudioTranscription"]);e!==void 0&&A!=null&&N(e,["setup","inputAudioTranscription"],xS());const k=b(n,["outputAudioTranscription"]);e!==void 0&&k!=null&&N(e,["setup","outputAudioTranscription"],xS());const P=b(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&N(e,["setup","realtimeInputConfig"],JL(t,P));const R=b(n,["contextWindowCompression"]);return e!==void 0&&R!=null&&N(e,["setup","contextWindowCompression"],ZL(t,R)),i}function n3(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["setup","model"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],e3(t,s,e)),e}function i3(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["setup","model"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],t3(t,s,e)),e}function r3(){return{}}function a3(){return{}}function s3(){return{}}function o3(){return{}}function l3(t,n){const e={},i=b(n,["media"]);i!=null&&N(e,["mediaChunks"],f_(t,i));const s=b(n,["audio"]);s!=null&&N(e,["audio"],oO(t,s));const l=b(n,["audioStreamEnd"]);l!=null&&N(e,["audioStreamEnd"],l);const c=b(n,["video"]);c!=null&&N(e,["video"],sO(t,c));const h=b(n,["text"]);return h!=null&&N(e,["text"],h),b(n,["activityStart"])!=null&&N(e,["activityStart"],r3()),b(n,["activityEnd"])!=null&&N(e,["activityEnd"],s3()),e}function c3(t,n){const e={},i=b(n,["media"]);if(i!=null&&N(e,["mediaChunks"],f_(t,i)),b(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=b(n,["audioStreamEnd"]);if(s!=null&&N(e,["audioStreamEnd"],s),b(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(b(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return b(n,["activityStart"])!=null&&N(e,["activityStart"],a3()),b(n,["activityEnd"])!=null&&N(e,["activityEnd"],o3()),e}function u3(){return{}}function d3(){return{}}function f3(t,n){const e={},i=b(n,["data"]);i!=null&&N(e,["data"],i);const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function h3(t,n){const e={},i=b(n,["displayName"]);i!=null&&N(e,["displayName"],i);const s=b(n,["data"]);s!=null&&N(e,["data"],s);const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function m3(t,n){const e={},i=b(n,["thought"]);i!=null&&N(e,["thought"],i);const s=b(n,["inlineData"]);s!=null&&N(e,["inlineData"],f3(t,s));const l=b(n,["codeExecutionResult"]);l!=null&&N(e,["codeExecutionResult"],l);const c=b(n,["executableCode"]);c!=null&&N(e,["executableCode"],c);const h=b(n,["fileData"]);h!=null&&N(e,["fileData"],h);const m=b(n,["functionCall"]);m!=null&&N(e,["functionCall"],m);const f=b(n,["functionResponse"]);f!=null&&N(e,["functionResponse"],f);const y=b(n,["text"]);return y!=null&&N(e,["text"],y),e}function p3(t,n){const e={},i=b(n,["videoMetadata"]);i!=null&&N(e,["videoMetadata"],i);const s=b(n,["thought"]);s!=null&&N(e,["thought"],s);const l=b(n,["inlineData"]);l!=null&&N(e,["inlineData"],h3(t,l));const c=b(n,["codeExecutionResult"]);c!=null&&N(e,["codeExecutionResult"],c);const h=b(n,["executableCode"]);h!=null&&N(e,["executableCode"],h);const m=b(n,["fileData"]);m!=null&&N(e,["fileData"],m);const f=b(n,["functionCall"]);f!=null&&N(e,["functionCall"],f);const y=b(n,["functionResponse"]);y!=null&&N(e,["functionResponse"],y);const x=b(n,["text"]);return x!=null&&N(e,["text"],x),e}function g3(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>m3(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function y3(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>p3(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function vS(t,n){const e={},i=b(n,["text"]);i!=null&&N(e,["text"],i);const s=b(n,["finished"]);return s!=null&&N(e,["finished"],s),e}function bS(t,n){const e={},i=b(n,["text"]);i!=null&&N(e,["text"],i);const s=b(n,["finished"]);return s!=null&&N(e,["finished"],s),e}function x3(t,n){const e={},i=b(n,["modelTurn"]);i!=null&&N(e,["modelTurn"],g3(t,i));const s=b(n,["turnComplete"]);s!=null&&N(e,["turnComplete"],s);const l=b(n,["interrupted"]);l!=null&&N(e,["interrupted"],l);const c=b(n,["groundingMetadata"]);c!=null&&N(e,["groundingMetadata"],c);const h=b(n,["generationComplete"]);h!=null&&N(e,["generationComplete"],h);const m=b(n,["inputTranscription"]);m!=null&&N(e,["inputTranscription"],vS(t,m));const f=b(n,["outputTranscription"]);return f!=null&&N(e,["outputTranscription"],vS(t,f)),e}function v3(t,n){const e={},i=b(n,["modelTurn"]);i!=null&&N(e,["modelTurn"],y3(t,i));const s=b(n,["turnComplete"]);s!=null&&N(e,["turnComplete"],s);const l=b(n,["interrupted"]);l!=null&&N(e,["interrupted"],l);const c=b(n,["groundingMetadata"]);c!=null&&N(e,["groundingMetadata"],c);const h=b(n,["generationComplete"]);h!=null&&N(e,["generationComplete"],h);const m=b(n,["inputTranscription"]);m!=null&&N(e,["inputTranscription"],bS(t,m));const f=b(n,["outputTranscription"]);return f!=null&&N(e,["outputTranscription"],bS(t,f)),e}function b3(t,n){const e={},i=b(n,["id"]);i!=null&&N(e,["id"],i);const s=b(n,["args"]);s!=null&&N(e,["args"],s);const l=b(n,["name"]);return l!=null&&N(e,["name"],l),e}function w3(t,n){const e={},i=b(n,["args"]);i!=null&&N(e,["args"],i);const s=b(n,["name"]);return s!=null&&N(e,["name"],s),e}function S3(t,n){const e={},i=b(n,["functionCalls"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>b3(t,l))),N(e,["functionCalls"],s)}return e}function N3(t,n){const e={},i=b(n,["functionCalls"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>w3(t,l))),N(e,["functionCalls"],s)}return e}function C3(t,n){const e={},i=b(n,["ids"]);return i!=null&&N(e,["ids"],i),e}function _3(t,n){const e={},i=b(n,["ids"]);return i!=null&&N(e,["ids"],i),e}function Ny(t,n){const e={},i=b(n,["modality"]);i!=null&&N(e,["modality"],i);const s=b(n,["tokenCount"]);return s!=null&&N(e,["tokenCount"],s),e}function Cy(t,n){const e={},i=b(n,["modality"]);i!=null&&N(e,["modality"],i);const s=b(n,["tokenCount"]);return s!=null&&N(e,["tokenCount"],s),e}function j3(t,n){const e={},i=b(n,["promptTokenCount"]);i!=null&&N(e,["promptTokenCount"],i);const s=b(n,["cachedContentTokenCount"]);s!=null&&N(e,["cachedContentTokenCount"],s);const l=b(n,["responseTokenCount"]);l!=null&&N(e,["responseTokenCount"],l);const c=b(n,["toolUsePromptTokenCount"]);c!=null&&N(e,["toolUsePromptTokenCount"],c);const h=b(n,["thoughtsTokenCount"]);h!=null&&N(e,["thoughtsTokenCount"],h);const m=b(n,["totalTokenCount"]);m!=null&&N(e,["totalTokenCount"],m);const f=b(n,["promptTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(j=>Ny(t,j))),N(e,["promptTokensDetails"],w)}const y=b(n,["cacheTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(j=>Ny(t,j))),N(e,["cacheTokensDetails"],w)}const x=b(n,["responseTokensDetails"]);if(x!=null){let w=x;Array.isArray(w)&&(w=w.map(j=>Ny(t,j))),N(e,["responseTokensDetails"],w)}const S=b(n,["toolUsePromptTokensDetails"]);if(S!=null){let w=S;Array.isArray(w)&&(w=w.map(j=>Ny(t,j))),N(e,["toolUsePromptTokensDetails"],w)}return e}function T3(t,n){const e={},i=b(n,["promptTokenCount"]);i!=null&&N(e,["promptTokenCount"],i);const s=b(n,["cachedContentTokenCount"]);s!=null&&N(e,["cachedContentTokenCount"],s);const l=b(n,["candidatesTokenCount"]);l!=null&&N(e,["responseTokenCount"],l);const c=b(n,["toolUsePromptTokenCount"]);c!=null&&N(e,["toolUsePromptTokenCount"],c);const h=b(n,["thoughtsTokenCount"]);h!=null&&N(e,["thoughtsTokenCount"],h);const m=b(n,["totalTokenCount"]);m!=null&&N(e,["totalTokenCount"],m);const f=b(n,["promptTokensDetails"]);if(f!=null){let j=f;Array.isArray(j)&&(j=j.map(E=>Cy(t,E))),N(e,["promptTokensDetails"],j)}const y=b(n,["cacheTokensDetails"]);if(y!=null){let j=y;Array.isArray(j)&&(j=j.map(E=>Cy(t,E))),N(e,["cacheTokensDetails"],j)}const x=b(n,["candidatesTokensDetails"]);if(x!=null){let j=x;Array.isArray(j)&&(j=j.map(E=>Cy(t,E))),N(e,["responseTokensDetails"],j)}const S=b(n,["toolUsePromptTokensDetails"]);if(S!=null){let j=S;Array.isArray(j)&&(j=j.map(E=>Cy(t,E))),N(e,["toolUsePromptTokensDetails"],j)}const w=b(n,["trafficType"]);return w!=null&&N(e,["trafficType"],w),e}function E3(t,n){const e={},i=b(n,["timeLeft"]);return i!=null&&N(e,["timeLeft"],i),e}function A3(t,n){const e={},i=b(n,["timeLeft"]);return i!=null&&N(e,["timeLeft"],i),e}function k3(t,n){const e={},i=b(n,["newHandle"]);i!=null&&N(e,["newHandle"],i);const s=b(n,["resumable"]);s!=null&&N(e,["resumable"],s);const l=b(n,["lastConsumedClientMessageIndex"]);return l!=null&&N(e,["lastConsumedClientMessageIndex"],l),e}function D3(t,n){const e={},i=b(n,["newHandle"]);i!=null&&N(e,["newHandle"],i);const s=b(n,["resumable"]);s!=null&&N(e,["resumable"],s);const l=b(n,["lastConsumedClientMessageIndex"]);return l!=null&&N(e,["lastConsumedClientMessageIndex"],l),e}function P3(t,n){const e={};b(n,["setupComplete"])!=null&&N(e,["setupComplete"],u3());const s=b(n,["serverContent"]);s!=null&&N(e,["serverContent"],x3(t,s));const l=b(n,["toolCall"]);l!=null&&N(e,["toolCall"],S3(t,l));const c=b(n,["toolCallCancellation"]);c!=null&&N(e,["toolCallCancellation"],C3(t,c));const h=b(n,["usageMetadata"]);h!=null&&N(e,["usageMetadata"],j3(t,h));const m=b(n,["goAway"]);m!=null&&N(e,["goAway"],E3(t,m));const f=b(n,["sessionResumptionUpdate"]);return f!=null&&N(e,["sessionResumptionUpdate"],k3(t,f)),e}function R3(t,n){const e={};b(n,["setupComplete"])!=null&&N(e,["setupComplete"],d3());const s=b(n,["serverContent"]);s!=null&&N(e,["serverContent"],v3(t,s));const l=b(n,["toolCall"]);l!=null&&N(e,["toolCall"],N3(t,l));const c=b(n,["toolCallCancellation"]);c!=null&&N(e,["toolCallCancellation"],_3(t,c));const h=b(n,["usageMetadata"]);h!=null&&N(e,["usageMetadata"],T3(t,h));const m=b(n,["goAway"]);m!=null&&N(e,["goAway"],A3(t,m));const f=b(n,["sessionResumptionUpdate"]);return f!=null&&N(e,["sessionResumptionUpdate"],D3(t,f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M3(t,n){const e={};if(b(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(n,["data"]);i!=null&&N(e,["data"],i);const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function I3(t,n){const e={};if(b(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=b(n,["thought"]);i!=null&&N(e,["thought"],i);const s=b(n,["inlineData"]);s!=null&&N(e,["inlineData"],M3(t,s));const l=b(n,["codeExecutionResult"]);l!=null&&N(e,["codeExecutionResult"],l);const c=b(n,["executableCode"]);c!=null&&N(e,["executableCode"],c);const h=b(n,["fileData"]);h!=null&&N(e,["fileData"],h);const m=b(n,["functionCall"]);m!=null&&N(e,["functionCall"],m);const f=b(n,["functionResponse"]);f!=null&&N(e,["functionResponse"],f);const y=b(n,["text"]);return y!=null&&N(e,["text"],y),e}function kx(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>I3(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function O3(t,n){const e={};if(b(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=b(n,["category"]);i!=null&&N(e,["category"],i);const s=b(n,["threshold"]);return s!=null&&N(e,["threshold"],s),e}function L3(){return{}}function F3(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function z3(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],F3(t,i)),e}function $3(t,n){const e={};if(b(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");b(n,["googleSearch"])!=null&&N(e,["googleSearch"],L3());const s=b(n,["googleSearchRetrieval"]);if(s!=null&&N(e,["googleSearchRetrieval"],z3(t,s)),b(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=b(n,["codeExecution"]);l!=null&&N(e,["codeExecution"],l);const c=b(n,["functionDeclarations"]);return c!=null&&N(e,["functionDeclarations"],c),e}function U3(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["allowedFunctionNames"]);return s!=null&&N(e,["allowedFunctionNames"],s),e}function B3(t,n){const e={},i=b(n,["functionCallingConfig"]);if(i!=null&&N(e,["functionCallingConfig"],U3(t,i)),b(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function q3(t,n){const e={},i=b(n,["voiceName"]);return i!=null&&N(e,["voiceName"],i),e}function V3(t,n){const e={},i=b(n,["prebuiltVoiceConfig"]);return i!=null&&N(e,["prebuiltVoiceConfig"],q3(t,i)),e}function H3(t,n){const e={},i=b(n,["voiceConfig"]);i!=null&&N(e,["voiceConfig"],V3(t,i));const s=b(n,["languageCode"]);return s!=null&&N(e,["languageCode"],s),e}function G3(t,n){const e={},i=b(n,["includeThoughts"]);i!=null&&N(e,["includeThoughts"],i);const s=b(n,["thinkingBudget"]);return s!=null&&N(e,["thinkingBudget"],s),e}function Y3(t,n,e){const i={},s=b(n,["systemInstruction"]);e!==void 0&&s!=null&&N(e,["systemInstruction"],kx(t,Wr(t,s)));const l=b(n,["temperature"]);l!=null&&N(i,["temperature"],l);const c=b(n,["topP"]);c!=null&&N(i,["topP"],c);const h=b(n,["topK"]);h!=null&&N(i,["topK"],h);const m=b(n,["candidateCount"]);m!=null&&N(i,["candidateCount"],m);const f=b(n,["maxOutputTokens"]);f!=null&&N(i,["maxOutputTokens"],f);const y=b(n,["stopSequences"]);y!=null&&N(i,["stopSequences"],y);const x=b(n,["responseLogprobs"]);x!=null&&N(i,["responseLogprobs"],x);const S=b(n,["logprobs"]);S!=null&&N(i,["logprobs"],S);const w=b(n,["presencePenalty"]);w!=null&&N(i,["presencePenalty"],w);const j=b(n,["frequencyPenalty"]);j!=null&&N(i,["frequencyPenalty"],j);const E=b(n,["seed"]);E!=null&&N(i,["seed"],E);const A=b(n,["responseMimeType"]);A!=null&&N(i,["responseMimeType"],A);const k=b(n,["responseSchema"]);if(k!=null&&N(i,["responseSchema"],p_(t,k)),b(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=b(n,["safetySettings"]);if(e!==void 0&&P!=null){let M=P;Array.isArray(M)&&(M=M.map(B=>O3(t,B))),N(e,["safetySettings"],M)}const R=b(n,["tools"]);if(e!==void 0&&R!=null){let M=Ex(t,R);Array.isArray(M)&&(M=M.map(B=>$3(t,Tx(t,B)))),N(e,["tools"],M)}const Y=b(n,["toolConfig"]);if(e!==void 0&&Y!=null&&N(e,["toolConfig"],B3(t,Y)),b(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=b(n,["cachedContent"]);e!==void 0&&F!=null&&N(e,["cachedContent"],kc(t,F));const q=b(n,["responseModalities"]);q!=null&&N(i,["responseModalities"],q);const z=b(n,["mediaResolution"]);z!=null&&N(i,["mediaResolution"],z);const L=b(n,["speechConfig"]);if(L!=null&&N(i,["speechConfig"],H3(t,g_(t,L))),b(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=b(n,["thinkingConfig"]);return V!=null&&N(i,["thinkingConfig"],G3(t,V)),i}function wS(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);if(s!=null){let c=Ac(t,s);Array.isArray(c)&&(c=c.map(h=>kx(t,h))),N(e,["contents"],c)}const l=b(n,["config"]);return l!=null&&N(e,["generationConfig"],Y3(t,l,e)),e}function W3(t,n,e){const i={},s=b(n,["taskType"]);e!==void 0&&s!=null&&N(e,["requests[]","taskType"],s);const l=b(n,["title"]);e!==void 0&&l!=null&&N(e,["requests[]","title"],l);const c=b(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&N(e,["requests[]","outputDimensionality"],c),b(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function J3(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);s!=null&&N(e,["requests[]","content"],m_(t,s));const l=b(n,["config"]);l!=null&&N(e,["config"],W3(t,l,e));const c=b(n,["model"]);return c!==void 0&&N(e,["requests[]","model"],Yn(t,c)),e}function Q3(t,n,e){const i={};if(b(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=b(n,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const l=b(n,["aspectRatio"]);e!==void 0&&l!=null&&N(e,["parameters","aspectRatio"],l);const c=b(n,["guidanceScale"]);if(e!==void 0&&c!=null&&N(e,["parameters","guidanceScale"],c),b(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=b(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&N(e,["parameters","safetySetting"],h);const m=b(n,["personGeneration"]);e!==void 0&&m!=null&&N(e,["parameters","personGeneration"],m);const f=b(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&N(e,["parameters","includeSafetyAttributes"],f);const y=b(n,["includeRaiReason"]);e!==void 0&&y!=null&&N(e,["parameters","includeRaiReason"],y);const x=b(n,["language"]);e!==void 0&&x!=null&&N(e,["parameters","language"],x);const S=b(n,["outputMimeType"]);e!==void 0&&S!=null&&N(e,["parameters","outputOptions","mimeType"],S);const w=b(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&N(e,["parameters","outputOptions","compressionQuality"],w),b(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function K3(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["prompt"]);s!=null&&N(e,["instances[0]","prompt"],s);const l=b(n,["config"]);return l!=null&&N(e,["config"],Q3(t,l,e)),e}function X3(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","name"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function Z3(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);e!==void 0&&l!=null&&N(e,["_query","pageToken"],l);const c=b(n,["filter"]);e!==void 0&&c!=null&&N(e,["_query","filter"],c);const h=b(n,["queryBase"]);return e!==void 0&&h!=null&&N(e,["_url","models_url"],v_(t,h)),i}function e6(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],Z3(t,i,e)),e}function t6(t,n,e){const i={},s=b(n,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const l=b(n,["description"]);e!==void 0&&l!=null&&N(e,["description"],l);const c=b(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&N(e,["defaultCheckpointId"],c),i}function n6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","name"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],t6(t,s,e)),e}function i6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","name"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function r6(t,n){const e={};if(b(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function a6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);if(s!=null){let c=Ac(t,s);Array.isArray(c)&&(c=c.map(h=>kx(t,h))),N(e,["contents"],c)}const l=b(n,["config"]);return l!=null&&N(e,["config"],r6(t,l)),e}function s6(t,n){const e={};if(b(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=b(n,["imageBytes"]);i!=null&&N(e,["bytesBase64Encoded"],Dc(t,i));const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function o6(t,n,e){const i={},s=b(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s),b(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=b(n,["durationSeconds"]);if(e!==void 0&&l!=null&&N(e,["parameters","durationSeconds"],l),b(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=b(n,["aspectRatio"]);if(e!==void 0&&c!=null&&N(e,["parameters","aspectRatio"],c),b(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const h=b(n,["personGeneration"]);if(e!==void 0&&h!=null&&N(e,["parameters","personGeneration"],h),b(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=b(n,["negativePrompt"]);if(e!==void 0&&m!=null&&N(e,["parameters","negativePrompt"],m),b(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function l6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["prompt"]);s!=null&&N(e,["instances[0]","prompt"],s);const l=b(n,["image"]);l!=null&&N(e,["instances[0]","image"],s6(t,l));const c=b(n,["config"]);return c!=null&&N(e,["config"],o6(t,c,e)),e}function c6(t,n){const e={},i=b(n,["displayName"]);i!=null&&N(e,["displayName"],i);const s=b(n,["data"]);s!=null&&N(e,["data"],s);const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function u6(t,n){const e={},i=b(n,["videoMetadata"]);i!=null&&N(e,["videoMetadata"],i);const s=b(n,["thought"]);s!=null&&N(e,["thought"],s);const l=b(n,["inlineData"]);l!=null&&N(e,["inlineData"],c6(t,l));const c=b(n,["codeExecutionResult"]);c!=null&&N(e,["codeExecutionResult"],c);const h=b(n,["executableCode"]);h!=null&&N(e,["executableCode"],h);const m=b(n,["fileData"]);m!=null&&N(e,["fileData"],m);const f=b(n,["functionCall"]);f!=null&&N(e,["functionCall"],f);const y=b(n,["functionResponse"]);y!=null&&N(e,["functionResponse"],y);const x=b(n,["text"]);return x!=null&&N(e,["text"],x),e}function eh(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>u6(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function d6(t,n){const e={},i=b(n,["featureSelectionPreference"]);return i!=null&&N(e,["featureSelectionPreference"],i),e}function f6(t,n){const e={},i=b(n,["method"]);i!=null&&N(e,["method"],i);const s=b(n,["category"]);s!=null&&N(e,["category"],s);const l=b(n,["threshold"]);return l!=null&&N(e,["threshold"],l),e}function h6(){return{}}function m6(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["dynamicThreshold"]);return s!=null&&N(e,["dynamicThreshold"],s),e}function p6(t,n){const e={},i=b(n,["dynamicRetrievalConfig"]);return i!=null&&N(e,["dynamicRetrievalConfig"],m6(t,i)),e}function g6(){return{}}function y6(t,n){const e={},i=b(n,["apiKeyString"]);return i!=null&&N(e,["apiKeyString"],i),e}function x6(t,n){const e={},i=b(n,["apiKeyConfig"]);i!=null&&N(e,["apiKeyConfig"],y6(t,i));const s=b(n,["authType"]);s!=null&&N(e,["authType"],s);const l=b(n,["googleServiceAccountConfig"]);l!=null&&N(e,["googleServiceAccountConfig"],l);const c=b(n,["httpBasicAuthConfig"]);c!=null&&N(e,["httpBasicAuthConfig"],c);const h=b(n,["oauthConfig"]);h!=null&&N(e,["oauthConfig"],h);const m=b(n,["oidcConfig"]);return m!=null&&N(e,["oidcConfig"],m),e}function v6(t,n){const e={},i=b(n,["authConfig"]);return i!=null&&N(e,["authConfig"],x6(t,i)),e}function S_(t,n){const e={},i=b(n,["retrieval"]);i!=null&&N(e,["retrieval"],i),b(n,["googleSearch"])!=null&&N(e,["googleSearch"],h6());const l=b(n,["googleSearchRetrieval"]);l!=null&&N(e,["googleSearchRetrieval"],p6(t,l)),b(n,["enterpriseWebSearch"])!=null&&N(e,["enterpriseWebSearch"],g6());const h=b(n,["googleMaps"]);h!=null&&N(e,["googleMaps"],v6(t,h));const m=b(n,["codeExecution"]);m!=null&&N(e,["codeExecution"],m);const f=b(n,["functionDeclarations"]);return f!=null&&N(e,["functionDeclarations"],f),e}function b6(t,n){const e={},i=b(n,["mode"]);i!=null&&N(e,["mode"],i);const s=b(n,["allowedFunctionNames"]);return s!=null&&N(e,["allowedFunctionNames"],s),e}function w6(t,n){const e={},i=b(n,["latitude"]);i!=null&&N(e,["latitude"],i);const s=b(n,["longitude"]);return s!=null&&N(e,["longitude"],s),e}function S6(t,n){const e={},i=b(n,["latLng"]);return i!=null&&N(e,["latLng"],w6(t,i)),e}function N6(t,n){const e={},i=b(n,["functionCallingConfig"]);i!=null&&N(e,["functionCallingConfig"],b6(t,i));const s=b(n,["retrievalConfig"]);return s!=null&&N(e,["retrievalConfig"],S6(t,s)),e}function C6(t,n){const e={},i=b(n,["voiceName"]);return i!=null&&N(e,["voiceName"],i),e}function _6(t,n){const e={},i=b(n,["prebuiltVoiceConfig"]);return i!=null&&N(e,["prebuiltVoiceConfig"],C6(t,i)),e}function j6(t,n){const e={},i=b(n,["voiceConfig"]);i!=null&&N(e,["voiceConfig"],_6(t,i));const s=b(n,["languageCode"]);return s!=null&&N(e,["languageCode"],s),e}function T6(t,n){const e={},i=b(n,["includeThoughts"]);i!=null&&N(e,["includeThoughts"],i);const s=b(n,["thinkingBudget"]);return s!=null&&N(e,["thinkingBudget"],s),e}function E6(t,n,e){const i={},s=b(n,["systemInstruction"]);e!==void 0&&s!=null&&N(e,["systemInstruction"],eh(t,Wr(t,s)));const l=b(n,["temperature"]);l!=null&&N(i,["temperature"],l);const c=b(n,["topP"]);c!=null&&N(i,["topP"],c);const h=b(n,["topK"]);h!=null&&N(i,["topK"],h);const m=b(n,["candidateCount"]);m!=null&&N(i,["candidateCount"],m);const f=b(n,["maxOutputTokens"]);f!=null&&N(i,["maxOutputTokens"],f);const y=b(n,["stopSequences"]);y!=null&&N(i,["stopSequences"],y);const x=b(n,["responseLogprobs"]);x!=null&&N(i,["responseLogprobs"],x);const S=b(n,["logprobs"]);S!=null&&N(i,["logprobs"],S);const w=b(n,["presencePenalty"]);w!=null&&N(i,["presencePenalty"],w);const j=b(n,["frequencyPenalty"]);j!=null&&N(i,["frequencyPenalty"],j);const E=b(n,["seed"]);E!=null&&N(i,["seed"],E);const A=b(n,["responseMimeType"]);A!=null&&N(i,["responseMimeType"],A);const k=b(n,["responseSchema"]);k!=null&&N(i,["responseSchema"],p_(t,k));const P=b(n,["routingConfig"]);P!=null&&N(i,["routingConfig"],P);const R=b(n,["modelSelectionConfig"]);R!=null&&N(i,["modelConfig"],d6(t,R));const Y=b(n,["safetySettings"]);if(e!==void 0&&Y!=null){let te=Y;Array.isArray(te)&&(te=te.map(se=>f6(t,se))),N(e,["safetySettings"],te)}const F=b(n,["tools"]);if(e!==void 0&&F!=null){let te=Ex(t,F);Array.isArray(te)&&(te=te.map(se=>S_(t,Tx(t,se)))),N(e,["tools"],te)}const q=b(n,["toolConfig"]);e!==void 0&&q!=null&&N(e,["toolConfig"],N6(t,q));const z=b(n,["labels"]);e!==void 0&&z!=null&&N(e,["labels"],z);const L=b(n,["cachedContent"]);e!==void 0&&L!=null&&N(e,["cachedContent"],kc(t,L));const V=b(n,["responseModalities"]);V!=null&&N(i,["responseModalities"],V);const M=b(n,["mediaResolution"]);M!=null&&N(i,["mediaResolution"],M);const B=b(n,["speechConfig"]);B!=null&&N(i,["speechConfig"],j6(t,g_(t,B)));const ee=b(n,["audioTimestamp"]);ee!=null&&N(i,["audioTimestamp"],ee);const ie=b(n,["thinkingConfig"]);return ie!=null&&N(i,["thinkingConfig"],T6(t,ie)),i}function SS(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);if(s!=null){let c=Ac(t,s);Array.isArray(c)&&(c=c.map(h=>eh(t,h))),N(e,["contents"],c)}const l=b(n,["config"]);return l!=null&&N(e,["generationConfig"],E6(t,l,e)),e}function A6(t,n,e){const i={},s=b(n,["taskType"]);e!==void 0&&s!=null&&N(e,["instances[]","task_type"],s);const l=b(n,["title"]);e!==void 0&&l!=null&&N(e,["instances[]","title"],l);const c=b(n,["outputDimensionality"]);e!==void 0&&c!=null&&N(e,["parameters","outputDimensionality"],c);const h=b(n,["mimeType"]);e!==void 0&&h!=null&&N(e,["instances[]","mimeType"],h);const m=b(n,["autoTruncate"]);return e!==void 0&&m!=null&&N(e,["parameters","autoTruncate"],m),i}function k6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);s!=null&&N(e,["instances[]","content"],m_(t,s));const l=b(n,["config"]);return l!=null&&N(e,["config"],A6(t,l,e)),e}function D6(t,n,e){const i={},s=b(n,["outputGcsUri"]);e!==void 0&&s!=null&&N(e,["parameters","storageUri"],s);const l=b(n,["negativePrompt"]);e!==void 0&&l!=null&&N(e,["parameters","negativePrompt"],l);const c=b(n,["numberOfImages"]);e!==void 0&&c!=null&&N(e,["parameters","sampleCount"],c);const h=b(n,["aspectRatio"]);e!==void 0&&h!=null&&N(e,["parameters","aspectRatio"],h);const m=b(n,["guidanceScale"]);e!==void 0&&m!=null&&N(e,["parameters","guidanceScale"],m);const f=b(n,["seed"]);e!==void 0&&f!=null&&N(e,["parameters","seed"],f);const y=b(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&N(e,["parameters","safetySetting"],y);const x=b(n,["personGeneration"]);e!==void 0&&x!=null&&N(e,["parameters","personGeneration"],x);const S=b(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&N(e,["parameters","includeSafetyAttributes"],S);const w=b(n,["includeRaiReason"]);e!==void 0&&w!=null&&N(e,["parameters","includeRaiReason"],w);const j=b(n,["language"]);e!==void 0&&j!=null&&N(e,["parameters","language"],j);const E=b(n,["outputMimeType"]);e!==void 0&&E!=null&&N(e,["parameters","outputOptions","mimeType"],E);const A=b(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&N(e,["parameters","outputOptions","compressionQuality"],A);const k=b(n,["addWatermark"]);e!==void 0&&k!=null&&N(e,["parameters","addWatermark"],k);const P=b(n,["enhancePrompt"]);return e!==void 0&&P!=null&&N(e,["parameters","enhancePrompt"],P),i}function P6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["prompt"]);s!=null&&N(e,["instances[0]","prompt"],s);const l=b(n,["config"]);return l!=null&&N(e,["config"],D6(t,l,e)),e}function z0(t,n){const e={},i=b(n,["gcsUri"]);i!=null&&N(e,["gcsUri"],i);const s=b(n,["imageBytes"]);s!=null&&N(e,["bytesBase64Encoded"],Dc(t,s));const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function R6(t,n){const e={},i=b(n,["maskMode"]);i!=null&&N(e,["maskMode"],i);const s=b(n,["segmentationClasses"]);s!=null&&N(e,["maskClasses"],s);const l=b(n,["maskDilation"]);return l!=null&&N(e,["dilation"],l),e}function M6(t,n){const e={},i=b(n,["controlType"]);i!=null&&N(e,["controlType"],i);const s=b(n,["enableControlImageComputation"]);return s!=null&&N(e,["computeControl"],s),e}function I6(t,n){const e={},i=b(n,["styleDescription"]);return i!=null&&N(e,["styleDescription"],i),e}function O6(t,n){const e={},i=b(n,["subjectType"]);i!=null&&N(e,["subjectType"],i);const s=b(n,["subjectDescription"]);return s!=null&&N(e,["subjectDescription"],s),e}function L6(t,n){const e={},i=b(n,["referenceImage"]);i!=null&&N(e,["referenceImage"],z0(t,i));const s=b(n,["referenceId"]);s!=null&&N(e,["referenceId"],s);const l=b(n,["referenceType"]);l!=null&&N(e,["referenceType"],l);const c=b(n,["maskImageConfig"]);c!=null&&N(e,["maskImageConfig"],R6(t,c));const h=b(n,["controlImageConfig"]);h!=null&&N(e,["controlImageConfig"],M6(t,h));const m=b(n,["styleImageConfig"]);m!=null&&N(e,["styleImageConfig"],I6(t,m));const f=b(n,["subjectImageConfig"]);return f!=null&&N(e,["subjectImageConfig"],O6(t,f)),e}function F6(t,n,e){const i={},s=b(n,["outputGcsUri"]);e!==void 0&&s!=null&&N(e,["parameters","storageUri"],s);const l=b(n,["negativePrompt"]);e!==void 0&&l!=null&&N(e,["parameters","negativePrompt"],l);const c=b(n,["numberOfImages"]);e!==void 0&&c!=null&&N(e,["parameters","sampleCount"],c);const h=b(n,["aspectRatio"]);e!==void 0&&h!=null&&N(e,["parameters","aspectRatio"],h);const m=b(n,["guidanceScale"]);e!==void 0&&m!=null&&N(e,["parameters","guidanceScale"],m);const f=b(n,["seed"]);e!==void 0&&f!=null&&N(e,["parameters","seed"],f);const y=b(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&N(e,["parameters","safetySetting"],y);const x=b(n,["personGeneration"]);e!==void 0&&x!=null&&N(e,["parameters","personGeneration"],x);const S=b(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&N(e,["parameters","includeSafetyAttributes"],S);const w=b(n,["includeRaiReason"]);e!==void 0&&w!=null&&N(e,["parameters","includeRaiReason"],w);const j=b(n,["language"]);e!==void 0&&j!=null&&N(e,["parameters","language"],j);const E=b(n,["outputMimeType"]);e!==void 0&&E!=null&&N(e,["parameters","outputOptions","mimeType"],E);const A=b(n,["outputCompressionQuality"]);e!==void 0&&A!=null&&N(e,["parameters","outputOptions","compressionQuality"],A);const k=b(n,["editMode"]);e!==void 0&&k!=null&&N(e,["parameters","editMode"],k);const P=b(n,["baseSteps"]);return e!==void 0&&P!=null&&N(e,["parameters","editConfig","baseSteps"],P),i}function z6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["prompt"]);s!=null&&N(e,["instances[0]","prompt"],s);const l=b(n,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>L6(t,m))),N(e,["instances[0]","referenceImages"],h)}const c=b(n,["config"]);return c!=null&&N(e,["config"],F6(t,c,e)),e}function $6(t,n,e){const i={},s=b(n,["includeRaiReason"]);e!==void 0&&s!=null&&N(e,["parameters","includeRaiReason"],s);const l=b(n,["outputMimeType"]);e!==void 0&&l!=null&&N(e,["parameters","outputOptions","mimeType"],l);const c=b(n,["outputCompressionQuality"]);e!==void 0&&c!=null&&N(e,["parameters","outputOptions","compressionQuality"],c);const h=b(n,["numberOfImages"]);e!==void 0&&h!=null&&N(e,["parameters","sampleCount"],h);const m=b(n,["mode"]);return e!==void 0&&m!=null&&N(e,["parameters","mode"],m),i}function U6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["image"]);s!=null&&N(e,["instances[0]","image"],z0(t,s));const l=b(n,["upscaleFactor"]);l!=null&&N(e,["parameters","upscaleConfig","upscaleFactor"],l);const c=b(n,["config"]);return c!=null&&N(e,["config"],$6(t,c,e)),e}function B6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","name"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function q6(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);e!==void 0&&l!=null&&N(e,["_query","pageToken"],l);const c=b(n,["filter"]);e!==void 0&&c!=null&&N(e,["_query","filter"],c);const h=b(n,["queryBase"]);return e!==void 0&&h!=null&&N(e,["_url","models_url"],v_(t,h)),i}function V6(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],q6(t,i,e)),e}function H6(t,n,e){const i={},s=b(n,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const l=b(n,["description"]);e!==void 0&&l!=null&&N(e,["description"],l);const c=b(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&N(e,["defaultCheckpointId"],c),i}function G6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],H6(t,s,e)),e}function Y6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","name"],Yn(t,i));const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function W6(t,n,e){const i={},s=b(n,["systemInstruction"]);e!==void 0&&s!=null&&N(e,["systemInstruction"],eh(t,Wr(t,s)));const l=b(n,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>S_(t,m))),N(e,["tools"],h)}const c=b(n,["generationConfig"]);return e!==void 0&&c!=null&&N(e,["generationConfig"],c),i}function J6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);if(s!=null){let c=Ac(t,s);Array.isArray(c)&&(c=c.map(h=>eh(t,h))),N(e,["contents"],c)}const l=b(n,["config"]);return l!=null&&N(e,["config"],W6(t,l,e)),e}function Q6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["contents"]);if(s!=null){let c=Ac(t,s);Array.isArray(c)&&(c=c.map(h=>eh(t,h))),N(e,["contents"],c)}const l=b(n,["config"]);return l!=null&&N(e,["config"],l),e}function K6(t,n,e){const i={},s=b(n,["numberOfVideos"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const l=b(n,["outputGcsUri"]);e!==void 0&&l!=null&&N(e,["parameters","storageUri"],l);const c=b(n,["fps"]);e!==void 0&&c!=null&&N(e,["parameters","fps"],c);const h=b(n,["durationSeconds"]);e!==void 0&&h!=null&&N(e,["parameters","durationSeconds"],h);const m=b(n,["seed"]);e!==void 0&&m!=null&&N(e,["parameters","seed"],m);const f=b(n,["aspectRatio"]);e!==void 0&&f!=null&&N(e,["parameters","aspectRatio"],f);const y=b(n,["resolution"]);e!==void 0&&y!=null&&N(e,["parameters","resolution"],y);const x=b(n,["personGeneration"]);e!==void 0&&x!=null&&N(e,["parameters","personGeneration"],x);const S=b(n,["pubsubTopic"]);e!==void 0&&S!=null&&N(e,["parameters","pubsubTopic"],S);const w=b(n,["negativePrompt"]);e!==void 0&&w!=null&&N(e,["parameters","negativePrompt"],w);const j=b(n,["enhancePrompt"]);return e!==void 0&&j!=null&&N(e,["parameters","enhancePrompt"],j),i}function X6(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["_url","model"],Yn(t,i));const s=b(n,["prompt"]);s!=null&&N(e,["instances[0]","prompt"],s);const l=b(n,["image"]);l!=null&&N(e,["instances[0]","image"],z0(t,l));const c=b(n,["config"]);return c!=null&&N(e,["config"],K6(t,c,e)),e}function Z6(t,n){const e={},i=b(n,["data"]);i!=null&&N(e,["data"],i);const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function eF(t,n){const e={},i=b(n,["thought"]);i!=null&&N(e,["thought"],i);const s=b(n,["inlineData"]);s!=null&&N(e,["inlineData"],Z6(t,s));const l=b(n,["codeExecutionResult"]);l!=null&&N(e,["codeExecutionResult"],l);const c=b(n,["executableCode"]);c!=null&&N(e,["executableCode"],c);const h=b(n,["fileData"]);h!=null&&N(e,["fileData"],h);const m=b(n,["functionCall"]);m!=null&&N(e,["functionCall"],m);const f=b(n,["functionResponse"]);f!=null&&N(e,["functionResponse"],f);const y=b(n,["text"]);return y!=null&&N(e,["text"],y),e}function tF(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>eF(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function nF(t,n){const e={},i=b(n,["citationSources"]);return i!=null&&N(e,["citations"],i),e}function iF(t,n){const e={},i=b(n,["content"]);i!=null&&N(e,["content"],tF(t,i));const s=b(n,["citationMetadata"]);s!=null&&N(e,["citationMetadata"],nF(t,s));const l=b(n,["tokenCount"]);l!=null&&N(e,["tokenCount"],l);const c=b(n,["finishReason"]);c!=null&&N(e,["finishReason"],c);const h=b(n,["avgLogprobs"]);h!=null&&N(e,["avgLogprobs"],h);const m=b(n,["groundingMetadata"]);m!=null&&N(e,["groundingMetadata"],m);const f=b(n,["index"]);f!=null&&N(e,["index"],f);const y=b(n,["logprobsResult"]);y!=null&&N(e,["logprobsResult"],y);const x=b(n,["safetyRatings"]);return x!=null&&N(e,["safetyRatings"],x),e}function NS(t,n){const e={},i=b(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>iF(t,m))),N(e,["candidates"],h)}const s=b(n,["modelVersion"]);s!=null&&N(e,["modelVersion"],s);const l=b(n,["promptFeedback"]);l!=null&&N(e,["promptFeedback"],l);const c=b(n,["usageMetadata"]);return c!=null&&N(e,["usageMetadata"],c),e}function rF(t,n){const e={},i=b(n,["values"]);return i!=null&&N(e,["values"],i),e}function aF(){return{}}function sF(t,n){const e={},i=b(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>rF(t,c))),N(e,["embeddings"],l)}return b(n,["metadata"])!=null&&N(e,["metadata"],aF()),e}function oF(t,n){const e={},i=b(n,["bytesBase64Encoded"]);i!=null&&N(e,["imageBytes"],Dc(t,i));const s=b(n,["mimeType"]);return s!=null&&N(e,["mimeType"],s),e}function N_(t,n){const e={},i=b(n,["safetyAttributes","categories"]);i!=null&&N(e,["categories"],i);const s=b(n,["safetyAttributes","scores"]);s!=null&&N(e,["scores"],s);const l=b(n,["contentType"]);return l!=null&&N(e,["contentType"],l),e}function lF(t,n){const e={},i=b(n,["_self"]);i!=null&&N(e,["image"],oF(t,i));const s=b(n,["raiFilteredReason"]);s!=null&&N(e,["raiFilteredReason"],s);const l=b(n,["_self"]);return l!=null&&N(e,["safetyAttributes"],N_(t,l)),e}function cF(t,n){const e={},i=b(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>lF(t,c))),N(e,["generatedImages"],l)}const s=b(n,["positivePromptSafetyAttributes"]);return s!=null&&N(e,["positivePromptSafetyAttributes"],N_(t,s)),e}function uF(t,n){const e={},i=b(n,["baseModel"]);i!=null&&N(e,["baseModel"],i);const s=b(n,["createTime"]);s!=null&&N(e,["createTime"],s);const l=b(n,["updateTime"]);return l!=null&&N(e,["updateTime"],l),e}function Gb(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["description"]);l!=null&&N(e,["description"],l);const c=b(n,["version"]);c!=null&&N(e,["version"],c);const h=b(n,["_self"]);h!=null&&N(e,["tunedModelInfo"],uF(t,h));const m=b(n,["inputTokenLimit"]);m!=null&&N(e,["inputTokenLimit"],m);const f=b(n,["outputTokenLimit"]);f!=null&&N(e,["outputTokenLimit"],f);const y=b(n,["supportedGenerationMethods"]);return y!=null&&N(e,["supportedActions"],y),e}function dF(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["_self"]);if(s!=null){let l=b_(t,s);Array.isArray(l)&&(l=l.map(c=>Gb(t,c))),N(e,["models"],l)}return e}function fF(){return{}}function hF(t,n){const e={},i=b(n,["totalTokens"]);i!=null&&N(e,["totalTokens"],i);const s=b(n,["cachedContentTokenCount"]);return s!=null&&N(e,["cachedContentTokenCount"],s),e}function mF(t,n){const e={},i=b(n,["video","uri"]);i!=null&&N(e,["uri"],i);const s=b(n,["video","encodedVideo"]);s!=null&&N(e,["videoBytes"],Dc(t,s));const l=b(n,["encoding"]);return l!=null&&N(e,["mimeType"],l),e}function pF(t,n){const e={},i=b(n,["_self"]);return i!=null&&N(e,["video"],mF(t,i)),e}function gF(t,n){const e={},i=b(n,["generatedSamples"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>pF(t,h))),N(e,["generatedVideos"],c)}const s=b(n,["raiMediaFilteredCount"]);s!=null&&N(e,["raiMediaFilteredCount"],s);const l=b(n,["raiMediaFilteredReasons"]);return l!=null&&N(e,["raiMediaFilteredReasons"],l),e}function yF(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["metadata"]);s!=null&&N(e,["metadata"],s);const l=b(n,["done"]);l!=null&&N(e,["done"],l);const c=b(n,["error"]);c!=null&&N(e,["error"],c);const h=b(n,["response","generateVideoResponse"]);return h!=null&&N(e,["response"],gF(t,h)),e}function xF(t,n){const e={},i=b(n,["displayName"]);i!=null&&N(e,["displayName"],i);const s=b(n,["data"]);s!=null&&N(e,["data"],s);const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function vF(t,n){const e={},i=b(n,["videoMetadata"]);i!=null&&N(e,["videoMetadata"],i);const s=b(n,["thought"]);s!=null&&N(e,["thought"],s);const l=b(n,["inlineData"]);l!=null&&N(e,["inlineData"],xF(t,l));const c=b(n,["codeExecutionResult"]);c!=null&&N(e,["codeExecutionResult"],c);const h=b(n,["executableCode"]);h!=null&&N(e,["executableCode"],h);const m=b(n,["fileData"]);m!=null&&N(e,["fileData"],m);const f=b(n,["functionCall"]);f!=null&&N(e,["functionCall"],f);const y=b(n,["functionResponse"]);y!=null&&N(e,["functionResponse"],y);const x=b(n,["text"]);return x!=null&&N(e,["text"],x),e}function bF(t,n){const e={},i=b(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vF(t,c))),N(e,["parts"],l)}const s=b(n,["role"]);return s!=null&&N(e,["role"],s),e}function wF(t,n){const e={},i=b(n,["citations"]);return i!=null&&N(e,["citations"],i),e}function SF(t,n){const e={},i=b(n,["content"]);i!=null&&N(e,["content"],bF(t,i));const s=b(n,["citationMetadata"]);s!=null&&N(e,["citationMetadata"],wF(t,s));const l=b(n,["finishMessage"]);l!=null&&N(e,["finishMessage"],l);const c=b(n,["finishReason"]);c!=null&&N(e,["finishReason"],c);const h=b(n,["avgLogprobs"]);h!=null&&N(e,["avgLogprobs"],h);const m=b(n,["groundingMetadata"]);m!=null&&N(e,["groundingMetadata"],m);const f=b(n,["index"]);f!=null&&N(e,["index"],f);const y=b(n,["logprobsResult"]);y!=null&&N(e,["logprobsResult"],y);const x=b(n,["safetyRatings"]);return x!=null&&N(e,["safetyRatings"],x),e}function CS(t,n){const e={},i=b(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(y=>SF(t,y))),N(e,["candidates"],f)}const s=b(n,["createTime"]);s!=null&&N(e,["createTime"],s);const l=b(n,["responseId"]);l!=null&&N(e,["responseId"],l);const c=b(n,["modelVersion"]);c!=null&&N(e,["modelVersion"],c);const h=b(n,["promptFeedback"]);h!=null&&N(e,["promptFeedback"],h);const m=b(n,["usageMetadata"]);return m!=null&&N(e,["usageMetadata"],m),e}function NF(t,n){const e={},i=b(n,["truncated"]);i!=null&&N(e,["truncated"],i);const s=b(n,["token_count"]);return s!=null&&N(e,["tokenCount"],s),e}function CF(t,n){const e={},i=b(n,["values"]);i!=null&&N(e,["values"],i);const s=b(n,["statistics"]);return s!=null&&N(e,["statistics"],NF(t,s)),e}function _F(t,n){const e={},i=b(n,["billableCharacterCount"]);return i!=null&&N(e,["billableCharacterCount"],i),e}function jF(t,n){const e={},i=b(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>CF(t,c))),N(e,["embeddings"],l)}const s=b(n,["metadata"]);return s!=null&&N(e,["metadata"],_F(t,s)),e}function TF(t,n){const e={},i=b(n,["gcsUri"]);i!=null&&N(e,["gcsUri"],i);const s=b(n,["bytesBase64Encoded"]);s!=null&&N(e,["imageBytes"],Dc(t,s));const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function C_(t,n){const e={},i=b(n,["safetyAttributes","categories"]);i!=null&&N(e,["categories"],i);const s=b(n,["safetyAttributes","scores"]);s!=null&&N(e,["scores"],s);const l=b(n,["contentType"]);return l!=null&&N(e,["contentType"],l),e}function $0(t,n){const e={},i=b(n,["_self"]);i!=null&&N(e,["image"],TF(t,i));const s=b(n,["raiFilteredReason"]);s!=null&&N(e,["raiFilteredReason"],s);const l=b(n,["_self"]);l!=null&&N(e,["safetyAttributes"],C_(t,l));const c=b(n,["prompt"]);return c!=null&&N(e,["enhancedPrompt"],c),e}function EF(t,n){const e={},i=b(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>$0(t,c))),N(e,["generatedImages"],l)}const s=b(n,["positivePromptSafetyAttributes"]);return s!=null&&N(e,["positivePromptSafetyAttributes"],C_(t,s)),e}function AF(t,n){const e={},i=b(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>$0(t,l))),N(e,["generatedImages"],s)}return e}function kF(t,n){const e={},i=b(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>$0(t,l))),N(e,["generatedImages"],s)}return e}function DF(t,n){const e={},i=b(n,["endpoint"]);i!=null&&N(e,["name"],i);const s=b(n,["deployedModelId"]);return s!=null&&N(e,["deployedModelId"],s),e}function PF(t,n){const e={},i=b(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&N(e,["baseModel"],i);const s=b(n,["createTime"]);s!=null&&N(e,["createTime"],s);const l=b(n,["updateTime"]);return l!=null&&N(e,["updateTime"],l),e}function RF(t,n){const e={},i=b(n,["checkpointId"]);i!=null&&N(e,["checkpointId"],i);const s=b(n,["epoch"]);s!=null&&N(e,["epoch"],s);const l=b(n,["step"]);return l!=null&&N(e,["step"],l),e}function Yb(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["displayName"]);s!=null&&N(e,["displayName"],s);const l=b(n,["description"]);l!=null&&N(e,["description"],l);const c=b(n,["versionId"]);c!=null&&N(e,["version"],c);const h=b(n,["deployedModels"]);if(h!=null){let S=h;Array.isArray(S)&&(S=S.map(w=>DF(t,w))),N(e,["endpoints"],S)}const m=b(n,["labels"]);m!=null&&N(e,["labels"],m);const f=b(n,["_self"]);f!=null&&N(e,["tunedModelInfo"],PF(t,f));const y=b(n,["defaultCheckpointId"]);y!=null&&N(e,["defaultCheckpointId"],y);const x=b(n,["checkpoints"]);if(x!=null){let S=x;Array.isArray(S)&&(S=S.map(w=>RF(t,w))),N(e,["checkpoints"],S)}return e}function MF(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["_self"]);if(s!=null){let l=b_(t,s);Array.isArray(l)&&(l=l.map(c=>Yb(t,c))),N(e,["models"],l)}return e}function IF(){return{}}function OF(t,n){const e={},i=b(n,["totalTokens"]);return i!=null&&N(e,["totalTokens"],i),e}function LF(t,n){const e={},i=b(n,["tokensInfo"]);return i!=null&&N(e,["tokensInfo"],i),e}function FF(t,n){const e={},i=b(n,["gcsUri"]);i!=null&&N(e,["uri"],i);const s=b(n,["bytesBase64Encoded"]);s!=null&&N(e,["videoBytes"],Dc(t,s));const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function zF(t,n){const e={},i=b(n,["_self"]);return i!=null&&N(e,["video"],FF(t,i)),e}function $F(t,n){const e={},i=b(n,["videos"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>zF(t,h))),N(e,["generatedVideos"],c)}const s=b(n,["raiMediaFilteredCount"]);s!=null&&N(e,["raiMediaFilteredCount"],s);const l=b(n,["raiMediaFilteredReasons"]);return l!=null&&N(e,["raiMediaFilteredReasons"],l),e}function UF(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["metadata"]);s!=null&&N(e,["metadata"],s);const l=b(n,["done"]);l!=null&&N(e,["done"],l);const c=b(n,["error"]);c!=null&&N(e,["error"],c);const h=b(n,["response"]);return h!=null&&N(e,["response"],$F(t,h)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qF(t,n,e){const i=new oL;let s;if(e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),t.isVertexAI()){const l=R3(t,s);Object.assign(i,l)}else{const l=P3(t,s);Object.assign(i,l)}n(i)}class VF{constructor(n,e,i){this.apiClient=n,this.auth=e,this.webSocketFactory=i}async connect(n){var e,i,s,l;const c=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let m;const f=WF(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())m=`${c}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f);else{const Y=this.apiClient.getApiKey();m=`${c}/ws/google.ai.generativelanguage.${h}.GenerativeService.BidiGenerateContent?key=${Y}`}let y=()=>{};const x=new Promise(Y=>{y=Y}),S=n.callbacks,w=function(){var Y;(Y=S==null?void 0:S.onopen)===null||Y===void 0||Y.call(S),y({})},j=this.apiClient,E={onopen:w,onmessage:Y=>{qF(j,S.onmessage,Y)},onerror:(e=S==null?void 0:S.onerror)!==null&&e!==void 0?e:function(Y){},onclose:(i=S==null?void 0:S.onclose)!==null&&i!==void 0?i:function(Y){}},A=this.webSocketFactory.create(m,YF(f),E);A.connect(),await x;let k=Yn(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const Y=this.apiClient.getProject(),F=this.apiClient.getLocation();k=`projects/${Y}/locations/${F}/`+k}let P={};this.apiClient.isVertexAI()&&((s=n.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[Ec.AUDIO]}:n.config.responseModalities=[Ec.AUDIO]),!((l=n.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R={model:k,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?P=i3(this.apiClient,R):P=n3(this.apiClient,R),delete P.config,A.send(JSON.stringify(P)),new GF(A,this.apiClient)}}const HF={turnComplete:!0};class GF{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let i=[];try{i=Ac(n,e.turns),n.isVertexAI()?i=i.map(s=>eh(n,s)):i=i.map(s=>kx(n,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(n,e){let i=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?i=e.functionResponses:i=[e.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(BF)}return{toolResponse:{functionResponses:i}}}sendClientContent(n){n=Object.assign(Object.assign({},HF),n);const e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){let e={};this.apiClient.isVertexAI()?e={realtimeInput:c3(this.apiClient,n)}:e={realtimeInput:l3(this.apiClient,n)},this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function YF(t){const n={};return t.forEach((e,i)=>{n[i]=e}),n}function WF(t){const n=new Headers;for(const[e,i]of Object.entries(t))n.append(e,i);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JF extends hp{constructor(n){super(),this.apiClient=n,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(i=>{var s;let l;const c=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((s=m==null?void 0:m.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:c.push(m);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l}:h={generatedImages:c},h}),this.list=async e=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ax(Gf.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async e=>{const i={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(i.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async e=>{let i={numberOfImages:1,mode:"upscale"};e.config&&(i=Object.assign(Object.assign({},i),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:i};return await this.upscaleImageInternal(s)}}async generateContentInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=SS(this.apiClient,n);return h=At("{model}:generateContent",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=CS(this.apiClient,y),S=new Sy;return Object.assign(S,x),S})}else{const f=wS(this.apiClient,n);return h=At("{model}:generateContent",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=NS(this.apiClient,y),S=new Sy;return Object.assign(S,x),S})}}async generateContentStreamInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=SS(this.apiClient,n);h=At("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(x){return cx(this,arguments,function*(){var S,w,j,E;try{for(var A=!0,k=Vb(x),P;P=yield dr(k.next()),S=P.done,!S;A=!0){E=P.value,A=!1;const Y=CS(y,yield dr(E.json())),F=new Sy;Object.assign(F,Y),yield yield dr(F)}}catch(R){w={error:R}}finally{try{!A&&!S&&(j=k.return)&&(yield dr(j.call(k)))}finally{if(w)throw w.error}}})})}else{const f=wS(this.apiClient,n);h=At("{model}:streamGenerateContent?alt=sse",f._url),m=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(x){return cx(this,arguments,function*(){var S,w,j,E;try{for(var A=!0,k=Vb(x),P;P=yield dr(k.next()),S=P.done,!S;A=!0){E=P.value,A=!1;const Y=NS(y,yield dr(E.json())),F=new Sy;Object.assign(F,Y),yield yield dr(F)}}catch(R){w={error:R}}finally{try{!A&&!S&&(j=k.return)&&(yield dr(j.call(k)))}finally{if(w)throw w.error}}})})}}async embedContent(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=k6(this.apiClient,n);return h=At("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=jF(this.apiClient,y),S=new lS;return Object.assign(S,x),S})}else{const f=J3(this.apiClient,n);return h=At("{model}:batchEmbedContents",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=sF(this.apiClient,y),S=new lS;return Object.assign(S,x),S})}}async generateImagesInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=P6(this.apiClient,n);return h=At("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=EF(this.apiClient,y),S=new cS;return Object.assign(S,x),S})}else{const f=K3(this.apiClient,n);return h=At("{model}:predict",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=cF(this.apiClient,y),S=new cS;return Object.assign(S,x),S})}}async editImageInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=z6(this.apiClient,n);return l=At("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const f=AF(this.apiClient,m),y=new tL;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=U6(this.apiClient,n);return l=At("{model}:predict",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const f=kF(this.apiClient,m),y=new nL;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=B6(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>Yb(this.apiClient,y))}else{const f=X3(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Gb(this.apiClient,y))}}async listInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=V6(this.apiClient,n);return h=At("{models_url}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=MF(this.apiClient,y),S=new uS;return Object.assign(S,x),S})}else{const f=e6(this.apiClient,n);return h=At("{models_url}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=dF(this.apiClient,y),S=new uS;return Object.assign(S,x),S})}}async update(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=G6(this.apiClient,n);return h=At("{model}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>Yb(this.apiClient,y))}else{const f=n6(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Gb(this.apiClient,y))}}async delete(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=Y6(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(()=>{const y=IF(),x=new dS;return Object.assign(x,y),x})}else{const f=i6(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=fF(),x=new dS;return Object.assign(x,y),x})}}async countTokens(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=J6(this.apiClient,n);return h=At("{model}:countTokens",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=OF(this.apiClient,y),S=new fS;return Object.assign(S,x),S})}else{const f=a6(this.apiClient,n);return h=At("{model}:countTokens",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=hF(this.apiClient,y),S=new fS;return Object.assign(S,x),S})}}async computeTokens(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=Q6(this.apiClient,n);return l=At("{model}:computeTokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>{const f=LF(this.apiClient,m),y=new iL;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=X6(this.apiClient,n);return h=At("{model}:predictLongRunning",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>UF(this.apiClient,y))}else{const f=l6(this.apiClient,n);return h=At("{model}:predictLongRunning",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>yF(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QF(t,n){const e={},i=b(n,["operationName"]);i!=null&&N(e,["_url","operationName"],i);const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function KF(t,n){const e={},i=b(n,["operationName"]);i!=null&&N(e,["_url","operationName"],i);const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function XF(t,n){const e={},i=b(n,["operationName"]);i!=null&&N(e,["operationName"],i);const s=b(n,["resourceName"]);s!=null&&N(e,["_url","resourceName"],s);const l=b(n,["config"]);return l!=null&&N(e,["config"],l),e}function ZF(t,n){const e={},i=b(n,["video","uri"]);i!=null&&N(e,["uri"],i);const s=b(n,["video","encodedVideo"]);s!=null&&N(e,["videoBytes"],Dc(t,s));const l=b(n,["encoding"]);return l!=null&&N(e,["mimeType"],l),e}function e5(t,n){const e={},i=b(n,["_self"]);return i!=null&&N(e,["video"],ZF(t,i)),e}function t5(t,n){const e={},i=b(n,["generatedSamples"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>e5(t,h))),N(e,["generatedVideos"],c)}const s=b(n,["raiMediaFilteredCount"]);s!=null&&N(e,["raiMediaFilteredCount"],s);const l=b(n,["raiMediaFilteredReasons"]);return l!=null&&N(e,["raiMediaFilteredReasons"],l),e}function n5(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["metadata"]);s!=null&&N(e,["metadata"],s);const l=b(n,["done"]);l!=null&&N(e,["done"],l);const c=b(n,["error"]);c!=null&&N(e,["error"],c);const h=b(n,["response","generateVideoResponse"]);return h!=null&&N(e,["response"],t5(t,h)),e}function i5(t,n){const e={},i=b(n,["gcsUri"]);i!=null&&N(e,["uri"],i);const s=b(n,["bytesBase64Encoded"]);s!=null&&N(e,["videoBytes"],Dc(t,s));const l=b(n,["mimeType"]);return l!=null&&N(e,["mimeType"],l),e}function r5(t,n){const e={},i=b(n,["_self"]);return i!=null&&N(e,["video"],i5(t,i)),e}function a5(t,n){const e={},i=b(n,["videos"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>r5(t,h))),N(e,["generatedVideos"],c)}const s=b(n,["raiMediaFilteredCount"]);s!=null&&N(e,["raiMediaFilteredCount"],s);const l=b(n,["raiMediaFilteredReasons"]);return l!=null&&N(e,["raiMediaFilteredReasons"],l),e}function _S(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["metadata"]);s!=null&&N(e,["metadata"],s);const l=b(n,["done"]);l!=null&&N(e,["done"],l);const c=b(n,["error"]);c!=null&&N(e,["error"],c);const h=b(n,["response"]);return h!=null&&N(e,["response"],a5(t,h)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s5 extends hp{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const e=n.operation,i=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let l;return i&&"httpOptions"in i&&(l=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:e.name,config:i})}async getVideosOperationInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=KF(this.apiClient,n);return h=At("{operationName}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>_S(this.apiClient,y))}else{const f=QF(this.apiClient,n);return h=At("{operationName}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>n5(this.apiClient,y))}}async fetchPredictVideosOperationInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=XF(this.apiClient,n);return l=At("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>_S(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o5="Content-Type",l5="X-Server-Timeout",c5="User-Agent",u5="x-goog-api-client",d5="0.14.1",f5=`google-genai-sdk/${d5}`,h5="v1beta1",m5="v1beta",jS=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class __ extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}}class Wb extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}}class p5{constructor(n){var e,i;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:h5,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:m5,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&i.push(n.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),e=new URL(n);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,i){const s=[this.getRequestUrlInternal(e)];return i&&s.push(this.getBaseResourcePath()),n!==""&&s.push(n),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const i=this.shouldPrependVertexProjectPath(n),s=this.constructUrl(n.path,e,i);if(n.queryParams)for(const[c,h]of Object.entries(n.queryParams))s.searchParams.append(c,String(h));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.unaryApiCall(s,l,n.httpMethod)}patchHttpOptions(n,e){const i=JSON.parse(JSON.stringify(n));for(const[s,l]of Object.entries(e))typeof l=="object"?i[s]=Object.assign(Object.assign({},i[s]),l):l!==void 0&&(i[s]=l);return i}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const i=this.shouldPrependVertexProjectPath(n),s=this.constructUrl(n.path,e,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=n.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.streamApiCall(s,l,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e,i){if(e&&e.timeout||i){const s=new AbortController,l=s.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>s.abort(),e.timeout),i&&i.addEventListener("abort",()=>{s.abort()}),n.signal=l}return n.headers=await this.getHeadersInternal(e),n}async unaryApiCall(n,e,i){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await TS(s),new qb(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(n,e,i){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await TS(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(n){var e;return cx(this,arguments,function*(){const s=(e=n==null?void 0:n.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let c="";for(;;){const{done:h,value:m}=yield dr(s.read());if(h){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(m);try{const x=JSON.parse(f);if("error"in x){const S=JSON.parse(JSON.stringify(x.error)),w=S.status,j=S.code,E=`got status: ${w}. ${JSON.stringify(x)}`;if(j>=400&&j<500)throw new __(E);if(j>=500&&j<600)throw new Wb(E)}}catch(x){const S=x;if(S.name==="ClientError"||S.name==="ServerError")throw x}c+=f;let y=c.match(jS);for(;y;){const x=y[1];try{const S=new Response(x,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield dr(new qb(S)),c=c.slice(y[0].length),y=c.match(jS)}catch(S){throw new Error(`exception parsing stream chunk ${x}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(n,e){return fetch(n,e).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const n={},e=f5+" "+this.clientOptions.userAgentExtra;return n[c5]=e,n[u5]=e,n[o5]="application/json",n}async getHeadersInternal(n){const e=new Headers;if(n&&n.headers){for(const[i,s]of Object.entries(n.headers))e.append(i,s);n.timeout&&n.timeout>0&&e.append(l5,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(n,e){var i;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,c=await l.stat(n);s.sizeBytes=String(c.size);const h=(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const m=await this.fetchUploadUrl(s,e);return l.upload(n,m,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,e){var i;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const l={file:n},c=await this.request({path:At("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function TS(t){var n;if(t===void 0)throw new Wb("response is undefined");if(!t.ok){const e=t.status,i=t.statusText;let s;!((n=t.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=`got status: ${e} ${i}. ${JSON.stringify(s)}`;throw e>=400&&e<500?new __(l):e>=500&&e<600?new Wb(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g5(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],i);const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function y5(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);e!==void 0&&l!=null&&N(e,["_query","pageToken"],l);const c=b(n,["filter"]);return e!==void 0&&c!=null&&N(e,["_query","filter"],c),i}function x5(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],y5(t,i,e)),e}function v5(t,n){const e={},i=b(n,["textInput"]);i!=null&&N(e,["textInput"],i);const s=b(n,["output"]);return s!=null&&N(e,["output"],s),e}function b5(t,n){const e={};if(b(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=b(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>v5(t,l))),N(e,["examples","examples"],s)}return e}function w5(t,n,e){const i={};if(b(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=b(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&N(e,["displayName"],s),b(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=b(n,["epochCount"]);e!==void 0&&l!=null&&N(e,["tuningTask","hyperparameters","epochCount"],l);const c=b(n,["learningRateMultiplier"]);if(c!=null&&N(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),b(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=b(n,["batchSize"]);e!==void 0&&h!=null&&N(e,["tuningTask","hyperparameters","batchSize"],h);const m=b(n,["learningRate"]);return e!==void 0&&m!=null&&N(e,["tuningTask","hyperparameters","learningRate"],m),i}function S5(t,n){const e={},i=b(n,["baseModel"]);i!=null&&N(e,["baseModel"],i);const s=b(n,["trainingDataset"]);s!=null&&N(e,["tuningTask","trainingData"],b5(t,s));const l=b(n,["config"]);return l!=null&&N(e,["config"],w5(t,l,e)),e}function N5(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["_url","name"],i);const s=b(n,["config"]);return s!=null&&N(e,["config"],s),e}function C5(t,n,e){const i={},s=b(n,["pageSize"]);e!==void 0&&s!=null&&N(e,["_query","pageSize"],s);const l=b(n,["pageToken"]);e!==void 0&&l!=null&&N(e,["_query","pageToken"],l);const c=b(n,["filter"]);return e!==void 0&&c!=null&&N(e,["_query","filter"],c),i}function _5(t,n){const e={},i=b(n,["config"]);return i!=null&&N(e,["config"],C5(t,i,e)),e}function j5(t,n,e){const i={},s=b(n,["gcsUri"]);if(e!==void 0&&s!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],s),b(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function T5(t,n){const e={},i=b(n,["gcsUri"]);return i!=null&&N(e,["validationDatasetUri"],i),e}function E5(t,n,e){const i={},s=b(n,["validationDataset"]);e!==void 0&&s!=null&&N(e,["supervisedTuningSpec"],T5(t,s));const l=b(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&N(e,["tunedModelDisplayName"],l);const c=b(n,["description"]);e!==void 0&&c!=null&&N(e,["description"],c);const h=b(n,["epochCount"]);e!==void 0&&h!=null&&N(e,["supervisedTuningSpec","hyperParameters","epochCount"],h);const m=b(n,["learningRateMultiplier"]);e!==void 0&&m!=null&&N(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m);const f=b(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&N(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const y=b(n,["adapterSize"]);if(e!==void 0&&y!=null&&N(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y),b(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function A5(t,n){const e={},i=b(n,["baseModel"]);i!=null&&N(e,["baseModel"],i);const s=b(n,["trainingDataset"]);s!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],j5(t,s,e));const l=b(n,["config"]);return l!=null&&N(e,["config"],E5(t,l,e)),e}function k5(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["model"],i);const s=b(n,["name"]);return s!=null&&N(e,["endpoint"],s),e}function j_(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["state"]);s!=null&&N(e,["state"],y_(t,s));const l=b(n,["createTime"]);l!=null&&N(e,["createTime"],l);const c=b(n,["tuningTask","startTime"]);c!=null&&N(e,["startTime"],c);const h=b(n,["tuningTask","completeTime"]);h!=null&&N(e,["endTime"],h);const m=b(n,["updateTime"]);m!=null&&N(e,["updateTime"],m);const f=b(n,["description"]);f!=null&&N(e,["description"],f);const y=b(n,["baseModel"]);y!=null&&N(e,["baseModel"],y);const x=b(n,["_self"]);x!=null&&N(e,["tunedModel"],k5(t,x));const S=b(n,["distillationSpec"]);S!=null&&N(e,["distillationSpec"],S);const w=b(n,["experiment"]);w!=null&&N(e,["experiment"],w);const j=b(n,["labels"]);j!=null&&N(e,["labels"],j);const E=b(n,["pipelineJob"]);E!=null&&N(e,["pipelineJob"],E);const A=b(n,["tunedModelDisplayName"]);return A!=null&&N(e,["tunedModelDisplayName"],A),e}function D5(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>j_(t,c))),N(e,["tuningJobs"],l)}return e}function P5(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["metadata"]);s!=null&&N(e,["metadata"],s);const l=b(n,["done"]);l!=null&&N(e,["done"],l);const c=b(n,["error"]);return c!=null&&N(e,["error"],c),e}function R5(t,n){const e={},i=b(n,["checkpointId"]);i!=null&&N(e,["checkpointId"],i);const s=b(n,["epoch"]);s!=null&&N(e,["epoch"],s);const l=b(n,["step"]);l!=null&&N(e,["step"],l);const c=b(n,["endpoint"]);return c!=null&&N(e,["endpoint"],c),e}function M5(t,n){const e={},i=b(n,["model"]);i!=null&&N(e,["model"],i);const s=b(n,["endpoint"]);s!=null&&N(e,["endpoint"],s);const l=b(n,["checkpoints"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>R5(t,h))),N(e,["checkpoints"],c)}return e}function Jb(t,n){const e={},i=b(n,["name"]);i!=null&&N(e,["name"],i);const s=b(n,["state"]);s!=null&&N(e,["state"],y_(t,s));const l=b(n,["createTime"]);l!=null&&N(e,["createTime"],l);const c=b(n,["startTime"]);c!=null&&N(e,["startTime"],c);const h=b(n,["endTime"]);h!=null&&N(e,["endTime"],h);const m=b(n,["updateTime"]);m!=null&&N(e,["updateTime"],m);const f=b(n,["error"]);f!=null&&N(e,["error"],f);const y=b(n,["description"]);y!=null&&N(e,["description"],y);const x=b(n,["baseModel"]);x!=null&&N(e,["baseModel"],x);const S=b(n,["tunedModel"]);S!=null&&N(e,["tunedModel"],M5(t,S));const w=b(n,["supervisedTuningSpec"]);w!=null&&N(e,["supervisedTuningSpec"],w);const j=b(n,["tuningDataStats"]);j!=null&&N(e,["tuningDataStats"],j);const E=b(n,["encryptionSpec"]);E!=null&&N(e,["encryptionSpec"],E);const A=b(n,["partnerModelTuningSpec"]);A!=null&&N(e,["partnerModelTuningSpec"],A);const k=b(n,["distillationSpec"]);k!=null&&N(e,["distillationSpec"],k);const P=b(n,["experiment"]);P!=null&&N(e,["experiment"],P);const R=b(n,["labels"]);R!=null&&N(e,["labels"],R);const Y=b(n,["pipelineJob"]);Y!=null&&N(e,["pipelineJob"],Y);const F=b(n,["tunedModelDisplayName"]);return F!=null&&N(e,["tunedModelDisplayName"],F),e}function I5(t,n){const e={},i=b(n,["nextPageToken"]);i!=null&&N(e,["nextPageToken"],i);const s=b(n,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Jb(t,c))),N(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O5 extends hp{constructor(n){super(),this.apiClient=n,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Ax(Gf.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const i=await this.tuneMldevInternal(e);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Bb.JOB_STATE_QUEUED}}}}async getInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=N5(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>Jb(this.apiClient,y))}else{const f=g5(this.apiClient,n);return h=At("{name}",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>j_(this.apiClient,y))}}async listInternal(n){var e,i,s,l;let c,h="",m={};if(this.apiClient.isVertexAI()){const f=_5(this.apiClient,n);return h=At("tuningJobs",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),c.then(y=>{const x=I5(this.apiClient,y),S=new hS;return Object.assign(S,x),S})}else{const f=x5(this.apiClient,n);return h=At("tunedModels",f._url),m=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:h,queryParams:m,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=n.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const x=D5(this.apiClient,y),S=new hS;return Object.assign(S,x),S})}}async tuneInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=A5(this.apiClient,n);return l=At("tuningJobs",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>Jb(this.apiClient,m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var e,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=S5(this.apiClient,n);return l=At("tunedModels",h._url),c=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>P5(this.apiClient,m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L5{async download(n,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const F5=1024*1024*8,z5=3,$5=1e3,U5=2,tb="x-goog-upload-status";async function B5(t,n,e){var i,s,l;let c=0,h=0,m=new qb(new Response),f="upload";for(c=t.size;h<c;){const x=Math.min(F5,c-h),S=t.slice(h,h+x);h+x>=c&&(f+=", finalize");let w=0,j=$5;for(;w<z5&&(m=await e.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(h),"Content-Length":String(x)}}}),!(!((i=m==null?void 0:m.headers)===null||i===void 0)&&i[tb]));)w++,await V5(j),j=j*U5;if(h+=x,((s=m==null?void 0:m.headers)===null||s===void 0?void 0:s[tb])!=="active")break;if(c<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const y=await(m==null?void 0:m.json());if(((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l[tb])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return y.file}async function q5(t){return{size:t.size,type:t.type}}function V5(t){return new Promise(n=>setTimeout(n,t))}class H5{async upload(n,e,i){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await B5(n,e,i)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await q5(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G5{create(n,e,i){return new Y5(n,e,i)}}class Y5{constructor(n,e,i){this.url=n,this.headers=e,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES="x-goog-api-key";class W5{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get(ES)===null&&n.append(ES,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J5="gl-node/";class T_{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey;const i=aO(n,void 0,void 0);i&&(n.httpOptions?n.httpOptions.baseUrl=i:n.httpOptions={baseUrl:i}),this.apiVersion=n.apiVersion;const s=new W5(this.apiKey);this.apiClient=new p5({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:J5+"web",uploader:new H5,downloader:new L5}),this.models=new JF(this.apiClient),this.live=new VF(this.apiClient,s,new G5),this.chats=new fL(this.models,this.apiClient),this.caches=new lL(this.apiClient),this.files=new _L(this.apiClient),this.operations=new s5(this.apiClient),this.tunings=new O5(this.apiClient)}}const Pf=new Map,E_=(()=>{const t=new Promise(n=>{window.addEventListener("pointerdown",n,{once:!0}),window.addEventListener("keydown",n,{once:!0})});return async n=>{try{const e=new Audio;if(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await e.play(),n!=null&&n.id&&Pf.has(n.id)){const s=Pf.get(n.id);if(s)return s}const i=new AudioContext(n);return n!=null&&n.id&&Pf.set(n.id,i),i}catch{if(await t,n!=null&&n.id&&Pf.has(n.id)){const s=Pf.get(n.id);if(s)return s}const i=new AudioContext(n);return n!=null&&n.id&&Pf.set(n.id,i),i}}})();function Q5(t){var n=atob(t),e=new Uint8Array(n.length);for(let i=0;i<n.length;i++)e[i]=n.charCodeAt(i);return e.buffer}const K5=`
class AudioProcessingWorklet extends AudioWorkletProcessor {

  // send and clear buffer every 2048 samples, 
  // which at 16khz is about 8 times a second
  buffer = new Int16Array(2048);

  // current write index
  bufferWriteIndex = 0;

  constructor() {
    super();
    this.hasAudio = false;
  }

  /**
   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]
   * @param outputs Float32Array[][]
   */
  process(inputs) {
    if (inputs[0].length) {
      const channel0 = inputs[0][0];
      this.processChunk(channel0);
    }
    return true;
  }

  sendAndClearBuffer(){
    this.port.postMessage({
      event: "chunk",
      data: {
        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,
      },
    });
    this.bufferWriteIndex = 0;
  }

  processChunk(float32Array) {
    const l = float32Array.length;
    
    for (let i = 0; i < l; i++) {
      // convert float32 -1 to 1 to int16 -32768 to 32767
      const int16Value = float32Array[i] * 32768;
      this.buffer[this.bufferWriteIndex++] = int16Value;
      if(this.bufferWriteIndex >= this.buffer.length) {
        this.sendAndClearBuffer();
      }
    }

    if(this.bufferWriteIndex >= this.buffer.length) {
      this.sendAndClearBuffer();
    }
  }
}
`,A_=`
  class VolMeter extends AudioWorkletProcessor {
    volume
    updateIntervalInMS
    nextUpdateFrame

    constructor() {
      super()
      this.volume = 0
      this.updateIntervalInMS = 25
      this.nextUpdateFrame = this.updateIntervalInMS
      this.port.onmessage = event => {
        if (event.data.updateIntervalInMS) {
          this.updateIntervalInMS = event.data.updateIntervalInMS
        }
      }
    }

    get intervalInFrames() {
      return (this.updateIntervalInMS / 1000) * sampleRate
    }

    process(inputs) {
      const input = inputs[0]

      if (input.length > 0) {
        const samples = input[0]
        let sum = 0
        let rms = 0

        for (let i = 0; i < samples.length; ++i) {
          sum += samples[i] * samples[i]
        }

        rms = Math.sqrt(sum / samples.length)
        this.volume = Math.max(rms, this.volume * 0.7)

        this.nextUpdateFrame -= samples.length
        if (this.nextUpdateFrame < 0) {
          this.nextUpdateFrame += this.intervalInFrames
          this.port.postMessage({volume: this.volume})
        }
      }

      return true
    }
  }`,_y=new Map,Qb=(t,n)=>{const e=new Blob([`registerProcessor("${t}", ${n})`],{type:"application/javascript"});return URL.createObjectURL(e)};var nb={exports:{}},AS;function X5(){return AS||(AS=1,function(t){var n=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(m,f,y){this.fn=m,this.context=f,this.once=y||!1}function l(m,f,y,x,S){if(typeof y!="function")throw new TypeError("The listener must be a function");var w=new s(y,x||m,S),j=e?e+f:f;return m._events[j]?m._events[j].fn?m._events[j]=[m._events[j],w]:m._events[j].push(w):(m._events[j]=w,m._eventsCount++),m}function c(m,f){--m._eventsCount===0?m._events=new i:delete m._events[f]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var f=[],y,x;if(this._eventsCount===0)return f;for(x in y=this._events)n.call(y,x)&&f.push(e?x.slice(1):x);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(y)):f},h.prototype.listeners=function(f){var y=e?e+f:f,x=this._events[y];if(!x)return[];if(x.fn)return[x.fn];for(var S=0,w=x.length,j=new Array(w);S<w;S++)j[S]=x[S].fn;return j},h.prototype.listenerCount=function(f){var y=e?e+f:f,x=this._events[y];return x?x.fn?1:x.length:0},h.prototype.emit=function(f,y,x,S,w,j){var E=e?e+f:f;if(!this._events[E])return!1;var A=this._events[E],k=arguments.length,P,R;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),k){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,y),!0;case 3:return A.fn.call(A.context,y,x),!0;case 4:return A.fn.call(A.context,y,x,S),!0;case 5:return A.fn.call(A.context,y,x,S,w),!0;case 6:return A.fn.call(A.context,y,x,S,w,j),!0}for(R=1,P=new Array(k-1);R<k;R++)P[R-1]=arguments[R];A.fn.apply(A.context,P)}else{var Y=A.length,F;for(R=0;R<Y;R++)switch(A[R].once&&this.removeListener(f,A[R].fn,void 0,!0),k){case 1:A[R].fn.call(A[R].context);break;case 2:A[R].fn.call(A[R].context,y);break;case 3:A[R].fn.call(A[R].context,y,x);break;case 4:A[R].fn.call(A[R].context,y,x,S);break;default:if(!P)for(F=1,P=new Array(k-1);F<k;F++)P[F-1]=arguments[F];A[R].fn.apply(A[R].context,P)}}return!0},h.prototype.on=function(f,y,x){return l(this,f,y,x,!1)},h.prototype.once=function(f,y,x){return l(this,f,y,x,!0)},h.prototype.removeListener=function(f,y,x,S){var w=e?e+f:f;if(!this._events[w])return this;if(!y)return c(this,w),this;var j=this._events[w];if(j.fn)j.fn===y&&(!S||j.once)&&(!x||j.context===x)&&c(this,w);else{for(var E=0,A=[],k=j.length;E<k;E++)(j[E].fn!==y||S&&!j[E].once||x&&j[E].context!==x)&&A.push(j[E]);A.length?this._events[w]=A.length===1?A[0]:A:c(this,w)}return this},h.prototype.removeAllListeners=function(f){var y;return f?(y=e?e+f:f,this._events[y]&&c(this,y)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,t.exports=h}(nb)),nb.exports}var Z5=X5();const k_=Jf(Z5);function ez(t){for(var n="",e=new Uint8Array(t),i=e.byteLength,s=0;s<i;s++)n+=String.fromCharCode(e[s]);return window.btoa(n)}class D_ extends k_{constructor(e=16e3){super();Fn(this,"stream");Fn(this,"audioContext");Fn(this,"source");Fn(this,"recording",!1);Fn(this,"recordingWorklet");Fn(this,"vuWorklet");Fn(this,"starting",null);this.sampleRate=e}async start(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Could not request user media");this.starting=new Promise(async e=>{this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.audioContext=await E_({sampleRate:this.sampleRate}),this.source=this.audioContext.createMediaStreamSource(this.stream);const i="audio-recorder-worklet",s=Qb(i,K5);await this.audioContext.audioWorklet.addModule(s),this.recordingWorklet=new AudioWorkletNode(this.audioContext,i),this.recordingWorklet.port.onmessage=async c=>{const h=c.data.data.int16arrayBuffer;if(h){const m=ez(h);this.emit("data",m)}},this.source.connect(this.recordingWorklet);const l="vu-meter";await this.audioContext.audioWorklet.addModule(Qb(l,A_)),this.vuWorklet=new AudioWorkletNode(this.audioContext,l),this.vuWorklet.port.onmessage=c=>{this.emit("volume",c.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,e(),this.starting=null})}stop(){const e=()=>{var i,s;(i=this.source)==null||i.disconnect(),(s=this.stream)==null||s.getTracks().forEach(l=>l.stop()),this.stream=void 0,this.recordingWorklet=void 0,this.vuWorklet=void 0,this.audioContext&&(this.audioContext.close(),this.audioContext=void 0)};if(this.starting){this.starting.then(e);return}e()}}const tz=3,nz=({active:t,volume:n,hover:e})=>{const i=_.useRef([]);return _.useEffect(()=>{let s=null;const l=()=>{i.current.forEach((c,h)=>{c&&(c.style.height=`${Math.min(24,4+n*(h===1?400:60))}px`)}),s=window.setTimeout(l,100)};return l(),()=>clearTimeout(s)},[n]),r.jsx("div",{className:_c("audioPulse",{active:t,hover:e}),children:Array(tz).fill(null).map((s,l)=>r.jsx("div",{ref:c=>{i.current[l]=c},style:{animationDelay:`${l*133}ms`}},l))})};var Gm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var iz=Gm.exports,kS;function rz(){return kS||(kS=1,function(t,n){(function(){var e,i="4.17.21",s=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",h="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",f=500,y="__lodash_placeholder__",x=1,S=2,w=4,j=1,E=2,A=1,k=2,P=4,R=8,Y=16,F=32,q=64,z=128,L=256,V=512,M=30,B="...",ee=800,ie=16,te=1,se=2,X=3,K=1/0,re=9007199254740991,ve=17976931348623157e292,I=NaN,de=4294967295,ae=de-1,H=de>>>1,ne=[["ary",z],["bind",A],["bindKey",k],["curry",R],["curryRight",Y],["flip",V],["partial",F],["partialRight",q],["rearg",L]],me="[object Arguments]",ue="[object Array]",je="[object AsyncFunction]",ge="[object Boolean]",Ge="[object Date]",Te="[object DOMException]",Ne="[object Error]",Be="[object Function]",Qe="[object GeneratorFunction]",$e="[object Map]",ht="[object Number]",Cn="[object Null]",tt="[object Object]",li="[object Promise]",Pi="[object Proxy]",ei="[object RegExp]",tn="[object Set]",vi="[object String]",zn="[object Symbol]",Hi="[object Undefined]",Qn="[object WeakMap]",Ee="[object WeakSet]",Le="[object ArrayBuffer]",nt="[object DataView]",rt="[object Float32Array]",zt="[object Float64Array]",xn="[object Int8Array]",ci="[object Int16Array]",Ie="[object Int32Array]",Je="[object Uint8Array]",Ve="[object Uint8ClampedArray]",lt="[object Uint16Array]",Dt="[object Uint32Array]",nn=/\b__p \+= '';/g,_a=/\b(__p \+=) '' \+/g,ja=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Si=/&(?:amp|lt|gt|quot|#39);/g,Zr=/[&<>"']/g,ea=RegExp(Si.source),ad=RegExp(Zr.source),Ta=/<%-([\s\S]+?)%>/g,pl=/<%([\s\S]+?)%>/g,To=/<%=([\s\S]+?)%>/g,gl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ah=/^\w*$/,gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dn=/[\\^$.*+?()[\]{}|]/g,Jn=RegExp(Dn.source),Ea=/^\s+/,yl=/\s/,Eo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Is=/\{\n\/\* \[wrapped with (.+)\] \*/,sd=/,? & /,Os=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ao=/[()=,{}\[\]\/\s]/,Aa=/\\(\\)?/g,Ls=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,es=/\w*$/,ka=/^[-+]0x[0-9a-f]+$/i,$n=/^0b[01]+$/i,od=/^\[object .+?Constructor\]$/,Mc=/^0o[0-7]+$/i,ta=/^(?:0|[1-9]\d*)$/,Da=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pa=/($^)/,na=/['\n\r\u2028\u2029\\]/g,ia="\\ud800-\\udfff",ld="\\u0300-\\u036f",ko="\\ufe20-\\ufe2f",Do="\\u20d0-\\u20ff",Ni=ld+ko+Do,ts="\\u2700-\\u27bf",xl="a-z\\xdf-\\xf6\\xf8-\\xff",Ra="\\xac\\xb1\\xd7\\xf7",vl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",bl="\\u2000-\\u206f",Fs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ic="A-Z\\xc0-\\xd6\\xd8-\\xde",Ci="\\ufe0e\\ufe0f",wl=Ra+vl+bl+Fs,Sl="['’]",Po="["+ia+"]",Nl="["+wl+"]",Ma="["+Ni+"]",Oc="\\d+",Ri="["+ts+"]",ns="["+xl+"]",zs="[^"+ia+wl+Oc+ts+xl+Ic+"]",Ia="\\ud83c[\\udffb-\\udfff]",is="(?:"+Ma+"|"+Ia+")",$s="[^"+ia+"]",Us="(?:\\ud83c[\\udde6-\\uddff]){2}",kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Oa="["+Ic+"]",Ro="\\u200d",Mo="(?:"+ns+"|"+zs+")",Io="(?:"+Oa+"|"+zs+")",Cl="(?:"+Sl+"(?:d|ll|m|re|s|t|ve))?",_l="(?:"+Sl+"(?:D|LL|M|RE|S|T|VE))?",Gi=is+"?",Bs="["+Ci+"]?",jl="(?:"+Ro+"(?:"+[$s,Us,kr].join("|")+")"+Bs+Gi+")*",Yi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lc=Bs+Gi+jl,qs="(?:"+[Ri,Us,kr].join("|")+")"+Lc,Fc="(?:"+[$s+Ma+"?",Ma,Us,kr,Po].join("|")+")",rs=RegExp(Sl,"g"),Wi=RegExp(Ma,"g"),Vs=RegExp(Ia+"(?="+Ia+")|"+Fc+Lc,"g"),La=RegExp([Oa+"?"+ns+"+"+Cl+"(?="+[Nl,Oa,"$"].join("|")+")",Io+"+"+_l+"(?="+[Nl,Oa+Mo,"$"].join("|")+")",Oa+"?"+Mo+"+"+Cl,Oa+"+"+_l,Dr,Yi,Oc,qs].join("|"),"g"),Fa=RegExp("["+Ro+ia+Ni+Ci+"]"),Tl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,El=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Al=-1,sn={};sn[rt]=sn[zt]=sn[xn]=sn[ci]=sn[Ie]=sn[Je]=sn[Ve]=sn[lt]=sn[Dt]=!0,sn[me]=sn[ue]=sn[Le]=sn[ge]=sn[nt]=sn[Ge]=sn[Ne]=sn[Be]=sn[$e]=sn[ht]=sn[tt]=sn[ei]=sn[tn]=sn[vi]=sn[Qn]=!1;var rn={};rn[me]=rn[ue]=rn[Le]=rn[nt]=rn[ge]=rn[Ge]=rn[rt]=rn[zt]=rn[xn]=rn[ci]=rn[Ie]=rn[$e]=rn[ht]=rn[tt]=rn[ei]=rn[tn]=rn[vi]=rn[zn]=rn[Je]=rn[Ve]=rn[lt]=rn[Dt]=!0,rn[Ne]=rn[Be]=rn[Qn]=!1;var bt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hs={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ra=parseFloat,Oo=parseInt,kl=typeof Cc=="object"&&Cc&&Cc.Object===Object&&Cc,Dl=typeof self=="object"&&self&&self.Object===Object&&self,vn=kl||Dl||Function("return this")(),as=n&&!n.nodeType&&n,Rr=as&&!0&&t&&!t.nodeType&&t,Lo=Rr&&Rr.exports===as,ss=Lo&&kl.process,Mi=function(){try{var O=Rr&&Rr.require&&Rr.require("util").types;return O||ss&&ss.binding&&ss.binding("util")}catch{}}(),aa=Mi&&Mi.isArrayBuffer,cd=Mi&&Mi.isDate,Pl=Mi&&Mi.isMap,os=Mi&&Mi.isRegExp,ls=Mi&&Mi.isSet,Gs=Mi&&Mi.isTypedArray;function _i(O,G,W){switch(W.length){case 0:return O.call(G);case 1:return O.call(G,W[0]);case 2:return O.call(G,W[0],W[1]);case 3:return O.call(G,W[0],W[1],W[2])}return O.apply(G,W)}function zc(O,G,W,ce){for(var _e=-1,Oe=O==null?0:O.length;++_e<Oe;){var it=O[_e];G(ce,it,W(it),O)}return ce}function Ji(O,G){for(var W=-1,ce=O==null?0:O.length;++W<ce&&G(O[W],W,O)!==!1;);return O}function ud(O,G){for(var W=O==null?0:O.length;W--&&G(O[W],W,O)!==!1;);return O}function $c(O,G){for(var W=-1,ce=O==null?0:O.length;++W<ce;)if(!G(O[W],W,O))return!1;return!0}function Mr(O,G){for(var W=-1,ce=O==null?0:O.length,_e=0,Oe=[];++W<ce;){var it=O[W];G(it,W,O)&&(Oe[_e++]=it)}return Oe}function Rl(O,G){var W=O==null?0:O.length;return!!W&&la(O,G,0)>-1}function Uc(O,G,W){for(var ce=-1,_e=O==null?0:O.length;++ce<_e;)if(W(G,O[ce]))return!0;return!1}function _n(O,G){for(var W=-1,ce=O==null?0:O.length,_e=Array(ce);++W<ce;)_e[W]=G(O[W],W,O);return _e}function sa(O,G){for(var W=-1,ce=G.length,_e=O.length;++W<ce;)O[_e+W]=G[W];return O}function Ml(O,G,W,ce){var _e=-1,Oe=O==null?0:O.length;for(ce&&Oe&&(W=O[++_e]);++_e<Oe;)W=G(W,O[_e],_e,O);return W}function sh(O,G,W,ce){var _e=O==null?0:O.length;for(ce&&_e&&(W=O[--_e]);_e--;)W=G(W,O[_e],_e,O);return W}function Bc(O,G){for(var W=-1,ce=O==null?0:O.length;++W<ce;)if(G(O[W],W,O))return!0;return!1}var oh=zo("length");function Fo(O){return O.split("")}function lh(O){return O.match(Os)||[]}function oa(O,G,W){var ce;return W(O,function(_e,Oe,it){if(G(_e,Oe,it))return ce=Oe,!1}),ce}function yr(O,G,W,ce){for(var _e=O.length,Oe=W+(ce?1:-1);ce?Oe--:++Oe<_e;)if(G(O[Oe],Oe,O))return Oe;return-1}function la(O,G,W){return G===G?uh(O,G,W):yr(O,za,W)}function xr(O,G,W,ce){for(var _e=W-1,Oe=O.length;++_e<Oe;)if(ce(O[_e],G))return _e;return-1}function za(O){return O!==O}function Il(O,G){var W=O==null?0:O.length;return W?Ll(O,G)/W:I}function zo(O){return function(G){return G==null?e:G[O]}}function Ys(O){return function(G){return O==null?e:O[G]}}function Ol(O,G,W,ce,_e){return _e(O,function(Oe,it,Fe){W=ce?(ce=!1,Oe):G(W,Oe,it,Fe)}),W}function dd(O,G){var W=O.length;for(O.sort(G);W--;)O[W]=O[W].value;return O}function Ll(O,G){for(var W,ce=-1,_e=O.length;++ce<_e;){var Oe=G(O[ce]);Oe!==e&&(W=W===e?Oe:W+Oe)}return W}function ca(O,G){for(var W=-1,ce=Array(O);++W<O;)ce[W]=G(W);return ce}function ch(O,G){return _n(G,function(W){return[W,O[W]]})}function fd(O){return O&&O.slice(0,Vc(O)+1).replace(Ea,"")}function Ii(O){return function(G){return O(G)}}function Fl(O,G){return _n(G,function(W){return O[W]})}function Ws(O,G){return O.has(G)}function Js(O,G){for(var W=-1,ce=O.length;++W<ce&&la(G,O[W],0)>-1;);return W}function vr(O,G){for(var W=O.length;W--&&la(G,O[W],0)>-1;);return W}function hd(O,G){for(var W=O.length,ce=0;W--;)O[W]===G&&++ce;return ce}var Oi=Ys(bt),md=Ys(ui);function pd(O){return"\\"+Hs[O]}function qc(O,G){return O==null?e:O[G]}function Ir(O){return Fa.test(O)}function gd(O){return Tl.test(O)}function yd(O){for(var G,W=[];!(G=O.next()).done;)W.push(G.value);return W}function zl(O){var G=-1,W=Array(O.size);return O.forEach(function(ce,_e){W[++G]=[_e,ce]}),W}function xd(O,G){return function(W){return O(G(W))}}function di(O,G){for(var W=-1,ce=O.length,_e=0,Oe=[];++W<ce;){var it=O[W];(it===G||it===y)&&(O[W]=y,Oe[_e++]=W)}return Oe}function $l(O){var G=-1,W=Array(O.size);return O.forEach(function(ce){W[++G]=ce}),W}function Ul(O){var G=-1,W=Array(O.size);return O.forEach(function(ce){W[++G]=[ce,ce]}),W}function uh(O,G,W){for(var ce=W-1,_e=O.length;++ce<_e;)if(O[ce]===G)return ce;return-1}function Li(O,G,W){for(var ce=W+1;ce--;)if(O[ce]===G)return ce;return ce}function Or(O){return Ir(O)?bd(O):oh(O)}function Qi(O){return Ir(O)?Hc(O):Fo(O)}function Vc(O){for(var G=O.length;G--&&yl.test(O.charAt(G)););return G}var vd=Ys(Pr);function bd(O){for(var G=Vs.lastIndex=0;Vs.test(O);)++G;return G}function Hc(O){return O.match(Vs)||[]}function dh(O){return O.match(La)||[]}var cs=function O(G){G=G==null?vn:ua.defaults(vn.Object(),G,ua.pick(vn,El));var W=G.Array,ce=G.Date,_e=G.Error,Oe=G.Function,it=G.Math,Fe=G.Object,Un=G.RegExp,Ye=G.String,Ke=G.TypeError,Ue=W.prototype,dt=Oe.prototype,ct=Fe.prototype,at=G["__core-js_shared__"],wt=dt.toString,mt=ct.hasOwnProperty,Pt=0,Qt=function(){var d=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),_t=ct.toString,Rt=wt.call(Fe),ln=vn._,ji=Un("^"+wt.call(mt).replace(Dn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=Lo?G.Buffer:e,Ti=G.Symbol,Ki=G.Uint8Array,$a=Kn?Kn.allocUnsafe:e,da=xd(Fe.getPrototypeOf,Fe),Gc=Fe.create,$o=ct.propertyIsEnumerable,wd=Ue.splice,Xi=Ti?Ti.isConcatSpreadable:e,Uo=Ti?Ti.iterator:e,Fi=Ti?Ti.toStringTag:e,Yc=function(){try{var d=ro(Fe,"defineProperty");return d({},"",{}),d}catch{}}(),Sd=G.clearTimeout!==vn.clearTimeout&&G.clearTimeout,Bo=ce&&ce.now!==vn.Date.now&&ce.now,fh=G.setTimeout!==vn.setTimeout&&G.setTimeout,Bl=it.ceil,us=it.floor,Qs=Fe.getOwnPropertySymbols,Nd=Kn?Kn.isBuffer:e,Wc=G.isFinite,Lr=Ue.join,Fr=xd(Fe.keys,Fe),En=it.max,Pn=it.min,ds=ce.now,qo=G.parseInt,hh=it.random,mh=Ue.reverse,Jc=ro(G,"DataView"),ti=ro(G,"Map"),Rn=ro(G,"Promise"),Ht=ro(G,"Set"),fa=ro(G,"WeakMap"),Zi=ro(Fe,"create"),ql=fa&&new fa,zr={},vp=bs(Jc),bp=bs(ti),Qc=bs(Rn),Kc=bs(Ht),wp=bs(fa),Ks=Ti?Ti.prototype:e,Vo=Ks?Ks.valueOf:e,Xs=Ks?Ks.toString:e;function J(d){if(Ln(d)&&!jt(d)&&!(d instanceof $t)){if(d instanceof er)return d;if(mt.call(d,"__wrapped__"))return ii(d)}return new er(d)}var br=function(){function d(){}return function(p){if(!In(p))return{};if(Gc)return Gc(p);d.prototype=p;var C=new d;return d.prototype=e,C}}();function $r(){}function er(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=e}J.templateSettings={escape:Ta,evaluate:pl,interpolate:To,variable:"",imports:{_:J}},J.prototype=$r.prototype,J.prototype.constructor=J,er.prototype=br($r.prototype),er.prototype.constructor=er;function $t(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=de,this.__views__=[]}function Xc(){var d=new $t(this.__wrapped__);return d.__actions__=ni(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=ni(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=ni(this.__views__),d}function Cd(){if(this.__filtered__){var d=new $t(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Ho(){var d=this.__wrapped__.value(),p=this.__dir__,C=jt(d),D=p<0,U=C?d.length:0,Z=eg(0,U,this.__views__),oe=Z.start,fe=Z.end,xe=fe-oe,Pe=D?fe:oe-1,Me=this.__iteratees__,ze=Me.length,We=0,st=Pn(xe,this.__takeCount__);if(!C||!D&&U==xe&&st==xe)return $p(d,this.__actions__);var St=[];e:for(;xe--&&We<st;){Pe+=p;for(var Bt=-1,Nt=d[Pe];++Bt<ze;){var Wt=Me[Bt],Zt=Wt.iteratee,va=Wt.type,Tr=Zt(Nt);if(va==se)Nt=Tr;else if(!Tr){if(va==te)continue e;break e}}St[We++]=Nt}return St}$t.prototype=br($r.prototype),$t.prototype.constructor=$t;function Bn(d){var p=-1,C=d==null?0:d.length;for(this.clear();++p<C;){var D=d[p];this.set(D[0],D[1])}}function _d(){this.__data__=Zi?Zi(null):{},this.size=0}function Sp(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p}function Bx(d){var p=this.__data__;if(Zi){var C=p[d];return C===m?e:C}return mt.call(p,d)?p[d]:e}function qx(d){var p=this.__data__;return Zi?p[d]!==e:mt.call(p,d)}function Vx(d,p){var C=this.__data__;return this.size+=this.has(d)?0:1,C[d]=Zi&&p===e?m:p,this}Bn.prototype.clear=_d,Bn.prototype.delete=Sp,Bn.prototype.get=Bx,Bn.prototype.has=qx,Bn.prototype.set=Vx;function bn(d){var p=-1,C=d==null?0:d.length;for(this.clear();++p<C;){var D=d[p];this.set(D[0],D[1])}}function ph(){this.__data__=[],this.size=0}function Zc(d){var p=this.__data__,C=Gl(p,d);if(C<0)return!1;var D=p.length-1;return C==D?p.pop():wd.call(p,C,1),--this.size,!0}function eu(d){var p=this.__data__,C=Gl(p,d);return C<0?e:p[C][1]}function gh(d){return Gl(this.__data__,d)>-1}function Vl(d,p){var C=this.__data__,D=Gl(C,d);return D<0?(++this.size,C.push([d,p])):C[D][1]=p,this}bn.prototype.clear=ph,bn.prototype.delete=Zc,bn.prototype.get=eu,bn.prototype.has=gh,bn.prototype.set=Vl;function tr(d){var p=-1,C=d==null?0:d.length;for(this.clear();++p<C;){var D=d[p];this.set(D[0],D[1])}}function Hx(){this.size=0,this.__data__={hash:new Bn,map:new(ti||bn),string:new Bn}}function Np(d){var p=Xl(this,d).delete(d);return this.size-=p?1:0,p}function Gx(d){return Xl(this,d).get(d)}function Cp(d){return Xl(this,d).has(d)}function Go(d,p){var C=Xl(this,d),D=C.size;return C.set(d,p),this.size+=C.size==D?0:1,this}tr.prototype.clear=Hx,tr.prototype.delete=Np,tr.prototype.get=Gx,tr.prototype.has=Cp,tr.prototype.set=Go;function fs(d){var p=-1,C=d==null?0:d.length;for(this.__data__=new tr;++p<C;)this.add(d[p])}function jd(d){return this.__data__.set(d,m),this}function _p(d){return this.__data__.has(d)}fs.prototype.add=fs.prototype.push=jd,fs.prototype.has=_p;function zi(d){var p=this.__data__=new bn(d);this.size=p.size}function jp(){this.__data__=new bn,this.size=0}function Td(d){var p=this.__data__,C=p.delete(d);return this.size=p.size,C}function yh(d){return this.__data__.get(d)}function Tp(d){return this.__data__.has(d)}function Ed(d,p){var C=this.__data__;if(C instanceof bn){var D=C.__data__;if(!ti||D.length<s-1)return D.push([d,p]),this.size=++C.size,this;C=this.__data__=new tr(D)}return C.set(d,p),this.size=C.size,this}zi.prototype.clear=jp,zi.prototype.delete=Td,zi.prototype.get=yh,zi.prototype.has=Tp,zi.prototype.set=Ed;function xh(d,p){var C=jt(d),D=!C&&Cs(d),U=!C&&!D&&po(d),Z=!C&&!D&&!U&&fc(d),oe=C||D||U||Z,fe=oe?ca(d.length,Ye):[],xe=fe.length;for(var Pe in d)(p||mt.call(d,Pe))&&!(oe&&(Pe=="length"||U&&(Pe=="offset"||Pe=="parent")||Z&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||ga(Pe,xe)))&&fe.push(Pe);return fe}function Hl(d){var p=d.length;return p?d[Fd(0,p-1)]:e}function Ep(d,p){return Tu(ni(d),ma(p,0,d.length))}function Ap(d){return Tu(ni(d))}function Ua(d,p,C){(C!==e&&!lr(d[p],C)||C===e&&!(p in d))&&ha(d,p,C)}function Yo(d,p,C){var D=d[p];(!(mt.call(d,p)&&lr(D,C))||C===e&&!(p in d))&&ha(d,p,C)}function Gl(d,p){for(var C=d.length;C--;)if(lr(d[C][0],p))return C;return-1}function Zs(d,p,C,D){return ms(d,function(U,Z,oe){p(D,U,C(U),oe)}),D}function hs(d,p){return d&&rr(p,si(p),d)}function tu(d,p){return d&&rr(p,mi(p),d)}function ha(d,p,C){p=="__proto__"&&Yc?Yc(d,p,{configurable:!0,enumerable:!0,value:C,writable:!0}):d[p]=C}function nu(d,p){for(var C=-1,D=p.length,U=W(D),Z=d==null;++C<D;)U[C]=Z?e:Uu(d,p[C]);return U}function ma(d,p,C){return d===d&&(C!==e&&(d=d<=C?d:C),p!==e&&(d=d>=p?d:p)),d}function Ei(d,p,C,D,U,Z){var oe,fe=p&x,xe=p&S,Pe=p&w;if(C&&(oe=U?C(d,D,U,Z):C(d)),oe!==e)return oe;if(!In(d))return d;var Me=jt(d);if(Me){if(oe=Vh(d),!fe)return ni(d,oe)}else{var ze=hi(d),We=ze==Be||ze==Qe;if(po(d))return Oh(d,fe);if(ze==tt||ze==me||We&&!U){if(oe=xe||We?{}:Hh(d),!fe)return xe?pu(d,tu(oe,d)):Vd(d,hs(oe,d))}else{if(!rn[ze])return U?d:{};oe=Gh(d,ze,fe)}}Z||(Z=new zi);var st=Z.get(d);if(st)return st;Z.set(d,oe),Gg(d)?d.forEach(function(Nt){oe.add(Ei(Nt,p,C,Nt,d,Z))}):gf(d)&&d.forEach(function(Nt,Wt){oe.set(Wt,Ei(Nt,p,C,Wt,d,Z))});var St=Pe?xe?Wd:Yd:xe?mi:si,Bt=Me?e:St(d);return Ji(Bt||d,function(Nt,Wt){Bt&&(Wt=Nt,Nt=d[Wt]),Yo(oe,Wt,Ei(Nt,p,C,Wt,d,Z))}),oe}function kp(d){var p=si(d);return function(C){return vh(C,d,p)}}function vh(d,p,C){var D=C.length;if(d==null)return!D;for(d=Fe(d);D--;){var U=C[D],Z=p[U],oe=d[U];if(oe===e&&!(U in d)||!Z(oe))return!1}return!0}function Wo(d,p,C){if(typeof d!="function")throw new Ke(c);return ec(function(){d.apply(e,C)},p)}function eo(d,p,C,D){var U=-1,Z=Rl,oe=!0,fe=d.length,xe=[],Pe=p.length;if(!fe)return xe;C&&(p=_n(p,Ii(C))),D?(Z=Uc,oe=!1):p.length>=s&&(Z=Ws,oe=!1,p=new fs(p));e:for(;++U<fe;){var Me=d[U],ze=C==null?Me:C(Me);if(Me=D||Me!==0?Me:0,oe&&ze===ze){for(var We=Pe;We--;)if(p[We]===ze)continue e;xe.push(Me)}else Z(p,ze,D)||xe.push(Me)}return xe}var ms=$h(Ai),Ad=$h(Wl,!0);function bh(d,p){var C=!0;return ms(d,function(D,U,Z){return C=!!p(D,U,Z),C}),C}function pa(d,p,C){for(var D=-1,U=d.length;++D<U;){var Z=d[D],oe=p(Z);if(oe!=null&&(fe===e?oe===oe&&!Bi(oe):C(oe,fe)))var fe=oe,xe=Z}return xe}function Lt(d,p,C,D){var U=d.length;for(C=kt(C),C<0&&(C=-C>U?0:U+C),D=D===e||D>U?U:kt(D),D<0&&(D+=U),D=C>D?0:Qa(D);C<D;)d[C++]=p;return d}function un(d,p){var C=[];return ms(d,function(D,U,Z){p(D,U,Z)&&C.push(D)}),C}function Gt(d,p,C,D,U){var Z=-1,oe=d.length;for(C||(C=xs),U||(U=[]);++Z<oe;){var fe=d[Z];p>0&&C(fe)?p>1?Gt(fe,p-1,C,D,U):sa(U,fe):D||(U[U.length]=fe)}return U}var Yl=tl(),Jo=tl(!0);function Ai(d,p){return d&&Yl(d,p,si)}function Wl(d,p){return d&&Jo(d,p,si)}function to(d,p){return Mr(p,function(C){return ya(d[C])})}function Ur(d,p){p=gs(p,d);for(var C=0,D=p.length;d!=null&&C<D;)d=d[cn(p[C++])];return C&&C==D?d:e}function Dp(d,p,C){var D=p(d);return jt(d)?D:sa(D,C(d))}function Yt(d){return d==null?d===e?Hi:Cn:Fi&&Fi in Fe(d)?Zp(d):ag(d)}function iu(d,p){return d>p}function wh(d,p){return d!=null&&mt.call(d,p)}function Pp(d,p){return d!=null&&p in Fe(d)}function Rp(d,p,C){return d>=Pn(p,C)&&d<En(p,C)}function Sh(d,p,C){for(var D=C?Uc:Rl,U=d[0].length,Z=d.length,oe=Z,fe=W(Z),xe=1/0,Pe=[];oe--;){var Me=d[oe];oe&&p&&(Me=_n(Me,Ii(p))),xe=Pn(Me.length,xe),fe[oe]=!C&&(p||U>=120&&Me.length>=120)?new fs(oe&&Me):e}Me=d[0];var ze=-1,We=fe[0];e:for(;++ze<U&&Pe.length<xe;){var st=Me[ze],St=p?p(st):st;if(st=C||st!==0?st:0,!(We?Ws(We,St):D(Pe,St,C))){for(oe=Z;--oe;){var Bt=fe[oe];if(!(Bt?Ws(Bt,St):D(d[oe],St,C)))continue e}We&&We.push(St),Pe.push(st)}}return Pe}function Nh(d,p,C,D){return Ai(d,function(U,Z,oe){p(D,C(U),Z,oe)}),D}function Qo(d,p,C){p=gs(p,d),d=Zl(d,p);var D=d==null?d:d[cn(ki(p))];return D==null?e:_i(D,d,C)}function kd(d){return Ln(d)&&Yt(d)==me}function nr(d){return Ln(d)&&Yt(d)==Le}function Xn(d){return Ln(d)&&Yt(d)==Ge}function Ko(d,p,C,D,U){return d===p?!0:d==null||p==null||!Ln(d)&&!Ln(p)?d!==d&&p!==p:ru(d,p,C,D,Ko,U)}function ru(d,p,C,D,U,Z){var oe=jt(d),fe=jt(p),xe=oe?ue:hi(d),Pe=fe?ue:hi(p);xe=xe==me?tt:xe,Pe=Pe==me?tt:Pe;var Me=xe==tt,ze=Pe==tt,We=xe==Pe;if(We&&po(d)){if(!po(p))return!1;oe=!0,Me=!1}if(We&&!Me)return Z||(Z=new zi),oe||fc(d)?Kp(d,p,C,D,U,Z):Xp(d,p,xe,C,D,U,Z);if(!(C&j)){var st=Me&&mt.call(d,"__wrapped__"),St=ze&&mt.call(p,"__wrapped__");if(st||St){var Bt=st?d.value():d,Nt=St?p.value():p;return Z||(Z=new zi),U(Bt,Nt,C,D,Z)}}return We?(Z||(Z=new zi),fi(d,p,C,D,U,Z)):!1}function Dd(d){return Ln(d)&&hi(d)==$e}function au(d,p,C,D){var U=C.length,Z=U,oe=!D;if(d==null)return!Z;for(d=Fe(d);U--;){var fe=C[U];if(oe&&fe[2]?fe[1]!==d[fe[0]]:!(fe[0]in d))return!1}for(;++U<Z;){fe=C[U];var xe=fe[0],Pe=d[xe],Me=fe[1];if(oe&&fe[2]){if(Pe===e&&!(xe in d))return!1}else{var ze=new zi;if(D)var We=D(Pe,Me,xe,d,p,ze);if(!(We===e?Ko(Me,Pe,j|E,D,ze):We))return!1}}return!0}function Ba(d){if(!In(d)||ef(d))return!1;var p=ya(d)?ji:od;return p.test(bs(d))}function Pd(d){return Ln(d)&&Yt(d)==ei}function Ch(d){return Ln(d)&&hi(d)==tn}function _h(d){return Ln(d)&&sl(d.length)&&!!sn[Yt(d)]}function jh(d){return typeof d=="function"?d:d==null?Se:typeof d=="object"?jt(d)?Id(d[0],d[1]):Eh(d):Xt(d)}function Rd(d){if(!wn(d))return Fr(d);var p=[];for(var C in Fe(d))mt.call(d,C)&&C!="constructor"&&p.push(C);return p}function Mp(d){if(!In(d))return ao(d);var p=wn(d),C=[];for(var D in d)D=="constructor"&&(p||!mt.call(d,D))||C.push(D);return C}function Md(d,p){return d<p}function Th(d,p){var C=-1,D=ri(d)?W(d.length):[];return ms(d,function(U,Z,oe){D[++C]=p(U,Z,oe)}),D}function Eh(d){var p=Qd(d);return p.length==1&&p[0][2]?ig(p[0][0],p[0][1]):function(C){return C===d||au(C,d,p)}}function Id(d,p){return Xd(d)&&ng(p)?ig(cn(d),p):function(C){var D=Uu(C,d);return D===e&&D===p?gc(C,d):Ko(p,D,j|E)}}function su(d,p,C,D,U){d!==p&&Yl(p,function(Z,oe){if(U||(U=new zi),In(Z))Yx(d,p,oe,C,su,D,U);else{var fe=D?D(tf(d,oe),Z,oe+"",d,p,U):e;fe===e&&(fe=Z),Ua(d,oe,fe)}},mi)}function Yx(d,p,C,D,U,Z,oe){var fe=tf(d,C),xe=tf(p,C),Pe=oe.get(xe);if(Pe){Ua(d,C,Pe);return}var Me=Z?Z(fe,xe,C+"",d,p,oe):e,ze=Me===e;if(ze){var We=jt(xe),st=!We&&po(xe),St=!We&&!st&&fc(xe);Me=xe,We||st||St?jt(fe)?Me=fe:Hn(fe)?Me=ni(fe):st?(ze=!1,Me=Oh(xe,!0)):St?(ze=!1,Me=Fh(xe,!0)):Me=[]:Hr(xe)||Cs(xe)?(Me=fe,Cs(fe)?Me=Jg(fe):(!In(fe)||ya(fe))&&(Me=Hh(xe))):ze=!1}ze&&(oe.set(xe,Me),U(Me,xe,D,Z,oe),oe.delete(xe)),Ua(d,C,Me)}function Ah(d,p){var C=d.length;if(C)return p+=p<0?C:0,ga(p,C)?d[p]:e}function kh(d,p,C){p.length?p=_n(p,function(Z){return jt(Z)?function(oe){return Ur(oe,Z.length===1?Z[0]:Z)}:Z}):p=[Se];var D=-1;p=_n(p,Ii(ut()));var U=Th(d,function(Z,oe,fe){var xe=_n(p,function(Pe){return Pe(Z)});return{criteria:xe,index:++D,value:Z}});return dd(U,function(Z,oe){return Vp(Z,oe,C)})}function Ip(d,p){return Od(d,p,function(C,D){return gc(d,D)})}function Od(d,p,C){for(var D=-1,U=p.length,Z={};++D<U;){var oe=p[D],fe=Ur(d,oe);C(fe,oe)&&Ql(Z,gs(oe,d),fe)}return Z}function Op(d){return function(p){return Ur(p,d)}}function Ld(d,p,C,D){var U=D?xr:la,Z=-1,oe=p.length,fe=d;for(d===p&&(p=ni(p)),C&&(fe=_n(d,Ii(C)));++Z<oe;)for(var xe=0,Pe=p[Z],Me=C?C(Pe):Pe;(xe=U(fe,Me,xe,D))>-1;)fe!==d&&wd.call(fe,xe,1),wd.call(d,xe,1);return d}function Dh(d,p){for(var C=d?p.length:0,D=C-1;C--;){var U=p[C];if(C==D||U!==Z){var Z=U;ga(U)?wd.call(d,U,1):uu(d,U)}}return d}function Fd(d,p){return d+us(hh()*(p-d+1))}function Lp(d,p,C,D){for(var U=-1,Z=En(Bl((p-d)/(C||1)),0),oe=W(Z);Z--;)oe[D?Z:++U]=d,d+=C;return oe}function Ph(d,p){var C="";if(!d||p<1||p>re)return C;do p%2&&(C+=d),p=us(p/2),p&&(d+=d);while(p);return C}function Mt(d,p){return _u(Yh(d,p,Se),d+"")}function Jl(d){return Hl(xc(d))}function zd(d,p){var C=xc(d);return Tu(C,ma(p,0,C.length))}function Ql(d,p,C,D){if(!In(d))return d;p=gs(p,d);for(var U=-1,Z=p.length,oe=Z-1,fe=d;fe!=null&&++U<Z;){var xe=cn(p[U]),Pe=C;if(xe==="__proto__"||xe==="constructor"||xe==="prototype")return d;if(U!=oe){var Me=fe[xe];Pe=D?D(Me,xe,fe):e,Pe===e&&(Pe=In(Me)?Me:ga(p[U+1])?[]:{})}Yo(fe,xe,Pe),fe=fe[xe]}return d}var ou=ql?function(d,p){return ql.set(d,p),d}:Se,lu=Yc?function(d,p){return Yc(d,"toString",{configurable:!0,enumerable:!1,value:we(p),writable:!0})}:Se;function Fp(d){return Tu(xc(d))}function wr(d,p,C){var D=-1,U=d.length;p<0&&(p=-p>U?0:U+p),C=C>U?U:C,C<0&&(C+=U),U=p>C?0:C-p>>>0,p>>>=0;for(var Z=W(U);++D<U;)Z[D]=d[D+p];return Z}function zp(d,p){var C;return ms(d,function(D,U,Z){return C=p(D,U,Z),!C}),!!C}function cu(d,p,C){var D=0,U=d==null?D:d.length;if(typeof p=="number"&&p===p&&U<=H){for(;D<U;){var Z=D+U>>>1,oe=d[Z];oe!==null&&!Bi(oe)&&(C?oe<=p:oe<p)?D=Z+1:U=Z}return U}return $d(d,p,Se,C)}function $d(d,p,C,D){var U=0,Z=d==null?0:d.length;if(Z===0)return 0;p=C(p);for(var oe=p!==p,fe=p===null,xe=Bi(p),Pe=p===e;U<Z;){var Me=us((U+Z)/2),ze=C(d[Me]),We=ze!==e,st=ze===null,St=ze===ze,Bt=Bi(ze);if(oe)var Nt=D||St;else Pe?Nt=St&&(D||We):fe?Nt=St&&We&&(D||!st):xe?Nt=St&&We&&!st&&(D||!Bt):st||Bt?Nt=!1:Nt=D?ze<=p:ze<p;Nt?U=Me+1:Z=Me}return Pn(Z,ae)}function Rh(d,p){for(var C=-1,D=d.length,U=0,Z=[];++C<D;){var oe=d[C],fe=p?p(oe):oe;if(!C||!lr(fe,xe)){var xe=fe;Z[U++]=oe===0?0:oe}}return Z}function Ud(d){return typeof d=="number"?d:Bi(d)?I:+d}function ir(d){if(typeof d=="string")return d;if(jt(d))return _n(d,ir)+"";if(Bi(d))return Xs?Xs.call(d):"";var p=d+"";return p=="0"&&1/d==-1/0?"-0":p}function ps(d,p,C){var D=-1,U=Rl,Z=d.length,oe=!0,fe=[],xe=fe;if(C)oe=!1,U=Uc;else if(Z>=s){var Pe=p?null:Jp(d);if(Pe)return $l(Pe);oe=!1,U=Ws,xe=new fs}else xe=p?[]:fe;e:for(;++D<Z;){var Me=d[D],ze=p?p(Me):Me;if(Me=C||Me!==0?Me:0,oe&&ze===ze){for(var We=xe.length;We--;)if(xe[We]===ze)continue e;p&&xe.push(ze),fe.push(Me)}else U(xe,ze,C)||(xe!==fe&&xe.push(ze),fe.push(Me))}return fe}function uu(d,p){return p=gs(p,d),d=Zl(d,p),d==null||delete d[cn(ki(p))]}function Mh(d,p,C,D){return Ql(d,p,C(Ur(d,p)),D)}function du(d,p,C,D){for(var U=d.length,Z=D?U:-1;(D?Z--:++Z<U)&&p(d[Z],Z,d););return C?wr(d,D?0:Z,D?Z+1:U):wr(d,D?Z+1:0,D?U:Z)}function $p(d,p){var C=d;return C instanceof $t&&(C=C.value()),Ml(p,function(D,U){return U.func.apply(U.thisArg,sa([D],U.args))},C)}function fu(d,p,C){var D=d.length;if(D<2)return D?ps(d[0]):[];for(var U=-1,Z=W(D);++U<D;)for(var oe=d[U],fe=-1;++fe<D;)fe!=U&&(Z[U]=eo(Z[U]||oe,d[fe],p,C));return ps(Gt(Z,1),p,C)}function Ih(d,p,C){for(var D=-1,U=d.length,Z=p.length,oe={};++D<U;){var fe=D<Z?p[D]:e;C(oe,d[D],fe)}return oe}function Bd(d){return Hn(d)?d:[]}function hu(d){return typeof d=="function"?d:Se}function gs(d,p){return jt(d)?d:Xd(d,p)?[d]:Ga(on(d))}var Up=Mt;function no(d,p,C){var D=d.length;return C=C===e?D:C,!p&&C>=D?d:wr(d,p,C)}var Bp=Sd||function(d){return vn.clearTimeout(d)};function Oh(d,p){if(p)return d.slice();var C=d.length,D=$a?$a(C):new d.constructor(C);return d.copy(D),D}function Xo(d){var p=new d.constructor(d.byteLength);return new Ki(p).set(new Ki(d)),p}function Lh(d,p){var C=p?Xo(d.buffer):d.buffer;return new d.constructor(C,d.byteOffset,d.byteLength)}function qd(d){var p=new d.constructor(d.source,es.exec(d));return p.lastIndex=d.lastIndex,p}function qp(d){return Vo?Fe(Vo.call(d)):{}}function Fh(d,p){var C=p?Xo(d.buffer):d.buffer;return new d.constructor(C,d.byteOffset,d.length)}function mu(d,p){if(d!==p){var C=d!==e,D=d===null,U=d===d,Z=Bi(d),oe=p!==e,fe=p===null,xe=p===p,Pe=Bi(p);if(!fe&&!Pe&&!Z&&d>p||Z&&oe&&xe&&!fe&&!Pe||D&&oe&&xe||!C&&xe||!U)return 1;if(!D&&!Z&&!Pe&&d<p||Pe&&C&&U&&!D&&!Z||fe&&C&&U||!oe&&U||!xe)return-1}return 0}function Vp(d,p,C){for(var D=-1,U=d.criteria,Z=p.criteria,oe=U.length,fe=C.length;++D<oe;){var xe=mu(U[D],Z[D]);if(xe){if(D>=fe)return xe;var Pe=C[D];return xe*(Pe=="desc"?-1:1)}}return d.index-p.index}function zh(d,p,C,D){for(var U=-1,Z=d.length,oe=C.length,fe=-1,xe=p.length,Pe=En(Z-oe,0),Me=W(xe+Pe),ze=!D;++fe<xe;)Me[fe]=p[fe];for(;++U<oe;)(ze||U<Z)&&(Me[C[U]]=d[U]);for(;Pe--;)Me[fe++]=d[U++];return Me}function Hp(d,p,C,D){for(var U=-1,Z=d.length,oe=-1,fe=C.length,xe=-1,Pe=p.length,Me=En(Z-fe,0),ze=W(Me+Pe),We=!D;++U<Me;)ze[U]=d[U];for(var st=U;++xe<Pe;)ze[st+xe]=p[xe];for(;++oe<fe;)(We||U<Z)&&(ze[st+C[oe]]=d[U++]);return ze}function ni(d,p){var C=-1,D=d.length;for(p||(p=W(D));++C<D;)p[C]=d[C];return p}function rr(d,p,C,D){var U=!C;C||(C={});for(var Z=-1,oe=p.length;++Z<oe;){var fe=p[Z],xe=D?D(C[fe],d[fe],fe,C,d):e;xe===e&&(xe=d[fe]),U?ha(C,fe,xe):Yo(C,fe,xe)}return C}function Vd(d,p){return rr(d,wu(d),p)}function pu(d,p){return rr(d,Kd(d),p)}function Zo(d,p){return function(C,D){var U=jt(C)?zc:Zs,Z=p?p():{};return U(C,d,ut(D,2),Z)}}function el(d){return Mt(function(p,C){var D=-1,U=C.length,Z=U>1?C[U-1]:e,oe=U>2?C[2]:e;for(Z=d.length>3&&typeof Z=="function"?(U--,Z):e,oe&&Ui(C[0],C[1],oe)&&(Z=U<3?e:Z,U=1),p=Fe(p);++D<U;){var fe=C[D];fe&&d(p,fe,D,Z)}return p})}function $h(d,p){return function(C,D){if(C==null)return C;if(!ri(C))return d(C,D);for(var U=C.length,Z=p?U:-1,oe=Fe(C);(p?Z--:++Z<U)&&D(oe[Z],Z,oe)!==!1;);return C}}function tl(d){return function(p,C,D){for(var U=-1,Z=Fe(p),oe=D(p),fe=oe.length;fe--;){var xe=oe[d?fe:++U];if(C(Z[xe],xe,Z)===!1)break}return p}}function Gp(d,p,C){var D=p&A,U=Br(d);function Z(){var oe=this&&this!==vn&&this instanceof Z?U:d;return oe.apply(D?C:this,arguments)}return Z}function Sr(d){return function(p){p=on(p);var C=Ir(p)?Qi(p):e,D=C?C[0]:p.charAt(0),U=C?no(C,1).join(""):p.slice(1);return D[d]()+U}}function $i(d){return function(p){return Ml(v(_s(p).replace(rs,"")),d,"")}}function Br(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var C=br(d.prototype),D=d.apply(C,p);return In(D)?D:C}}function Yp(d,p,C){var D=Br(d);function U(){for(var Z=arguments.length,oe=W(Z),fe=Z,xe=il(U);fe--;)oe[fe]=arguments[fe];var Pe=Z<3&&oe[0]!==xe&&oe[Z-1]!==xe?[]:di(oe,xe);if(Z-=Pe.length,Z<C)return Uh(d,p,qn,U.placeholder,e,oe,Pe,e,e,C-Z);var Me=this&&this!==vn&&this instanceof U?D:d;return _i(Me,this,oe)}return U}function ys(d){return function(p,C,D){var U=Fe(p);if(!ri(p)){var Z=ut(C,3);p=si(p),C=function(fe){return Z(U[fe],fe,U)}}var oe=d(p,C,D);return oe>-1?U[Z?p[oe]:oe]:e}}function qa(d){return An(function(p){var C=p.length,D=C,U=er.prototype.thru;for(d&&p.reverse();D--;){var Z=p[D];if(typeof Z!="function")throw new Ke(c);if(U&&!oe&&bu(Z)=="wrapper")var oe=new er([],!0)}for(D=oe?D:C;++D<C;){Z=p[D];var fe=bu(Z),xe=fe=="wrapper"?Jd(Z):e;xe&&Zd(xe[0])&&xe[1]==(z|R|F|L)&&!xe[4].length&&xe[9]==1?oe=oe[bu(xe[0])].apply(oe,xe[3]):oe=Z.length==1&&Zd(Z)?oe[fe]():oe.thru(Z)}return function(){var Pe=arguments,Me=Pe[0];if(oe&&Pe.length==1&&jt(Me))return oe.plant(Me).value();for(var ze=0,We=C?p[ze].apply(this,Pe):Me;++ze<C;)We=p[ze].call(this,We);return We}})}function qn(d,p,C,D,U,Z,oe,fe,xe,Pe){var Me=p&z,ze=p&A,We=p&k,st=p&(R|Y),St=p&V,Bt=We?e:Br(d);function Nt(){for(var Wt=arguments.length,Zt=W(Wt),va=Wt;va--;)Zt[va]=arguments[va];if(st)var Tr=il(Nt),ba=hd(Zt,Tr);if(D&&(Zt=zh(Zt,D,U,st)),Z&&(Zt=Hp(Zt,Z,oe,st)),Wt-=ba,st&&Wt<Pe){var oi=di(Zt,Tr);return Uh(d,p,qn,Nt.placeholder,C,Zt,oi,fe,xe,Pe-Wt)}var js=ze?C:this,ol=We?js[d]:d;return Wt=Zt.length,fe?Zt=Ha(Zt,fe):St&&Wt>1&&Zt.reverse(),Me&&xe<Wt&&(Zt.length=xe),this&&this!==vn&&this instanceof Nt&&(ol=Bt||Br(ol)),ol.apply(js,Zt)}return Nt}function gu(d,p){return function(C,D){return Nh(C,d,p(D),{})}}function Kl(d,p){return function(C,D){var U;if(C===e&&D===e)return p;if(C!==e&&(U=C),D!==e){if(U===e)return D;typeof C=="string"||typeof D=="string"?(C=ir(C),D=ir(D)):(C=Ud(C),D=Ud(D)),U=d(C,D)}return U}}function yu(d){return An(function(p){return p=_n(p,Ii(ut())),Mt(function(C){var D=this;return d(p,function(U){return _i(U,D,C)})})})}function xu(d,p){p=p===e?" ":ir(p);var C=p.length;if(C<2)return C?Ph(p,d):p;var D=Ph(p,Bl(d/Or(p)));return Ir(p)?no(Qi(D),0,d).join(""):D.slice(0,d)}function Wp(d,p,C,D){var U=p&A,Z=Br(d);function oe(){for(var fe=-1,xe=arguments.length,Pe=-1,Me=D.length,ze=W(Me+xe),We=this&&this!==vn&&this instanceof oe?Z:d;++Pe<Me;)ze[Pe]=D[Pe];for(;xe--;)ze[Pe++]=arguments[++fe];return _i(We,U?C:this,ze)}return oe}function io(d){return function(p,C,D){return D&&typeof D!="number"&&Ui(p,C,D)&&(C=D=e),p=Ja(p),C===e?(C=p,p=0):C=Ja(C),D=D===e?p<C?1:-1:Ja(D),Lp(p,C,D,d)}}function nl(d){return function(p,C){return typeof p=="string"&&typeof C=="string"||(p=Gr(p),C=Gr(C)),d(p,C)}}function Uh(d,p,C,D,U,Z,oe,fe,xe,Pe){var Me=p&R,ze=Me?oe:e,We=Me?e:oe,st=Me?Z:e,St=Me?e:Z;p|=Me?F:q,p&=~(Me?q:F),p&P||(p&=-4);var Bt=[d,p,U,st,ze,St,We,fe,xe,Pe],Nt=C.apply(e,Bt);return Zd(d)&&nf(Nt,Bt),Nt.placeholder=D,rf(Nt,d,p)}function Hd(d){var p=it[d];return function(C,D){if(C=Gr(C),D=D==null?0:Pn(kt(D),292),D&&Wc(C)){var U=(on(C)+"e").split("e"),Z=p(U[0]+"e"+(+U[1]+D));return U=(on(Z)+"e").split("e"),+(U[0]+"e"+(+U[1]-D))}return p(C)}}var Jp=Ht&&1/$l(new Ht([,-0]))[1]==K?function(d){return new Ht(d)}:et;function vu(d){return function(p){var C=hi(p);return C==$e?zl(p):C==tn?Ul(p):ch(p,d(p))}}function Va(d,p,C,D,U,Z,oe,fe){var xe=p&k;if(!xe&&typeof d!="function")throw new Ke(c);var Pe=D?D.length:0;if(Pe||(p&=-97,D=U=e),oe=oe===e?oe:En(kt(oe),0),fe=fe===e?fe:kt(fe),Pe-=U?U.length:0,p&q){var Me=D,ze=U;D=U=e}var We=xe?e:Jd(d),st=[d,p,C,D,U,Me,ze,Z,oe,fe];if(We&&Cu(st,We),d=st[0],p=st[1],C=st[2],D=st[3],U=st[4],fe=st[9]=st[9]===e?xe?0:d.length:En(st[9]-Pe,0),!fe&&p&(R|Y)&&(p&=-25),!p||p==A)var St=Gp(d,p,C);else p==R||p==Y?St=Yp(d,p,fe):(p==F||p==(A|F))&&!U.length?St=Wp(d,p,C,D):St=qn.apply(e,st);var Bt=We?ou:nf;return rf(Bt(St,st),d,p)}function Gd(d,p,C,D){return d===e||lr(d,ct[C])&&!mt.call(D,C)?p:d}function Bh(d,p,C,D,U,Z){return In(d)&&In(p)&&(Z.set(p,d),su(d,p,e,Bh,Z),Z.delete(p)),d}function Qp(d){return Hr(d)?e:d}function Kp(d,p,C,D,U,Z){var oe=C&j,fe=d.length,xe=p.length;if(fe!=xe&&!(oe&&xe>fe))return!1;var Pe=Z.get(d),Me=Z.get(p);if(Pe&&Me)return Pe==p&&Me==d;var ze=-1,We=!0,st=C&E?new fs:e;for(Z.set(d,p),Z.set(p,d);++ze<fe;){var St=d[ze],Bt=p[ze];if(D)var Nt=oe?D(Bt,St,ze,p,d,Z):D(St,Bt,ze,d,p,Z);if(Nt!==e){if(Nt)continue;We=!1;break}if(st){if(!Bc(p,function(Wt,Zt){if(!Ws(st,Zt)&&(St===Wt||U(St,Wt,C,D,Z)))return st.push(Zt)})){We=!1;break}}else if(!(St===Bt||U(St,Bt,C,D,Z))){We=!1;break}}return Z.delete(d),Z.delete(p),We}function Xp(d,p,C,D,U,Z,oe){switch(C){case nt:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case Le:return!(d.byteLength!=p.byteLength||!Z(new Ki(d),new Ki(p)));case ge:case Ge:case ht:return lr(+d,+p);case Ne:return d.name==p.name&&d.message==p.message;case ei:case vi:return d==p+"";case $e:var fe=zl;case tn:var xe=D&j;if(fe||(fe=$l),d.size!=p.size&&!xe)return!1;var Pe=oe.get(d);if(Pe)return Pe==p;D|=E,oe.set(d,p);var Me=Kp(fe(d),fe(p),D,U,Z,oe);return oe.delete(d),Me;case zn:if(Vo)return Vo.call(d)==Vo.call(p)}return!1}function fi(d,p,C,D,U,Z){var oe=C&j,fe=Yd(d),xe=fe.length,Pe=Yd(p),Me=Pe.length;if(xe!=Me&&!oe)return!1;for(var ze=xe;ze--;){var We=fe[ze];if(!(oe?We in p:mt.call(p,We)))return!1}var st=Z.get(d),St=Z.get(p);if(st&&St)return st==p&&St==d;var Bt=!0;Z.set(d,p),Z.set(p,d);for(var Nt=oe;++ze<xe;){We=fe[ze];var Wt=d[We],Zt=p[We];if(D)var va=oe?D(Zt,Wt,We,p,d,Z):D(Wt,Zt,We,d,p,Z);if(!(va===e?Wt===Zt||U(Wt,Zt,C,D,Z):va)){Bt=!1;break}Nt||(Nt=We=="constructor")}if(Bt&&!Nt){var Tr=d.constructor,ba=p.constructor;Tr!=ba&&"constructor"in d&&"constructor"in p&&!(typeof Tr=="function"&&Tr instanceof Tr&&typeof ba=="function"&&ba instanceof ba)&&(Bt=!1)}return Z.delete(d),Z.delete(p),Bt}function An(d){return _u(Yh(d,e,sr),d+"")}function Yd(d){return Dp(d,si,wu)}function Wd(d){return Dp(d,mi,Kd)}var Jd=ql?function(d){return ql.get(d)}:et;function bu(d){for(var p=d.name+"",C=zr[p],D=mt.call(zr,p)?C.length:0;D--;){var U=C[D],Z=U.func;if(Z==null||Z==d)return U.name}return p}function il(d){var p=mt.call(J,"placeholder")?J:d;return p.placeholder}function ut(){var d=J.iteratee||gt;return d=d===gt?jh:d,arguments.length?d(arguments[0],arguments[1]):d}function Xl(d,p){var C=d.__data__;return vs(p)?C[typeof p=="string"?"string":"hash"]:C.map}function Qd(d){for(var p=si(d),C=p.length;C--;){var D=p[C],U=d[D];p[C]=[D,U,ng(U)]}return p}function ro(d,p){var C=qc(d,p);return Ba(C)?C:e}function Zp(d){var p=mt.call(d,Fi),C=d[Fi];try{d[Fi]=e;var D=!0}catch{}var U=_t.call(d);return D&&(p?d[Fi]=C:delete d[Fi]),U}var wu=Qs?function(d){return d==null?[]:(d=Fe(d),Mr(Qs(d),function(p){return $o.call(d,p)}))}:kv,Kd=Qs?function(d){for(var p=[];d;)sa(p,wu(d)),d=da(d);return p}:kv,hi=Yt;(Jc&&hi(new Jc(new ArrayBuffer(1)))!=nt||ti&&hi(new ti)!=$e||Rn&&hi(Rn.resolve())!=li||Ht&&hi(new Ht)!=tn||fa&&hi(new fa)!=Qn)&&(hi=function(d){var p=Yt(d),C=p==tt?d.constructor:e,D=C?bs(C):"";if(D)switch(D){case vp:return nt;case bp:return $e;case Qc:return li;case Kc:return tn;case wp:return Qn}return p});function eg(d,p,C){for(var D=-1,U=C.length;++D<U;){var Z=C[D],oe=Z.size;switch(Z.type){case"drop":d+=oe;break;case"dropRight":p-=oe;break;case"take":p=Pn(p,d+oe);break;case"takeRight":d=En(d,p-oe);break}}return{start:d,end:p}}function qh(d){var p=d.match(Is);return p?p[1].split(sd):[]}function Su(d,p,C){p=gs(p,d);for(var D=-1,U=p.length,Z=!1;++D<U;){var oe=cn(p[D]);if(!(Z=d!=null&&C(d,oe)))break;d=d[oe]}return Z||++D!=U?Z:(U=d==null?0:d.length,!!U&&sl(U)&&ga(oe,U)&&(jt(d)||Cs(d)))}function Vh(d){var p=d.length,C=new d.constructor(p);return p&&typeof d[0]=="string"&&mt.call(d,"index")&&(C.index=d.index,C.input=d.input),C}function Hh(d){return typeof d.constructor=="function"&&!wn(d)?br(da(d)):{}}function Gh(d,p,C){var D=d.constructor;switch(p){case Le:return Xo(d);case ge:case Ge:return new D(+d);case nt:return Lh(d,C);case rt:case zt:case xn:case ci:case Ie:case Je:case Ve:case lt:case Dt:return Fh(d,C);case $e:return new D;case ht:case vi:return new D(d);case ei:return qd(d);case tn:return new D;case zn:return qp(d)}}function tg(d,p){var C=p.length;if(!C)return d;var D=C-1;return p[D]=(C>1?"& ":"")+p[D],p=p.join(C>2?", ":" "),d.replace(Eo,`{
/* [wrapped with `+p+`] */
`)}function xs(d){return jt(d)||Cs(d)||!!(Xi&&d&&d[Xi])}function ga(d,p){var C=typeof d;return p=p??re,!!p&&(C=="number"||C!="symbol"&&ta.test(d))&&d>-1&&d%1==0&&d<p}function Ui(d,p,C){if(!In(C))return!1;var D=typeof p;return(D=="number"?ri(C)&&ga(p,C.length):D=="string"&&p in C)?lr(C[p],d):!1}function Xd(d,p){if(jt(d))return!1;var C=typeof d;return C=="number"||C=="symbol"||C=="boolean"||d==null||Bi(d)?!0:ah.test(d)||!gl.test(d)||p!=null&&d in Fe(p)}function vs(d){var p=typeof d;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?d!=="__proto__":d===null}function Zd(d){var p=bu(d),C=J[p];if(typeof C!="function"||!(p in $t.prototype))return!1;if(d===C)return!0;var D=Jd(C);return!!D&&d===D[0]}function ef(d){return!!Qt&&Qt in d}var Nu=at?ya:Dv;function wn(d){var p=d&&d.constructor,C=typeof p=="function"&&p.prototype||ct;return d===C}function ng(d){return d===d&&!In(d)}function ig(d,p){return function(C){return C==null?!1:C[d]===p&&(p!==e||d in Fe(C))}}function rg(d){var p=Iu(d,function(D){return C.size===f&&C.clear(),D}),C=p.cache;return p}function Cu(d,p){var C=d[1],D=p[1],U=C|D,Z=U<(A|k|z),oe=D==z&&C==R||D==z&&C==L&&d[7].length<=p[8]||D==(z|L)&&p[7].length<=p[8]&&C==R;if(!(Z||oe))return d;D&A&&(d[2]=p[2],U|=C&A?0:P);var fe=p[3];if(fe){var xe=d[3];d[3]=xe?zh(xe,fe,p[4]):fe,d[4]=xe?di(d[3],y):p[4]}return fe=p[5],fe&&(xe=d[5],d[5]=xe?Hp(xe,fe,p[6]):fe,d[6]=xe?di(d[5],y):p[6]),fe=p[7],fe&&(d[7]=fe),D&z&&(d[8]=d[8]==null?p[8]:Pn(d[8],p[8])),d[9]==null&&(d[9]=p[9]),d[0]=p[0],d[1]=U,d}function ao(d){var p=[];if(d!=null)for(var C in Fe(d))p.push(C);return p}function ag(d){return _t.call(d)}function Yh(d,p,C){return p=En(p===e?d.length-1:p,0),function(){for(var D=arguments,U=-1,Z=En(D.length-p,0),oe=W(Z);++U<Z;)oe[U]=D[p+U];U=-1;for(var fe=W(p+1);++U<p;)fe[U]=D[U];return fe[p]=C(oe),_i(d,this,fe)}}function Zl(d,p){return p.length<2?d:Ur(d,wr(p,0,-1))}function Ha(d,p){for(var C=d.length,D=Pn(p.length,C),U=ni(d);D--;){var Z=p[D];d[D]=ga(Z,C)?U[Z]:e}return d}function tf(d,p){if(!(p==="constructor"&&typeof d[p]=="function")&&p!="__proto__")return d[p]}var nf=ju(ou),ec=fh||function(d,p){return vn.setTimeout(d,p)},_u=ju(lu);function rf(d,p,C){var D=p+"";return _u(d,tg(D,sg(qh(D),C)))}function ju(d){var p=0,C=0;return function(){var D=ds(),U=ie-(D-C);if(C=D,U>0){if(++p>=ee)return arguments[0]}else p=0;return d.apply(e,arguments)}}function Tu(d,p){var C=-1,D=d.length,U=D-1;for(p=p===e?D:p;++C<p;){var Z=Fd(C,U),oe=d[Z];d[Z]=d[C],d[C]=oe}return d.length=p,d}var Ga=rg(function(d){var p=[];return d.charCodeAt(0)===46&&p.push(""),d.replace(gr,function(C,D,U,Z){p.push(U?Z.replace(Aa,"$1"):D||C)}),p});function cn(d){if(typeof d=="string"||Bi(d))return d;var p=d+"";return p=="0"&&1/d==-1/0?"-0":p}function bs(d){if(d!=null){try{return wt.call(d)}catch{}try{return d+""}catch{}}return""}function sg(d,p){return Ji(ne,function(C){var D="_."+C[0];p&C[1]&&!Rl(d,D)&&d.push(D)}),d.sort()}function ii(d){if(d instanceof $t)return d.clone();var p=new er(d.__wrapped__,d.__chain__);return p.__actions__=ni(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}function Wx(d,p,C){(C?Ui(d,p,C):p===e)?p=1:p=En(kt(p),0);var D=d==null?0:d.length;if(!D||p<1)return[];for(var U=0,Z=0,oe=W(Bl(D/p));U<D;)oe[Z++]=wr(d,U,U+=p);return oe}function og(d){for(var p=-1,C=d==null?0:d.length,D=0,U=[];++p<C;){var Z=d[p];Z&&(U[D++]=Z)}return U}function lg(){var d=arguments.length;if(!d)return[];for(var p=W(d-1),C=arguments[0],D=d;D--;)p[D-1]=arguments[D];return sa(jt(C)?ni(C):[C],Gt(p,1))}var Mn=Mt(function(d,p){return Hn(d)?eo(d,Gt(p,1,Hn,!0)):[]}),ar=Mt(function(d,p){var C=ki(p);return Hn(C)&&(C=e),Hn(d)?eo(d,Gt(p,1,Hn,!0),ut(C,2)):[]}),ws=Mt(function(d,p){var C=ki(p);return Hn(C)&&(C=e),Hn(d)?eo(d,Gt(p,1,Hn,!0),e,C):[]});function cg(d,p,C){var D=d==null?0:d.length;return D?(p=C||p===e?1:kt(p),wr(d,p<0?0:p,D)):[]}function ug(d,p,C){var D=d==null?0:d.length;return D?(p=C||p===e?1:kt(p),p=D-p,wr(d,0,p<0?0:p)):[]}function Jx(d,p){return d&&d.length?du(d,ut(p,3),!0,!0):[]}function Wh(d,p){return d&&d.length?du(d,ut(p,3),!0):[]}function Nr(d,p,C,D){var U=d==null?0:d.length;return U?(C&&typeof C!="number"&&Ui(d,p,C)&&(C=0,D=U),Lt(d,p,C,D)):[]}function qr(d,p,C){var D=d==null?0:d.length;if(!D)return-1;var U=C==null?0:kt(C);return U<0&&(U=En(D+U,0)),yr(d,ut(p,3),U)}function Jh(d,p,C){var D=d==null?0:d.length;if(!D)return-1;var U=D-1;return C!==e&&(U=kt(C),U=C<0?En(D+U,0):Pn(U,D-1)),yr(d,ut(p,3),U,!0)}function sr(d){var p=d==null?0:d.length;return p?Gt(d,1):[]}function dg(d){var p=d==null?0:d.length;return p?Gt(d,K):[]}function so(d,p){var C=d==null?0:d.length;return C?(p=p===e?1:kt(p),Gt(d,p)):[]}function rl(d){for(var p=-1,C=d==null?0:d.length,D={};++p<C;){var U=d[p];D[U[0]]=U[1]}return D}function Ss(d){return d&&d.length?d[0]:e}function Qh(d,p,C){var D=d==null?0:d.length;if(!D)return-1;var U=C==null?0:kt(C);return U<0&&(U=En(D+U,0)),la(d,p,U)}function Kh(d){var p=d==null?0:d.length;return p?wr(d,0,-1):[]}var Ya=Mt(function(d){var p=_n(d,Bd);return p.length&&p[0]===d[0]?Sh(p):[]}),fg=Mt(function(d){var p=ki(d),C=_n(d,Bd);return p===ki(C)?p=e:C.pop(),C.length&&C[0]===d[0]?Sh(C,ut(p,2)):[]}),tc=Mt(function(d){var p=ki(d),C=_n(d,Bd);return p=typeof p=="function"?p:e,p&&C.pop(),C.length&&C[0]===d[0]?Sh(C,e,p):[]});function Eu(d,p){return d==null?"":Lr.call(d,p)}function ki(d){var p=d==null?0:d.length;return p?d[p-1]:e}function nc(d,p,C){var D=d==null?0:d.length;if(!D)return-1;var U=D;return C!==e&&(U=kt(C),U=U<0?En(D+U,0):Pn(U,D-1)),p===p?Li(d,p,U):yr(d,za,U,!0)}function hg(d,p){return d&&d.length?Ah(d,kt(p)):e}var mg=Mt(ic);function ic(d,p){return d&&d.length&&p&&p.length?Ld(d,p):d}function pg(d,p,C){return d&&d.length&&p&&p.length?Ld(d,p,ut(C,2)):d}function af(d,p,C){return d&&d.length&&p&&p.length?Ld(d,p,e,C):d}var gg=An(function(d,p){var C=d==null?0:d.length,D=nu(d,p);return Dh(d,_n(p,function(U){return ga(U,C)?+U:U}).sort(mu)),D});function Qx(d,p){var C=[];if(!(d&&d.length))return C;var D=-1,U=[],Z=d.length;for(p=ut(p,3);++D<Z;){var oe=d[D];p(oe,D,d)&&(C.push(oe),U.push(D))}return Dh(d,U),C}function Xh(d){return d==null?d:mh.call(d)}function dn(d,p,C){var D=d==null?0:d.length;return D?(C&&typeof C!="number"&&Ui(d,p,C)?(p=0,C=D):(p=p==null?0:kt(p),C=C===e?D:kt(C)),wr(d,p,C)):[]}function jn(d,p){return cu(d,p)}function qt(d,p,C){return $d(d,p,ut(C,2))}function Kt(d,p){var C=d==null?0:d.length;if(C){var D=cu(d,p);if(D<C&&lr(d[D],p))return D}return-1}function fn(d,p){return cu(d,p,!0)}function Cr(d,p,C){return $d(d,p,ut(C,2),!0)}function oo(d,p){var C=d==null?0:d.length;if(C){var D=cu(d,p,!0)-1;if(lr(d[D],p))return D}return-1}function rc(d){return d&&d.length?Rh(d):[]}function Zh(d,p){return d&&d.length?Rh(d,ut(p,2)):[]}function Ns(d){var p=d==null?0:d.length;return p?wr(d,1,p):[]}function Vn(d,p,C){return d&&d.length?(p=C||p===e?1:kt(p),wr(d,0,p<0?0:p)):[]}function lo(d,p,C){var D=d==null?0:d.length;return D?(p=C||p===e?1:kt(p),p=D-p,wr(d,p<0?0:p,D)):[]}function al(d,p){return d&&d.length?du(d,ut(p,3),!1,!0):[]}function em(d,p){return d&&d.length?du(d,ut(p,3)):[]}var Vr=Mt(function(d){return ps(Gt(d,1,Hn,!0))}),ac=Mt(function(d){var p=ki(d);return Hn(p)&&(p=e),ps(Gt(d,1,Hn,!0),ut(p,2))}),Au=Mt(function(d){var p=ki(d);return p=typeof p=="function"?p:e,ps(Gt(d,1,Hn,!0),e,p)});function or(d){return d&&d.length?ps(d):[]}function tm(d,p){return d&&d.length?ps(d,ut(p,2)):[]}function nm(d,p){return p=typeof p=="function"?p:e,d&&d.length?ps(d,e,p):[]}function sc(d){if(!(d&&d.length))return[];var p=0;return d=Mr(d,function(C){if(Hn(C))return p=En(C.length,p),!0}),ca(p,function(C){return _n(d,zo(C))})}function ku(d,p){if(!(d&&d.length))return[];var C=sc(d);return p==null?C:_n(C,function(D){return _i(p,e,D)})}var co=Mt(function(d,p){return Hn(d)?eo(d,p):[]}),bi=Mt(function(d){return fu(Mr(d,Hn))}),uo=Mt(function(d){var p=ki(d);return Hn(p)&&(p=e),fu(Mr(d,Hn),ut(p,2))}),oc=Mt(function(d){var p=ki(d);return p=typeof p=="function"?p:e,fu(Mr(d,Hn),e,p)}),lc=Mt(sc);function im(d,p){return Ih(d||[],p||[],Yo)}function rm(d,p){return Ih(d||[],p||[],Ql)}var yg=Mt(function(d){var p=d.length,C=p>1?d[p-1]:e;return C=typeof C=="function"?(d.pop(),C):e,ku(d,C)});function cc(d){var p=J(d);return p.__chain__=!0,p}function am(d,p){return p(d),d}function Di(d,p){return p(d)}var xg=An(function(d){var p=d.length,C=p?d[0]:0,D=this.__wrapped__,U=function(Z){return nu(Z,d)};return p>1||this.__actions__.length||!(D instanceof $t)||!ga(C)?this.thru(U):(D=D.slice(C,+C+(p?1:0)),D.__actions__.push({func:Di,args:[U],thisArg:e}),new er(D,this.__chain__).thru(function(Z){return p&&!Z.length&&Z.push(e),Z}))});function _r(){return cc(this)}function vg(){return new er(this.value(),this.__chain__)}function bg(){this.__values__===e&&(this.__values__=jr(this.value()));var d=this.__index__>=this.__values__.length,p=d?e:this.__values__[this.__index__++];return{done:d,value:p}}function Kx(){return this}function fo(d){for(var p,C=this;C instanceof $r;){var D=ii(C);D.__index__=0,D.__values__=e,p?U.__wrapped__=D:p=D;var U=D;C=C.__wrapped__}return U.__wrapped__=d,p}function sf(){var d=this.__wrapped__;if(d instanceof $t){var p=d;return this.__actions__.length&&(p=new $t(this)),p=p.reverse(),p.__actions__.push({func:Di,args:[Xh],thisArg:e}),new er(p,this.__chain__)}return this.thru(Xh)}function sm(){return $p(this.__wrapped__,this.__actions__)}var uc=Zo(function(d,p,C){mt.call(d,C)?++d[C]:ha(d,C,1)});function wg(d,p,C){var D=jt(d)?$c:bh;return C&&Ui(d,p,C)&&(p=e),D(d,ut(p,3))}function Sg(d,p){var C=jt(d)?Mr:un;return C(d,ut(p,3))}var Ng=ys(qr),om=ys(Jh);function lm(d,p){return Gt(Du(d,p),1)}function Xx(d,p){return Gt(Du(d,p),K)}function Zx(d,p,C){return C=C===e?1:kt(C),Gt(Du(d,p),C)}function Cg(d,p){var C=jt(d)?Ji:ms;return C(d,ut(p,3))}function cm(d,p){var C=jt(d)?ud:Ad;return C(d,ut(p,3))}var _g=Zo(function(d,p,C){mt.call(d,C)?d[C].push(p):ha(d,C,[p])});function dc(d,p,C,D){d=ri(d)?d:xc(d),C=C&&!D?kt(C):0;var U=d.length;return C<0&&(C=En(U+C,0)),xf(d)?C<=U&&d.indexOf(p,C)>-1:!!U&&la(d,p,C)>-1}var of=Mt(function(d,p,C){var D=-1,U=typeof p=="function",Z=ri(d)?W(d.length):[];return ms(d,function(oe){Z[++D]=U?_i(p,oe,C):Qo(oe,p,C)}),Z}),jg=Zo(function(d,p,C){ha(d,C,p)});function Du(d,p){var C=jt(d)?_n:Th;return C(d,ut(p,3))}function Tg(d,p,C,D){return d==null?[]:(jt(p)||(p=p==null?[]:[p]),C=D?e:C,jt(C)||(C=C==null?[]:[C]),kh(d,p,C))}var Eg=Zo(function(d,p,C){d[C?0:1].push(p)},function(){return[[],[]]});function Ag(d,p,C){var D=jt(d)?Ml:Ol,U=arguments.length<3;return D(d,ut(p,4),C,U,ms)}function kg(d,p,C){var D=jt(d)?sh:Ol,U=arguments.length<3;return D(d,ut(p,4),C,U,Ad)}function lf(d,p){var C=jt(d)?Mr:un;return C(d,Ou(ut(p,3)))}function Dg(d){var p=jt(d)?Hl:Jl;return p(d)}function Pg(d,p,C){(C?Ui(d,p,C):p===e)?p=1:p=kt(p);var D=jt(d)?Ep:zd;return D(d,p)}function Sn(d){var p=jt(d)?Ap:Fp;return p(d)}function um(d){if(d==null)return 0;if(ri(d))return xf(d)?Or(d):d.length;var p=hi(d);return p==$e||p==tn?d.size:Rd(d).length}function ev(d,p,C){var D=jt(d)?Bc:zp;return C&&Ui(d,p,C)&&(p=e),D(d,ut(p,3))}var Rg=Mt(function(d,p){if(d==null)return[];var C=p.length;return C>1&&Ui(d,p[0],p[1])?p=[]:C>2&&Ui(p[0],p[1],p[2])&&(p=[p[0]]),kh(d,Gt(p,1),[])}),cf=Bo||function(){return vn.Date.now()};function tv(d,p){if(typeof p!="function")throw new Ke(c);return d=kt(d),function(){if(--d<1)return p.apply(this,arguments)}}function Mg(d,p,C){return p=C?e:p,p=d&&p==null?d.length:p,Va(d,z,e,e,e,e,p)}function Pu(d,p){var C;if(typeof p!="function")throw new Ke(c);return d=kt(d),function(){return--d>0&&(C=p.apply(this,arguments)),d<=1&&(p=e),C}}var ho=Mt(function(d,p,C){var D=A;if(C.length){var U=di(C,il(ho));D|=F}return Va(d,D,p,C,U)}),uf=Mt(function(d,p,C){var D=A|k;if(C.length){var U=di(C,il(uf));D|=F}return Va(p,D,d,C,U)});function Ru(d,p,C){p=C?e:p;var D=Va(d,R,e,e,e,e,e,p);return D.placeholder=Ru.placeholder,D}function df(d,p,C){p=C?e:p;var D=Va(d,Y,e,e,e,e,e,p);return D.placeholder=df.placeholder,D}function mo(d,p,C){var D,U,Z,oe,fe,xe,Pe=0,Me=!1,ze=!1,We=!0;if(typeof d!="function")throw new Ke(c);p=Gr(p)||0,In(C)&&(Me=!!C.leading,ze="maxWait"in C,Z=ze?En(Gr(C.maxWait)||0,p):Z,We="trailing"in C?!!C.trailing:We);function st(oi){var js=D,ol=U;return D=U=e,Pe=oi,oe=d.apply(ol,js),oe}function St(oi){return Pe=oi,fe=ec(Wt,p),Me?st(oi):oe}function Bt(oi){var js=oi-xe,ol=oi-Pe,u1=p-js;return ze?Pn(u1,Z-ol):u1}function Nt(oi){var js=oi-xe,ol=oi-Pe;return xe===e||js>=p||js<0||ze&&ol>=Z}function Wt(){var oi=cf();if(Nt(oi))return Zt(oi);fe=ec(Wt,Bt(oi))}function Zt(oi){return fe=e,We&&D?st(oi):(D=U=e,oe)}function va(){fe!==e&&Bp(fe),Pe=0,D=xe=U=fe=e}function Tr(){return fe===e?oe:Zt(cf())}function ba(){var oi=cf(),js=Nt(oi);if(D=arguments,U=this,xe=oi,js){if(fe===e)return St(xe);if(ze)return Bp(fe),fe=ec(Wt,p),st(xe)}return fe===e&&(fe=ec(Wt,p)),oe}return ba.cancel=va,ba.flush=Tr,ba}var Wa=Mt(function(d,p){return Wo(d,1,p)}),Mu=Mt(function(d,p,C){return Wo(d,Gr(p)||0,C)});function nv(d){return Va(d,V)}function Iu(d,p){if(typeof d!="function"||p!=null&&typeof p!="function")throw new Ke(c);var C=function(){var D=arguments,U=p?p.apply(this,D):D[0],Z=C.cache;if(Z.has(U))return Z.get(U);var oe=d.apply(this,D);return C.cache=Z.set(U,oe)||Z,oe};return C.cache=new(Iu.Cache||tr),C}Iu.Cache=tr;function Ou(d){if(typeof d!="function")throw new Ke(c);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}function Ig(d){return Pu(2,d)}var Og=Up(function(d,p){p=p.length==1&&jt(p[0])?_n(p[0],Ii(ut())):_n(Gt(p,1),Ii(ut()));var C=p.length;return Mt(function(D){for(var U=-1,Z=Pn(D.length,C);++U<Z;)D[U]=p[U].call(this,D[U]);return _i(d,this,D)})}),dm=Mt(function(d,p){var C=di(p,il(dm));return Va(d,F,e,p,C)}),ff=Mt(function(d,p){var C=di(p,il(ff));return Va(d,q,e,p,C)}),Lg=An(function(d,p){return Va(d,L,e,e,e,p)});function Fg(d,p){if(typeof d!="function")throw new Ke(c);return p=p===e?p:kt(p),Mt(d,p)}function iv(d,p){if(typeof d!="function")throw new Ke(c);return p=p==null?0:En(kt(p),0),Mt(function(C){var D=C[p],U=no(C,0,p);return D&&sa(U,D),_i(d,this,U)})}function fm(d,p,C){var D=!0,U=!0;if(typeof d!="function")throw new Ke(c);return In(C)&&(D="leading"in C?!!C.leading:D,U="trailing"in C?!!C.trailing:U),mo(d,p,{leading:D,maxWait:p,trailing:U})}function hm(d){return Mg(d,1)}function rv(d,p){return dm(hu(p),d)}function av(){if(!arguments.length)return[];var d=arguments[0];return jt(d)?d:[d]}function Lu(d){return Ei(d,w)}function sv(d,p){return p=typeof p=="function"?p:e,Ei(d,w,p)}function zg(d){return Ei(d,x|w)}function Vt(d,p){return p=typeof p=="function"?p:e,Ei(d,x|w,p)}function mm(d,p){return p==null||vh(d,p,si(p))}function lr(d,p){return d===p||d!==d&&p!==p}var pm=nl(iu),$g=nl(function(d,p){return d>=p}),Cs=kd(function(){return arguments}())?kd:function(d){return Ln(d)&&mt.call(d,"callee")&&!$o.call(d,"callee")},jt=W.isArray,hf=aa?Ii(aa):nr;function ri(d){return d!=null&&sl(d.length)&&!ya(d)}function Hn(d){return Ln(d)&&ri(d)}function ov(d){return d===!0||d===!1||Ln(d)&&Yt(d)==ge}var po=Nd||Dv,Ug=cd?Ii(cd):Xn;function Bg(d){return Ln(d)&&d.nodeType===1&&!Hr(d)}function mf(d){if(d==null)return!0;if(ri(d)&&(jt(d)||typeof d=="string"||typeof d.splice=="function"||po(d)||fc(d)||Cs(d)))return!d.length;var p=hi(d);if(p==$e||p==tn)return!d.size;if(wn(d))return!Rd(d).length;for(var C in d)if(mt.call(d,C))return!1;return!0}function pn(d,p){return Ko(d,p)}function gm(d,p,C){C=typeof C=="function"?C:e;var D=C?C(d,p):e;return D===e?Ko(d,p,e,C):!!D}function ai(d){if(!Ln(d))return!1;var p=Yt(d);return p==Ne||p==Te||typeof d.message=="string"&&typeof d.name=="string"&&!Hr(d)}function lv(d){return typeof d=="number"&&Wc(d)}function ya(d){if(!In(d))return!1;var p=Yt(d);return p==Be||p==Qe||p==je||p==Pi}function pf(d){return typeof d=="number"&&d==kt(d)}function sl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=re}function In(d){var p=typeof d;return d!=null&&(p=="object"||p=="function")}function Ln(d){return d!=null&&typeof d=="object"}var gf=Pl?Ii(Pl):Dd;function ym(d,p){return d===p||au(d,p,Qd(p))}function cv(d,p,C){return C=typeof C=="function"?C:e,au(d,p,Qd(p),C)}function qg(d){return Hg(d)&&d!=+d}function uv(d){if(Nu(d))throw new _e(l);return Ba(d)}function Vg(d){return d===null}function dv(d){return d==null}function Hg(d){return typeof d=="number"||Ln(d)&&Yt(d)==ht}function Hr(d){if(!Ln(d)||Yt(d)!=tt)return!1;var p=da(d);if(p===null)return!0;var C=mt.call(p,"constructor")&&p.constructor;return typeof C=="function"&&C instanceof C&&wt.call(C)==Rt}var yf=os?Ii(os):Pd;function xm(d){return pf(d)&&d>=-9007199254740991&&d<=re}var Gg=ls?Ii(ls):Ch;function xf(d){return typeof d=="string"||!jt(d)&&Ln(d)&&Yt(d)==vi}function Bi(d){return typeof d=="symbol"||Ln(d)&&Yt(d)==zn}var fc=Gs?Ii(Gs):_h;function xa(d){return d===e}function vm(d){return Ln(d)&&hi(d)==Qn}function Yg(d){return Ln(d)&&Yt(d)==Ee}var Wg=nl(Md),Fu=nl(function(d,p){return d<=p});function jr(d){if(!d)return[];if(ri(d))return xf(d)?Qi(d):ni(d);if(Uo&&d[Uo])return yd(d[Uo]());var p=hi(d),C=p==$e?zl:p==tn?$l:xc;return C(d)}function Ja(d){if(!d)return d===0?d:0;if(d=Gr(d),d===K||d===-1/0){var p=d<0?-1:1;return p*ve}return d===d?d:0}function kt(d){var p=Ja(d),C=p%1;return p===p?C?p-C:p:0}function Qa(d){return d?ma(kt(d),0,de):0}function Gr(d){if(typeof d=="number")return d;if(Bi(d))return I;if(In(d)){var p=typeof d.valueOf=="function"?d.valueOf():d;d=In(p)?p+"":p}if(typeof d!="string")return d===0?d:+d;d=fd(d);var C=$n.test(d);return C||Mc.test(d)?Oo(d.slice(2),C?2:8):ka.test(d)?I:+d}function Jg(d){return rr(d,mi(d))}function hc(d){return d?ma(kt(d),-9007199254740991,re):d===0?d:0}function on(d){return d==null?"":ir(d)}var fv=el(function(d,p){if(wn(p)||ri(p)){rr(p,si(p),d);return}for(var C in p)mt.call(p,C)&&Yo(d,C,p[C])}),Qg=el(function(d,p){rr(p,mi(p),d)}),vf=el(function(d,p,C,D){rr(p,mi(p),d,D)}),hv=el(function(d,p,C,D){rr(p,si(p),d,D)}),mv=An(nu);function pv(d,p){var C=br(d);return p==null?C:hs(C,p)}var gv=Mt(function(d,p){d=Fe(d);var C=-1,D=p.length,U=D>2?p[2]:e;for(U&&Ui(p[0],p[1],U)&&(D=1);++C<D;)for(var Z=p[C],oe=mi(Z),fe=-1,xe=oe.length;++fe<xe;){var Pe=oe[fe],Me=d[Pe];(Me===e||lr(Me,ct[Pe])&&!mt.call(d,Pe))&&(d[Pe]=Z[Pe])}return d}),Kg=Mt(function(d){return d.push(e,Bh),_i(Bu,e,d)});function mc(d,p){return oa(d,ut(p,3),Ai)}function zu(d,p){return oa(d,ut(p,3),Wl)}function Xg(d,p){return d==null?d:Yl(d,ut(p,3),mi)}function yv(d,p){return d==null?d:Jo(d,ut(p,3),mi)}function pc(d,p){return d&&Ai(d,ut(p,3))}function $u(d,p){return d&&Wl(d,ut(p,3))}function Zg(d){return d==null?[]:to(d,si(d))}function bf(d){return d==null?[]:to(d,mi(d))}function Uu(d,p,C){var D=d==null?e:Ur(d,p);return D===e?C:D}function bm(d,p){return d!=null&&Su(d,p,wh)}function gc(d,p){return d!=null&&Su(d,p,Pp)}var ey=gu(function(d,p,C){p!=null&&typeof p.toString!="function"&&(p=_t.call(p)),d[p]=C},we(Se)),ty=gu(function(d,p,C){p!=null&&typeof p.toString!="function"&&(p=_t.call(p)),mt.call(d,p)?d[p].push(C):d[p]=[C]},ut),xv=Mt(Qo);function si(d){return ri(d)?xh(d):Rd(d)}function mi(d){return ri(d)?xh(d,!0):Mp(d)}function vv(d,p){var C={};return p=ut(p,3),Ai(d,function(D,U,Z){ha(C,p(D,U,Z),D)}),C}function bv(d,p){var C={};return p=ut(p,3),Ai(d,function(D,U,Z){ha(C,U,p(D,U,Z))}),C}var wv=el(function(d,p,C){su(d,p,C)}),Bu=el(function(d,p,C,D){su(d,p,C,D)}),wf=An(function(d,p){var C={};if(d==null)return C;var D=!1;p=_n(p,function(Z){return Z=gs(Z,d),D||(D=Z.length>1),Z}),rr(d,Wd(d),C),D&&(C=Ei(C,x|S|w,Qp));for(var U=p.length;U--;)uu(C,p[U]);return C});function wm(d,p){return yc(d,Ou(ut(p)))}var Sv=An(function(d,p){return d==null?{}:Ip(d,p)});function yc(d,p){if(d==null)return{};var C=_n(Wd(d),function(D){return[D]});return p=ut(p),Od(d,C,function(D,U){return p(D,U[0])})}function Nv(d,p,C){p=gs(p,d);var D=-1,U=p.length;for(U||(U=1,d=e);++D<U;){var Z=d==null?e:d[cn(p[D])];Z===e&&(D=U,Z=C),d=ya(Z)?Z.call(d):Z}return d}function ny(d,p,C){return d==null?d:Ql(d,p,C)}function iy(d,p,C,D){return D=typeof D=="function"?D:e,d==null?d:Ql(d,p,C,D)}var Sm=vu(si),Nm=vu(mi);function Cm(d,p,C){var D=jt(d),U=D||po(d)||fc(d);if(p=ut(p,4),C==null){var Z=d&&d.constructor;U?C=D?new Z:[]:In(d)?C=ya(Z)?br(da(d)):{}:C={}}return(U?Ji:Ai)(d,function(oe,fe,xe){return p(C,oe,fe,xe)}),C}function ry(d,p){return d==null?!0:uu(d,p)}function Sf(d,p,C){return d==null?d:Mh(d,p,hu(C))}function Cv(d,p,C,D){return D=typeof D=="function"?D:e,d==null?d:Mh(d,p,hu(C),D)}function xc(d){return d==null?[]:Fl(d,si(d))}function _m(d){return d==null?[]:Fl(d,mi(d))}function jm(d,p,C){return C===e&&(C=p,p=e),C!==e&&(C=Gr(C),C=C===C?C:0),p!==e&&(p=Gr(p),p=p===p?p:0),ma(Gr(d),p,C)}function Nf(d,p,C){return p=Ja(p),C===e?(C=p,p=0):C=Ja(C),d=Gr(d),Rp(d,p,C)}function Tm(d,p,C){if(C&&typeof C!="boolean"&&Ui(d,p,C)&&(p=C=e),C===e&&(typeof p=="boolean"?(C=p,p=e):typeof d=="boolean"&&(C=d,d=e)),d===e&&p===e?(d=0,p=1):(d=Ja(d),p===e?(p=d,d=0):p=Ja(p)),d>p){var D=d;d=p,p=D}if(C||d%1||p%1){var U=hh();return Pn(d+U*(p-d+ra("1e-"+((U+"").length-1))),p)}return Fd(d,p)}var ay=$i(function(d,p,C){return p=p.toLowerCase(),d+(C?Cf(p):p)});function Cf(d){return g(on(d).toLowerCase())}function _s(d){return d=on(d),d&&d.replace(Da,Oi).replace(Wi,"")}function go(d,p,C){d=on(d),p=ir(p);var D=d.length;C=C===e?D:ma(kt(C),0,D);var U=C;return C-=p.length,C>=0&&d.slice(C,U)==p}function yo(d){return d=on(d),d&&ad.test(d)?d.replace(Zr,md):d}function qu(d){return d=on(d),d&&Jn.test(d)?d.replace(Dn,"\\$&"):d}var Vu=$i(function(d,p,C){return d+(C?"-":"")+p.toLowerCase()}),xo=$i(function(d,p,C){return d+(C?" ":"")+p.toLowerCase()}),_v=Sr("toLowerCase");function sy(d,p,C){d=on(d),p=kt(p);var D=p?Or(d):0;if(!p||D>=p)return d;var U=(p-D)/2;return xu(us(U),C)+d+xu(Bl(U),C)}function Hu(d,p,C){d=on(d),p=kt(p);var D=p?Or(d):0;return p&&D<p?d+xu(p-D,C):d}function jv(d,p,C){d=on(d),p=kt(p);var D=p?Or(d):0;return p&&D<p?xu(p-D,C)+d:d}function oy(d,p,C){return C||p==null?p=0:p&&(p=+p),qo(on(d).replace(Ea,""),p||0)}function _f(d,p,C){return(C?Ui(d,p,C):p===e)?p=1:p=kt(p),Ph(on(d),p)}function ly(){var d=arguments,p=on(d[0]);return d.length<3?p:p.replace(d[1],d[2])}var Tv=$i(function(d,p,C){return d+(C?"_":"")+p.toLowerCase()});function jf(d,p,C){return C&&typeof C!="number"&&Ui(d,p,C)&&(p=C=e),C=C===e?de:C>>>0,C?(d=on(d),d&&(typeof p=="string"||p!=null&&!yf(p))&&(p=ir(p),!p&&Ir(d))?no(Qi(d),0,C):d.split(p,C)):[]}var Tf=$i(function(d,p,C){return d+(C?" ":"")+g(p)});function cy(d,p,C){return d=on(d),C=C==null?0:ma(kt(C),0,d.length),p=ir(p),d.slice(C,C+p.length)==p}function Gu(d,p,C){var D=J.templateSettings;C&&Ui(d,p,C)&&(p=e),d=on(d),p=vf({},p,D,Gd);var U=vf({},p.imports,D.imports,Gd),Z=si(U),oe=Fl(U,Z),fe,xe,Pe=0,Me=p.interpolate||Pa,ze="__p += '",We=Un((p.escape||Pa).source+"|"+Me.source+"|"+(Me===To?Ls:Pa).source+"|"+(p.evaluate||Pa).source+"|$","g"),st="//# sourceURL="+(mt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Al+"]")+`
`;d.replace(We,function(Nt,Wt,Zt,va,Tr,ba){return Zt||(Zt=va),ze+=d.slice(Pe,ba).replace(na,pd),Wt&&(fe=!0,ze+=`' +
__e(`+Wt+`) +
'`),Tr&&(xe=!0,ze+=`';
`+Tr+`;
__p += '`),Zt&&(ze+=`' +
((__t = (`+Zt+`)) == null ? '' : __t) +
'`),Pe=ba+Nt.length,Nt}),ze+=`';
`;var St=mt.call(p,"variable")&&p.variable;if(!St)ze=`with (obj) {
`+ze+`
}
`;else if(Ao.test(St))throw new _e(h);ze=(xe?ze.replace(nn,""):ze).replace(_a,"$1").replace(ja,"$1;"),ze="function("+(St||"obj")+`) {
`+(St?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var Bt=T(function(){return Oe(Z,st+"return "+ze).apply(e,oe)});if(Bt.source=ze,ai(Bt))throw Bt;return Bt}function Em(d){return on(d).toLowerCase()}function Ef(d){return on(d).toUpperCase()}function uy(d,p,C){if(d=on(d),d&&(C||p===e))return fd(d);if(!d||!(p=ir(p)))return d;var D=Qi(d),U=Qi(p),Z=Js(D,U),oe=vr(D,U)+1;return no(D,Z,oe).join("")}function Ev(d,p,C){if(d=on(d),d&&(C||p===e))return d.slice(0,Vc(d)+1);if(!d||!(p=ir(p)))return d;var D=Qi(d),U=vr(D,Qi(p))+1;return no(D,0,U).join("")}function Af(d,p,C){if(d=on(d),d&&(C||p===e))return d.replace(Ea,"");if(!d||!(p=ir(p)))return d;var D=Qi(d),U=Js(D,Qi(p));return no(D,U).join("")}function a(d,p){var C=M,D=B;if(In(p)){var U="separator"in p?p.separator:U;C="length"in p?kt(p.length):C,D="omission"in p?ir(p.omission):D}d=on(d);var Z=d.length;if(Ir(d)){var oe=Qi(d);Z=oe.length}if(C>=Z)return d;var fe=C-Or(D);if(fe<1)return D;var xe=oe?no(oe,0,fe).join(""):d.slice(0,fe);if(U===e)return xe+D;if(oe&&(fe+=xe.length-fe),yf(U)){if(d.slice(fe).search(U)){var Pe,Me=xe;for(U.global||(U=Un(U.source,on(es.exec(U))+"g")),U.lastIndex=0;Pe=U.exec(Me);)var ze=Pe.index;xe=xe.slice(0,ze===e?fe:ze)}}else if(d.indexOf(ir(U),fe)!=fe){var We=xe.lastIndexOf(U);We>-1&&(xe=xe.slice(0,We))}return xe+D}function o(d){return d=on(d),d&&ea.test(d)?d.replace(Si,vd):d}var u=$i(function(d,p,C){return d+(C?" ":"")+p.toUpperCase()}),g=Sr("toUpperCase");function v(d,p,C){return d=on(d),p=C?e:p,p===e?gd(d)?dh(d):lh(d):d.match(p)||[]}var T=Mt(function(d,p){try{return _i(d,e,p)}catch(C){return ai(C)?C:new _e(C)}}),$=An(function(d,p){return Ji(p,function(C){C=cn(C),ha(d,C,ho(d[C],d))}),d});function Q(d){var p=d==null?0:d.length,C=ut();return d=p?_n(d,function(D){if(typeof D[1]!="function")throw new Ke(c);return[C(D[0]),D[1]]}):[],Mt(function(D){for(var U=-1;++U<p;){var Z=d[U];if(_i(Z[0],this,D))return _i(Z[1],this,D)}})}function le(d){return kp(Ei(d,x))}function we(d){return function(){return d}}function ke(d,p){return d==null||d!==d?p:d}var Re=qa(),Ce=qa(!0);function Se(d){return d}function gt(d){return jh(typeof d=="function"?d:Ei(d,x))}function pt(d){return Eh(Ei(d,x))}function gn(d,p){return Id(d,Ei(p,x))}var ye=Mt(function(d,p){return function(C){return Qo(C,d,p)}}),he=Mt(function(d,p){return function(C){return Qo(d,C,p)}});function be(d,p,C){var D=si(p),U=to(p,D);C==null&&!(In(p)&&(U.length||!D.length))&&(C=p,p=d,d=this,U=to(p,si(p)));var Z=!(In(C)&&"chain"in C)||!!C.chain,oe=ya(d);return Ji(U,function(fe){var xe=p[fe];d[fe]=xe,oe&&(d.prototype[fe]=function(){var Pe=this.__chain__;if(Z||Pe){var Me=d(this.__wrapped__),ze=Me.__actions__=ni(this.__actions__);return ze.push({func:xe,args:arguments,thisArg:d}),Me.__chain__=Pe,Me}return xe.apply(d,sa([this.value()],arguments))})}),d}function De(){return vn._===this&&(vn._=ln),this}function et(){}function Ut(d){return d=kt(d),Mt(function(p){return Ah(p,d)})}var ot=yu(_n),yt=yu($c),pi=yu(Bc);function Xt(d){return Xd(d)?zo(cn(d)):Op(d)}function vo(d){return function(p){return d==null?e:Ur(d,p)}}var Av=io(),pT=io(!0);function kv(){return[]}function Dv(){return!1}function gT(){return{}}function yT(){return""}function xT(){return!0}function vT(d,p){if(d=kt(d),d<1||d>re)return[];var C=de,D=Pn(d,de);p=ut(p),d-=de;for(var U=ca(D,p);++C<d;)p(C);return U}function bT(d){return jt(d)?_n(d,cn):Bi(d)?[d]:ni(Ga(on(d)))}function wT(d){var p=++Pt;return on(d)+p}var ST=Kl(function(d,p){return d+p},0),NT=Hd("ceil"),CT=Kl(function(d,p){return d/p},1),_T=Hd("floor");function jT(d){return d&&d.length?pa(d,Se,iu):e}function TT(d,p){return d&&d.length?pa(d,ut(p,2),iu):e}function ET(d){return Il(d,Se)}function AT(d,p){return Il(d,ut(p,2))}function kT(d){return d&&d.length?pa(d,Se,Md):e}function DT(d,p){return d&&d.length?pa(d,ut(p,2),Md):e}var PT=Kl(function(d,p){return d*p},1),RT=Hd("round"),MT=Kl(function(d,p){return d-p},0);function IT(d){return d&&d.length?Ll(d,Se):0}function OT(d,p){return d&&d.length?Ll(d,ut(p,2)):0}return J.after=tv,J.ary=Mg,J.assign=fv,J.assignIn=Qg,J.assignInWith=vf,J.assignWith=hv,J.at=mv,J.before=Pu,J.bind=ho,J.bindAll=$,J.bindKey=uf,J.castArray=av,J.chain=cc,J.chunk=Wx,J.compact=og,J.concat=lg,J.cond=Q,J.conforms=le,J.constant=we,J.countBy=uc,J.create=pv,J.curry=Ru,J.curryRight=df,J.debounce=mo,J.defaults=gv,J.defaultsDeep=Kg,J.defer=Wa,J.delay=Mu,J.difference=Mn,J.differenceBy=ar,J.differenceWith=ws,J.drop=cg,J.dropRight=ug,J.dropRightWhile=Jx,J.dropWhile=Wh,J.fill=Nr,J.filter=Sg,J.flatMap=lm,J.flatMapDeep=Xx,J.flatMapDepth=Zx,J.flatten=sr,J.flattenDeep=dg,J.flattenDepth=so,J.flip=nv,J.flow=Re,J.flowRight=Ce,J.fromPairs=rl,J.functions=Zg,J.functionsIn=bf,J.groupBy=_g,J.initial=Kh,J.intersection=Ya,J.intersectionBy=fg,J.intersectionWith=tc,J.invert=ey,J.invertBy=ty,J.invokeMap=of,J.iteratee=gt,J.keyBy=jg,J.keys=si,J.keysIn=mi,J.map=Du,J.mapKeys=vv,J.mapValues=bv,J.matches=pt,J.matchesProperty=gn,J.memoize=Iu,J.merge=wv,J.mergeWith=Bu,J.method=ye,J.methodOf=he,J.mixin=be,J.negate=Ou,J.nthArg=Ut,J.omit=wf,J.omitBy=wm,J.once=Ig,J.orderBy=Tg,J.over=ot,J.overArgs=Og,J.overEvery=yt,J.overSome=pi,J.partial=dm,J.partialRight=ff,J.partition=Eg,J.pick=Sv,J.pickBy=yc,J.property=Xt,J.propertyOf=vo,J.pull=mg,J.pullAll=ic,J.pullAllBy=pg,J.pullAllWith=af,J.pullAt=gg,J.range=Av,J.rangeRight=pT,J.rearg=Lg,J.reject=lf,J.remove=Qx,J.rest=Fg,J.reverse=Xh,J.sampleSize=Pg,J.set=ny,J.setWith=iy,J.shuffle=Sn,J.slice=dn,J.sortBy=Rg,J.sortedUniq=rc,J.sortedUniqBy=Zh,J.split=jf,J.spread=iv,J.tail=Ns,J.take=Vn,J.takeRight=lo,J.takeRightWhile=al,J.takeWhile=em,J.tap=am,J.throttle=fm,J.thru=Di,J.toArray=jr,J.toPairs=Sm,J.toPairsIn=Nm,J.toPath=bT,J.toPlainObject=Jg,J.transform=Cm,J.unary=hm,J.union=Vr,J.unionBy=ac,J.unionWith=Au,J.uniq=or,J.uniqBy=tm,J.uniqWith=nm,J.unset=ry,J.unzip=sc,J.unzipWith=ku,J.update=Sf,J.updateWith=Cv,J.values=xc,J.valuesIn=_m,J.without=co,J.words=v,J.wrap=rv,J.xor=bi,J.xorBy=uo,J.xorWith=oc,J.zip=lc,J.zipObject=im,J.zipObjectDeep=rm,J.zipWith=yg,J.entries=Sm,J.entriesIn=Nm,J.extend=Qg,J.extendWith=vf,be(J,J),J.add=ST,J.attempt=T,J.camelCase=ay,J.capitalize=Cf,J.ceil=NT,J.clamp=jm,J.clone=Lu,J.cloneDeep=zg,J.cloneDeepWith=Vt,J.cloneWith=sv,J.conformsTo=mm,J.deburr=_s,J.defaultTo=ke,J.divide=CT,J.endsWith=go,J.eq=lr,J.escape=yo,J.escapeRegExp=qu,J.every=wg,J.find=Ng,J.findIndex=qr,J.findKey=mc,J.findLast=om,J.findLastIndex=Jh,J.findLastKey=zu,J.floor=_T,J.forEach=Cg,J.forEachRight=cm,J.forIn=Xg,J.forInRight=yv,J.forOwn=pc,J.forOwnRight=$u,J.get=Uu,J.gt=pm,J.gte=$g,J.has=bm,J.hasIn=gc,J.head=Ss,J.identity=Se,J.includes=dc,J.indexOf=Qh,J.inRange=Nf,J.invoke=xv,J.isArguments=Cs,J.isArray=jt,J.isArrayBuffer=hf,J.isArrayLike=ri,J.isArrayLikeObject=Hn,J.isBoolean=ov,J.isBuffer=po,J.isDate=Ug,J.isElement=Bg,J.isEmpty=mf,J.isEqual=pn,J.isEqualWith=gm,J.isError=ai,J.isFinite=lv,J.isFunction=ya,J.isInteger=pf,J.isLength=sl,J.isMap=gf,J.isMatch=ym,J.isMatchWith=cv,J.isNaN=qg,J.isNative=uv,J.isNil=dv,J.isNull=Vg,J.isNumber=Hg,J.isObject=In,J.isObjectLike=Ln,J.isPlainObject=Hr,J.isRegExp=yf,J.isSafeInteger=xm,J.isSet=Gg,J.isString=xf,J.isSymbol=Bi,J.isTypedArray=fc,J.isUndefined=xa,J.isWeakMap=vm,J.isWeakSet=Yg,J.join=Eu,J.kebabCase=Vu,J.last=ki,J.lastIndexOf=nc,J.lowerCase=xo,J.lowerFirst=_v,J.lt=Wg,J.lte=Fu,J.max=jT,J.maxBy=TT,J.mean=ET,J.meanBy=AT,J.min=kT,J.minBy=DT,J.stubArray=kv,J.stubFalse=Dv,J.stubObject=gT,J.stubString=yT,J.stubTrue=xT,J.multiply=PT,J.nth=hg,J.noConflict=De,J.noop=et,J.now=cf,J.pad=sy,J.padEnd=Hu,J.padStart=jv,J.parseInt=oy,J.random=Tm,J.reduce=Ag,J.reduceRight=kg,J.repeat=_f,J.replace=ly,J.result=Nv,J.round=RT,J.runInContext=O,J.sample=Dg,J.size=um,J.snakeCase=Tv,J.some=ev,J.sortedIndex=jn,J.sortedIndexBy=qt,J.sortedIndexOf=Kt,J.sortedLastIndex=fn,J.sortedLastIndexBy=Cr,J.sortedLastIndexOf=oo,J.startCase=Tf,J.startsWith=cy,J.subtract=MT,J.sum=IT,J.sumBy=OT,J.template=Gu,J.times=vT,J.toFinite=Ja,J.toInteger=kt,J.toLength=Qa,J.toLower=Em,J.toNumber=Gr,J.toSafeInteger=hc,J.toString=on,J.toUpper=Ef,J.trim=uy,J.trimEnd=Ev,J.trimStart=Af,J.truncate=a,J.unescape=o,J.uniqueId=wT,J.upperCase=u,J.upperFirst=g,J.each=Cg,J.eachRight=cm,J.first=Ss,be(J,function(){var d={};return Ai(J,function(p,C){mt.call(J.prototype,C)||(d[C]=p)}),d}(),{chain:!1}),J.VERSION=i,Ji(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){J[d].placeholder=J}),Ji(["drop","take"],function(d,p){$t.prototype[d]=function(C){C=C===e?1:En(kt(C),0);var D=this.__filtered__&&!p?new $t(this):this.clone();return D.__filtered__?D.__takeCount__=Pn(C,D.__takeCount__):D.__views__.push({size:Pn(C,de),type:d+(D.__dir__<0?"Right":"")}),D},$t.prototype[d+"Right"]=function(C){return this.reverse()[d](C).reverse()}}),Ji(["filter","map","takeWhile"],function(d,p){var C=p+1,D=C==te||C==X;$t.prototype[d]=function(U){var Z=this.clone();return Z.__iteratees__.push({iteratee:ut(U,3),type:C}),Z.__filtered__=Z.__filtered__||D,Z}}),Ji(["head","last"],function(d,p){var C="take"+(p?"Right":"");$t.prototype[d]=function(){return this[C](1).value()[0]}}),Ji(["initial","tail"],function(d,p){var C="drop"+(p?"":"Right");$t.prototype[d]=function(){return this.__filtered__?new $t(this):this[C](1)}}),$t.prototype.compact=function(){return this.filter(Se)},$t.prototype.find=function(d){return this.filter(d).head()},$t.prototype.findLast=function(d){return this.reverse().find(d)},$t.prototype.invokeMap=Mt(function(d,p){return typeof d=="function"?new $t(this):this.map(function(C){return Qo(C,d,p)})}),$t.prototype.reject=function(d){return this.filter(Ou(ut(d)))},$t.prototype.slice=function(d,p){d=kt(d);var C=this;return C.__filtered__&&(d>0||p<0)?new $t(C):(d<0?C=C.takeRight(-d):d&&(C=C.drop(d)),p!==e&&(p=kt(p),C=p<0?C.dropRight(-p):C.take(p-d)),C)},$t.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},$t.prototype.toArray=function(){return this.take(de)},Ai($t.prototype,function(d,p){var C=/^(?:filter|find|map|reject)|While$/.test(p),D=/^(?:head|last)$/.test(p),U=J[D?"take"+(p=="last"?"Right":""):p],Z=D||/^find/.test(p);U&&(J.prototype[p]=function(){var oe=this.__wrapped__,fe=D?[1]:arguments,xe=oe instanceof $t,Pe=fe[0],Me=xe||jt(oe),ze=function(Wt){var Zt=U.apply(J,sa([Wt],fe));return D&&We?Zt[0]:Zt};Me&&C&&typeof Pe=="function"&&Pe.length!=1&&(xe=Me=!1);var We=this.__chain__,st=!!this.__actions__.length,St=Z&&!We,Bt=xe&&!st;if(!Z&&Me){oe=Bt?oe:new $t(this);var Nt=d.apply(oe,fe);return Nt.__actions__.push({func:Di,args:[ze],thisArg:e}),new er(Nt,We)}return St&&Bt?d.apply(this,fe):(Nt=this.thru(ze),St?D?Nt.value()[0]:Nt.value():Nt)})}),Ji(["pop","push","shift","sort","splice","unshift"],function(d){var p=Ue[d],C=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",D=/^(?:pop|shift)$/.test(d);J.prototype[d]=function(){var U=arguments;if(D&&!this.__chain__){var Z=this.value();return p.apply(jt(Z)?Z:[],U)}return this[C](function(oe){return p.apply(jt(oe)?oe:[],U)})}}),Ai($t.prototype,function(d,p){var C=J[p];if(C){var D=C.name+"";mt.call(zr,D)||(zr[D]=[]),zr[D].push({name:p,func:C})}}),zr[qn(e,k).name]=[{name:"wrapper",func:e}],$t.prototype.clone=Xc,$t.prototype.reverse=Cd,$t.prototype.value=Ho,J.prototype.at=xg,J.prototype.chain=_r,J.prototype.commit=vg,J.prototype.next=bg,J.prototype.plant=fo,J.prototype.reverse=sf,J.prototype.toJSON=J.prototype.valueOf=J.prototype.value=sm,J.prototype.first=J.prototype.head,Uo&&(J.prototype[Uo]=Kx),J},ua=cs();Rr?((Rr.exports=ua)._=ua,as._=ua):vn._=ua}).call(iz)}(Gm,Gm.exports)),Gm.exports}var P_=rz();class az{constructor(n){Fn(this,"sampleRate",24e3);Fn(this,"bufferSize",7680);Fn(this,"audioQueue",[]);Fn(this,"isPlaying",!1);Fn(this,"isStreamComplete",!1);Fn(this,"checkInterval",null);Fn(this,"scheduledTime",0);Fn(this,"initialBufferTime",.1);Fn(this,"gainNode");Fn(this,"source");Fn(this,"endOfQueueAudioSource",null);Fn(this,"onComplete",()=>{});this.context=n,this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}async addWorklet(n,e,i){let s=_y.get(this.context);if(s&&s[n])return s[n].handlers.push(i),Promise.resolve(this);s||(_y.set(this.context,{}),s=_y.get(this.context)),s[n]={handlers:[i]};const l=Qb(n,e);await this.context.audioWorklet.addModule(l);const c=new AudioWorkletNode(this.context,n);return s[n].node=c,this}_processPCM16Chunk(n){const e=new Float32Array(n.length/2),i=new DataView(n.buffer);for(let s=0;s<n.length/2;s++)try{const l=i.getInt16(s*2,!0);e[s]=l/32768}catch(l){console.error(l)}return e}addPCM16(n){this.isStreamComplete=!1;let e=this._processPCM16Chunk(n);for(;e.length>=this.bufferSize;){const i=e.slice(0,this.bufferSize);this.audioQueue.push(i),e=e.slice(this.bufferSize)}e.length>0&&this.audioQueue.push(e),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(n){const e=this.context.createBuffer(1,n.length,this.sampleRate);return e.getChannelData(0).set(n),e}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){const e=this.audioQueue.shift(),i=this.createAudioBuffer(e),s=this.context.createBufferSource();this.audioQueue.length===0&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=s,s.onended=()=>{!this.audioQueue.length&&this.endOfQueueAudioSource===s&&(this.endOfQueueAudioSource=null,this.onComplete())}),s.buffer=i,s.connect(this.gainNode);const l=_y.get(this.context);l&&Object.entries(l).forEach(([,h])=>{const{node:m,handlers:f}=h;m&&(s.connect(m),m.port.onmessage=function(y){f.forEach(x=>{x.call(m.port,y)})},m.connect(this.context.destination))});const c=Math.max(this.scheduledTime,this.context.currentTime);s.start(c),this.scheduledTime=c+i.duration}if(this.audioQueue.length===0)this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100));else{const e=(this.scheduledTime-this.context.currentTime)*1e3;setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,e-50))}}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){this.context.state==="suspended"&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}}function R_(t,n){return function(){return t.apply(n,arguments)}}const{toString:sz}=Object.prototype,{getPrototypeOf:U0}=Object,Dx=(t=>n=>{const e=sz.call(n);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),Ms=t=>(t=t.toLowerCase(),n=>Dx(n)===t),Px=t=>n=>typeof n===t,{isArray:th}=Array,ap=Px("undefined");function oz(t){return t!==null&&!ap(t)&&t.constructor!==null&&!ap(t.constructor)&&Na(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const M_=Ms("ArrayBuffer");function lz(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&M_(t.buffer),n}const cz=Px("string"),Na=Px("function"),I_=Px("number"),Rx=t=>t!==null&&typeof t=="object",uz=t=>t===!0||t===!1,Uy=t=>{if(Dx(t)!=="object")return!1;const n=U0(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},dz=Ms("Date"),fz=Ms("File"),hz=Ms("Blob"),mz=Ms("FileList"),pz=t=>Rx(t)&&Na(t.pipe),gz=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Na(t.append)&&((n=Dx(t))==="formdata"||n==="object"&&Na(t.toString)&&t.toString()==="[object FormData]"))},yz=Ms("URLSearchParams"),[xz,vz,bz,wz]=["ReadableStream","Request","Response","Headers"].map(Ms),Sz=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mp(t,n,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),th(t))for(i=0,s=t.length;i<s;i++)n.call(null,t[i],i,t);else{const l=e?Object.getOwnPropertyNames(t):Object.keys(t),c=l.length;let h;for(i=0;i<c;i++)h=l[i],n.call(null,t[h],h,t)}}function O_(t,n){n=n.toLowerCase();const e=Object.keys(t);let i=e.length,s;for(;i-- >0;)if(s=e[i],n===s.toLowerCase())return s;return null}const Qu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L_=t=>!ap(t)&&t!==Qu;function Kb(){const{caseless:t}=L_(this)&&this||{},n={},e=(i,s)=>{const l=t&&O_(n,s)||s;Uy(n[l])&&Uy(i)?n[l]=Kb(n[l],i):Uy(i)?n[l]=Kb({},i):th(i)?n[l]=i.slice():n[l]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&mp(arguments[i],e);return n}const Nz=(t,n,e,{allOwnKeys:i}={})=>(mp(n,(s,l)=>{e&&Na(s)?t[l]=R_(s,e):t[l]=s},{allOwnKeys:i}),t),Cz=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_z=(t,n,e,i)=>{t.prototype=Object.create(n.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),e&&Object.assign(t.prototype,e)},jz=(t,n,e,i)=>{let s,l,c;const h={};if(n=n||{},t==null)return n;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)c=s[l],(!i||i(c,t,n))&&!h[c]&&(n[c]=t[c],h[c]=!0);t=e!==!1&&U0(t)}while(t&&(!e||e(t,n))&&t!==Object.prototype);return n},Tz=(t,n,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=n.length;const i=t.indexOf(n,e);return i!==-1&&i===e},Ez=t=>{if(!t)return null;if(th(t))return t;let n=t.length;if(!I_(n))return null;const e=new Array(n);for(;n-- >0;)e[n]=t[n];return e},Az=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&U0(Uint8Array)),kz=(t,n)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const l=s.value;n.call(t,l[0],l[1])}},Dz=(t,n)=>{let e;const i=[];for(;(e=t.exec(n))!==null;)i.push(e);return i},Pz=Ms("HTMLFormElement"),Rz=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),DS=(({hasOwnProperty:t})=>(n,e)=>t.call(n,e))(Object.prototype),Mz=Ms("RegExp"),F_=(t,n)=>{const e=Object.getOwnPropertyDescriptors(t),i={};mp(e,(s,l)=>{let c;(c=n(s,l,t))!==!1&&(i[l]=c||s)}),Object.defineProperties(t,i)},Iz=t=>{F_(t,(n,e)=>{if(Na(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=t[e];if(Na(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},Oz=(t,n)=>{const e={},i=s=>{s.forEach(l=>{e[l]=!0})};return th(t)?i(t):i(String(t).split(n)),e},Lz=()=>{},Fz=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n;function zz(t){return!!(t&&Na(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const $z=t=>{const n=new Array(10),e=(i,s)=>{if(Rx(i)){if(n.indexOf(i)>=0)return;if(!("toJSON"in i)){n[s]=i;const l=th(i)?[]:{};return mp(i,(c,h)=>{const m=e(c,s+1);!ap(m)&&(l[h]=m)}),n[s]=void 0,l}}return i};return e(t,0)},Uz=Ms("AsyncFunction"),Bz=t=>t&&(Rx(t)||Na(t))&&Na(t.then)&&Na(t.catch),z_=((t,n)=>t?setImmediate:n?((e,i)=>(Qu.addEventListener("message",({source:s,data:l})=>{s===Qu&&l===e&&i.length&&i.shift()()},!1),s=>{i.push(s),Qu.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Na(Qu.postMessage)),qz=typeof queueMicrotask<"u"?queueMicrotask.bind(Qu):typeof process<"u"&&process.nextTick||z_,Ae={isArray:th,isArrayBuffer:M_,isBuffer:oz,isFormData:gz,isArrayBufferView:lz,isString:cz,isNumber:I_,isBoolean:uz,isObject:Rx,isPlainObject:Uy,isReadableStream:xz,isRequest:vz,isResponse:bz,isHeaders:wz,isUndefined:ap,isDate:dz,isFile:fz,isBlob:hz,isRegExp:Mz,isFunction:Na,isStream:pz,isURLSearchParams:yz,isTypedArray:Az,isFileList:mz,forEach:mp,merge:Kb,extend:Nz,trim:Sz,stripBOM:Cz,inherits:_z,toFlatObject:jz,kindOf:Dx,kindOfTest:Ms,endsWith:Tz,toArray:Ez,forEachEntry:kz,matchAll:Dz,isHTMLForm:Pz,hasOwnProperty:DS,hasOwnProp:DS,reduceDescriptors:F_,freezeMethods:Iz,toObjectSet:Oz,toCamelCase:Rz,noop:Lz,toFiniteNumber:Fz,findKey:O_,global:Qu,isContextDefined:L_,isSpecCompliantForm:zz,toJSONObject:$z,isAsyncFn:Uz,isThenable:Bz,setImmediate:z_,asap:qz};function Ot(t,n,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Ae.inherits(Ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ae.toJSONObject(this.config),code:this.code,status:this.status}}});const $_=Ot.prototype,U_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{U_[t]={value:t}});Object.defineProperties(Ot,U_);Object.defineProperty($_,"isAxiosError",{value:!0});Ot.from=(t,n,e,i,s,l)=>{const c=Object.create($_);return Ae.toFlatObject(t,c,function(m){return m!==Error.prototype},h=>h!=="isAxiosError"),Ot.call(c,t.message,n,e,i,s),c.cause=t,c.name=t.name,l&&Object.assign(c,l),c};const Vz=null;function Xb(t){return Ae.isPlainObject(t)||Ae.isArray(t)}function B_(t){return Ae.endsWith(t,"[]")?t.slice(0,-2):t}function PS(t,n,e){return t?t.concat(n).map(function(s,l){return s=B_(s),!e&&l?"["+s+"]":s}).join(e?".":""):n}function Hz(t){return Ae.isArray(t)&&!t.some(Xb)}const Gz=Ae.toFlatObject(Ae,{},null,function(n){return/^is[A-Z]/.test(n)});function Mx(t,n,e){if(!Ae.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,e=Ae.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,A){return!Ae.isUndefined(A[E])});const i=e.metaTokens,s=e.visitor||y,l=e.dots,c=e.indexes,m=(e.Blob||typeof Blob<"u"&&Blob)&&Ae.isSpecCompliantForm(n);if(!Ae.isFunction(s))throw new TypeError("visitor must be a function");function f(j){if(j===null)return"";if(Ae.isDate(j))return j.toISOString();if(!m&&Ae.isBlob(j))throw new Ot("Blob is not supported. Use a Buffer instead.");return Ae.isArrayBuffer(j)||Ae.isTypedArray(j)?m&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function y(j,E,A){let k=j;if(j&&!A&&typeof j=="object"){if(Ae.endsWith(E,"{}"))E=i?E:E.slice(0,-2),j=JSON.stringify(j);else if(Ae.isArray(j)&&Hz(j)||(Ae.isFileList(j)||Ae.endsWith(E,"[]"))&&(k=Ae.toArray(j)))return E=B_(E),k.forEach(function(R,Y){!(Ae.isUndefined(R)||R===null)&&n.append(c===!0?PS([E],Y,l):c===null?E:E+"[]",f(R))}),!1}return Xb(j)?!0:(n.append(PS(A,E,l),f(j)),!1)}const x=[],S=Object.assign(Gz,{defaultVisitor:y,convertValue:f,isVisitable:Xb});function w(j,E){if(!Ae.isUndefined(j)){if(x.indexOf(j)!==-1)throw Error("Circular reference detected in "+E.join("."));x.push(j),Ae.forEach(j,function(k,P){(!(Ae.isUndefined(k)||k===null)&&s.call(n,k,Ae.isString(P)?P.trim():P,E,S))===!0&&w(k,E?E.concat(P):[P])}),x.pop()}}if(!Ae.isObject(t))throw new TypeError("data must be an object");return w(t),n}function RS(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function B0(t,n){this._pairs=[],t&&Mx(t,this,n)}const q_=B0.prototype;q_.append=function(n,e){this._pairs.push([n,e])};q_.toString=function(n){const e=n?function(i){return n.call(this,i,RS)}:RS;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function Yz(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function V_(t,n,e){if(!n)return t;const i=e&&e.encode||Yz;Ae.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let l;if(s?l=s(n,e):l=Ae.isURLSearchParams(n)?n.toString():new B0(n,e).toString(i),l){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class MS{constructor(){this.handlers=[]}use(n,e,i){return this.handlers.push({fulfilled:n,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Ae.forEach(this.handlers,function(i){i!==null&&n(i)})}}const H_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wz=typeof URLSearchParams<"u"?URLSearchParams:B0,Jz=typeof FormData<"u"?FormData:null,Qz=typeof Blob<"u"?Blob:null,Kz={isBrowser:!0,classes:{URLSearchParams:Wz,FormData:Jz,Blob:Qz},protocols:["http","https","file","blob","url","data"]},q0=typeof window<"u"&&typeof document<"u",Zb=typeof navigator=="object"&&navigator||void 0,Xz=q0&&(!Zb||["ReactNative","NativeScript","NS"].indexOf(Zb.product)<0),Zz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",e$=q0&&window.location.href||"http://localhost",t$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:q0,hasStandardBrowserEnv:Xz,hasStandardBrowserWebWorkerEnv:Zz,navigator:Zb,origin:e$},Symbol.toStringTag,{value:"Module"})),fr={...t$,...Kz};function n$(t,n){return Mx(t,new fr.classes.URLSearchParams,Object.assign({visitor:function(e,i,s,l){return fr.isNode&&Ae.isBuffer(e)?(this.append(i,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},n))}function i$(t){return Ae.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function r$(t){const n={},e=Object.keys(t);let i;const s=e.length;let l;for(i=0;i<s;i++)l=e[i],n[l]=t[l];return n}function G_(t){function n(e,i,s,l){let c=e[l++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),m=l>=e.length;return c=!c&&Ae.isArray(s)?s.length:c,m?(Ae.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!h):((!s[c]||!Ae.isObject(s[c]))&&(s[c]=[]),n(e,i,s[c],l)&&Ae.isArray(s[c])&&(s[c]=r$(s[c])),!h)}if(Ae.isFormData(t)&&Ae.isFunction(t.entries)){const e={};return Ae.forEachEntry(t,(i,s)=>{n(i$(i),s,e,0)}),e}return null}function a$(t,n,e){if(Ae.isString(t))try{return(n||JSON.parse)(t),Ae.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(t)}const pp={transitional:H_,adapter:["xhr","http","fetch"],transformRequest:[function(n,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,l=Ae.isObject(n);if(l&&Ae.isHTMLForm(n)&&(n=new FormData(n)),Ae.isFormData(n))return s?JSON.stringify(G_(n)):n;if(Ae.isArrayBuffer(n)||Ae.isBuffer(n)||Ae.isStream(n)||Ae.isFile(n)||Ae.isBlob(n)||Ae.isReadableStream(n))return n;if(Ae.isArrayBufferView(n))return n.buffer;if(Ae.isURLSearchParams(n))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return n$(n,this.formSerializer).toString();if((h=Ae.isFileList(n))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Mx(h?{"files[]":n}:n,m&&new m,this.formSerializer)}}return l||s?(e.setContentType("application/json",!1),a$(n)):n}],transformResponse:[function(n){const e=this.transitional||pp.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(Ae.isResponse(n)||Ae.isReadableStream(n))return n;if(n&&Ae.isString(n)&&(i&&!this.responseType||s)){const c=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(n)}catch(h){if(c)throw h.name==="SyntaxError"?Ot.from(h,Ot.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ae.forEach(["delete","get","head","post","put","patch"],t=>{pp.headers[t]={}});const s$=Ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),o$=t=>{const n={};let e,i,s;return t&&t.split(`
`).forEach(function(c){s=c.indexOf(":"),e=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!e||n[e]&&s$[e])&&(e==="set-cookie"?n[e]?n[e].push(i):n[e]=[i]:n[e]=n[e]?n[e]+", "+i:i)}),n},IS=Symbol("internals");function Fm(t){return t&&String(t).trim().toLowerCase()}function By(t){return t===!1||t==null?t:Ae.isArray(t)?t.map(By):String(t)}function l$(t){const n=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(t);)n[i[1]]=i[2];return n}const c$=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ib(t,n,e,i,s){if(Ae.isFunction(i))return i.call(this,n,e);if(s&&(n=e),!!Ae.isString(n)){if(Ae.isString(i))return n.indexOf(i)!==-1;if(Ae.isRegExp(i))return i.test(n)}}function u$(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,e,i)=>e.toUpperCase()+i)}function d$(t,n){const e=Ae.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+e,{value:function(s,l,c){return this[i].call(this,n,s,l,c)},configurable:!0})})}let Jr=class{constructor(n){n&&this.set(n)}set(n,e,i){const s=this;function l(h,m,f){const y=Fm(m);if(!y)throw new Error("header name must be a non-empty string");const x=Ae.findKey(s,y);(!x||s[x]===void 0||f===!0||f===void 0&&s[x]!==!1)&&(s[x||m]=By(h))}const c=(h,m)=>Ae.forEach(h,(f,y)=>l(f,y,m));if(Ae.isPlainObject(n)||n instanceof this.constructor)c(n,e);else if(Ae.isString(n)&&(n=n.trim())&&!c$(n))c(o$(n),e);else if(Ae.isHeaders(n))for(const[h,m]of n.entries())l(m,h,i);else n!=null&&l(e,n,i);return this}get(n,e){if(n=Fm(n),n){const i=Ae.findKey(this,n);if(i){const s=this[i];if(!e)return s;if(e===!0)return l$(s);if(Ae.isFunction(e))return e.call(this,s,i);if(Ae.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,e){if(n=Fm(n),n){const i=Ae.findKey(this,n);return!!(i&&this[i]!==void 0&&(!e||ib(this,this[i],i,e)))}return!1}delete(n,e){const i=this;let s=!1;function l(c){if(c=Fm(c),c){const h=Ae.findKey(i,c);h&&(!e||ib(i,i[h],h,e))&&(delete i[h],s=!0)}}return Ae.isArray(n)?n.forEach(l):l(n),s}clear(n){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const l=e[i];(!n||ib(this,this[l],l,n,!0))&&(delete this[l],s=!0)}return s}normalize(n){const e=this,i={};return Ae.forEach(this,(s,l)=>{const c=Ae.findKey(i,l);if(c){e[c]=By(s),delete e[l];return}const h=n?u$(l):String(l).trim();h!==l&&delete e[l],e[h]=By(s),i[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const e=Object.create(null);return Ae.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=n&&Ae.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,e])=>n+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...e){const i=new this(n);return e.forEach(s=>i.set(s)),i}static accessor(n){const i=(this[IS]=this[IS]={accessors:{}}).accessors,s=this.prototype;function l(c){const h=Fm(c);i[h]||(d$(s,c),i[h]=!0)}return Ae.isArray(n)?n.forEach(l):l(n),this}};Jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ae.reduceDescriptors(Jr.prototype,({value:t},n)=>{let e=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(i){this[e]=i}}});Ae.freezeMethods(Jr);function rb(t,n){const e=this||pp,i=n||e,s=Jr.from(i.headers);let l=i.data;return Ae.forEach(t,function(h){l=h.call(e,l,s.normalize(),n?n.status:void 0)}),s.normalize(),l}function Y_(t){return!!(t&&t.__CANCEL__)}function nh(t,n,e){Ot.call(this,t??"canceled",Ot.ERR_CANCELED,n,e),this.name="CanceledError"}Ae.inherits(nh,Ot,{__CANCEL__:!0});function W_(t,n,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?t(e):n(new Ot("Request failed with status code "+e.status,[Ot.ERR_BAD_REQUEST,Ot.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function f$(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function h$(t,n){t=t||10;const e=new Array(t),i=new Array(t);let s=0,l=0,c;return n=n!==void 0?n:1e3,function(m){const f=Date.now(),y=i[l];c||(c=f),e[s]=m,i[s]=f;let x=l,S=0;for(;x!==s;)S+=e[x++],x=x%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),f-c<n)return;const w=y&&f-y;return w?Math.round(S*1e3/w):void 0}}function m$(t,n){let e=0,i=1e3/n,s,l;const c=(f,y=Date.now())=>{e=y,s=null,l&&(clearTimeout(l),l=null),t.apply(null,f)};return[(...f)=>{const y=Date.now(),x=y-e;x>=i?c(f,y):(s=f,l||(l=setTimeout(()=>{l=null,c(s)},i-x)))},()=>s&&c(s)]}const ux=(t,n,e=3)=>{let i=0;const s=h$(50,250);return m$(l=>{const c=l.loaded,h=l.lengthComputable?l.total:void 0,m=c-i,f=s(m),y=c<=h;i=c;const x={loaded:c,total:h,progress:h?c/h:void 0,bytes:m,rate:f||void 0,estimated:f&&h&&y?(h-c)/f:void 0,event:l,lengthComputable:h!=null,[n?"download":"upload"]:!0};t(x)},e)},OS=(t,n)=>{const e=t!=null;return[i=>n[0]({lengthComputable:e,total:t,loaded:i}),n[1]]},LS=t=>(...n)=>Ae.asap(()=>t(...n)),p$=fr.hasStandardBrowserEnv?((t,n)=>e=>(e=new URL(e,fr.origin),t.protocol===e.protocol&&t.host===e.host&&(n||t.port===e.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,g$=fr.hasStandardBrowserEnv?{write(t,n,e,i,s,l){const c=[t+"="+encodeURIComponent(n)];Ae.isNumber(e)&&c.push("expires="+new Date(e).toGMTString()),Ae.isString(i)&&c.push("path="+i),Ae.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function y$(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function x$(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function J_(t,n,e){let i=!y$(n);return t&&(i||e==!1)?x$(t,n):n}const FS=t=>t instanceof Jr?{...t}:t;function td(t,n){n=n||{};const e={};function i(f,y,x,S){return Ae.isPlainObject(f)&&Ae.isPlainObject(y)?Ae.merge.call({caseless:S},f,y):Ae.isPlainObject(y)?Ae.merge({},y):Ae.isArray(y)?y.slice():y}function s(f,y,x,S){if(Ae.isUndefined(y)){if(!Ae.isUndefined(f))return i(void 0,f,x,S)}else return i(f,y,x,S)}function l(f,y){if(!Ae.isUndefined(y))return i(void 0,y)}function c(f,y){if(Ae.isUndefined(y)){if(!Ae.isUndefined(f))return i(void 0,f)}else return i(void 0,y)}function h(f,y,x){if(x in n)return i(f,y);if(x in t)return i(void 0,f)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(f,y,x)=>s(FS(f),FS(y),x,!0)};return Ae.forEach(Object.keys(Object.assign({},t,n)),function(y){const x=m[y]||s,S=x(t[y],n[y],y);Ae.isUndefined(S)&&x!==h||(e[y]=S)}),e}const Q_=t=>{const n=td({},t);let{data:e,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:h}=n;n.headers=c=Jr.from(c),n.url=V_(J_(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let m;if(Ae.isFormData(e)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[f,...y]=m?m.split(";").map(x=>x.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...y].join("; "))}}if(fr.hasStandardBrowserEnv&&(i&&Ae.isFunction(i)&&(i=i(n)),i||i!==!1&&p$(n.url))){const f=s&&l&&g$.read(l);f&&c.set(s,f)}return n},v$=typeof XMLHttpRequest<"u",b$=v$&&function(t){return new Promise(function(e,i){const s=Q_(t);let l=s.data;const c=Jr.from(s.headers).normalize();let{responseType:h,onUploadProgress:m,onDownloadProgress:f}=s,y,x,S,w,j;function E(){w&&w(),j&&j(),s.cancelToken&&s.cancelToken.unsubscribe(y),s.signal&&s.signal.removeEventListener("abort",y)}let A=new XMLHttpRequest;A.open(s.method.toUpperCase(),s.url,!0),A.timeout=s.timeout;function k(){if(!A)return;const R=Jr.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),F={data:!h||h==="text"||h==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:R,config:t,request:A};W_(function(z){e(z),E()},function(z){i(z),E()},F),A=null}"onloadend"in A?A.onloadend=k:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(k)},A.onabort=function(){A&&(i(new Ot("Request aborted",Ot.ECONNABORTED,t,A)),A=null)},A.onerror=function(){i(new Ot("Network Error",Ot.ERR_NETWORK,t,A)),A=null},A.ontimeout=function(){let Y=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||H_;s.timeoutErrorMessage&&(Y=s.timeoutErrorMessage),i(new Ot(Y,F.clarifyTimeoutError?Ot.ETIMEDOUT:Ot.ECONNABORTED,t,A)),A=null},l===void 0&&c.setContentType(null),"setRequestHeader"in A&&Ae.forEach(c.toJSON(),function(Y,F){A.setRequestHeader(F,Y)}),Ae.isUndefined(s.withCredentials)||(A.withCredentials=!!s.withCredentials),h&&h!=="json"&&(A.responseType=s.responseType),f&&([S,j]=ux(f,!0),A.addEventListener("progress",S)),m&&A.upload&&([x,w]=ux(m),A.upload.addEventListener("progress",x),A.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(y=R=>{A&&(i(!R||R.type?new nh(null,t,A):R),A.abort(),A=null)},s.cancelToken&&s.cancelToken.subscribe(y),s.signal&&(s.signal.aborted?y():s.signal.addEventListener("abort",y)));const P=f$(s.url);if(P&&fr.protocols.indexOf(P)===-1){i(new Ot("Unsupported protocol "+P+":",Ot.ERR_BAD_REQUEST,t));return}A.send(l||null)})},w$=(t,n)=>{const{length:e}=t=t?t.filter(Boolean):[];if(n||e){let i=new AbortController,s;const l=function(f){if(!s){s=!0,h();const y=f instanceof Error?f:this.reason;i.abort(y instanceof Ot?y:new nh(y instanceof Error?y.message:y))}};let c=n&&setTimeout(()=>{c=null,l(new Ot(`timeout ${n} of ms exceeded`,Ot.ETIMEDOUT))},n);const h=()=>{t&&(c&&clearTimeout(c),c=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(l):f.removeEventListener("abort",l)}),t=null)};t.forEach(f=>f.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>Ae.asap(h),m}},S$=function*(t,n){let e=t.byteLength;if(e<n){yield t;return}let i=0,s;for(;i<e;)s=i+n,yield t.slice(i,s),i=s},N$=async function*(t,n){for await(const e of C$(t))yield*S$(e,n)},C$=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:e,value:i}=await n.read();if(e)break;yield i}}finally{await n.cancel()}},zS=(t,n,e,i)=>{const s=N$(t,n);let l=0,c,h=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:f,value:y}=await s.next();if(f){h(),m.close();return}let x=y.byteLength;if(e){let S=l+=x;e(S)}m.enqueue(new Uint8Array(y))}catch(f){throw h(f),f}},cancel(m){return h(m),s.return()}},{highWaterMark:2})},Ix=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",K_=Ix&&typeof ReadableStream=="function",_$=Ix&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),X_=(t,...n)=>{try{return!!t(...n)}catch{return!1}},j$=K_&&X_(()=>{let t=!1;const n=new Request(fr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),$S=64*1024,e0=K_&&X_(()=>Ae.isReadableStream(new Response("").body)),dx={stream:e0&&(t=>t.body)};Ix&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!dx[n]&&(dx[n]=Ae.isFunction(t[n])?e=>e[n]():(e,i)=>{throw new Ot(`Response type '${n}' is not supported`,Ot.ERR_NOT_SUPPORT,i)})})})(new Response);const T$=async t=>{if(t==null)return 0;if(Ae.isBlob(t))return t.size;if(Ae.isSpecCompliantForm(t))return(await new Request(fr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ae.isArrayBufferView(t)||Ae.isArrayBuffer(t))return t.byteLength;if(Ae.isURLSearchParams(t)&&(t=t+""),Ae.isString(t))return(await _$(t)).byteLength},E$=async(t,n)=>{const e=Ae.toFiniteNumber(t.getContentLength());return e??T$(n)},A$=Ix&&(async t=>{let{url:n,method:e,data:i,signal:s,cancelToken:l,timeout:c,onDownloadProgress:h,onUploadProgress:m,responseType:f,headers:y,withCredentials:x="same-origin",fetchOptions:S}=Q_(t);f=f?(f+"").toLowerCase():"text";let w=w$([s,l&&l.toAbortSignal()],c),j;const E=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let A;try{if(m&&j$&&e!=="get"&&e!=="head"&&(A=await E$(y,i))!==0){let F=new Request(n,{method:"POST",body:i,duplex:"half"}),q;if(Ae.isFormData(i)&&(q=F.headers.get("content-type"))&&y.setContentType(q),F.body){const[z,L]=OS(A,ux(LS(m)));i=zS(F.body,$S,z,L)}}Ae.isString(x)||(x=x?"include":"omit");const k="credentials"in Request.prototype;j=new Request(n,{...S,signal:w,method:e.toUpperCase(),headers:y.normalize().toJSON(),body:i,duplex:"half",credentials:k?x:void 0});let P=await fetch(j);const R=e0&&(f==="stream"||f==="response");if(e0&&(h||R&&E)){const F={};["status","statusText","headers"].forEach(V=>{F[V]=P[V]});const q=Ae.toFiniteNumber(P.headers.get("content-length")),[z,L]=h&&OS(q,ux(LS(h),!0))||[];P=new Response(zS(P.body,$S,z,()=>{L&&L(),E&&E()}),F)}f=f||"text";let Y=await dx[Ae.findKey(dx,f)||"text"](P,t);return!R&&E&&E(),await new Promise((F,q)=>{W_(F,q,{data:Y,headers:Jr.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:j})})}catch(k){throw E&&E(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new Ot("Network Error",Ot.ERR_NETWORK,t,j),{cause:k.cause||k}):Ot.from(k,k&&k.code,t,j)}}),t0={http:Vz,xhr:b$,fetch:A$};Ae.forEach(t0,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const US=t=>`- ${t}`,k$=t=>Ae.isFunction(t)||t===null||t===!1,Z_={getAdapter:t=>{t=Ae.isArray(t)?t:[t];const{length:n}=t;let e,i;const s={};for(let l=0;l<n;l++){e=t[l];let c;if(i=e,!k$(e)&&(i=t0[(c=String(e)).toLowerCase()],i===void 0))throw new Ot(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+l]=i}if(!i){const l=Object.entries(s).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=n?l.length>1?`since :
`+l.map(US).join(`
`):" "+US(l[0]):"as no adapter specified";throw new Ot("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:t0};function ab(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nh(null,t)}function BS(t){return ab(t),t.headers=Jr.from(t.headers),t.data=rb.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Z_.getAdapter(t.adapter||pp.adapter)(t).then(function(i){return ab(t),i.data=rb.call(t,t.transformResponse,i),i.headers=Jr.from(i.headers),i},function(i){return Y_(i)||(ab(t),i&&i.response&&(i.response.data=rb.call(t,t.transformResponse,i.response),i.response.headers=Jr.from(i.response.headers))),Promise.reject(i)})}const ej="1.8.4",Ox={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Ox[t]=function(i){return typeof i===t||"a"+(n<1?"n ":" ")+t}});const qS={};Ox.transitional=function(n,e,i){function s(l,c){return"[Axios v"+ej+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,h)=>{if(n===!1)throw new Ot(s(c," has been removed"+(e?" in "+e:"")),Ot.ERR_DEPRECATED);return e&&!qS[c]&&(qS[c]=!0,console.warn(s(c," has been deprecated since v"+e+" and will be removed in the near future"))),n?n(l,c,h):!0}};Ox.spelling=function(n){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function D$(t,n,e){if(typeof t!="object")throw new Ot("options must be an object",Ot.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const l=i[s],c=n[l];if(c){const h=t[l],m=h===void 0||c(h,l,t);if(m!==!0)throw new Ot("option "+l+" must be "+m,Ot.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Ot("Unknown option "+l,Ot.ERR_BAD_OPTION)}}const qy={assertOptions:D$,validators:Ox},bo=qy.validators;let Xu=class{constructor(n){this.defaults=n,this.interceptors={request:new MS,response:new MS}}async request(n,e){try{return await this._request(n,e)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(n,e){typeof n=="string"?(e=e||{},e.url=n):e=n||{},e=td(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:l}=e;i!==void 0&&qy.assertOptions(i,{silentJSONParsing:bo.transitional(bo.boolean),forcedJSONParsing:bo.transitional(bo.boolean),clarifyTimeoutError:bo.transitional(bo.boolean)},!1),s!=null&&(Ae.isFunction(s)?e.paramsSerializer={serialize:s}:qy.assertOptions(s,{encode:bo.function,serialize:bo.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),qy.assertOptions(e,{baseUrl:bo.spelling("baseURL"),withXsrfToken:bo.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c=l&&Ae.merge(l.common,l[e.method]);l&&Ae.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),e.headers=Jr.concat(c,l);const h=[];let m=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(e)===!1||(m=m&&E.synchronous,h.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let y,x=0,S;if(!m){const j=[BS.bind(this),void 0];for(j.unshift.apply(j,h),j.push.apply(j,f),S=j.length,y=Promise.resolve(e);x<S;)y=y.then(j[x++],j[x++]);return y}S=h.length;let w=e;for(x=0;x<S;){const j=h[x++],E=h[x++];try{w=j(w)}catch(A){E.call(this,A);break}}try{y=BS.call(this,w)}catch(j){return Promise.reject(j)}for(x=0,S=f.length;x<S;)y=y.then(f[x++],f[x++]);return y}getUri(n){n=td(this.defaults,n);const e=J_(n.baseURL,n.url,n.allowAbsoluteUrls);return V_(e,n.params,n.paramsSerializer)}};Ae.forEach(["delete","get","head","options"],function(n){Xu.prototype[n]=function(e,i){return this.request(td(i||{},{method:n,url:e,data:(i||{}).data}))}});Ae.forEach(["post","put","patch"],function(n){function e(i){return function(l,c,h){return this.request(td(h||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Xu.prototype[n]=e(),Xu.prototype[n+"Form"]=e(!0)});let P$=class tj{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const i=this;this.promise.then(s=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](s);i._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(h=>{i.subscribe(h),l=h}).then(s);return c.cancel=function(){i.unsubscribe(l)},c},n(function(l,c,h){i.reason||(i.reason=new nh(l,c,h),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const e=this._listeners.indexOf(n);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const n=new AbortController,e=i=>{n.abort(i)};return this.subscribe(e),n.signal.unsubscribe=()=>this.unsubscribe(e),n.signal}static source(){let n;return{token:new tj(function(s){n=s}),cancel:n}}};function R$(t){return function(e){return t.apply(null,e)}}function M$(t){return Ae.isObject(t)&&t.isAxiosError===!0}const n0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(n0).forEach(([t,n])=>{n0[n]=t});function nj(t){const n=new Xu(t),e=R_(Xu.prototype.request,n);return Ae.extend(e,Xu.prototype,n,{allOwnKeys:!0}),Ae.extend(e,n,null,{allOwnKeys:!0}),e.create=function(s){return nj(td(t,s))},e}const Wn=nj(pp);Wn.Axios=Xu;Wn.CanceledError=nh;Wn.CancelToken=P$;Wn.isCancel=Y_;Wn.VERSION=ej;Wn.toFormData=Mx;Wn.AxiosError=Ot;Wn.Cancel=Wn.CanceledError;Wn.all=function(n){return Promise.all(n)};Wn.spread=R$;Wn.isAxiosError=M$;Wn.mergeConfig=td;Wn.AxiosHeaders=Jr;Wn.formToJSON=t=>G_(Ae.isHTMLForm(t)?new FormData(t):t);Wn.getAdapter=Z_.getAdapter;Wn.HttpStatusCode=n0;Wn.default=Wn;const{Axios:JH,AxiosError:QH,CanceledError:KH,isCancel:XH,CancelToken:ZH,VERSION:eG,all:tG,Cancel:nG,isAxiosError:iG,spread:rG,toFormData:aG,AxiosHeaders:sG,HttpStatusCode:oG,formToJSON:lG,getAdapter:cG,mergeConfig:uG}=Wn;function I$(){const[t,n]=_.useState(null),[e,i]=_.useState(!1);return _.useEffect(()=>{const h=()=>{i(!1),n(null)};if(t)return t.getTracks().forEach(m=>m.addEventListener("ended",h)),()=>{t.getTracks().forEach(m=>m.removeEventListener("ended",h))}},[t]),{type:"screen",start:async()=>{const h=await navigator.mediaDevices.getDisplayMedia({video:!0});return n(h),i(!0),h},stop:()=>{t&&(t.getTracks().forEach(h=>h.stop()),n(null),i(!1))},isStreaming:e,stream:t}}function O$(){const[t,n]=_.useState(null),[e,i]=_.useState(!1);return _.useEffect(()=>{const h=()=>{i(!1),n(null)};if(t)return t.getTracks().forEach(m=>m.addEventListener("ended",h)),()=>{t.getTracks().forEach(m=>m.removeEventListener("ended",h))}},[t]),{type:"webcam",start:async()=>{const h=await navigator.mediaDevices.getUserMedia({video:!0});return n(h),i(!0),h},stop:()=>{t&&(t.getTracks().forEach(h=>h.stop()),n(null),i(!1))},isStreaming:e,stream:t}}class L$ extends k_{constructor(e){super();Fn(this,"client");Fn(this,"_status","disconnected");Fn(this,"_session",null);Fn(this,"_model",null);Fn(this,"config",null);this.client=new T_(e),this.send=this.send.bind(this),this.onopen=this.onopen.bind(this),this.onerror=this.onerror.bind(this),this.onclose=this.onclose.bind(this),this.onmessage=this.onmessage.bind(this)}get status(){return this._status}get session(){return this._session}get model(){return this._model}getConfig(){return{...this.config}}log(e,i){const s={date:new Date,type:e,message:i};this.emit("log",s)}async connect(e,i){if(this._status==="connected"||this._status==="connecting")return!1;this._status="connecting",this.config=i,this._model=e;const s={onopen:this.onopen,onmessage:this.onmessage,onerror:this.onerror,onclose:this.onclose};try{this._session=await this.client.live.connect({model:e,config:i,callbacks:s})}catch(l){return console.error("Error connecting to GenAI Live:",l),this._status="disconnected",!1}return this._status="connected",!0}disconnect(){var e;return this.session?((e=this.session)==null||e.close(),this._session=null,this._status="disconnected",this.log("client.close","Disconnected"),!0):!1}onopen(){this.log("client.open","Connected"),this.emit("open")}onerror(e){this.log("server.error",e.message),this.emit("error",e)}onclose(e){this.log("server.close",`disconnected ${e.reason?`with reason: ${e.reason}`:""}`),this.emit("close",e)}async onmessage(e){var i;if(e.setupComplete){this.log("server.send","setupComplete"),this.emit("setupcomplete");return}if(e.toolCall){this.log("server.toolCall",e),this.emit("toolcall",e.toolCall);return}if(e.toolCallCancellation){this.log("server.toolCallCancellation",e),this.emit("toolcallcancellation",e.toolCallCancellation);return}if(e.serverContent){const{serverContent:s}=e;if("interrupted"in s){this.log("server.content","interrupted"),this.emit("interrupted");return}if("turnComplete"in s&&(this.log("server.content","turnComplete"),this.emit("turncomplete")),"modelTurn"in s){let l=((i=s.modelTurn)==null?void 0:i.parts)||[];const c=l.filter(y=>{var x;return y.inlineData&&((x=y.inlineData.mimeType)==null?void 0:x.startsWith("audio/pcm"))}),h=c.map(y=>{var x;return(x=y.inlineData)==null?void 0:x.data}),m=P_.difference(l,c);if(h.forEach(y=>{if(y){const x=Q5(y);this.emit("audio",x),this.log("server.audio",`buffer (${x.byteLength})`)}}),!m.length)return;l=m;const f={modelTurn:{parts:l}};this.emit("content",f),this.log("server.content",e)}}else console.log("received unmatched message",e)}sendRealtimeInput(e){var c;let i=!1,s=!1;for(const h of e)if((c=this.session)==null||c.sendRealtimeInput({media:h}),h.mimeType.includes("audio")&&(i=!0),h.mimeType.includes("image")&&(s=!0),i&&s)break;const l=i&&s?"audio + video":i?"audio":s?"video":"unknown";this.log("client.realtimeInput",l)}sendToolResponse(e){var i;e.functionResponses&&e.functionResponses.length&&((i=this.session)==null||i.sendToolResponse({functionResponses:e.functionResponses}),this.log("client.toolResponse",e))}send(e,i=!0){var s;(s=this.session)==null||s.sendClientContent({turns:e,turnComplete:i}),this.log("client.send",{turns:Array.isArray(e)?e:[e],turnComplete:i})}}function F$(t){const n=_.useMemo(()=>new L$(t),[t]),e=_.useRef(null),[i,s]=_.useState("models/gemini-2.5-flash-live-preview"),[l,c]=_.useState({}),[h,m]=_.useState(!1),[f,y]=_.useState(0),[x,S]=_.useState(null);_.useEffect(()=>{e.current||E_({id:"audio-out"}).then(E=>{e.current=new az(E),e.current.addWorklet("vumeter-out",A_,A=>{y(A.data.volume)}).then(()=>{})})},[e]),_.useEffect(()=>{const E=()=>{m(!0)},A=()=>{m(!1)},k=F=>{console.error("error",F)},P=()=>{var F;return(F=e.current)==null?void 0:F.stop()},R=F=>{var q;return(q=e.current)==null?void 0:q.addPCM16(new Uint8Array(F))},Y=F=>{if(console.log("Received content event:",F),F.modelTurn&&F.modelTurn.parts){const q=F.modelTurn.parts.filter(z=>"text"in z&&z.text);if(q.length>0){const z=q.map(L=>L.text).join(" ");S(z),console.log("AI Summary received:",z)}}};return n.on("error",k).on("open",E).on("close",A).on("interrupted",P).on("audio",R).on("content",Y),()=>{n.off("error",k).off("open",E).off("close",A).off("interrupted",P).off("audio",R).off("content",Y).disconnect()}},[n]);const w=_.useCallback(async()=>{if(!l)throw new Error("config has not been set");n.disconnect(),await n.connect(i,l)},[n,l,i]),j=_.useCallback(async()=>{n.disconnect(),m(!1)},[m,n]);return{client:n,config:l,setConfig:c,model:i,setModel:s,connected:h,connect:w,disconnect:j,volume:f,aiSummary:x}}const ij=_.createContext(void 0),V0=({options:t,children:n})=>{const e=F$(t);return r.jsx(ij.Provider,{value:e,children:n})},Pc=()=>{const t=_.useContext(ij);if(!t)throw new Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return t};function z$(){const{config:t,setConfig:n}=Pc(),[e,i]=_.useState({value:"audio",label:"audio"}),s=_.useCallback(l=>{n({...t,responseModalities:[l==="audio"?Ec.AUDIO:Ec.TEXT]})},[t,n]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"response-modality-selector",children:"Response modality"}),r.jsx(u_,{id:"response-modality-selector",className:"react-select",classNamePrefix:"react-select",styles:{},defaultValue:e,options:[{value:"audio",label:"audio"},{value:"text",label:"text"}],onChange:l=>{i(l),l&&(l.value==="audio"||l.value==="text")&&s(l.value)}})]})}const VS=[{value:"Puck",label:"Puck"},{value:"Charon",label:"Charon"},{value:"Kore",label:"Kore"},{value:"Fenrir",label:"Fenrir"},{value:"Aoede",label:"Aoede"}];function $$(){const{config:t,setConfig:n}=Pc();_.useEffect(()=>{var h,m,f;const l=((f=(m=(h=t.speechConfig)==null?void 0:h.voiceConfig)==null?void 0:m.prebuiltVoiceConfig)==null?void 0:f.voiceName)||"Atari02";i({value:l,label:l})},[t]);const[e,i]=_.useState(VS[5]),s=_.useCallback(l=>{n({...t,speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:l}}}})},[t,n]);return r.jsxs("div",{className:"select-group",children:[r.jsx("label",{htmlFor:"voice-selector",children:"Voice"}),r.jsx(u_,{id:"voice-selector",className:"react-select",classNamePrefix:"react-select",styles:{},value:e,defaultValue:e,options:VS,onChange:l=>{i(l),l&&s(l.value)}})]})}function U$(){const[t,n]=_.useState(!1),{config:e,setConfig:i,connected:s}=Pc(),l=_.useMemo(()=>Array.isArray(e.tools)?e.tools.filter(f=>Array.isArray(f.functionDeclarations)).map(f=>f.functionDeclarations).filter(f=>!!f).flat():[],[e]),c=_.useMemo(()=>{var f;return e.systemInstruction?typeof e.systemInstruction=="string"?e.systemInstruction:Array.isArray(e.systemInstruction)?e.systemInstruction.map(y=>typeof y=="string"?y:y.text).join(`
`):typeof e.systemInstruction=="object"&&"parts"in e.systemInstruction&&((f=e.systemInstruction.parts)==null?void 0:f.map(y=>y.text).join(`
`))||"":""},[e]),h=_.useCallback(f=>{const y={...e,systemInstruction:f.target.value};i(y)},[e,i]),m=_.useCallback((f,y)=>{var S;const x={...e,tools:((S=e.tools)==null?void 0:S.map(w=>{const j=w;return Array.isArray(j.functionDeclarations)?{...w,functionDeclarations:j.functionDeclarations.map(E=>E.name===f?{...E,description:y}:E)}:w}))||[]};i(x)},[e,i]);return r.jsxs("div",{className:"settings-dialog",children:[r.jsx("button",{className:"action-button material-symbols-outlined",onClick:()=>n(!t),children:"settings"}),r.jsx("dialog",{className:"dialog",style:{display:t?"block":"none"},children:r.jsxs("div",{className:`dialog-container ${s?"disabled":""}`,children:[s&&r.jsx("div",{className:"connected-indicator",children:r.jsx("p",{children:"These settings can only be applied before connecting and will override other settings."})}),r.jsxs("div",{className:"mode-selectors",children:[r.jsx(z$,{}),r.jsx($$,{})]}),r.jsx("h3",{children:"System Instructions"}),r.jsx("textarea",{className:"system",onChange:h,value:c}),r.jsx("h4",{children:"Function declarations"}),r.jsx("div",{className:"function-declarations",children:r.jsx("div",{className:"fd-rows",children:l.map((f,y)=>{var x;return r.jsxs("div",{className:"fd-row",children:[r.jsx("span",{className:"fd-row-name",children:f.name}),r.jsx("span",{className:"fd-row-args",children:Object.keys(((x=f.parameters)==null?void 0:x.properties)||{}).map((S,w)=>r.jsx("span",{children:S},w))}),r.jsx("input",{className:"fd-row-description",type:"text",defaultValue:f.description,onBlur:S=>m(f.name,S.target.value)},`fd-${f.description}`)]},`function-${y}`)})})})]})})]})}const HS=_.memo(({isStreaming:t,onIcon:n,offIcon:e,start:i,stop:s})=>t?r.jsx("button",{className:"action-button",onClick:s,children:r.jsx("span",{className:"material-symbols-outlined",children:n})}):r.jsx("button",{className:"action-button",onClick:i,children:r.jsx("span",{className:"material-symbols-outlined",children:e})}));function B$({videoRef:t,children:n,onVideoStreamChange:e=()=>{},supportsVideo:i,enableEditingSettings:s}){const l=[O$(),I$()],[c,h]=_.useState(null),[m,f]=l,[y,x]=_.useState(0),[S]=_.useState(()=>new D_),[w,j]=_.useState(!1),E=_.useRef(null),A=_.useRef(null),{client:k,connected:P,connect:R,disconnect:Y,volume:F}=Pc();_.useEffect(()=>{!P&&A.current&&A.current.focus()},[P]),_.useEffect(()=>{document.documentElement.style.setProperty("--volume",`${Math.max(5,Math.min(y*200,8))}px`)},[y]),_.useEffect(()=>{const z=L=>{k.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:L}])};return P&&!w&&S?S.on("data",z).on("volume",x).start():S.stop(),()=>{S.off("data",z).off("volume",x)}},[P,k,w,S]),_.useEffect(()=>{t.current&&(t.current.srcObject=c);let z=-1;function L(){const V=t.current,M=E.current;if(!V||!M)return;const B=M.getContext("2d");if(M.width=V.videoWidth*.25,M.height=V.videoHeight*.25,M.width+M.height>0){B.drawImage(V,0,0,M.width,M.height);const ee=M.toDataURL("image/jpeg",1),ie=ee.slice(ee.indexOf(",")+1,1/0);k.sendRealtimeInput([{mimeType:"image/jpeg",data:ie}])}P&&(z=window.setTimeout(L,1e3/.5))}return P&&c!==null&&requestAnimationFrame(L),()=>{clearTimeout(z)}},[P,c,k,t]);const q=z=>async()=>{if(z){const L=await z.start();h(L),e(L)}else h(null),e(null);l.filter(L=>L!==z).forEach(L=>L.stop())};return r.jsxs("section",{className:"control-tray",children:[r.jsx("canvas",{style:{display:"none"},ref:E}),r.jsxs("nav",{className:_c("actions-nav",{disabled:!P}),children:[r.jsx("button",{className:_c("action-button mic-button",{recording:!w&&P}),onClick:()=>j(!w),children:w?r.jsx("span",{className:"material-symbols-outlined filled",children:"mic_off"}):r.jsx("span",{className:"material-symbols-outlined filled",children:"mic"})}),r.jsx("div",{className:"action-button no-action outlined",children:r.jsx(nz,{volume:F,active:P,hover:!1})}),i&&r.jsxs(r.Fragment,{children:[r.jsx(HS,{isStreaming:f.isStreaming,start:q(f),stop:q(),onIcon:"cancel_presentation",offIcon:"present_to_all"}),r.jsx(HS,{isStreaming:m.isStreaming,start:q(m),stop:q(),onIcon:"videocam_off",offIcon:"videocam"})]}),n]}),r.jsxs("div",{className:_c("connection-container",{connected:P}),children:[r.jsx("div",{className:"connection-button-container",children:r.jsx("button",{ref:A,className:_c("action-button connect-toggle",{connected:P}),onClick:P?Y:R,children:r.jsx("span",{className:"material-symbols-outlined filled",children:P?"pause":"play_arrow"})})}),r.jsx("span",{className:"text-indicator",children:"Streaming"})]}),s?r.jsx(U$,{}):""]})}const GS={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:Yf.OBJECT,properties:{summary:{type:Yf.STRING,description:"The summary of the patient's case."}},required:["summary"]}},q$=({patientData:t,tokenNumber:n})=>{const[e,i]=_.useState(""),{client:s,setConfig:l,setModel:c}=Pc();return _.useEffect(()=>{c("models/gemini-2.5-flash-live-preview"),l({responseModalities:[Ec.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`}]},tools:[{functionDeclarations:[GS]}]})},[l,c]),_.useEffect(()=>{const h=m=>{if(!m.functionCalls)return;const f=m.functionCalls.find(y=>y.name===GS.name);if(f){const y=f.args.summary;i(y)}m.functionCalls.length&&setTimeout(()=>{var y;return s.sendToolResponse({functionResponses:(y=m.functionCalls)==null?void 0:y.map(x=>({response:{output:{success:!0}},id:x.id,name:x.name}))})},200)};return s.on("toolcall",h),()=>{s.off("toolcall",h)}},[s]),_.useEffect(()=>{if(e){const h=encodeURIComponent(e);n?window.location.href=`https://hms.newtons.in/handle-complaint-url?token=${n}&caseDetails=${h}`:window.location.href=`https://hms.newtons.in/dashboard/search-patient?caseDetails=${h}`}},[e,n]),r.jsxs("div",{className:"hospital-reception",children:[r.jsx("h1",{children:"Newtons Ai"}),r.jsx("p",{children:"Newtons Ai"}),n&&r.jsxs("h2",{children:["Token Number: ",n]}),t&&r.jsxs("div",{children:[r.jsx("h2",{children:"Patient Details"}),r.jsx("pre",{children:JSON.stringify(t,null,2)})]}),e&&r.jsxs("div",{children:[r.jsx("h2",{children:"Case Summary (from Tool Call)"}),r.jsx("p",{children:e})]})]})},YS="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes";async function V$(){const t=hC();if(!t)return console.warn("No auth token found, using default Live API key."),YS;try{const e=(await Wn.get("/api/clinics/gemini-api-key",{headers:{Authorization:`Bearer ${t}`}})).data.geminiApiKey;if(e)return e}catch(n){console.error("Failed to fetch clinic-specific Live API key:",n)}return console.warn("Clinic-specific Live API key not found or failed to fetch, using default."),YS}function H$(){const t=_.useRef(null),[n,e]=_.useState(null),[i,s]=_.useState(null);return _.useEffect(()=>{(async()=>{try{const c=await V$();s({apiKey:c})}catch(c){console.error("Error setting Live API options:",c)}})()},[]),i?r.jsx("div",{className:"App",children:r.jsx(V0,{options:i,children:r.jsx(G$,{videoRef:t,setVideoStream:e,videoStream:n})})}):r.jsx("div",{children:"Loading Live API settings..."})}const G$=({videoRef:t,setVideoStream:n,videoStream:e})=>{const[i,s]=_.useState(null),[l,c]=_.useState(null),{connected:h,client:m,connect:f,config:y,model:x}=Pc(),[S,w]=_.useState(""),j=_.useRef(null),[E,A]=_.useState(!1);_.useEffect(()=>{const P=window.matchMedia("(prefers-color-scheme: dark)"),R=Y=>{document.documentElement.setAttribute("data-theme",Y.matches?"dark":"light")};return R(P),P.addEventListener("change",R),()=>P.removeEventListener("change",R)},[]),_.useEffect(()=>{const P=new URLSearchParams(window.location.search),R={};for(const[Y,F]of P.entries())Y==="token_number"?c(F):R[Y]=F;s(R)},[]),_.useEffect(()=>{Object.keys(y).length>0&&x&&f()},[f,y,x]),_.useEffect(()=>{if(h&&i&&!E){const P=JSON.stringify(i,null,2);m.send([{text:P}]),w(""),A(!0)}},[h,i,m,E]),_.useEffect(()=>{i&&w(JSON.stringify(i,null,2))},[i]);const k=()=>{m.send([{text:S}]),w(""),j.current&&(j.current.innerText="")};return r.jsx("div",{className:"streaming-console",children:r.jsxs("main",{children:[r.jsxs("div",{className:"main-app-area",children:[r.jsx(q$,{patientData:i,tokenNumber:l}),r.jsx("video",{className:_c("stream",{hidden:!t.current||!e}),ref:t,autoPlay:!0,playsInline:!0})]}),r.jsx("div",{className:_c("input-container",{disabled:!h}),children:r.jsxs("div",{className:"input-content",children:[r.jsx("textarea",{className:"input-area",ref:j,onKeyDown:P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),P.stopPropagation(),k())},onChange:P=>w(P.target.value),value:S}),r.jsx("span",{className:_c("input-content-placeholder",{hidden:S.length}),children:"Type something..."}),r.jsx("button",{className:"send-button material-symbols-outlined filled",onClick:k,children:"send"})]})}),r.jsx(B$,{videoRef:t,supportsVideo:!0,onVideoStreamChange:n,enableEditingSettings:!0})]})})},Y$="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",W$={apiKey:Y$},J$=({volume:t,active:n})=>{const e=Array.from({length:5},(i,s)=>r.jsx("div",{className:`audio-bar ${n?"active":""}`,style:{height:n?`${Math.min(24,20+t*40*(1+Math.sin(s)*.3))}px`:"8px",animationDelay:`${s*.1}s`}},s));return r.jsx("div",{className:"audio-pulse",children:e})},Q$=_.forwardRef(({videoRef:t,supportsVideo:n,onVideoStreamChange:e,textInput:i,onSubmitTextInput:s},l)=>{var q;const{connected:c,connect:h,disconnect:m,client:f,volume:y}=Pc(),[x,S]=_.useState(!1),[w,j]=_.useState(!1),[E,A]=_.useState(!1),[k]=_.useState(()=>new D_),P=async()=>{c?await m():(await h(),i.trim()&&s())};_.useEffect(()=>{const z=L=>{f.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:L}])};return c&&!x?k.on("data",z).start():k.stop(),()=>{k.off("data",z),k.stop()}},[c,f,x,k]);const R=_.useCallback(async()=>{if(w)F==null||F.getTracks().forEach(z=>z.stop()),e(null),j(!1);else try{const z=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=z),e(z),j(!0)}catch(z){console.error("Error accessing webcam:",z),j(!1)}},[w,e,t]),Y=_.useCallback(async()=>{if(E)F==null||F.getTracks().forEach(z=>z.stop()),e(null),A(!1);else try{const z=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});t.current&&(t.current.srcObject=z),e(z),A(!0)}catch(z){console.error("Error accessing screen share:",z),A(!1)}},[E,e,t]),F=(q=t.current)==null?void 0:q.srcObject;return _.useEffect(()=>()=>{F&&F.getTracks().forEach(z=>z.stop())},[F]),_.useImperativeHandle(l,()=>({handleConnect:P})),r.jsx("div",{className:"live-api-control-tray",children:r.jsxs("div",{className:"live-api-control-tray-inner",children:[r.jsxs("div",{className:"live-api-control-group",children:[r.jsx("button",{onClick:()=>S(!x),disabled:!c,className:`live-api-control-button ${c&&!x?"mic-active":"mic-inactive"}`,"aria-label":x?"Unmute microphone":"Mute microphone",children:x?r.jsx(FA,{className:"w-5 h-5"}):r.jsx(uC,{className:"w-5 h-5"})}),r.jsx("div",{className:"live-api-audio-pulse-container",children:r.jsx(J$,{volume:y,active:c})}),n&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:Y,disabled:!c,className:`live-api-control-button ${E?"video-active":"video-inactive"}`,"aria-label":E?"Stop screen share":"Start screen share",children:r.jsx(UA,{className:"w-5 h-5"})}),r.jsx("button",{onClick:R,disabled:!c,className:`live-api-control-button ${w?"video-active":"video-inactive"}`,"aria-label":w?"Turn off webcam":"Turn on webcam",children:r.jsx(Tk,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"live-api-control-group",children:[r.jsxs("div",{className:"live-api-status-indicator",children:[r.jsx("div",{className:`live-api-status-dot ${c?"connected":"disconnected"}`}),r.jsx("span",{className:"live-api-status-text",children:c?"Streaming":"Disconnected"})]}),r.jsx("button",{onClick:P,className:`live-api-connect-button ${c?"connected":"disconnected"}`,children:c?r.jsxs(r.Fragment,{children:[r.jsx(GA,{className:"w-5 h-5"}),r.jsx("span",{children:"Pause"})]}):r.jsxs(r.Fragment,{children:[r.jsx(XA,{className:"w-5 h-5"}),r.jsx("span",{children:"Start"})]})})]})]})})}),K$=({patientData:t,tokenNumber:n,aiSummary:e})=>r.jsxs("div",{className:"hospital-reception-container",children:[r.jsxs("div",{className:"hospital-reception-logo-section",children:[r.jsx("div",{className:"hospital-reception-logo",children:r.jsx("span",{children:"N"})}),r.jsx("h1",{className:"hospital-reception-title",children:"Newtons AI"}),r.jsx("p",{className:"hospital-reception-subtitle",children:"Intelligent Hospital Reception Assistant"})]}),n&&r.jsxs("div",{className:"hospital-reception-token-card",children:[r.jsx("h2",{className:"hospital-reception-token-title",children:"Token Number"}),r.jsx("p",{className:"hospital-reception-token-number",children:n})]}),t?r.jsxs("div",{className:"hospital-reception-patient-info-card",children:[r.jsx("h3",{className:"hospital-reception-patient-info-title",children:"Patient Information"}),r.jsx("div",{className:"hospital-reception-patient-info-content",children:r.jsx("pre",{className:"hospital-reception-patient-info-pre",children:JSON.stringify(t,null,2)})})]}):r.jsxs("div",{className:"hospital-reception-patient-info-card",children:[r.jsx("h3",{className:"hospital-reception-patient-info-title",children:"New Case"}),r.jsx("p",{className:"hospital-reception-patient-info-pre",children:"No patient data provided. This is a new case."})]}),e&&r.jsxs("div",{className:"hospital-reception-summary-card",children:[r.jsx("h3",{className:"hospital-reception-summary-title",children:"Case Summary"}),r.jsx("p",{className:"hospital-reception-summary-text",children:e})]})]}),WS={name:"case_summary",description:"Writes a summary of the patient's case in English.",parameters:{type:Yf.OBJECT,properties:{summary:{type:Yf.STRING,description:"The summary of the patient's case."}},required:["summary"]}},X$=({onClose:t,patientData:n,tokenNumber:e,onAiSummaryChange:i})=>{const s=_.useRef(null),l=_.useRef(null),[c,h]=_.useState(null),[m,f]=_.useState("hi"),{client:y,connected:x,aiSummary:S,setConfig:w,setModel:j,disconnect:E}=Pc(),[A,k]=_.useState(null),P=_.useMemo(()=>{let F=`Your job is to:

If patient details like name, age, sex, and case information are already provided, automatically understand that it's a repeat visit.

    If it's a repeat visit, warmly receive the patient by asking if their previous problems have resolved or how they are feeling now.

    If any required details (e.g., phone number) are missing even in a repeat visit, collect those missing details.

    If these details are not available (for a new visit), collect the patient's name, age, sex, and phone number.

When pronouncing a phone number, always state each digit individually (e.g., "six three" instead of "sixty-three" or "six billion three").

For every visit, collect the patient's history by asking questions. Once you are confident about the history, you should use the 'case_summary' tool to write the summary of the case in English. After collecting all the information and summarizing the case, you should ask the patient to wait in the reception. You should always speak in Telugu.dont write the telugu words in english`;return n&&(F+=`

Patient Data: ${JSON.stringify(n,null,2)}`),{responseModalities:[Ec.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Aoede"}}},systemInstruction:{parts:[{text:F}]},tools:[{functionDeclarations:[WS]}]}},[n]);_.useEffect(()=>{j("models/gemini-2.5-flash-live-preview"),w(P);const F=setTimeout(()=>{l.current&&!x&&l.current.handleConnect()},2e3);return()=>clearTimeout(F)},[w,j,P,x]),_.useEffect(()=>()=>{x&&E()},[x,E]),_.useEffect(()=>{i(S)},[S,i]),_.useEffect(()=>{const F=q=>{if(q.modelTurn&&q.modelTurn.parts){for(const z of q.modelTurn.parts)if(z.executableCode){const L=z.executableCode.code,V=/summary=["'](.*?)["']/.exec(L);if(V&&V[1]){const M=V[1];k(M),i(M)}}}};return y.on("content",F),()=>{y.off("content",F)}},[y,i]),_.useEffect(()=>{const F=q=>{if(!q.functionCalls)return;const z=q.functionCalls.find(L=>L.name===WS.name);if(z){const L=z.args.summary;i(L)}q.functionCalls.length&&setTimeout(()=>{var L;return y.sendToolResponse({functionResponses:(L=q.functionCalls)==null?void 0:L.map(V=>({response:{output:{success:!0}},id:V.id,name:V.name}))})},200)};return y.on("toolcall",F),()=>{y.off("toolcall",F)}},[y,i]);const R=()=>{m.trim()&&(y.send([{text:m}]),f(""))},Y=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),R())};return r.jsx("div",{className:"live-api-modal-overlay",children:r.jsxs("div",{className:"live-api-modal-content",children:[r.jsxs("div",{className:"live-api-modal-header",children:[r.jsxs("div",{className:"live-api-modal-header-left",children:[r.jsx("div",{className:"live-api-modal-logo",children:r.jsx("span",{children:"N"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"live-api-modal-title",children:"Newtons AI"}),r.jsx("p",{className:"live-api-modal-subtitle",children:"Newtons AI Hospital Assistant"})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:t,className:"live-api-modal-close-button","aria-label":"Close modal",children:r.jsx(Vi,{className:"w-6 h-6"})})})]}),r.jsx("div",{className:"live-api-modal-main-content",children:r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsxs("div",{className:"live-api-reception-area",children:[r.jsx(K$,{patientData:n,tokenNumber:e,aiSummary:A??S}),c&&r.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,className:"live-api-video-stream"})]}),r.jsx("div",{className:"live-api-input-area",children:r.jsxs("div",{className:"live-api-input-container",children:[r.jsx("textarea",{value:m,onChange:F=>f(F.target.value),onKeyDown:Y,placeholder:"Type your message here...",disabled:!x,rows:1,className:"live-api-textarea"}),r.jsx("button",{onClick:R,disabled:!x||!m.trim(),className:"live-api-send-button","aria-label":"Send message",children:r.jsx(ak,{className:"w-5 h-5"})})]})}),r.jsx(Q$,{ref:l,videoRef:s,supportsVideo:!0,onVideoStreamChange:h,textInput:m,onSubmitTextInput:R})]})})]})})},rj=t=>r.jsx(V0,{options:W$,children:r.jsx(X$,{...t})}),Z$="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",eU={apiKey:Z$},$f=()=>{const[t,n]=_.useState(""),[e,i]=_.useState([]),[s,l]=_.useState(!1),[c,h]=_.useState(null),[m,f]=_.useState(!1),[y,x]=_.useState(null),[S,w]=_.useState(!1),[j,E]=_.useState(null),A=_.useRef(null),[k,P]=_.useState(!1),[R,Y]=_.useState(!1),[F,q]=_.useState(null),[z,L]=_.useState(null),V=Tt(),M=Kr(),B=_.useCallback(async K=>{const re=K||t;if(!re.trim()){E("Please enter complaint details.");return}w(!0),E(null);try{const ve=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Patient - Direct Entry",age:null,gender:null,phone:null,address:null})});if(!ve.ok){const H=await ve.json().catch(()=>({message:"Failed to create patient"}));if(ve.status===403&&H.message.includes("Patient limit")){V("/start-clinic-subscription",{state:{errorMessage:H.message}});return}throw new Error(H.message||`Failed to create patient: ${ve.statusText}`)}const I=await ve.json();if(!I||!I.id)throw new Error("Failed to create new patient or retrieve patient ID.");const de=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:I.id,complaint:re})});if(!de.ok){const H=await de.text();throw new Error(`Failed to create queue entry: ${H||de.statusText}`)}const ae=await de.json();if(!ae||!ae.id)throw new Error("Failed to create new complaint record or retrieve record ID.");V(`/dashboard/edit-complaint/${ae.id}`,{state:{initialComplaint:re}})}catch(ve){console.error("Error starting new complaint:",ve),ve.message.includes("Patient limit")?(E(`Error: ${ve.message}. Please upgrade your plan.`),V("/start-clinic-subscription")):E(`Error: ${ve.message||"Failed to start new complaint process."}`)}finally{w(!1)}},[t,V]);_.useEffect(()=>{const K=A.current;K&&(K.style.height="auto",K.style.height=`${K.scrollHeight}px`);const ve=new URLSearchParams(M.search).get("caseDetails");if(ve){const I=decodeURIComponent(ve);I!==t&&(n(I),P(!0))}},[M.search,t]),_.useEffect(()=>{k&&t.trim()&&(V(M.pathname,{replace:!0}),B(t),P(!1))},[k,t,B,V,M.pathname]),_.useEffect(()=>{const K=A.current;K&&(K.style.height="auto",K.style.height=`${K.scrollHeight}px`)},[t]),_.useEffect(()=>{F&&(n(F),Y(!1),B(F),q(null))},[F,B]);const ee=()=>{L({id:null,token:null,name:"New Case",age:null,gender:null}),Y(!0)},ie=_.useMemo(()=>T0(async K=>{const re=K.trim(),ve=/^\d+$/.test(re),I=re.split(/\s+/).length;if(re.length<2||ve&&re.length>10||!ve&&I>2){i([]),l(!1),h(null);return}l(!0),h(null);try{const de=new URLSearchParams({search:encodeURIComponent(K),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ae=await pe(`/api/patients?${de.toString()}`);if(!ae.ok){const ne=await ae.text();throw new Error(`API Error (${ae.status}): ${ne||ae.statusText}`)}const H=await ae.json();i(H.patients)}catch(de){console.error("Error searching patients:",de),h(de.message||"Failed to search patients."),i([])}finally{l(!1)}},300),[]),te=K=>{const re=K.target.value;n(re);const ve=re.trim(),I=/^\d+$/.test(ve),de=ve.split(/\s+/).length;ve.length>=2&&!(I&&ve.length>10||!I&&de>2)?l(!0):(l(!1),i([])),ie(re)},se=K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),e.length>0&&!s?X(e[0]):t.trim()&&!s&&B(t))},X=async K=>{i([]),n(""),f(!0),x(null);try{const re=await pe(`/api/queue/patient/${K.id}/latest`);if(re.ok){const de=await re.json();if(de!=null&&de._id){V(`/dashboard/edit-complaint/${de._id}`),f(!1);return}}else if(re.status!==404){const de=await re.text();throw new Error(`Failed to fetch queue entry: ${de||re.statusText} (${re.status})`)}const ve=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:K.id})});if(!ve.ok){const de=await ve.text();throw new Error(`Failed to create queue entry: ${de||ve.statusText} (${ve.status})`)}const I=await ve.json();if(I!=null&&I.id)V(`/dashboard/edit-complaint/${I.id}`);else throw new Error("Failed to get ID from new queue entry.")}catch(re){console.error("Error processing patient selection:",re),x(re.message||"An error occurred while processing the selection.")}finally{f(!1)}};return r.jsxs("div",{className:"patient-search-page-container",children:[r.jsxs("div",{className:"patient-search-header",children:[r.jsxs("button",{onClick:()=>V(-1),className:"patient-search-button patient-search-button-back",children:[r.jsx(en,{size:16}),"Back"]}),r.jsx("h1",{className:"patient-search-page-title",children:"Search Patient Records"}),r.jsx("button",{onClick:()=>V("/dashboard/queue"),className:"patient-search-button patient-search-button-primary",children:"OPD Queue"})]}),r.jsxs("div",{className:"patient-search-content-box",children:[c&&r.jsx("p",{className:"patient-search-error",children:c}),y&&r.jsx("p",{className:"patient-search-error",children:y}),j&&r.jsx("p",{className:"patient-search-error",children:j})]}),r.jsxs("div",{className:"sticky-chat-input-box",children:[e.length>0&&!m&&!S&&r.jsx("ul",{className:"patient-search-results-list",children:e.map(K=>r.jsxs("li",{onClick:()=>X(K),className:"patient-search-result-item",children:[r.jsxs("div",{className:"patient-search-result-item-name-container",children:[r.jsxs("span",{className:"patient-search-result-item-token",children:["[#",K.token,"]"]}),r.jsx("span",{className:"patient-search-result-item-name",children:K.name})]}),r.jsxs("div",{className:"patient-search-result-item-details",children:[K.age?`${K.age} yrs`:"",K.age&&K.gender?" / ":"",K.gender||"N/A"]})]},K.id))}),t.length>=2&&!s&&e.length===0&&!c&&!m&&r.jsxs("p",{className:"patient-search-no-results",children:['No patients found matching, taking new case: "',t,'".']}),r.jsxs("div",{className:"chat-input-controls",children:[r.jsx("textarea",{ref:A,placeholder:"Search by Name/Phone/Token or Enter New Case: Name, Age, Sex, Complaint...",value:t,onChange:te,onKeyDown:se,className:"chat-input",autoFocus:!0,disabled:m||S,rows:1}),r.jsx("button",{onClick:t.trim()?()=>B(t):ee,className:`chat-submit-button ${S||s?"opacity-50":""}`,disabled:S||s||!!t.trim()&&!t.trim(),"aria-label":t.trim()?"Create New Case":"Use Microphone",children:S||s?r.jsx("div",{className:"spinner"}):t.trim()?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:r.jsx("path",{d:"M12 4l1.41 1.41L7.83 11H20v2H7.83l5.58 5.59L12 20l-8-8 8-8z",transform:"rotate(90 12 12)"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:r.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1.2-9.1c0-.66.54-1.2 1.2-1.2s1.2.54 1.2 1.2V9c0 .66-.54 1.2-1.2 1.2s-1.2-.54-1.2-1.2V4.9zM17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})})})]})]}),R&&r.jsx(V0,{options:eU,children:r.jsx(rj,{onClose:()=>Y(!1),patientData:z,tokenNumber:null,onAiSummaryChange:q})})]})},tU=()=>{const t=Tt(),[n,e]=_.useState({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",low_stock_threshold:"10"}),[i,s]=_.useState(!0),[l,c]=_.useState(!1),[h,m]=_.useState(null),[f,y]=_.useState(null);_.useEffect(()=>{(async()=>{s(!0),m(null);try{const j=await pe("/api/clinics/settings");if(!j.ok){const A=await j.json();throw new Error(A.message||"Failed to fetch clinic settings.")}const E=await j.json();e({admissionCharge:parseFloat(E.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(E.perDayCharge||0).toFixed(2),otherCharges:parseFloat(E.otherCharges||0).toFixed(2),aiMemory:E.aiMemory||"",clinicWideSystemPrompt:E.clinicWideSystemPrompt||"",low_stock_threshold:E.low_stock_threshold!==void 0&&E.low_stock_threshold!==null?String(E.low_stock_threshold):"10"})}catch(j){console.error("Error fetching settings:",j),m(`Failed to load settings: ${j.message}`),e({admissionCharge:"0.00",perDayCharge:"0.00",otherCharges:"0.00",aiMemory:"",clinicWideSystemPrompt:"",low_stock_threshold:"10"})}finally{s(!1)}})()},[]);const x=w=>{const{name:j,value:E}=w.target;e(A=>({...A,[j]:E}))},S=async w=>{w.preventDefault(),m(null),y(null),c(!0);const j=parseFloat(n.admissionCharge),E=parseFloat(n.perDayCharge),A=parseFloat(n.otherCharges),k=parseInt(n.low_stock_threshold);if(isNaN(j)||j<0||isNaN(E)||E<0||isNaN(A)||A<0){m("Invalid charge amount. Please enter non-negative numbers for all fields."),c(!1);return}if(isNaN(k)||k<0){m("Invalid low stock threshold. Please enter a non-negative number."),c(!1);return}try{const P=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify({admissionCharge:j,perDayCharge:E,otherCharges:A,aiMemory:n.aiMemory,clinicWideSystemPrompt:n.clinicWideSystemPrompt,low_stock_threshold:k})});if(!P.ok){const Y=await P.json();throw new Error(Y.message||"Failed to update settings.")}const R=await P.json();e({admissionCharge:parseFloat(R.settings.admissionCharge).toFixed(2),perDayCharge:parseFloat(R.settings.perDayCharge).toFixed(2),otherCharges:parseFloat(R.settings.otherCharges).toFixed(2),aiMemory:R.settings.aiMemory||"",clinicWideSystemPrompt:R.settings.clinicWideSystemPrompt||"",low_stock_threshold:R.settings.low_stock_threshold!==void 0&&R.settings.low_stock_threshold!==null?String(R.settings.low_stock_threshold):"10"}),y("Clinic settings updated successfully!"),setTimeout(()=>y(null),3e3)}catch(P){console.error("Error updating settings:",P),m(`Update failed: ${P.message}`)}finally{c(!1)}};return i?r.jsxs("div",{className:"loading-animation-container",children:[r.jsx("div",{className:"breathing-ball"}),r.jsx("div",{className:"loading-text",children:"Loading settings..."})]}):r.jsxs("div",{className:"clinic-settings-container",children:[r.jsxs("div",{className:"clinic-settings-header-container",children:[r.jsx("button",{onClick:()=>t(-1),className:"back-button",children:r.jsx(en,{size:24})}),r.jsxs("h3",{className:"clinic-settings-header",children:[r.jsx(dp,{size:24}),"Clinic Settings"]})]}),h&&r.jsx("div",{className:"clinic-settings-alert clinic-settings-alert-error",role:"alert",children:h}),f&&r.jsx("div",{className:"clinic-settings-alert clinic-settings-alert-success",role:"alert",children:f}),r.jsxs("form",{onSubmit:S,className:"clinic-settings-form",children:[r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"admissionCharge",className:"clinic-settings-label",children:[r.jsx(Ku,{size:16})," Admission Charge (₹)"]}),r.jsx("input",{type:"number",id:"admissionCharge",name:"admissionCharge",value:n.admissionCharge,onChange:x,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:l,placeholder:"e.g., 500.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"perDayCharge",className:"clinic-settings-label",children:[r.jsx(Ku,{size:16})," Per Day Charge (₹)"]}),r.jsx("input",{type:"number",id:"perDayCharge",name:"perDayCharge",value:n.perDayCharge,onChange:x,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:l,placeholder:"e.g., 1000.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"otherCharges",className:"clinic-settings-label",children:[r.jsx(Ku,{size:16})," Other Charges (Default/Misc.) (₹)"]}),r.jsx("input",{type:"number",id:"otherCharges",name:"otherCharges",value:n.otherCharges,onChange:x,className:"clinic-settings-input",step:"0.01",min:"0",required:!0,disabled:l,placeholder:"e.g., 50.00"})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"low_stock_threshold",className:"clinic-settings-label",children:[r.jsx(VE,{size:16})," Low Stock Notification Threshold"]}),r.jsx("input",{type:"number",id:"low_stock_threshold",name:"low_stock_threshold",value:n.low_stock_threshold,onChange:x,className:"clinic-settings-input",min:"0",required:!0,disabled:l,placeholder:"e.g., 10"}),r.jsx("p",{className:"clinic-settings-help-text",children:"Set the minimum quantity of a drug to trigger a low stock notification."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"aiMemory",className:"clinic-settings-label",children:[r.jsx(lC,{size:16})," AI Memory (Plain Text)"]}),r.jsx("textarea",{id:"aiMemory",name:"aiMemory",value:n.aiMemory,onChange:x,className:"clinic-settings-textarea",disabled:l,placeholder:"Enter any clinic-wide notes or context for the AI..."}),r.jsx("p",{className:"clinic-settings-help-text",children:"Enter clinic-wide AI memory data as plain text."})]}),r.jsxs("div",{className:"clinic-settings-form-group",children:[r.jsxs("label",{htmlFor:"clinicWideSystemPrompt",className:"clinic-settings-label",children:[r.jsx(OA,{size:16})," Clinic-Wide AI System Prompt"]}),r.jsx("textarea",{id:"clinicWideSystemPrompt",name:"clinicWideSystemPrompt",value:n.clinicWideSystemPrompt,onChange:x,className:"clinic-settings-textarea",disabled:l,placeholder:"Enter the system prompt for the AI that will apply to all interactions within this clinic..."}),r.jsx("p",{className:"clinic-settings-help-text",children:"This prompt will be used as the base instruction for the AI across the clinic."})]}),r.jsx("div",{className:"clinic-settings-button-container",children:r.jsxs("button",{type:"submit",className:"clinic-settings-button",disabled:l,children:[r.jsx(id,{size:18})," ",l?"Saving...":"Save Settings"]})})]})]})},nU=({})=>{const t=Tt(),[n,e]=_.useState("patientSearch"),[i,s]=_.useState(!1),[l]=_.useState(!1),[c,h]=_.useState(null),[m,f]=_.useState(null);return _.useEffect(()=>{if(m){const y=setTimeout(()=>f(null),5e3);return()=>clearTimeout(y)}},[m]),l?r.jsxs("div",{className:"loading-animation-container",children:[" ",r.jsx("div",{className:"breathing-ball"}),r.jsx("div",{className:"mt-4 text-teal-600 text-xl font-medium",children:"Loading Admin Panel..."})]}):r.jsxs("div",{className:"admin-panel-container",children:[" ",m&&r.jsxs("div",{className:`alert-box ${m.type==="success"?"alert-box-success":"alert-box-error"} fixed top-4 right-4 z-[100]`,role:"alert",children:[r.jsx("div",{className:"alert-box-icon",children:m.type==="success"?r.jsx(Xa,{size:18}):r.jsx(wi,{size:18})}),r.jsx("div",{className:"alert-box-content",children:r.jsx("span",{children:m.message})}),r.jsx("button",{onClick:()=>f(null),className:"alert-box-close",children:r.jsx(Vi,{size:16})})]}),c&&r.jsxs("div",{className:"alert-box alert-box-error mb-4",role:"alert",children:[" ",r.jsx("div",{className:"alert-box-icon",children:r.jsx(wi,{size:18})}),r.jsx("div",{className:"alert-box-content",children:r.jsx("span",{className:"block sm:inline flex-1",children:c})}),r.jsx("button",{onClick:()=>h(null),className:"alert-box-close",children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{className:"admin-nav-bar",children:[" ",r.jsxs("button",{onClick:()=>window.location.reload(),className:"admin-nav-button",title:"Refresh Page",children:[r.jsx(cC,{})," "]}),r.jsxs("button",{onClick:()=>t("/dashboard/staff"),className:"admin-nav-button",children:[r.jsx(Zm,{})," Staff"]}),r.jsx("button",{onClick:()=>e("moneyFlow"),className:`admin-nav-button ${n==="moneyFlow"?"active":""}`,children:"Money"}),r.jsx("button",{onClick:()=>e("inventory"),className:`admin-nav-button ${n==="inventory"?"active":""}`,children:"Inventory"}),r.jsx("button",{onClick:()=>t("/lab-inventory"),className:"admin-nav-button hidden-button",children:"Lab Inventory"}),r.jsxs("button",{onClick:()=>s(y=>!y),className:`admin-nav-button ${i?"active":""}`,children:[r.jsx(dp,{})," Settings"]}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions"),className:"admin-nav-button hidden-button",children:[r.jsx(O1,{})," Patient Subscriptions"]}),r.jsxs("button",{onClick:()=>t("/start-clinic-subscription"),className:"admin-nav-button",children:[r.jsx(O1,{})," Buy Pro Plan"]}),r.jsx("button",{onClick:()=>t("/refill-reminders"),className:"admin-nav-button",children:"Refill Reminders"})]}),r.jsxs("div",{className:"admin-actions-bar",children:[" ",r.jsxs("button",{onClick:()=>t("/dashboard/patients"),className:"admin-action-button all-patients",children:[r.jsx(Zm,{})," All Patients"]})]}),r.jsxs("div",{className:"space-y-6",children:[" ",n==="patientSearch"&&r.jsx("div",{className:"admin-content-section",children:r.jsx($f,{})}),n==="moneyFlow"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(aD,{})}),n==="inventory"&&r.jsx("div",{className:"admin-content-section",children:r.jsx(Pb,{})}),i&&r.jsxs("div",{className:"clinic-settings-section",children:[" ",r.jsx(tU,{})]})]})]})},bc=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},iU=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},Rf=({title:t,icon:n,items:e,renderItemContent:i,isLoading:s,loadingText:l,noDataText:c})=>{const h=_.useMemo(()=>{const m={};e.forEach(y=>{if(isNaN(y.date.getTime())){m["Unknown Date"]||(m["Unknown Date"]=[]),m["Unknown Date"].push(y);return}const x=iU(y.originalDateString);m[x]||(m[x]=[]),m[x].push(y)});const f=Object.keys(m);return f.sort((y,x)=>{if(y==="Unknown Date")return 1;if(x==="Unknown Date")return-1;try{const S=E=>{const A=E.split(" ");if(A.length===3){const P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(A[1]);if(P!==-1)return new Date(parseInt(A[2]),P,parseInt(A[0]))}return new Date(E)},w=S(y),j=S(x);if(!isNaN(w.getTime())&&!isNaN(j.getTime()))return j.getTime()-w.getTime()}catch(S){console.error("Error parsing date for sorting:",S)}return x.localeCompare(y)}),f.map(y=>({date:y,items:m[y]}))},[e]);return r.jsxs("div",{className:"mb-2 p-2 bg-gray-50 rounded-md border border-gray-200",children:[r.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 border-b border-gray-300 pb-1 flex items-center",children:[" ",n&&r.jsx(n,{size:14,className:"mr-1.5 text-indigo-600"})," ",t]}),s&&r.jsx("p",{className:"text-gray-500 italic text-xs px-1",children:l}),!s&&e.length===0&&r.jsx("p",{className:"text-gray-500 italic text-xs px-1",children:c}),!s&&e.length>0&&r.jsxs("div",{className:"space-y-2",children:[" ",h.map(({date:m,items:f})=>r.jsxs("div",{className:"pl-0.5",children:[" ",r.jsxs("h5",{className:"text-[11px] font-medium text-indigo-700 mb-1 bg-indigo-50 px-1 py-0.5 rounded-sm inline-block",children:[" ",m]}),r.jsx("div",{className:"space-y-1 pl-1.5 border-l-2 border-indigo-200 ml-0.5",children:f.map((y,x)=>r.jsxs("div",{className:"text-xs py-0 flex items-start",children:[" ",r.jsx("div",{className:"flex-grow mr-1",children:i(y)})," "]},`${y.type}-${y.originalDateString}-${x}`))})]},m))]})]})},sb=()=>{var se,X;const[t,n]=_.useState({currentPatient:null,nextPatient:null,waitingCount:0}),[e,i]=_.useState(!0),[s,l]=_.useState(null),[c,h]=_.useState(null),[m,f]=_.useState(null),[y,x]=_.useState(null),[S,w]=_.useState({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),[j,E]=_.useState(!1),[A,k]=_.useState(null),{patientId:P}=Ar(),R=Tt(),Y=_.useCallback(async K=>{x(null),h(null),f(null),E(!0),k(null),w({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]});try{const re=await pe(`/api/patients/${K}`);if(!re.ok)throw new Error(`Patient details fetch failed (${re.status})`);const ve=await re.json();h(ve);const I=await pe(`/api/queue/patient/${K}/latest`);if(!I.ok&&I.status!==404)throw new Error(`Queue entry fetch failed (${I.status})`);if(I.ok){const de=await I.json();f(de)}await F(K)}catch(re){console.error("Error fetching specific patient data:",re),x(re.message||"Failed to load patient data."),k(re.message||"Failed to load patient history.")}finally{E(!1)}},[]),F=_.useCallback(async K=>{E(!0),k(null);try{const[re,ve,I,de]=await Promise.all([pe(`/api/queue/patient/${K}/complaints`),pe(`/api/lab/patient/${K}`),pe(`/api/lab/orders/patient/${K}?status=pending`),pe(`/api/pharmacy-orders/patient/${K}`)]),ae=re.ok?await re.json():[],H=ve.ok?await ve.json():[],ne=I.ok?await I.json():[],me=de.ok?await de.json():[];w({pastComplaints:ae||[],labReports:H||[],pendingLabOrders:ne||[],pharmacyOrders:me||[]})}catch(re){console.error("Error fetching patient history:",re),k(re.message||"Failed to load patient history."),w({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]})}finally{E(!1)}},[]),q=_.useCallback(async()=>{i(!0),l(null);try{const K=await pe("/api/queue/doctor");if(!K.ok){const ve=await K.text();throw new Error(`API Error (${K.status}): ${ve||K.statusText}`)}const re=await K.json();if(re===null||typeof re!="object"||typeof re.waitingCount!="number")throw console.error("Invalid queue data format:",re),new Error("Invalid queue data format received");n({currentPatient:re.currentPatient||null,nextPatient:re.nextPatient||null,waitingCount:re.waitingCount})}catch(K){console.error("Error fetching queue data:",K),l(K.message||"Failed to fetch queue data.")}finally{i(!1)}},[]);_.useEffect(()=>{let K=null;return P?(Y(P),n({currentPatient:null,nextPatient:null,waitingCount:0})):(q(),K=setInterval(q,1e4),h(null),f(null)),()=>{K&&clearInterval(K)}},[P,Y,q]),_.useEffect(()=>{var K;!P&&((K=t.currentPatient)!=null&&K.patientId)?F(t.currentPatient.patientId):!P&&!t.currentPatient&&(w({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),E(!1),k(null))},[P,(se=t.currentPatient)==null?void 0:se.patientId,F]);const z=((X=t.currentPatient)==null?void 0:X.patientId)||(P?parseInt(P,10):null),L=_.useMemo(()=>{if(!z||!S.pastComplaints)return[];const K=S.pastComplaints.map(re=>({date:new Date(re.createdAt),type:"Complaint",data:re,originalDateString:re.createdAt})).filter(re=>!isNaN(re.date.getTime()));return K.sort((re,ve)=>ve.date.getTime()-re.date.getTime()),K},[z,S.pastComplaints]),V=_.useMemo(()=>{if(!z)return[];const K=[];return(S.pendingLabOrders??[]).forEach(re=>{const ve=new Date(re.createdAt);isNaN(ve.getTime())||K.push({date:ve,type:"Lab Order (Pending)",data:re,originalDateString:re.createdAt})}),(S.labReports??[]).forEach(re=>{const ve=re.reportCreatedAt?new Date(re.reportCreatedAt):null;ve&&!isNaN(ve.getTime())&&K.push({date:ve,type:"Lab Report",data:re,originalDateString:re.reportCreatedAt})}),K.sort((re,ve)=>ve.date.getTime()-re.date.getTime()),K},[z,S.pendingLabOrders,S.labReports]),M=_.useMemo(()=>{if(!z||!S.pharmacyOrders)return[];const K=S.pharmacyOrders.map(re=>({date:new Date(re.date),type:"Pharmacy Order",data:re,originalDateString:re.date})).filter(re=>!isNaN(re.date.getTime()));return K.sort((re,ve)=>ve.date.getTime()-re.date.getTime()),K},[z,S.pharmacyOrders]),B=async()=>{i(!0),l(null);try{await pe("/api/queue/doctor/next",{method:"POST"}),await q()}catch(K){console.error("Error calling next patient:",K),l(K.message||"Failed to call next patient.")}finally{i(!1)}},ee=async()=>{if(!(!t.currentPatient||P)){i(!0),l(null);try{await pe(`/api/queue/doctor/complete/${t.currentPatient._id}`,{method:"POST"}),await q(),w({pastComplaints:[],labReports:[],pendingLabOrders:[],pharmacyOrders:[]}),E(!1),k(null)}catch(K){console.error("Error completing consultation:",K),l(K.message||"Failed to complete consultation.")}finally{i(!1)}}},ie=K=>{switch(K){case"waiting":return"Waiting";case"consulting":return"Consulting";case"seen":return"Seen";case"cancelled":return"Cancelled";default:return K}};let te=null;return t.currentPatient&&(te=r.jsxs("div",{className:"patient-info-section bg-white rounded-lg shadow-md p-4 md:p-6 border-l-8 border-teal-500",children:[r.jsx("h2",{className:"text-xl text-teal-700 font-semibold mb-3",children:"NOW SEEING:"}),r.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-6",children:[r.jsxs("div",{className:"flex-grow md:w-1/2",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-grow mr-4",children:[r.jsx("div",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-1",children:t.currentPatient.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-600",children:[r.jsx("span",{className:"font-bold",children:t.currentPatient.age})," | ",r.jsx("span",{className:"font-bold",children:t.currentPatient.gender})]})]}),r.jsxs("div",{className:"text-right flex-shrink-0",children:[r.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-700 mb-1",children:t.currentPatient.token}),r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm md:text-base font-medium ${t.currentPatient.status==="consulting"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800"}`,children:ie(t.currentPatient.status)})]})]}),r.jsxs("div",{className:"actions-section mt-4 md:mt-6 flex justify-end space-x-3 border-t pt-4",children:[r.jsx("button",{onClick:()=>{var re;const K=(re=t.currentPatient)==null?void 0:re._id;K&&R(`/dashboard/edit-complaint/${K}`)},disabled:e||!t.currentPatient||t.currentPatient.status!=="consulting",className:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit Complaint / AI"}),r.jsx("button",{onClick:ee,disabled:e||!t.currentPatient||t.currentPatient.status!=="consulting",className:"btn btn-success disabled:opacity-50 disabled:cursor-not-allowed",children:"Complete Consultation"})]})]})," ",r.jsxs("div",{className:"complaint-section md:w-1/2 mt-4 md:mt-0 border-t md:border-t-0 md:border-l md:pl-6 pt-4 md:pt-0",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-2",children:"Context & History:"}),A&&r.jsx("p",{className:"text-red-500 text-xs mb-2",children:A}),r.jsxs("div",{className:"space-y-2 pr-2",children:[r.jsx(Rf,{title:"Complaints History",icon:Tc,items:L,isLoading:j,loadingText:"Loading complaints...",noDataText:"No past complaints found.",renderItemContent:K=>r.jsxs("span",{className:"block text-xs",children:[K.data.complaint,r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})}),r.jsx(Rf,{title:"Lab History (Orders & Reports)",icon:Qy,items:V,isLoading:j,loadingText:"Loading lab history...",noDataText:"No lab history found.",renderItemContent:K=>K.type==="Lab Order (Pending)"?r.jsxs("span",{className:"flex items-start text-xs",children:[r.jsx(I1,{size:12,className:"mr-1.5 mt-0.5 text-blue-600 flex-shrink-0"}),r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-blue-700",children:"Order:"})," ",K.data.tests.map(re=>re.name).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",K.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})]}):r.jsxs("span",{className:"flex items-start text-xs",children:[r.jsx(L1,{size:12,className:"mr-1.5 mt-0.5 text-green-600 flex-shrink-0"}),r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-green-700",children:"Report:"})," ",K.data.testName," - ",K.data.reportFindings.substring(0,50),K.data.reportFindings.length>50?"...":"",r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})]})}),r.jsx(Rf,{title:"Pharmacy Order History",icon:Xm,items:M,isLoading:j,loadingText:"Loading pharmacy orders...",noDataText:"No pharmacy order history found.",renderItemContent:K=>r.jsxs("span",{className:"block text-xs",children:[K.data.medications.map(re=>`${re.name} (Qty: ${re.quantity})`).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",K.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})}),L.length===0&&V.length===0&&M.length===0&&!j&&r.jsx("p",{className:"text-gray-500 italic text-xs mt-2 px-1",children:"No history found for this patient."})]})," "]})," "]})," "]})),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"doctor-screen-container flex-grow flex flex-col space-y-6 md:space-y-8",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>R(-1),className:"back-button mr-4",children:r.jsx(en,{size:24})}),r.jsx("h1",{className:"doctor-screen-header",children:"Doctor Consultation Panel"})]}),P?r.jsxs(r.Fragment,{children:[y&&r.jsx("p",{className:"text-red-500 p-4 bg-red-50 rounded",children:y}),c&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 border-l-8 border-purple-500",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"text-xl text-purple-700 font-semibold",children:"Patient Record:"}),r.jsx("button",{onClick:()=>R("/dashboard/doctor"),className:"text-sm text-blue-600 hover:underline",children:"Back to Queue"})]}),r.jsx("div",{className:"text-2xl md:text-3xl font-bold mb-1 md:mb-2",children:c.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-600 mb-3 md:mb-4",children:["Age: ",c.age??"N/A"," | ",c.gender??"N/A"]}),r.jsxs("div",{className:"mt-3 md:mt-4 p-3 bg-gray-50 rounded border border-gray-200",children:[r.jsx("label",{className:"font-medium block mb-1 text-sm text-gray-600",children:"Latest Queue Entry:"}),m?r.jsxs("div",{className:"space-y-2",children:[" ",r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("span",{className:"text-sm flex-1 break-words",children:[r.jsxs("span",{className:"font-medium text-gray-700",children:["(",m.age," / ",m.gender,")"]}),": ",m.complaint||r.jsx("span",{className:"text-gray-400 italic",children:"No complaint"}),r.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${m.status==="consulting"?"bg-teal-100 text-teal-800":m.status==="seen"?"bg-green-100 text-green-800":m.status==="waiting"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:ie(m.status)})]}),m.status==="consulting"&&m._id&&r.jsx("button",{onClick:()=>R(`/dashboard/edit-complaint/${m._id}`),className:"ml-4 px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex-shrink-0",children:"Edit"})]}),m.case_summary&&r.jsxs("p",{className:"text-xs text-gray-700 bg-yellow-50 p-2 rounded border border-yellow-200",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"AI Summary:"})," ",m.case_summary]})]}):r.jsx("p",{className:"text-gray-500 italic text-sm",children:"No queue entry found for this patient today."})]}),r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Patient History:"}),A&&r.jsx("p",{className:"text-red-500 text-xs mb-2",children:A}),r.jsx(Rf,{title:"Complaints History",icon:Tc,items:L,isLoading:j,loadingText:"Loading complaints...",noDataText:"No past complaints found.",renderItemContent:K=>r.jsxs("span",{className:"block text-xs",children:[" ",K.data.complaint,r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})}),r.jsx(Rf,{title:"Lab History (Orders & Reports)",icon:Qy,items:V,isLoading:j,loadingText:"Loading lab history...",noDataText:"No lab history found.",renderItemContent:K=>K.type==="Lab Order (Pending)"?r.jsxs("span",{className:"flex items-start text-xs",children:[" ",r.jsx(I1,{size:12,className:"mr-1.5 mt-0.5 text-blue-600 flex-shrink-0"})," ",r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-blue-700",children:"Order:"})," ",K.data.tests.map(re=>re.name).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",K.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})]}):r.jsxs("span",{className:"flex items-start text-xs",children:[" ",r.jsx(L1,{size:12,className:"mr-1.5 mt-0.5 text-green-600 flex-shrink-0"})," ",r.jsxs("span",{className:"block",children:[r.jsx("span",{className:"font-medium text-green-700",children:"Report:"})," ",K.data.testName," - ",K.data.reportFindings.substring(0,50),K.data.reportFindings.length>50?"...":"",r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})]})}),r.jsx(Rf,{title:"Pharmacy Order History",icon:Xm,items:M,isLoading:j,loadingText:"Loading pharmacy orders...",noDataText:"No pharmacy order history found.",renderItemContent:K=>r.jsxs("span",{className:"block text-xs",children:[" ",K.data.medications.map(re=>`${re.name} (Qty: ${re.quantity})`).join(", ")," ",r.jsxs("span",{className:"text-gray-600",children:["(",K.data.status,")"]}),r.jsxs("span",{className:"text-gray-500 ml-1.5 text-[10px] font-mono",children:["(",bc(K.originalDateString),")"]})]})}),L.length===0&&V.length===0&&M.length===0&&!j&&r.jsx("p",{className:"text-gray-500 italic text-sm mt-2",children:"No history found."})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-end space-x-3 mb-4",children:[r.jsxs("button",{onClick:()=>R("/dashboard/add-patient"),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded shadow flex items-center",children:[r.jsx(fC,{size:18,className:"mr-2"})," Add Patient"]}),r.jsx("button",{onClick:()=>R("/search-patient"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded shadow",children:"Search Patient"})]}),s&&r.jsx("p",{className:"text-red-500 p-4 bg-red-50 rounded",children:s}),e&&!t.currentPatient&&r.jsx("p",{className:"text-gray-500 p-4 text-center",children:"Loading queue..."}),r.jsx("div",{className:"mb-6 md:mb-8",children:te||r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 text-center text-gray-500",children:"No patient currently being seen. Use 'Call Next' or search for a patient record."})}),r.jsxs("div",{className:"current-queue-section mb-6 md:mb-8",children:[r.jsx("h2",{className:"text-xl text-blue-700 font-semibold mb-3 md:mb-4",children:"NEXT IN QUEUE:"}),t.nextPatient?r.jsxs("div",{className:"patient-info-section bg-blue-50 rounded-lg shadow-md p-5 md:p-6 border-l-8 border-blue-500",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 md:mb-4",children:[r.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-blue-800 mb-2 sm:mb-0",children:["Token #",t.nextPatient.token]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm md:text-base font-medium ${t.nextPatient.status==="waiting"?"bg-blue-200 text-blue-900":"bg-gray-200 text-gray-800"}`,children:ie(t.nextPatient.status)})]}),r.jsx("div",{className:"text-2xl md:text-3xl font-bold mb-2 md:mb-3",children:t.nextPatient.name}),r.jsxs("div",{className:"text-lg md:text-xl text-gray-700 mb-3 md:mb-4",children:["Age: ",t.nextPatient.age," | ",t.nextPatient.gender]}),(t.nextPatient.complaint||t.nextPatient.case_summary)&&r.jsxs("div",{className:"mt-3 md:mt-4 pt-3 border-t border-blue-200 space-y-2",children:[t.nextPatient.complaint&&r.jsxs("p",{className:"text-base md:text-lg text-gray-800",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:"Complaint:"})," ",t.nextPatient.complaint]}),t.nextPatient.case_summary&&r.jsxs("p",{className:"text-sm text-gray-700 bg-yellow-50 p-2 rounded border border-yellow-200",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"AI Summary:"})," ",t.nextPatient.case_summary]})]})]}):r.jsx("div",{className:"bg-gray-50 rounded-lg shadow-inner p-6 text-center text-gray-600 border border-gray-200",children:"No patient waiting next in the queue."})]}),r.jsxs("div",{className:"actions-section mt-auto pt-4 md:pt-6 flex flex-col sm:flex-row justify-between items-center gap-4",children:[r.jsx("button",{onClick:B,disabled:e||!t.nextPatient||!!t.currentPatient,className:"btn btn-primary w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed order-1 sm:order-none",children:"Call Next Patient"}),r.jsx("div",{className:"bg-gray-200 inline-block px-4 py-2 rounded-full order-2 sm:order-none",children:r.jsxs("span",{className:"text-base md:text-lg font-medium",children:[t.waitingCount," patients waiting"]})})]})]})]})})},aj=()=>{const[t,n]=_.useState(""),[e,i]=_.useState([]),[s,l]=_.useState(null),[c,h]=_.useState(null),[m,f]=_.useState(null),[y,x]=_.useState(null),[S,w]=_.useState(!1),[j,E]=_.useState(!1),[A,k]=_.useState(null),P=Tt(),R=_.useCallback(P_.debounce(async M=>{if(M.trim().length<2){i([]),E(!1);return}E(!0),k(null);try{const B=new URLSearchParams({search:encodeURIComponent(M),page:"1",limit:"20",sortBy:"name",sortOrder:"asc"}),ee=await pe(`/api/patients?${B.toString()}`);if(!ee.ok){const te=await ee.text();throw new Error(`API Error (${ee.status}): ${te||ee.statusText||"Failed to fetch patients"}`)}const ie=await ee.json();i(ie.patients)}catch(B){k(B instanceof Error?B.message:"An unknown error occurred while searching patients"),i([])}finally{E(!1)}},500),[]);_.useEffect(()=>(t?(E(!0),R(t)):(i([]),R.cancel()),()=>{R.cancel()}),[t,R]);const Y=M=>{l(M),n(""),i([]),k(null),h(null),f(null),x(null),w(!1)},F=async()=>{if(!s){k("No patient selected.");return}k(null),E(!0);try{const M=await pe(`/api/patients/${s.id}/admit`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!M.ok){const ee=await M.json().catch(()=>({message:"Failed to admit patient"}));throw new Error(ee.message||"Failed to admit patient")}const B=await M.json();alert(B.message||"Patient admitted successfully!"),B.bill&&B.bill.id?P(`/patient/${s.id}/admission-bill/${B.bill.id}`):(console.error("Admission successful, but bill ID missing in response."),k("Admission successful, but couldn't navigate to billing."),l(B.patient))}catch(M){k(M instanceof Error?M.message:"Failed to admit patient")}finally{E(!1)}};_.useEffect(()=>{(async()=>{if(!s||!s.admission_date||s.discharge_date){h(null),x(null);return}w(!0),f(null),h(null),x(null);try{const B=await pe(`/api/patients/${s.id}/active-bill?type=admission`);if(!B.ok)throw B.status===404?new Error("No active admission bill found."):new Error("Failed to fetch active bill ID.");const ee=await B.json(),ie=ee==null?void 0:ee.id;if(!ie)throw new Error("Active admission bill ID not found in response.");h(ie);const te=await pe(`/api/bills/${ie}`);if(!te.ok)throw new Error(`Failed to fetch bill details (ID: ${ie}). Status: ${te.status}`);const se=await te.json();if(se&&se.calculated)x(se.calculated);else throw console.error("Fetched bill details missing 'calculated' object:",se),new Error("Fetched bill details are incomplete (missing calculated data).")}catch(B){f(B instanceof Error?B.message:"An unknown error occurred while fetching bill details."),h(null),x(null)}finally{w(!1)}})()},[s]);const q=async()=>{if(!s){k("No patient selected.");return}if(!s.admission_date||s.discharge_date){k("Patient is not currently admitted.");return}k(null),E(!0);try{const M=await pe(`/api/patients/${s.id}/discharge`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!M.ok){const ee=await M.json().catch(()=>({message:"Failed to discharge patient"}));throw new Error(ee.message||"Failed to discharge patient")}const B=await M.json();alert(B.message||"Patient discharged successfully!"),B.patient?l(B.patient):(console.error("Discharge successful, but updated patient info missing in response."),l(null),k("Discharge successful, but couldn't update patient details locally."))}catch(M){k(M instanceof Error?M.message:"Failed to discharge patient")}finally{E(!1)}},z=()=>{if(!s||!c){k("Cannot navigate to billing: Patient or Bill ID missing.");return}P(`/patient/${s.id}/admission-bill/${c}`)};let L="",V=null;if(s){const M=s.admission_date?new Date(s.admission_date).toLocaleDateString():null,B=s.discharge_date?new Date(s.discharge_date).toLocaleDateString():null;s.admission_date?s.admission_date&&!s.discharge_date?(L=`Patient admitted on: ${M}`,V=r.jsxs("div",{className:"space-y-4",children:[" ",S&&r.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Loading billing details..."})," ",m&&r.jsx("p",{className:"text-sm text-red-500 text-center",children:m})," ",!S&&y&&r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title",children:"Billing Summary"}),r.jsxs("div",{className:"admission-card-content",children:[r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Total Due:"}),r.jsxs("span",{children:["₹",(Number(y.totalDue)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm text-green-700",children:[" ",r.jsx("span",{children:"Total Paid:"}),r.jsxs("span",{children:["₹",(Number(y.totalPaid)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm font-bold mt-1 text-red-600",children:[" ",r.jsx("span",{children:"Balance Due:"}),r.jsxs("span",{children:["₹",(Number(y.balance)||0).toFixed(2)]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:z,disabled:j||S||!c,className:`admission-button admission-button-secondary ${j||S||!c?"opacity-50 cursor-not-allowed":""}`,children:S?"Loading Bill...":!c&&!m?"Finding Bill...":"Pay Bill / View Details"}),r.jsx("button",{onClick:q,disabled:j||S,className:`admission-button admission-button-danger ${j||S?"opacity-50 cursor-not-allowed":""}`,children:j?"Processing...":"Discharge Patient"})]})]})):(L=`Patient admitted on ${M} and discharged on ${B}.`,V=r.jsx("p",{className:"text-center text-gray-600 italic",children:"Patient has been discharged."})):(L="Patient is not admitted.",V=r.jsx("button",{onClick:F,disabled:j,className:`admission-button ${j?"opacity-50 cursor-not-allowed":""}`,children:j?"Processing...":"Admit Patient"}))}return r.jsxs("div",{className:"admission-page-container",children:[r.jsxs("div",{className:"admission-header-container",children:[r.jsxs("button",{onClick:()=>P(-1),className:"back-button",children:[r.jsx(en,{size:16}),"Back"]}),r.jsx("h1",{className:"admission-header",children:"Manage Admission/Discharge"})]}),r.jsxs("div",{className:"admission-section mb-6 relative",children:[r.jsx("label",{htmlFor:"patientSearch",className:"admission-label",children:"Search Patient (Name, Phone, or Token)"}),r.jsx("input",{type:"text",id:"patientSearch",value:t,onChange:M=>n(M.target.value),placeholder:"Start typing to search...",className:"admission-input"}),j&&!s&&r.jsx("div",{className:"absolute right-3 top-9 text-sm text-gray-500",children:"Loading..."})," ",e.length>0&&!s&&r.jsxs("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[" ",e.map(M=>r.jsxs("li",{onClick:()=>Y(M),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:[" ",M.name," (Token: ",M.token,")",r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[M.admission_date?`Admitted: ${new Date(M.admission_date).toLocaleDateString()}`:"Not Admitted",M.discharge_date?`, Discharged: ${new Date(M.discharge_date).toLocaleDateString()}`:""]})]},M.id))]}),e.length===0&&t&&!j&&!s&&r.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg p-4 text-gray-500",children:['No patients found matching "',t,'".']})]}),s&&r.jsxs("div",{className:"admission-section",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"admission-section-title",children:"Selected Patient"}),r.jsx("button",{onClick:()=>l(null),className:"admission-link",children:"Clear Selection"})]}),r.jsxs("div",{className:"admission-card-content mb-4 grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",s.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Token:"})," ",s.token]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Age:"})," ",s.age??"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Gender:"})," ",s.gender??"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",s.phone??"N/A"]}),r.jsxs("p",{className:"col-span-2",children:[r.jsx("strong",{children:"Address:"})," ",s.address??"N/A"]})]}),r.jsx("hr",{className:"my-4"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:L})," ",A&&r.jsx("p",{className:"text-red-500 text-sm mb-3",children:A})," ",V]})]})},ob=15,i0=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState(!0),[l,c]=_.useState(null),[h,m]=_.useState(""),[f,y]=_.useState(1),[x,S]=_.useState(1),[w,j]=_.useState(0),[E,A]=_.useState("created_at"),[k,P]=_.useState("desc"),[R,Y]=_.useState(""),[F,q]=_.useState(!1),[z,L]=_.useState(null),[V,M]=_.useState([]),[B,ee]=_.useState(""),[ie,te]=_.useState(!1),[se,X]=_.useState(null),[K,re]=_.useState(!0),[ve,I]=_.useState(null),[de,ae]=_.useState(h);_.useEffect(()=>{const Ne=setTimeout(()=>{ae(h),y(1)},500);return()=>{clearTimeout(Ne)}},[h]);const H=_.useCallback(async()=>{re(!0),I(null);try{const Ne=await pe("/api/subscriptions");if(!Ne.ok){let Qe=`Failed to fetch subscription plans (${Ne.status})`;try{Qe=(await Ne.json()).message||Qe}catch{}throw new Error(Qe)}const Be=await Ne.json();M(Be)}catch(Ne){console.error("Error fetching subscription plans:",Ne),I(Ne.message||"An unknown error occurred while fetching plans."),M([])}finally{re(!1)}},[]),ne=_.useCallback(async(Ne,Be,Qe,$e,ht)=>{s(!0),c(null);try{const Cn=new URLSearchParams({page:Ne.toString(),limit:ob.toString(),sortBy:Qe,sortOrder:$e});Be&&Cn.append("search",Be),ht&&Cn.append("gender",ht);const tt=await pe(`/api/patients?${Cn.toString()}`);if(!tt.ok){const Pi=await tt.json();throw new Error(Pi.message||"Failed to fetch patients")}const li=await tt.json();e(li.patients),j(li.totalCount),y(li.currentPage),S(li.totalPages)}catch(Cn){console.error("Error fetching patients:",Cn),c(`Failed to load patients: ${Cn.message}`),e([]),j(0),y(1),S(1)}finally{s(!1)}},[]);_.useEffect(()=>{ne(f,de,E,k,R),H()},[f,de,E,k,R,ne,H]);const me=Ne=>{const Be=E===Ne&&k==="asc"?"desc":"asc";A(Ne),P(Be),y(1)},ue=Ne=>{try{return new Date(Ne).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},je=()=>{q(!1),L(null),ee(""),X(null),te(!1)},ge=async(Ne,Be)=>{e(Qe=>Qe.map($e=>$e.id===Ne?{...$e,insurance_type:Be}:$e));try{const Qe=await pe(`/api/patients/${Ne}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:Be})});if(!Qe.ok){const $e=await Qe.json();throw new Error($e.message||"Failed to update insurance type")}}catch(Qe){console.error("Error updating insurance type:",Qe),ne(f,de,E,k,R)}},Ge=(Ne,Be)=>{const Qe=new Date(Ne),$e=Be.interval||1;switch(Be.period){case"daily":Qe.setDate(Ne.getDate()+$e);break;case"weekly":Qe.setDate(Ne.getDate()+$e*7);break;case"monthly":Qe.setMonth(Ne.getMonth()+$e);break;case"yearly":Qe.setFullYear(Ne.getFullYear()+$e);break;default:console.warn(`Unknown subscription period: ${Be.period}. Defaulting to 1 month.`),Qe.setMonth(Ne.getMonth()+1)}return Qe},Te=async()=>{if(!z||!B){X("Please select a subscription plan.");return}const Ne=V.find(Be=>Be.id===B);if(!Ne){X("Selected plan details not found.");return}te(!0),X(null);try{const Be=new Date,Qe=Ge(Be,Ne),$e={subscription_plan_id:B,subscription_status:"active",subscription_start_date:Be.toISOString(),subscription_end_date:Qe.toISOString(),subscription_payment_method:"manual"},ht=await pe(`/api/patients/${z.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)});if(!ht.ok){const Cn=await ht.json();throw new Error(Cn.message||"Failed to update patient subscription")}je(),ne(f,de,E,k,R)}catch(Be){console.error("Error starting subscription:",Be),X(`Failed to start subscription: ${Be.message}`)}finally{te(!1)}};return r.jsxs("div",{className:"all-patients-container",children:[r.jsxs("button",{onClick:()=>t(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16}),"Back"]}),r.jsxs("h1",{className:"all-patients-title",children:[r.jsx(bx,{size:28}),"All Registered Patients"]}),l&&r.jsxs("div",{className:"error-alert",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),r.jsxs("div",{className:"subscription-plans-card",children:[r.jsx("h2",{className:"subscription-plans-title",children:"Available Subscription Plans"}),r.jsx("div",{children:K?r.jsx("p",{className:"loading-state",children:"Loading plans..."}):ve?r.jsxs("p",{className:"error-message",children:["Error loading plans: ",ve]}):V.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("ul",{className:"subscription-plans-list",children:V.map(Ne=>r.jsxs("li",{children:[r.jsx("strong",{children:Ne.name}),": ₹",Ne.price," / ",Ne.interval," ",Ne.period,Ne.interval>1?"s":"",Ne.description&&r.jsx("span",{className:"plan-description",children:Ne.description})]},Ne.id))})})]}),r.jsxs("div",{className:"controls-container",children:[r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by name or phone...",className:"search-input",value:h,onChange:Ne=>m(Ne.target.value)}),r.jsx(Ts,{className:"search-input-icon",size:20})]}),r.jsxs("div",{className:"filter-dropdown-wrapper",children:[r.jsx("label",{htmlFor:"genderFilter",className:"sr-only",children:"Filter by Gender"}),r.jsxs("div",{className:"filter-select-container",children:[r.jsx(SA,{size:16,className:"filter-select-icon"}),r.jsxs("select",{id:"genderFilter",value:R,onChange:Ne=>Y(Ne.target.value),className:"filter-select",children:[r.jsx("option",{value:"",children:"All Genders"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]})]}),i?r.jsx("div",{className:"loading-state",children:"Loading patients..."}):n.length===0?r.jsx("div",{className:"empty-state",children:de?"No patients found matching your search.":"No patients registered yet."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"patients-table-wrapper",children:r.jsxs("table",{className:"patients-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Token"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("name"),children:["Name",E==="name"&&(k==="asc"?r.jsx(Ab,{size:14,className:"sort-icon"}):r.jsx(M1,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Age"}),r.jsx("th",{children:"Gender"}),r.jsx("th",{children:"Phone"}),r.jsx("th",{children:"Address"}),r.jsxs("th",{className:"sortable-header",onClick:()=>me("created_at"),children:["Registered On",E==="created_at"&&(k==="asc"?r.jsx(Ab,{size:14,className:"sort-icon"}):r.jsx(M1,{size:14,className:"sort-icon"}))]}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Insurance Type"})," ",r.jsx("th",{children:"Action"})," "]})}),r.jsx("tbody",{children:n.map(Ne=>r.jsxs("tr",{children:[r.jsx("td",{children:Ne.token??"-"}),r.jsx("td",{className:"patient-name",children:Ne.name}),r.jsx("td",{children:Ne.age??"-"}),r.jsx("td",{children:Ne.gender??"-"}),r.jsx("td",{children:Ne.phone??"-"}),r.jsx("td",{children:Ne.address??"-"}),r.jsx("td",{children:ue(Ne.created_at)}),r.jsx("td",{children:r.jsx("span",{className:`status-badge ${Ne.subscription_status==="active"?"active":Ne.subscription_status==="cancelled"||Ne.subscription_status==="expired"?"inactive":"none"}`,children:Ne.subscription_status??"None"})}),r.jsx("td",{children:r.jsxs("select",{value:Ne.insurance_type,onChange:Be=>ge(Ne.id,Be.target.value),className:"form-select insurance-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})}),r.jsx("td",{children:r.jsx("button",{onClick:()=>t(`/start-subscription/${Ne.id}`),className:"action-button",children:"Start Sub"})})]},Ne.id))})]})}),x>1&&r.jsxs("div",{className:"pagination-controls",children:[r.jsxs("div",{className:"pagination-info",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(f-1)*ob+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(f*ob,w)})," ","of"," ",r.jsx("span",{className:"font-medium",children:w})," results"]}),r.jsxs("div",{className:"pagination-buttons",children:[r.jsxs("button",{onClick:()=>y(Ne=>Math.max(Ne-1,1)),disabled:f===1||i,className:"pagination-button",children:[r.jsx(C0,{size:16,className:"prev-icon"}),"Previous"]}),r.jsxs("span",{className:"pagination-current-page",children:["Page ",r.jsx("span",{className:"font-medium",children:f})," of ",r.jsx("span",{className:"font-medium",children:x})]}),r.jsxs("button",{onClick:()=>y(Ne=>Math.min(Ne+1,x)),disabled:f===x||i,className:"pagination-button",children:["Next",r.jsx(xx,{size:16,className:"next-icon"})]})]})]})]}),F&&z&&r.jsx("div",{className:"subscription-modal-overlay",children:r.jsxs("div",{className:"subscription-modal-content",children:[r.jsxs("div",{className:"subscription-modal-header",children:[r.jsxs("h2",{className:"subscription-modal-title",children:["Start Subscription for ",z.name]}),r.jsx("button",{onClick:je,className:"subscription-modal-close-button",children:r.jsx(Vi,{size:24})})]}),se&&r.jsx("div",{className:"error-alert",role:"alert",children:r.jsx("span",{children:se})}),r.jsxs("div",{className:"subscription-modal-body",children:[r.jsx("label",{htmlFor:"subscriptionPlan",className:"form-label",children:"Select Plan:"}),r.jsxs("select",{id:"subscriptionPlan",value:B,onChange:Ne=>ee(Ne.target.value),className:"form-select",disabled:ie||K||ve!==null||V.length===0,children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a Plan --"}),K?r.jsx("option",{value:"",disabled:!0,children:"Loading plans..."}):ve?r.jsx("option",{value:"",disabled:!0,children:"Error loading plans"}):V.length>0?V.map(Ne=>r.jsxs("option",{value:Ne.id,children:[Ne.name," - ₹",Ne.price," (",Ne.interval," ",Ne.period,Ne.interval>1?"s":"",")"]},Ne.id)):r.jsx("option",{value:"",disabled:!0,children:"No active plans found"})]}),ve&&r.jsx("p",{className:"error-message",children:ve}),V.length===0&&!K&&!ve&&r.jsx("p",{className:"empty-state",children:"No active subscription plans available."})]}),r.jsxs("div",{className:"subscription-modal-footer",children:[r.jsx("button",{onClick:je,disabled:ie,className:"subscription-modal-button cancel",children:"Cancel"}),r.jsx("button",{onClick:Te,disabled:!B||ie,className:"subscription-modal-button submit",children:ie?"Starting...":"Start Subscription"})]})]})})]})},rU=()=>{const[t,n]=_.useState("newtons-ai"),[e,i]=_.useState(""),[s,l]=_.useState([]),[c,h]=_.useState(!0),[m,f]=_.useState([]),[y,x]=_.useState(!1),[S,w]=_.useState(null),[j,E]=_.useState(null),A=Tt(),k=async()=>{h(!0),E(null);let L=[];try{const V=await pe("/api/queue");if(!V.ok){const ee=await V.json();throw new Error(ee.message||"Failed to fetch queue")}L=await V.json(),console.log("Fetched Initial Queue Data:",JSON.stringify(L,null,2));const M=L.map(async ee=>{if(!ee.patient_id)return console.warn(`Queue entry ${ee.id} has no patient_id.`),ee;try{const ie=await pe(`/api/patients/${ee.patient_id}`);if(!ie.ok)return console.error(`Failed to fetch patient details for ${ee.patient_id}: ${ie.status}`),ee;const te=await ie.json();return{...ee,Patient:{...ee.Patient??{},...te}}}catch(ie){return console.error(`Error fetching patient details for ${ee.patient_id}:`,ie),ee}}),B=await Promise.all(M);console.log("Enriched Queue Data (Before Sort):",JSON.stringify(B,null,2)),B.sort((ee,ie)=>{var re,ve;const te=((re=ee.Patient)==null?void 0:re.subscription_status)==="active",se=((ve=ie.Patient)==null?void 0:ve.subscription_status)==="active";if(te&&!se)return-1;if(!te&&se)return 1;const X=ee.created_at?new Date(ee.created_at).getTime():0,K=ie.created_at?new Date(ie.created_at).getTime():0;return X-K}),console.log("Sorted Queue Data:",JSON.stringify(B,null,2)),l(B)}catch(V){console.error("Error in fetchQueue process:",V),E(`Failed to load queue: ${V.message}`),l(L)}finally{h(!1)}},P=async()=>{x(!0),E(null);try{const L=await pe("/api/staff?role=doctor");if(!L.ok){const M=await L.json();throw new Error(M.message||"Failed to fetch doctors")}const V=await L.json();f(V.filter(M=>M.active))}catch(L){console.error("Error fetching doctors:",L),E(`Failed to fetch doctors: ${L.message}`)}finally{x(!1)}};_.useEffect(()=>{t==="queue"&&(k(),P()),w(null)},[t]);const R=_.useCallback(async(L,V)=>{if(console.log(`Attempting to assign doctor ${V} to queue ${L}`),E(null),w(null),!V){console.log("No doctor ID provided, skipping assignment.");return}const M=s.find(ie=>ie.id===L);if(!M){console.error(`Queue entry ${L} not found in local state.`),E("Queue entry not found.");return}if(M.doctor_id===V){console.log(`Queue ${L} already assigned to doctor ${V}. Skipping.`);return}const B=async ie=>{if(!ie||!ie.id||!ie.name){E("Cannot proceed: Patient ID or Name is missing."),console.error("assignAndNavigate called with invalid patientInfo",ie);return}const te=async()=>{try{const se={status:"waiting",doctorId:V},X=await pe(`/api/queue/${L}/status`,{method:"PATCH",body:JSON.stringify(se)}),K=await X.json();if(!X.ok)throw new Error(K.message||`HTTP error! status: ${X.status}`);const re=m.find(ve=>ve.id===V);return console.log(`Successfully assigned doctor ${re==null?void 0:re.name} to queue ${L}.`),l(ve=>ve.map(I=>I.id===L?{...I,doctor_id:V,status:K.status||I.status,User:re?{name:re.name}:null,Patient:ie}:I)),!0}catch(se){return console.error(`Error assigning doctor for queue ${L}:`,se),E(`Failed to assign doctor: ${se.message}`),!1}};ie.subscription_status==="active"?(console.log(`Patient ${ie.name} (ID: ${ie.id}) has active subscription. Assigning doctor directly.`),await te()):(console.log(`Patient ${ie.name} (ID: ${ie.id}) does not have active subscription (Status: ${ie.subscription_status}). Assigning doctor and proceeding to billing.`),await te()?(console.log(`Navigating to billing for patient ${ie.name} (ID: ${ie.id}), queue ID: ${L}, doctor ID: ${V}`),A("/billing",{state:{patientId:ie.id,queueId:L,patientName:ie.name,doctorId:V,billType:"consultation"}})):console.log(`Assignment failed for patient ${ie.name}, skipping navigation.`))},ee=M.Patient;if(ee&&ee.id&&ee.name)console.log("Patient details found in state. Proceeding with assignment."),await B(ee);else{console.warn(`Patient details missing for queue entry ${L}. Fetching patient ${M.patient_id}...`);try{const ie=await pe(`/api/patients/${M.patient_id}`);if(!ie.ok){const se=await ie.json().catch(()=>({}));throw new Error(se.message||`Failed to fetch patient details (status ${ie.status})`)}const te=await ie.json();console.log("Successfully fetched patient details:",te),await B(te)}catch(ie){console.error(`Failed to fetch patient details for patient ID ${M.patient_id}:`,ie),E(`Failed to fetch required patient details: ${ie.message}`)}}},[m,s,A]),Y=async(L,V)=>{E(null);const M=V==="consulting"?"start consultation":"complete visit";try{const B=s.find(se=>se.id===L);if(!B&&V==="consulting")throw new Error("Queue entry not found to start consultation.");let ee={status:V};if(V==="consulting"){if(!(B!=null&&B.doctor_id))throw new Error("Cannot start consultation without an assigned doctor.");ee.doctorId=B.doctor_id}const ie=await pe(`/api/queue/${L}/status`,{method:"PATCH",body:JSON.stringify(ee)}),te=await ie.json();if(!ie.ok)throw new Error(te.message||`HTTP error! status: ${ie.status}`);l(se=>se.map(X=>X.id===L?{...X,status:V}:X))}catch(B){console.error(`Error trying to ${M}:`,B),E(`Failed to ${M}: ${B.message}`)}},F=[{id:"queue",label:"Queue",icon:r.jsx(Zm,{size:20})},{id:"newtons-ai",label:"Newtons AI",icon:r.jsx(Ts,{size:20})},{id:"manage-admission",label:"Manage Admission",icon:r.jsx(BE,{size:20})},{id:"all-patients",label:"All Patients",icon:r.jsx(PA,{size:20})},{id:"lab",label:"Lab Tests",icon:r.jsx(hA,{size:20})}],q=L=>{try{return new Date(L).toLocaleTimeString("en-IN",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},z=s.filter(L=>{var V,M;return(M=(V=L.Patient)==null?void 0:V.name)==null?void 0:M.toLowerCase().includes(e.toLowerCase())});return r.jsx("div",{className:"reception-dashboard-container",children:r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[j&&r.jsxs("div",{className:"error-message-reception",role:"alert",children:[" ",r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:j})]}),r.jsxs("div",{className:"reception-tab-nav",children:[" ",F.map(L=>r.jsxs("button",{className:`reception-tab-button ${t===L.id?"active":""}`,onClick:()=>n(L.id),children:[r.jsx("span",{children:L.icon}),L.label]},L.id))]}),t==="queue"&&r.jsxs("div",{className:"space-y-6",children:[" ",r.jsxs("div",{className:"queue-header",children:[" ",r.jsxs("div",{className:"queue-actions",children:[" ",r.jsxs("div",{className:"search-bar-container",children:[" ",r.jsx("input",{type:"text",placeholder:"Search patients in queue...",className:"search-input",value:e,onChange:L=>i(L.target.value)}),r.jsx(Ts,{className:"search-icon",size:18})]})]}),r.jsxs("div",{className:"summary-cards-grid",children:[" ",r.jsxs("div",{className:"summary-card card-waiting",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Waiting"})," ",r.jsx("div",{className:"summary-card-value",children:s.filter(L=>L.status==="waiting").length})," "]}),r.jsxs("div",{className:"summary-card card-consulting",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Consulting"})," ",r.jsx("div",{className:"summary-card-value",children:s.filter(L=>L.status==="consulting").length})," "]}),r.jsxs("div",{className:"summary-card card-completed",children:[" ",r.jsx("div",{className:"summary-card-title",children:"Completed"})," ",r.jsx("div",{className:"summary-card-value",children:s.filter(L=>L.status==="seen").length})," "]})]})]}),c?r.jsxs("div",{className:"loading-container",children:[" ",r.jsx("div",{className:"breathing-ball"})," ",r.jsx("span",{children:"Loading queue..."})]}):z.length===0?r.jsx("div",{className:"empty-queue-message",children:e?"No patients found matching your search.":"Queue is empty."}):r.jsxs("div",{className:"queue-table-wrapper",children:[" ",r.jsxs("table",{className:"queue-table",children:[" ",r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Queue"}),r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Phone Number"}),r.jsx("th",{children:"Complaint"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{className:"hidden md:table-cell",children:"Time Added"})," ",r.jsx("th",{className:"text-center",children:"Action / Doctor"})," "]})}),r.jsx("tbody",{children:z.map(L=>{var V,M,B,ee,ie,te,se,X,K,re,ve;return r.jsxs("tr",{onClick:()=>A(`/dashboard/edit-complaint/${L.id}`),className:"queue-row-clickable",children:[r.jsxs("td",{children:[" ",r.jsxs("span",{className:"queue-token",children:["#",L.token_no]})," "]}),r.jsxs("td",{children:[" ",r.jsx("div",{className:"patient-name",children:((V=L.Patient)==null?void 0:V.name)||"N/A"})," ",r.jsxs("div",{className:"patient-details",children:[(M=L.Patient)!=null&&M.age?`${L.Patient.age} yrs, `:"",((B=L.Patient)==null?void 0:B.gender)||""]})," "]}),r.jsxs("td",{children:[" ",r.jsx("div",{className:"patient-phone",children:((ee=L.Patient)==null?void 0:ee.phone)||"N/A"})," "]}),r.jsx("td",{className:"complaint-text",children:L.complaint||"-"}),r.jsxs("td",{children:[r.jsx("span",{className:`subscription-status-badge ${((ie=L.Patient)==null?void 0:ie.subscription_status)==="active"?"status-active":((te=L.Patient)==null?void 0:te.subscription_status)==="cancelled"||((se=L.Patient)==null?void 0:se.subscription_status)==="expired"?"status-inactive":"status-none"}`,children:((X=L.Patient)==null?void 0:X.subscription_status)??"None"}),L.Patient&&L.Patient.id&&L.Patient.subscription_status!=="active"&&r.jsx("button",{onClick:I=>{I.stopPropagation(),L.Patient&&A(`/start-subscription/${L.Patient.id}`)},className:"action-button btn-start-sub-queue mt-2",children:"Start Sub"})]}),r.jsx("td",{className:"hidden md:table-cell time-added",children:q(L.created_at)}),r.jsx("td",{className:"action-doctor-cell",children:S===L.id?r.jsx("div",{className:"relative inline-block text-left w-full",onClick:I=>I.stopPropagation(),children:r.jsxs("select",{value:"",onChange:I=>R(L.id,I.target.value),onBlur:()=>w(null),className:"doctor-select-dropdown",autoFocus:!0,children:[r.jsx("option",{value:"",disabled:!0,children:"Select Doctor..."}),y?r.jsx("option",{disabled:!0,children:"Loading..."}):m.length>0?m.map(I=>r.jsx("option",{value:I.id,children:I.name},I.id)):r.jsx("option",{disabled:!0,children:"No doctors available"})]})}):r.jsxs("div",{className:"action-doctor-content",onClick:I=>I.stopPropagation(),children:[" ",L.status==="waiting"&&r.jsx(r.Fragment,{children:(K=L.User)!=null&&K.name?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("button",{onClick:()=>Y(L.id,"consulting"),className:"action-button btn-start",children:"Start"})]}):y?r.jsx("span",{className:"status-text-italic",children:"Loading..."}):m.length===0?r.jsx("span",{className:"status-text-red",children:"No doctors"}):m.length===1?r.jsxs("button",{onClick:()=>R(L.id,m[0].id),className:"action-button btn-assign",children:["Assign ",m[0].name]}):r.jsx("button",{onClick:()=>w(L.id),className:"action-button btn-assign",children:"Assign"})}),L.status==="consulting"&&r.jsxs(r.Fragment,{children:[((re=L.User)==null?void 0:re.name)&&r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("button",{onClick:()=>Y(L.id,"seen"),className:"action-button btn-complete",children:"Complete"})]}),L.status==="seen"&&r.jsxs(r.Fragment,{children:[((ve=L.User)==null?void 0:ve.name)&&r.jsx("span",{className:"doctor-name-display",children:L.User.name}),r.jsx("span",{className:"status-text-italic",children:"Completed"})]}),L.status==="cancelled"&&r.jsx("span",{className:"status-text-red",children:"Cancelled"})]})})]},L.id)})})]})]})]}),t==="lab"&&r.jsxs("div",{className:"lab-tab-content",children:[" ",r.jsx("h2",{children:"Lab Orders"}),r.jsxs("button",{onClick:()=>A("/create-lab-order"),className:"lab-action-button btn-create-lab-order",children:[r.jsx(up,{size:16}),"Create New Lab Order"]}),r.jsxs("button",{onClick:()=>A("/lab/search-report"),className:"lab-action-button btn-search-lab-reports",children:[r.jsx(Ts,{size:16}),"Search Lab Reports"]}),r.jsx("div",{className:"lab-placeholder-text",children:"View recent lab orders or manage samples here..."})]}),t==="newtons-ai"&&r.jsx("div",{className:"newtons-ai-tab-content",children:r.jsx($f,{})}),t==="manage-admission"&&r.jsx("div",{className:"manage-admission-tab-content",children:r.jsx(aj,{})}),t==="all-patients"&&r.jsx("div",{className:"all-patients-tab-content",children:r.jsx(i0,{})})]})})},aU=t=>{let n="";if(!t.report_content)return"No report content available.";n+=`*Report Date:* ${t.report_date?new Date(t.report_date).toLocaleDateString():"N/A"}

`;try{const e=JSON.parse(t.report_content);typeof e=="object"&&e!==null&&t.tests?t.tests.forEach((i,s)=>{n+=`*Test: ${i.name}*
`,e[i.id]?Object.entries(e[i.id]).forEach(([l,c])=>{var y;const h=(y=i.default_parameters)==null?void 0:y.find(x=>x.name===l);let m=String(c),f="";if(h){const x=h.unit?` _${h.unit}_`:"";if(h.type==="boolean"){const S=c===!0||c==="true";m=S?"*Reactive*":"Non-Reactive",S||(f="`Normal: Non-Reactive`")}else if(h.type==="number"){const S=typeof c=="string"?parseFloat(c):typeof c=="number"?c:NaN;if(h.lower_limit!=null||h.upper_limit!=null){let w=[];h.lower_limit!=null&&w.push(`${h.lower_limit}`),h.upper_limit!=null&&w.push(`${h.upper_limit}`),f=`\`Normal: ${w.join(" - ")}\`${x}`,!isNaN(S)&&(h.lower_limit!=null&&S<h.lower_limit||h.upper_limit!=null&&S>h.upper_limit)&&(m=`*${m}*`)}}h.unit&&(m+=x)}n+=`${l}: ${m}
`,f&&((h==null?void 0:h.type)==="boolean"&&(c===!0||c==="true")||(n+=`${f}
`))}):n+=`_No parameters reported for this test._
`,s<t.tests.length-1&&(n+=`
`)}):n+=t.report_content}catch{n+=t.report_content}return n},sj=t=>{var c;if(!((c=t==null?void 0:t.Patient)!=null&&c.phone)){alert("Cannot share report via WhatsApp: Patient phone number is not available.");return}if(!(t!=null&&t.report_content)){alert("Cannot share report: No report content is available to share.");return}const n=t.Patient.name||"Patient",e=aU(t),i=`Hello ${n},

Your lab report is ready.

${e}`,l=`https://wa.me/${sU(t.Patient.phone)}?text=${encodeURIComponent(i)}`;window.open(l,"_blank")},sU=t=>{let n=t.replace(/\D/g,"");const e=/^(?:\\+?91)?[\\s-]*?(\\d{10})$/,i=n.match(e);return i?n="91"+i[1]:n.startsWith("91")||(n="91"+n),n},oU=()=>{const[t,n]=_.useState([]),[e,i]=_.useState(""),[s,l]=_.useState(!0),[c,h]=_.useState(null),[m,f]=_.useState("orders"),[y,x]=_.useState(1),[S]=_.useState(20),[w,j]=_.useState(0),E=_.useMemo(()=>Math.ceil(w/S),[w,S]),A=_.useCallback(async(L=1,V="")=>{l(!0),h(null);try{const M=new URLSearchParams({page:String(L),limit:String(S)});V&&M.append("search",V);const B=await pe(`/api/lab?${M.toString()}`);if(!B.ok)throw new Error(`HTTP error! status: ${B.status}`);const ee=await B.json(),ie=ee.orders.map(te=>{var se,X;return{id:te.id,labTokenNumber:String(te.lab_token_number??"N/A"),patientName:((se=te.Patient)==null?void 0:se.name)||"N/A",patientId:te.patient_id,patientTokenNumber:String(((X=te.Patient)==null?void 0:X.patient_token_number)??"N/A"),tests:(te.tests||[]).map(K=>K.name||"Unknown Test"),date:Vf(new Date(te.createdAt),"yyyy-MM-dd"),status:te.status,reportId:te.reportId,billId:te.billId}});n(ie),j(ee.totalCount),x(L)}catch(M){console.error("Failed to fetch lab orders:",M),h(M instanceof Error?M.message:"An unknown error occurred"),n([]),j(0)}finally{l(!1)}},[S]);_.useEffect(()=>{console.log(`Fetch effect triggered. Current page: ${y}, Search term: "${e}"`),e.length===0||e.length>=2?(console.log(`Condition met (length ${e.length}). Fetching orders...`),A(y,e)):console.log(`Condition not met (length ${e.length}). Not fetching.`)},[A,y,e]),_.useEffect(()=>{const L=setTimeout(()=>{e.length>=2?y!==1&&x(1):e.length<2&&y!==1&&x(1)},1e3);return()=>{clearTimeout(L)}},[e]);const k=async(L,V)=>{console.log(`Updating order ${L} to status ${V}`);try{const M=await pe(`/api/lab/${L}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:V})});if(!M.ok){const B=await M.json();throw new Error(B.message||`Failed to update status: ${M.status}`)}if(V==="completed"){const B=await pe(`/api/lab/orders/${L}/report`);if(B.ok){const ee=await B.json();sj(ee)}}await A(y,e),console.log(`Order ${L} status updated to ${V}, refetching page ${y}`)}catch(M){console.error("Error updating status:",M),alert(`Failed to update status: ${M instanceof Error?M.message:"Unknown error"}`)}},P=Tt(),R=L=>{if(!L){console.error("Cannot navigate to billing: Order data is missing."),alert("Could not open billing page: Order information is missing.");return}L.billId?(console.log(`Navigating to existing bill for Bill ID: ${L.billId}, Patient: ${L.patientName}`),P("/billing",{state:{billId:L.billId,patientId:L.patientId,patientName:L.patientName,billType:"lab"}})):(console.log(`Navigating to create new bill for Lab Order ID: ${L.id}, Patient: ${L.patientName}`),P("/billing",{state:{labOrderId:L.id,patientId:L.patientId,patientName:L.patientName,billType:"lab"}}))},Y=L=>{L&&L.id?P(`/lab/report/${L.id}`):(console.error("Cannot navigate: Order or Order ID is missing."),alert("Could not open the report entry page: Order information is missing."))},F=L=>{switch(L){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:L,className:"status-badge"}}};if(s)return r.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:r.jsx("div",{className:"text-teal-600 text-xl animate-pulse",children:"Loading Lab Panel..."})});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-red-50 text-red-700",children:[r.jsx(wi,{size:48,className:"mb-4"}),r.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Error Loading Lab Data"}),r.jsx("p",{className:"mb-4",children:c}),r.jsx("button",{onClick:()=>A(1,""),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry Fetch"})]});const q=()=>{y>1&&x(L=>L-1)},z=()=>{y<E&&x(L=>L+1)};return r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("button",{onClick:()=>P(-1),className:"back-button mr-4",children:r.jsx(en,{size:24})}),r.jsx("h2",{className:"text-2xl font-semibold",children:"Lab Panel"})]}),r.jsxs("main",{className:"flex-1 overflow-y-auto",children:[r.jsxs("div",{className:"mb-4",style:{display:"flex",gap:"10px",borderBottom:"1px solid #ddd",paddingBottom:"10px"},children:[r.jsxs("button",{onClick:()=>f("orders"),className:`lab-inventory-button ${m==="orders"?"":"lab-inventory-button-secondary"}`,style:{display:"flex",alignItems:"center"},children:[r.jsx(cC,{size:16,style:{marginRight:"8px"}}),"Orders"]}),r.jsxs("button",{onClick:()=>f("inventory"),className:`lab-inventory-button ${m==="inventory"?"":"lab-inventory-button-secondary"}`,style:{display:"flex",alignItems:"center"},children:[r.jsx(N0,{size:16,style:{marginRight:"8px"}}),"Inventory"]})]}),m==="orders"&&r.jsxs("div",{className:"lab-orders-view",children:[" ",r.jsxs("div",{className:"lab-orders-header-controls",children:[r.jsx("h3",{className:"lab-orders-title",children:"Current Lab Orders"}),r.jsxs("div",{className:"lab-orders-search-container",children:[r.jsx("input",{type:"text",placeholder:"Search name, token, tests...",value:e,onChange:L=>i(L.target.value),className:"lab-inventory-input lab-orders-search-input"}),r.jsx(Ts,{size:18,className:"lab-orders-search-icon"})]})]}),r.jsx("div",{className:"lab-orders-table-container",children:r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient (Token)"}),r.jsx("th",{children:"Tests"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"lab-table-actions-header",children:"Actions"})]})}),r.jsxs("tbody",{children:[s&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:"Loading orders..."})}),!s&&!c&&t.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"text-center py-10",children:e?`No lab orders found matching "${e}".`:"No lab orders available."})}),!s&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{children:L.patientName}),r.jsxs("div",{className:"lab-table-patient-token",children:["Token: ",L.patientTokenNumber]})]}),r.jsx("td",{children:L.tests.map((M,B)=>r.jsx("div",{children:M},B))}),r.jsx("td",{className:"hidden md:table-cell",children:L.date}),r.jsx("td",{children:r.jsx("span",{className:V.className,children:V.text})}),r.jsx("td",{children:r.jsxs("div",{className:"lab-table-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>R(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>k(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>k(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>Y(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>k(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?P(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})})]},L.id)})]})]})}),r.jsxs("div",{className:"lab-orders-card-container",children:[s&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:"Loading orders..."}),!s&&!c&&t.length===0&&r.jsx("div",{className:"text-center py-10",children:e?`No lab orders found matching "${e}".`:"No lab orders available."}),!s&&!c&&t.map(L=>{const V=F(L.status);return r.jsxs("div",{className:"lab-order-card",children:[r.jsxs("div",{className:"lab-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"lab-card-patient-name",children:L.patientName}),r.jsxs("div",{className:"lab-card-patient-token",children:["Token: ",L.patientTokenNumber]}),r.jsx("div",{className:"lab-card-date",children:L.date})]}),r.jsx("span",{className:`${V.className} lab-card-status-pill`,children:V.text})]}),r.jsxs("div",{className:"lab-card-section",children:[r.jsx("p",{className:"lab-card-section-title",children:"Tests:"}),L.tests.map((M,B)=>r.jsx("div",{className:"lab-card-test-item",children:M},B)),L.tests.length===0&&r.jsx("div",{className:"lab-card-no-tests",children:"No tests listed."})]}),r.jsxs("div",{className:"lab-card-actions",children:[L.status==="pending"&&r.jsx("button",{onClick:()=>R(L),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),L.status==="billed"&&r.jsx("button",{onClick:()=>k(L.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),L.status==="collected"&&r.jsx("button",{onClick:()=>k(L.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(L.status==="processing"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>Y(L),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>k(L.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(L.status==="completed"||L.status==="report_ready"||L.status==="reported")&&r.jsx("button",{onClick:()=>{L.id?P(`/lab/view-report/${L.id}`):(console.error("Attempted to view report for an order with no ID:",L),alert("Cannot view report: Order ID is missing."))},className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]})]},L.id)})]}),!s&&w>0&&r.jsxs("div",{className:"lab-pagination-controls",children:[r.jsxs("div",{className:"lab-pagination-info",children:["Showing"," ",r.jsx("strong",{children:(y-1)*S+1})," ","to"," ",r.jsx("strong",{children:Math.min(y*S,w)})," ","of"," ",r.jsx("strong",{children:w})," ","results"]}),r.jsxs("div",{className:"lab-pagination-buttons",children:[r.jsx("button",{onClick:q,disabled:y===1,className:"lab-pagination-button","aria-label":"Previous page",children:r.jsx(C0,{size:18})}),r.jsxs("span",{children:["Page ",y," of ",E]}),r.jsx("button",{onClick:z,disabled:y===E,className:"lab-pagination-button","aria-label":"Next page",children:r.jsx(xx,{size:18})})]})]})]}),m==="inventory"&&r.jsxs("div",{className:"lab-inventory-content-wrapper",children:[" ",r.jsx(j0,{})]})]})]})},lU=()=>{const[t,n]=_.useState([]),[e,i]=_.useState(""),[s,l]=_.useState(!0),[c,h]=_.useState(null),m=Tt(),f=_.useRef(null),[y,x]=_.useState(1),[S,w]=_.useState(1),[j,E]=_.useState(0),A=10,k=_.useCallback(async(z,L,V)=>{l(!0),h(null);try{let M=`/api/pharmacy-orders?page=${z}&limit=${L}`;V&&V.trim()!==""&&(M+=`&search=${encodeURIComponent(V.trim())}`);const B=await pe(M);if(!B.ok)throw new Error(`Failed to fetch orders: ${B.statusText} (${B.status})`);const ee=await B.json();if(ee&&Array.isArray(ee.orders)&&typeof ee.totalOrders=="number"&&typeof ee.totalPages=="number")console.log("Fetched pharmacy orders data:",ee.orders),n(ee.orders),E(ee.totalOrders),w(ee.totalPages),x(ee.currentPage||z);else throw console.error("Received data does not match expected paginated structure:",ee),new Error("Invalid data format received from API")}catch(M){console.error("Failed to fetch pharmacy orders:",M),h(M.message||"Failed to fetch orders. Please try again."),n([]),w(1),E(0)}finally{l(!1)}},[]);_.useEffect(()=>(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{const z=e===""?y:1;e!==""&&y!==1&&x(1),k(z,A,e)},500),()=>{f.current&&clearTimeout(f.current)}),[e,y,k,A]);const P=z=>{m(`/dashboard/edit-pharmacy-order/${z}`)},R=z=>{h(null),console.log(`Preparing billing navigation for order: ${z}`);const L=t.find(V=>V.id===z);if(L){const V=L.medications.map(B=>{const ee=B.price??0;return(B.price===void 0||B.price===null)&&console.warn(`Medication "${B.name}" in order ${z} is missing a price. Defaulting to 0.`),{name:B.name,quantity:B.quantity,price:ee,total:ee*B.quantity,drug_id:B.drug_id?String(B.drug_id):null}}),M={patientId:L.patientId,patientName:L.patientName||`Patient (ID: ${L.patientId.substring(0,6)})`,initialItems:V,billType:"pharmacy",relatedId:L.id,initialStatus:"pending"};console.log("Navigating to /billing with state:",M),m("/billing",{state:M})}else console.error(`Order with ID ${z} not found.`),h(`Order with ID ${z} not found.`),alert(`Error: Could not find order ${z} to bill.`)},Y=async(z,L)=>{h(null);const V={status:L};try{const M=await pe(`/api/pharmacy-orders/${z}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!M.ok){const ee=await M.text();throw new Error(`Failed to update status: ${M.statusText} (${M.status}) - ${ee}`)}const B=await M.json();n(ee=>ee.map(ie=>ie.id===B.id?{...ie,status:B.status}:ie))}catch(M){console.error("Failed to update order status:",M),h(M.message||`Failed to update status for order ${z}.`),alert(`Error updating status for order ${z}: ${M.message||"Please try again."}`)}},F=z=>{switch(z){case"pending":return"status-pill status-pill-pending";case"billed":return"status-pill status-pill-billed";case"dispensed":return"status-pill status-pill-dispensed";case"cancelled":return"status-pill status-pill-cancelled";default:return"status-pill status-pill-default"}},q=z=>{m(`/dashboard/orders/${z.id}`)};return s&&t.length===0&&!c?r.jsx("div",{className:"loading-pulse",children:"Loading Orders..."}):c&&t.length===0?r.jsxs("div",{className:"error-message-box",children:["Error loading orders: ",c]}):r.jsxs("div",{className:"pharmacy-queue-container",children:[r.jsxs("div",{className:"pharmacy-queue-header",children:[r.jsx("h3",{className:"pharmacy-queue-title",children:"Pharmacy Queue"}),r.jsxs("div",{className:"pharmacy-actions-container",children:[r.jsxs("div",{className:"pharmacy-buttons-group",children:[r.jsxs("button",{onClick:()=>m("/dashboard/add-order"),className:"pharmacy-action-button btn-add-order",children:[r.jsx(up,{size:16}),"Add Order"]}),r.jsxs("button",{onClick:()=>m("/dashboard/inventory"),className:"pharmacy-action-button btn-inventory",title:"View Pharmacy Inventory",children:[r.jsx(Xm,{size:16}),"Inventory"]}),r.jsxs("button",{onClick:()=>m("/dashboard/search-patient-records"),className:"pharmacy-action-button btn-ai-search",title:"Search Patient Records with Newton's AI",children:[r.jsx(lC,{size:16}),"Newton's AI"]})]}),r.jsxs("div",{className:"pharmacy-search-input-container",children:[r.jsx("input",{type:"text",placeholder:"Search orders by patient name, token, or medication...",value:e,onChange:z=>i(z.target.value),className:"pharmacy-search-input"}),r.jsx(Ts,{size:18,className:"pharmacy-search-icon"})]})]})]}),r.jsxs("div",{className:"pharmacy-orders-scroll-container",children:[c&&t.length>0&&r.jsxs("div",{className:"error-message-box",children:["Error: ",c]}),s&&t.length>0&&r.jsx("div",{className:"loading-pulse",children:"Updating Orders..."}),!s&&t.length===0&&!c&&r.jsx("div",{className:"empty-state-message",children:e?`No pharmacy orders found matching "${e}".`:"There are currently no pharmacy orders."}),t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pharmacy-table-container",children:r.jsxs("table",{className:"pharmacy-queue-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{className:"hidden md:table-cell",children:"Date"})," ",r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:t.map(z=>r.jsxs("tr",{onClick:()=>q(z),style:{cursor:"pointer"},children:[r.jsxs("td",{children:[r.jsx("div",{className:"patient-name",children:z.patientName}),r.jsx("div",{className:"patient-token",title:`Patient Token: ${z.patientTokenNumber}`,children:z.patientTokenNumber})]}),r.jsxs("td",{className:"medication-info",children:[z.medications.map((L,V)=>r.jsxs("div",{className:"medication-item",children:[r.jsxs("span",{children:[L.name," (Qty: ",L.quantity,", ",L.tabletsPerDay??"N/A","x",L.numberOfDays??"N/A","d)",L.box_number&&r.jsxs("span",{className:"medication-box-number",children:[" (Box: ",L.box_number,")"]})]}),L.directions_to_use&&r.jsxs("span",{className:"medication-directions",children:["Directions: ",L.directions_to_use]})]},V)),z.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"unavailable-drugs-note",children:[r.jsx("strong",{children:"Unavailable Drugs Note:"})," ",z.prescriptionForUnavailableDrugs]})]}),r.jsx("td",{className:"hidden md:table-cell date-info",children:new Date(z.date).toLocaleDateString()}),r.jsx("td",{children:r.jsx("span",{className:F(z.status),children:z.status})}),r.jsx("td",{children:r.jsxs("div",{className:"pharmacy-table-actions",children:[z.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:L=>{L.stopPropagation(),P(z.id)},className:"pharmacy-table-action-button btn-edit-order",children:[r.jsx(qf,{size:14})," Edit"]}),r.jsxs("button",{onClick:L=>{L.stopPropagation(),R(z.id)},className:"pharmacy-table-action-button btn-bill-order",children:[r.jsx(Ku,{size:14})," Bill"]})]}),z.status==="billed"&&r.jsxs("button",{onClick:L=>{L.stopPropagation(),Y(z.id,"dispensed")},className:"pharmacy-table-action-button btn-dispense-order",children:[r.jsx(Xa,{size:14})," Dispense"]}),(z.status==="pending"||z.status==="billed")&&r.jsx("button",{onClick:L=>{L.stopPropagation(),Y(z.id,"cancelled")},className:"pharmacy-table-action-button btn-cancel-order",children:"Cancel"}),r.jsx("button",{onClick:L=>{L.stopPropagation(),q(z)},className:"pharmacy-table-action-button btn-details-order",children:"Details"})]})})]},z.id))})]})}),r.jsx("div",{className:"pharmacy-card-view-container",children:t.map(z=>{const L=F(z.status);return r.jsxs("div",{className:"pharmacy-order-card",onClick:()=>q(z),children:[r.jsxs("div",{className:"pharmacy-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"pharmacy-card-patient-name",children:z.patientName||"N/A"}),r.jsxs("div",{className:"pharmacy-card-patient-token",title:`Patient Token: ${z.patientTokenNumber}`,children:["Token: ",z.patientTokenNumber||"N/A"]}),r.jsx("div",{className:"pharmacy-card-date",children:new Date(z.date).toLocaleDateString()})]}),r.jsx("span",{className:L,children:z.status})]}),r.jsxs("div",{className:"pharmacy-card-medications",children:[r.jsx("p",{className:"pharmacy-card-medications-title",children:"Medications:"}),r.jsxs("div",{className:"space-y-0_5",children:[" ",z.medications.slice(0,2).map((V,M)=>r.jsxs("div",{className:"pharmacy-card-medication-item",children:[r.jsxs("span",{title:`${V.name} (Qty: ${V.quantity}, ${V.tabletsPerDay??"N/A"}x${V.numberOfDays??"N/A"}d)`,children:[V.name," (Qty: ",V.quantity,", ",V.tabletsPerDay??"N/A","x",V.numberOfDays??"N/A","d)",V.box_number&&r.jsxs("span",{className:"medication-box-number",children:[" (Box: ",V.box_number,")"]})]}),V.directions_to_use&&r.jsxs("span",{className:"medication-directions",title:`Directions: ${V.directions_to_use}`,children:["Directions: ",V.directions_to_use]})]},M)),z.medications.length>2&&r.jsxs("div",{className:"pharmacy-card-medications-more",children:["...and ",z.medications.length-2," more"]}),z.medications.length===0&&r.jsx("div",{className:"pharmacy-card-no-medications",children:"No medications listed."})]}),z.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"unavailable-drugs-note",children:[r.jsx("strong",{children:"Unavailable Drugs Note:"})," ",z.prescriptionForUnavailableDrugs]})]}),r.jsxs("div",{className:"pharmacy-card-actions",children:[z.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:V=>{V.stopPropagation(),P(z.id)},className:"pharmacy-table-action-button btn-edit-order",children:[r.jsx(qf,{size:14})," Edit"]}),r.jsxs("button",{onClick:V=>{V.stopPropagation(),R(z.id)},className:"pharmacy-table-action-button btn-bill-order",children:[r.jsx(Ku,{size:14})," Bill"]})]}),z.status==="billed"&&r.jsxs("button",{onClick:V=>{V.stopPropagation(),Y(z.id,"dispensed")},className:"pharmacy-table-action-button btn-dispense-order",children:[r.jsx(Xa,{size:14})," Dispense"]}),(z.status==="pending"||z.status==="billed")&&r.jsx("button",{onClick:V=>{V.stopPropagation(),Y(z.id,"cancelled")},className:"pharmacy-table-action-button btn-cancel-order",children:"Cancel"}),r.jsx("button",{onClick:V=>{V.stopPropagation(),q(z)},className:"pharmacy-table-action-button btn-details-order",children:"Details"})]})]},z.id)})})]}),!s&&S>1&&r.jsxs("div",{className:"pharmacy-pagination-container",children:[r.jsxs("div",{className:"pagination-mobile-controls",children:[r.jsx("button",{onClick:()=>x(z=>Math.max(z-1,1)),disabled:y===1,className:"pagination-button prev",children:"Previous"}),r.jsx("button",{onClick:()=>x(z=>Math.min(z+1,S)),disabled:y===S,className:"pagination-button next",children:"Next"})]}),r.jsxs("div",{className:"pagination-desktop-controls",children:[r.jsx("div",{className:"pagination-info",children:r.jsxs("p",{children:["Showing ",r.jsx("span",{className:"font-medium",children:(y-1)*A+1})," ","to ",r.jsx("span",{className:"font-medium",children:Math.min(y*A,j)})," ","of ",r.jsx("span",{className:"font-medium",children:j})," results"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"pagination-nav","aria-label":"Pagination",children:[r.jsxs("button",{onClick:()=>x(z=>Math.max(z-1,1)),disabled:y===1,className:"pagination-nav-button prev",children:[r.jsx("span",{className:"sr-only",children:"Previous"}),r.jsx(C0,{"aria-hidden":"true"})]}),r.jsxs("span",{"aria-current":"page",className:"pagination-current-page",children:["Page ",y," of ",S]}),r.jsxs("button",{onClick:()=>x(z=>Math.min(z+1,S)),disabled:y===S,className:"pagination-nav-button next",children:[r.jsx("span",{className:"sr-only",children:"Next"}),r.jsx(xx,{"aria-hidden":"true"})]})]})})]})]})]})," "]})},cU=()=>{const t=Tt();return r.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-lg shadow",children:[r.jsx("button",{onClick:()=>t(-1),className:"mb-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Settings"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Pharmacy settings will be configured here."})]})},JS=()=>{const t=Tt(),[n,e]=_.useState({name:"",description:"",price:0,quantity_in_stock:0,unit:"",supplier:"",expiry_date:"",buying_price:null,box_number:""}),[i,s]=_.useState(null),[l,c]=_.useState(!1),[h,m]=_.useState(!1),f=_.useRef(null),y=w=>{const{name:j,value:E,type:A}=w.target;e(k=>({...k,[j]:A==="number"?parseFloat(E)||null:E}))},x=()=>{t("/pharmacy/inventory")},S=async w=>{if(w.preventDefault(),s(null),c(!0),!n.name||n.price===void 0||n.quantity_in_stock===void 0){s("Name, Price, and Stock Quantity are required."),c(!1);return}const j={...n,buying_price:n.buying_price===0?null:n.buying_price,expiry_date:n.expiry_date===""?null:n.expiry_date};try{const E=await pe("/api/drugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!E.ok){const k=await E.json();throw new Error(k.message||`Failed to add drug: ${E.statusText}`)}const A=await E.json();alert(`Drug "${A.name}" added successfully!`),t("/pharmacy/inventory")}catch(E){console.error("Failed to add drug:",E),s(E.message||"Failed to add drug. Please try again.")}finally{c(!1)}};return r.jsx("div",{className:"add-drug-form-page",children:r.jsxs("div",{className:"add-drug-form-container max-w-2xl mx-auto",children:[r.jsxs("div",{className:"add-drug-form-header",children:[r.jsx("h2",{children:"Add New Drug"}),r.jsx("button",{onClick:x,className:"cancel-button",title:"Back to Inventory",children:r.jsx(Vi,{size:24})})]}),i&&r.jsx("div",{className:"error-message",children:i}),r.jsxs("form",{onSubmit:S,className:"add-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"name",className:"form-label",children:"Drug Composition + Pack Details *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:`Enter the drug's composition and pack details. The pack details should specify the smallest unit you sell. For example: "Albendazole Tablets 400mg 10 Tablets Pack", "Albendazole 200mg/5ml 10ml Bottle", or "Permethrin 5% Lotion 500ml Bottle".`})]})]}),r.jsx("input",{type:"text",name:"name",id:"name",required:!0,value:n.name,onChange:y,className:"custom-text-input mt-1",placeholder:"e.g., Albendazole Tablets 400mg 10 Tablets Pack; Albendazole 200mg/5ml 10ml Bottle; Permethrin 5% Lotion 500ml Bottle"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"price",className:"form-label",children:"Price (₹) *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"price",id:"price",required:!0,step:"0.01",min:"0",value:n.price,onChange:y,className:"custom-text-input mt-1",placeholder:"e.g., 500"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"quantity_in_stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"quantity_in_stock",id:"quantity_in_stock",required:!0,step:"1",min:"0",value:n.quantity_in_stock,onChange:y,className:"custom-text-input mt-1",placeholder:"e.g., 5"})]}),r.jsxs("div",{style:{display:"none"},children:[r.jsx("label",{htmlFor:"unit",className:"form-label",children:"Unit (e.g., tablet, ml)"}),r.jsx("input",{type:"text",name:"unit",id:"unit",value:n.unit||"",onChange:y,className:"custom-text-input mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"expiry_date",value:n.expiry_date||"",onChange:y,className:"custom-text-input mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"box_number",value:n.box_number||"",onChange:y,className:"custom-text-input mt-1"})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:f,children:[r.jsx("button",{type:"button",onClick:()=>m(!h),className:"form-button w-full text-left",children:"Others"}),h&&r.jsx("div",{className:"absolute z-10 mt-2 w-full bg-white rounded-md shadow-lg",children:r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"description",rows:3,value:n.description||"",onChange:y,className:"custom-text-input mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"supplier",value:n.supplier||"",onChange:y,className:"custom-text-input mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"buying_price",className:"form-label",children:"Buying Price (₹)"}),r.jsx("input",{type:"number",name:"buying_price",id:"buying_price",step:"0.01",min:"0",value:n.buying_price??"",onChange:y,placeholder:"Optional",className:"custom-text-input mt-1"})]})]})})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:x,disabled:l,className:"form-button cancel-form-button",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"form-button submit-form-button inline-flex justify-center",children:l?"Adding...":"Add Drug"})]})]})]})})},QS=()=>{const{id:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState(!0),[c,h]=_.useState(null),[m,f]=_.useState(!1),[y,x]=_.useState(!1),S=_.useRef(null),w=_.useCallback(async()=>{if(!t){h("Drug ID is missing."),l(!1);return}l(!0),h(null);try{const k=await pe(`/api/drugs/${t}`);if(!k.ok){const R=await k.json();throw new Error(R.message||`Failed to fetch drug: ${k.statusText}`)}let P=await k.json();P={...P,price:parseFloat(String(P.price))||0,buying_price:P.buying_price!==null&&P.buying_price!==void 0?parseFloat(String(P.buying_price)):null,quantity_in_stock:parseInt(String(P.quantity_in_stock),10)||0},i(P)}catch(k){console.error("Failed to fetch drug:",k),h(k.message||"Failed to load drug data. Please try again.")}finally{l(!1)}},[t]);_.useEffect(()=>{w()},[w]);const j=k=>{const{name:P,value:R,type:Y}=k.target;i(F=>F?{...F,[P]:Y==="number"?parseFloat(R)||null:R}:null)},E=()=>{n(-1)},A=async k=>{if(k.preventDefault(),h(null),f(!0),!e||!e.id){h("Cannot edit drug: No drug data available."),f(!1);return}if(!e.name||e.price===void 0||e.quantity_in_stock===void 0){h("Name, Price, and Stock Quantity are required."),f(!1);return}const P={...e,buying_price:e.buying_price===0?null:e.buying_price,expiry_date:e.expiry_date===""?null:e.expiry_date};try{const R=await pe(`/api/drugs/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!R.ok){const F=await R.json();throw new Error(F.message||`Failed to update drug: ${R.statusText}`)}const Y=await R.json();alert(`Drug "${Y.name}" updated successfully!`),n(-1)}catch(R){console.error("Failed to update drug:",R),h(R.message||"Failed to update drug. Please try again.")}finally{f(!1)}};return s?r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"loading-message",children:"Loading drug data..."})}):c&&!e?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"error-message-load",children:["Error: ",c]})}):e?r.jsx("div",{className:"edit-drug-form-page",children:r.jsxs("div",{className:"edit-drug-form-container",children:[r.jsxs("div",{className:"edit-drug-form-header",children:[r.jsxs("h2",{children:["Edit Drug: ",e.name]}),r.jsx("button",{onClick:E,className:"cancel-button",title:"Go Back",children:r.jsx(Vi,{size:24})})]}),c&&r.jsx("div",{className:"error-message-submit",children:c}),r.jsxs("form",{onSubmit:A,className:"edit-drug-form",children:[r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-name",className:"form-label",children:"Drug Composition + Pack Details *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:`Enter the drug's composition and pack details. The pack details should specify the smallest unit you sell. For example: "Albendazole Tablets 400mg 10 Tablets Pack", "Albendazole 200mg/5ml 10ml Bottle", or "Permethrin 5% Lotion 500ml Bottle".`})]})]}),r.jsx("input",{type:"text",name:"name",id:"edit-name",required:!0,value:e.name,onChange:j,className:"custom-text-input",placeholder:"e.g., Albendazole Tablets 400mg 10 Tablets Pack; Albendazole 200mg/5ml 10ml Bottle; Permethrin 5% Lotion 500ml Bottle"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-price",className:"form-label",children:"Price (₹) *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the price for the pack size mentioned above. For example, if the pack is 10 tablets, enter the price for all 10 tablets."})]})]}),r.jsx("input",{type:"number",name:"price",id:"edit-price",required:!0,step:"0.01",min:"0",value:e.price,onChange:j,className:"custom-text-input",placeholder:"e.g., 500"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:"edit-quantity_in_stock",className:"form-label",children:"Stock Quantity *"}),r.jsxs("div",{className:"relative ml-2 group",children:[r.jsx(jc,{size:16,className:"text-gray-400"}),r.jsx("div",{className:"tooltip",children:"Enter the number of packs you have in stock. For example, if you have 5 strips of 10 tablets each, enter 5."})]})]}),r.jsx("input",{type:"number",name:"quantity_in_stock",id:"edit-quantity_in_stock",required:!0,step:"1",min:"0",value:e.quantity_in_stock,onChange:j,className:"custom-text-input",placeholder:"e.g., 5"})]}),r.jsxs("div",{style:{display:"none"},children:[r.jsx("label",{htmlFor:"edit-unit",className:"form-label",children:"Unit"}),r.jsx("input",{type:"text",name:"unit",id:"edit-unit",value:e.unit||"",onChange:j,className:"custom-text-input"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-expiry_date",className:"form-label",children:"Expiry Date"}),r.jsx("input",{type:"date",name:"expiry_date",id:"edit-expiry_date",value:e.expiry_date||"",onChange:j,className:"custom-text-input"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-box_number",className:"form-label",children:"Box Number"}),r.jsx("input",{type:"text",name:"box_number",id:"edit-box_number",value:e.box_number||"",onChange:j,className:"custom-text-input"})]}),r.jsxs("div",{className:"relative sm-col-span-2",ref:S,children:[r.jsx("button",{type:"button",onClick:()=>x(!y),className:"form-button w-full text-left",children:"Others"}),y&&r.jsx("div",{className:"absolute z-10 mt-2 w-full bg-white rounded-md shadow-lg",children:r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"sm-col-span-2",children:[r.jsx("label",{htmlFor:"edit-description",className:"form-label",children:"Description"}),r.jsx("textarea",{name:"description",id:"edit-description",rows:3,value:e.description||"",onChange:j,className:"custom-text-input"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-supplier",className:"form-label",children:"Supplier"}),r.jsx("input",{type:"text",name:"supplier",id:"edit-supplier",value:e.supplier||"",onChange:j,className:"custom-text-input"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-buying_price",className:"form-label",children:"Buying Price (₹)"}),r.jsx("input",{type:"number",name:"buying_price",id:"edit-buying_price",step:"0.01",min:"0",value:e.buying_price??"",onChange:j,placeholder:"Optional",className:"custom-text-input"})]})]})})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",onClick:E,disabled:m,className:"form-button cancel-form-button",children:"Back"}),r.jsx("button",{type:"submit",disabled:m,className:"form-button submit-form-button",children:m?"Saving...":"Save Changes"})]})]})]})}):r.jsx("div",{className:"edit-drug-form-page",children:r.jsx("div",{className:"not-found-message",children:"Drug not found."})})},r0=()=>{const t=Tt(),[n,e]=_.useState({name:"",age:"",gender:"",phone:"",complaint:"",doctorId:""}),[i,s]=_.useState(!1),[l,c]=_.useState(null),[h,m]=_.useState(null),[f,y]=_.useState(""),[x,S]=_.useState([]),[w,j]=_.useState(null),[E,A]=_.useState(!1),[k,P]=_.useState([]),[R,Y]=_.useState(!0);_.useEffect(()=>{(async()=>{Y(!0);try{const B=await pe("/api/staff?role=doctor");if(!B.ok)throw new Error("Failed to fetch doctors");const ee=await B.json();P(ee),ee.length>0&&e(ie=>({...ie,doctorId:""}))}catch(B){console.error("Error fetching doctors:",B),c(`Failed to load doctors: ${B.message}`)}finally{Y(!1)}})()},[]);const F=_.useCallback(async()=>{if(f.trim()){A(!0),c(null),S([]);try{const M=encodeURIComponent(f.trim()),B=await pe(`/api/patients?search=${M}&limit=10`);if(!B.ok){const ie=await B.json().catch(()=>({message:"Failed to search patients"}));throw new Error(ie.message||"Failed to search patients")}const ee=await B.json();ee&&Array.isArray(ee.patients)?S(ee.patients):(console.error("Unexpected response format from patient search:",ee),S([]))}catch(M){console.error("Error searching patients:",M),c(`Search failed: ${M.message}`)}finally{A(!1)}}},[f]);_.useEffect(()=>{if(f.trim().length<2){S([]),c(null);return}const M=setTimeout(()=>{F()},300);return()=>clearTimeout(M)},[f,F]);const q=M=>{j(M),y(""),S([]),c(null),e(B=>({...B,name:"",age:"",gender:"",phone:""}))},z=()=>{j(null),y(""),S([]),c(null),e(M=>({...M,name:"",age:"",gender:"",phone:""}))},L=M=>{const{name:B,value:ee}=M.target;e(ie=>({...ie,[B]:ee}))},V=async M=>{var B;M.preventDefault(),c(null),m(null),s(!0);try{let ee,ie;if(w)ee=w.id,ie=w.name,console.log(`Adding existing patient ${ee} to queue.`);else{console.log("Registering new patient...");const K=await pe("/api/patients",{method:"POST",body:JSON.stringify({name:n.name,age:n.age?parseInt(n.age,10):null,gender:n.gender||null,phone:n.phone||null})});if(!K.ok){const ve=await K.json();if(K.status===403&&ve.message.includes("Patient limit")){t("/start-clinic-subscription",{state:{errorMessage:ve.message}});return}throw new Error(ve.message||"Failed to register patient")}const re=await K.json();ee=re.id,ie=re.name,console.log(`New patient ${ee} registered.`)}const te=n.doctorId||null;console.log(`Adding patient ${ee} to queue for doctor ${te||"Unassigned"}`);const se=await pe("/api/queue",{method:"POST",body:JSON.stringify({patientId:ee,complaint:n.complaint||null,doctorId:te})});if(!se.ok){const K=await se.json();throw new Error(K.message||"Failed to add patient to queue")}const X=await se.json();if(console.log(`Patient added to queue, entry ID: ${X.id}`),j(null),y(""),S([]),e({name:"",age:"",gender:"",phone:"",complaint:"",doctorId:""}),te){const K=((B=k.find(ve=>ve.id===te))==null?void 0:B.name)||"Selected Doctor",re=w?`Existing patient "${ie}" added to queue for Dr. ${K}. Redirecting to billing...`:`Patient "${ie}" registered and added to queue for Dr. ${K}. Redirecting to billing...`;m(re),t("/billing",{state:{patientId:ee,queueId:X.id,patientName:ie,doctorId:te,billType:"consultation"}})}else{const K=w?`Existing patient "${ie}" added to the general queue.`:`Patient "${ie}" registered and added to the general queue.`;m(K)}}catch(ee){console.error("Error in add/queue process:",ee),ee.message.includes("Patient limit")?(c(`Operation failed: ${ee.message}. Please upgrade your plan.`),t("/start-clinic-subscription")):c(`Operation failed: ${ee.message}`)}finally{s(!1)}};return r.jsxs("div",{className:"add-patient-page-container flex flex-col items-center justify-start",children:[r.jsxs("div",{className:"w-full max-w-3xl mb-2 flex justify-start",children:[" ",r.jsxs("button",{onClick:()=>t(-1),className:"back-button",title:"Back to Previous Page",children:[r.jsx(en,{size:20,className:"btn-icon"})," Back"]})]}),r.jsxs("div",{className:"add-patient-card",children:[r.jsxs("h3",{className:"add-patient-title",children:[r.jsx(fC,{size:28})," ",w?"Add Existing Patient to Queue":"Register New Patient & Add to Queue"]}),r.jsxs("div",{className:"search-section",children:[r.jsx("legend",{className:"form-fieldset legend",children:"Find Existing Patient"})," ",r.jsxs("div",{className:"flex items-center space-x-2",children:[" ",r.jsxs("div",{className:"search-input-wrapper",children:[r.jsx("input",{type:"text",placeholder:"Search by Name or Phone...",value:f,onChange:M=>y(M.target.value),className:"form-input",disabled:i||!!w}),r.jsx(Ts,{size:18,className:`${E?"text-primary animate-pulse":""}`})," "]}),w&&r.jsxs("button",{type:"button",onClick:z,className:"btn btn-danger",title:"Clear Selection",children:[r.jsx(Vi,{size:16,className:"btn-icon"})," Clear"]})]}),x.length>0&&!w&&r.jsx("ul",{className:"search-results-list",children:x.map(M=>r.jsxs("li",{onClick:()=>q(M),children:[M.name," (ID: ",M.id,", Phone: ",M.phone||"N/A",")"]},M.id))}),f.length>=2&&x.length===0&&!E&&!w&&r.jsxs("p",{className:"search-info-text",children:['No patients found matching "',f,'". You can register them below.']}),E&&f.length>=2&&r.jsx("p",{className:"search-info-text searching",children:"Searching..."})]}),l&&r.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:l})]}),h&&r.jsxs("div",{className:"alert alert-success",role:"alert",children:[r.jsx("strong",{children:"Success: "}),r.jsx("span",{children:h})]}),r.jsxs("form",{onSubmit:V,className:"space-y-5",children:[" ",r.jsxs("fieldset",{className:`form-fieldset ${w?"fieldset-disabled":""}`,children:[r.jsx("legend",{children:w?`Selected Patient: ${w.name}`:"New Patient Details"}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Full Name *"}),r.jsx("input",{type:"text",name:"name",value:w?w.name:n.name,onChange:L,className:"form-input",required:!w,disabled:i||!!w})]}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Age"}),r.jsx("input",{type:"number",name:"age",value:w?w.age??"":n.age,onChange:L,className:"form-input",min:"0",disabled:i||!!w})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Gender"}),r.jsxs("select",{name:"gender",value:w?w.gender??"":n.gender,onChange:L,className:"form-select",disabled:i||!!w,children:[r.jsx("option",{value:"",children:"Select"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",value:w?w.phone??"":n.phone,onChange:L,className:"form-input",disabled:i||!!w})]})]})]}),r.jsxs("fieldset",{className:"form-fieldset",children:[r.jsx("legend",{children:"Visit Details"}),r.jsxs("div",{className:"form-grid form-grid-cols-2",children:[" ",r.jsxs("div",{children:[r.jsx("label",{className:"form-label",children:"Assign Doctor (Optional)"}),r.jsxs("select",{name:"doctorId",value:n.doctorId,onChange:L,className:`form-select ${R?"opacity-50":""}`,disabled:i||R,children:[r.jsx("option",{value:"",children:R?"Loading doctors...":k.length===0?"No doctors available":"-- No Doctor (Add to General Queue) --"}),k.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]}),k.length===0&&!R&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please add doctors via the Admin Panel."})]}),r.jsxs("div",{className:"form-grid-col-span-2",children:[" ",r.jsx("label",{className:"form-label",children:"Patient Data / Reason"}),r.jsx("textarea",{name:"complaint",value:n.complaint,onChange:L,rows:2,className:"form-textarea",disabled:i})]})]})]}),r.jsxs("div",{className:"flex justify-end pt-2",children:[" ",r.jsxs("button",{type:"submit",className:`btn btn-primary ${i||R?"disabled":""}`,disabled:i||R,children:[r.jsx(dC,{size:18,className:"btn-icon"}),i?"Processing...":w?"Add Existing to Queue":"Register & Add to Queue"]})]})]})]})]})},uU=({clinicId:t})=>{const n=Tt(),[e,i]=_.useState({name:"",email:"",role:"receptionist",password:"",opd_fee:""}),[s,l]=_.useState(null),[c,h]=_.useState(!1);_.useEffect(()=>{l(t?null:"Clinic information is missing. Cannot add staff. Please ensure you are logged in correctly.")},[t]);const m=x=>{const{name:S,value:w}=x.target;i(j=>{const E={...j,[S]:w};return S==="role"&&w!=="doctor"&&(E.opd_fee=""),E})},f=async x=>{if(x.preventDefault(),l(null),!e.name||!e.email||!e.role||!e.password){l("Name, Email, Role, and Password are required.");return}if(!t){l("Clinic information is missing. Cannot add staff.");return}const S={...e,clinic_id:t,opd_fee:e.role==="doctor"&&e.opd_fee?parseFloat(String(e.opd_fee)):null};if(S.role==="doctor"&&e.opd_fee&&isNaN(S.opd_fee)){l("Invalid OPD Fee format. Please enter a number.");return}h(!0);try{const w=await pe("/api/staff",{method:"POST",body:JSON.stringify(S)});if(!w.ok){const j=await w.json();throw new Error(j.message||"Server responded with an error")}n(-1)}catch(w){l(`Failed to add staff: ${w.message}`)}finally{h(!1)}},y=()=>{n(-1)};return r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:y,className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(en,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{children:"Add New Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),s&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),s]}),r.jsxs("form",{onSubmit:f,className:`staff-form ${t?"":"opacity-50 pointer-events-none"}`,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{id:"name",type:"text",name:"name",value:e.name||"",onChange:m,required:!0,disabled:c||!t,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",name:"email",value:e.email||"",onChange:m,required:!0,disabled:c||!t,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"role",children:"Assign Role"}),r.jsxs("select",{id:"role",name:"role",value:e.role||"receptionist",onChange:m,required:!0,disabled:c||!t,children:[r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"}),r.jsx("option",{value:"lab",children:"Lab Technician"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Set Initial Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:e.password||"",onChange:m,required:!0,disabled:c||!t,placeholder:"Create a password"})]}),e.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Consultation Fee (₹) (Optional)"}),r.jsx("input",{id:"opd_fee",type:"number",name:"opd_fee",value:e.opd_fee||"",onChange:m,step:"0.01",min:"0",placeholder:"e.g., 150.00",disabled:c||!t}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank if no specific fee is set for this doctor."})]}),r.jsxs("button",{type:"submit",disabled:c||!t,children:[c?r.jsx(Zu,{size:18,className:"animate-spin mr-2"}):r.jsx(vx,{size:18,className:"mr-2"}),c?"Adding...":"Add Staff Member"]})]})]})},dU=()=>{const{id:t}=Ar(),n=Tt(),[e,i]=_.useState({name:"",email:"",role:"receptionist",opd_fee:"",active:!0}),[s,l]=_.useState(""),[c,h]=_.useState(!0),[m,f]=_.useState(!1),[y,x]=_.useState(null),[S,w]=_.useState(null),j=_.useCallback(async()=>{if(!t){x("Staff ID is missing."),h(!1);return}h(!0),x(null),w(null);try{const P=await pe(`/staff/${t}`);if(!P.ok){const Y=await P.json();throw new Error(Y.message||`HTTP error! status: ${P.status}`)}const R=await P.json();i({name:R.name,email:R.email,role:R.role,opd_fee:R.opd_fee??"",active:R.active})}catch(P){x(`Failed to load staff details: ${P.message}`)}finally{h(!1)}},[t]);_.useEffect(()=>{j()},[j]);const E=P=>{const{name:R,value:Y,type:F}=P.target;if(F==="checkbox"){const{checked:q}=P.target;i(z=>({...z,[R]:q}))}else i(q=>({...q,[R]:Y}))},A=P=>{l(P.target.value)},k=async P=>{if(P.preventDefault(),!t){x("Staff ID is missing.");return}f(!0),x(null),w(null);const R={name:e.name,email:e.email,role:e.role,active:e.active};if(e.role==="doctor"){const Y=e.opd_fee?parseFloat(String(e.opd_fee)):null;if(Y!==null&&isNaN(Y)){x("OPD Fee must be a valid number."),f(!1);return}R.opd_fee=Y}else R.opd_fee=null;s.trim()!==""&&(R.password=s.trim());try{const Y=await pe(`/staff/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!Y.ok){const F=await Y.json();throw new Error(F.message||`HTTP error! status: ${Y.status}`)}w("Staff details updated successfully!"),l(""),setTimeout(()=>n(-1),1500)}catch(Y){x(`Failed to update staff: ${Y.message}`)}finally{f(!1)}};return c?r.jsxs("div",{className:"flex justify-center items-center h-screen",children:[r.jsx(Zu,{className:"h-12 w-12 animate-spin text-teal-600"}),r.jsx("span",{className:"ml-4 text-xl text-gray-700",children:"Loading Staff Details..."})]}):r.jsxs("div",{className:"staff-page-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(en,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("div",{className:"w-16"})," "]}),y&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",children:[r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),y,r.jsx("button",{onClick:()=>x(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:"×"})]}),S&&r.jsxs("div",{className:"success-message mb-4 p-3 bg-green-100 border border-green-400 rounded-md flex items-center",children:[r.jsx(Xa,{size:18,className:"mr-2 text-green-500"}),S,r.jsx("button",{onClick:()=>w(null),className:"ml-auto text-green-600 hover:text-green-800 text-xl font-bold",children:"×"})]}),r.jsxs("form",{onSubmit:k,className:"staff-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:e.name||"",onChange:E,required:!0,placeholder:"Enter full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"email",children:["Email Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"email",id:"email",name:"email",value:e.email||"",onChange:E,required:!0,placeholder:"Enter email address"})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"role",children:["Role ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"role",name:"role",value:e.role||"receptionist",onChange:E,required:!0,children:[r.jsx("option",{value:"doctor",children:"Doctor"}),r.jsx("option",{value:"receptionist",children:"Receptionist"}),r.jsx("option",{value:"lab",children:"Lab Technician"}),r.jsx("option",{value:"pharmacy",children:"Pharmacist"})]})]}),e.role==="doctor"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"opd_fee",children:"OPD Fee (₹)"}),r.jsx("input",{type:"number",id:"opd_fee",name:"opd_fee",value:e.opd_fee||"",onChange:E,min:"0",step:"0.01",placeholder:"Enter OPD consultation fee (optional)"})]}),r.jsxs("div",{className:"form-group checkbox-group",children:[r.jsx("input",{id:"active",name:"active",type:"checkbox",checked:e.active??!0,onChange:E}),r.jsxs("label",{htmlFor:"active",className:"mb-0",children:[" ","Account Active"]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"New Password (optional)"}),r.jsx("input",{type:"password",id:"password",name:"password",value:s,onChange:A,placeholder:"Leave blank to keep current password",autoComplete:"new-password"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a new password only if you want to change it. Minimum 6 characters."})]}),r.jsx("button",{type:"submit",disabled:m,children:m?r.jsxs(r.Fragment,{children:[r.jsx(Zu,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(id,{size:16,className:"mr-2"}),"Save Changes"]})})]})]})},fU=()=>{const t=Tt(),[n,e]=_.useState("select_patient"),[i,s]=_.useState({name:"",age:void 0,gender:null,phone:"",address:""}),[l,c]=_.useState(null),[h,m]=_.useState([]),[f,y]=_.useState([]),[x,S]=_.useState(""),[w,j]=_.useState([]),[E,A]=_.useState(""),[k,P]=_.useState([]),[R,Y]=_.useState(!1),[F,q]=_.useState(null),[z,L]=_.useState(null),[V,M]=_.useState(null),[B,ee]=_.useState(!1),ie=_.useCallback(async()=>{if(!(h.length>0)){ee(!0),M(null);try{const ne=await pe("/api/lab-tests");if(!ne.ok)throw new Error("Failed to fetch lab tests");const me=await ne.json();m(me)}catch(ne){console.error("Failed to fetch available lab tests:",ne),M("Could not load lab test list: "+ne.message),m([])}finally{ee(!1)}}},[]);_.useEffect(()=>{if(!x){j([]);return}const ne=x.toLowerCase();j(h.filter(me=>me.name.toLowerCase().includes(ne)||me.description&&me.description.toLowerCase().includes(ne)).slice(0,10))},[x,h]);const te=_.useMemo(()=>T0(async ne=>{if(ne.trim().length<2){P([]),Y(!1),q(null);return}Y(!0),q(null);try{const me=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ue=await pe(`/api/patients?${me.toString()}`);if(!ue.ok){const ge=await ue.text();throw new Error(`API Error (${ue.status}): ${ge||ue.statusText}`)}const je=await ue.json();P(je.patients)}catch(me){console.error("Error searching lab patients:",me),q(me.message||"Failed to search lab patients."),P([])}finally{Y(!1)}},300),[]),se=ne=>{const me=ne.target.value;A(me),Y(!0),te(me)},X=()=>{s({name:"",age:void 0,gender:null,phone:"",address:""}),L(null),e("create_patient"),c(null)},K=()=>{e("select_patient"),c(null),A(""),P([]),q(null)},re=ne=>{const{name:me,value:ue}=ne.target;s(je=>({...je,[me]:me==="age"?ue?parseInt(ue,10):void 0:ue}))},ve=async ne=>{if(ne.preventDefault(),L(null),!i.name){L("Patient Name is required.");return}const me={name:i.name,age:i.age,gender:i.gender,phone:i.phone,address:i.address};try{const ue=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(!ue.ok){const ge=await ue.json();throw new Error(ge.message||`Failed to create patient: ${ue.statusText}`)}const je=await ue.json();alert(`Patient "${je.name}" created successfully!`),I({id:je.id,name:je.name,token:je.token??null,age:je.age??null,gender:je.gender??null,phone:je.phone})}catch(ue){console.error("Failed to create patient:",ue),L(ue.message||"Failed to create patient. Please try again.")}},I=ne=>{const me={id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone};c(me),e("create_order"),y([]),S(""),j([]),M(null),ie()},de=ne=>{if(f.some(me=>me.id===ne.id)){M(`${ne.name} is already in the order.`),setTimeout(()=>M(null),3e3),S(""),j([]);return}y(me=>[...me,{...ne}]),S(""),j([])},ae=ne=>{y(me=>me.filter(ue=>ue.id!==ne))},H=async ne=>{if(ne.preventDefault(),M(null),!l){M("No patient selected.");return}if(f.length===0){M("No lab tests selected.");return}const me={patient_id:l.id,tests:f.map(ue=>({id:ue.id,name:ue.name,price:ue.price}))};console.log("Submitting Lab Order:",me);try{const ue=await pe("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)});if(!ue.ok){const ge=await ue.json();throw console.error("API Error Data:",ge),new Error(ge.message||`Failed to create lab order: ${ue.statusText}`)}const je=await ue.json();console.log("Lab Order Creation Result:",je),alert(`Lab order created successfully for ${l.name}!`),t(-1)}catch(ue){console.error("Failed to create lab order:",ue),M(ue.message||"Failed to create lab order.")}};return _.useEffect(()=>{ie()},[ie]),r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[r.jsx(en,{size:18,className:"mr-2"}),"Back"]}),r.jsx("h1",{className:"lab-inventory-header",children:"Create New Lab Order"}),r.jsx("div",{className:"w-16"})," "]}),(n==="select_patient"||n==="create_patient")&&r.jsxs("div",{className:"lab-inventory-card",children:[n==="select_patient"&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"1px solid #eee",marginBottom:"15px"},children:"Select Existing Patient"}),r.jsxs("div",{className:"lab-inventory-form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-patient-search",children:"Search Patient (Name, Token, or Phone)"}),r.jsx("input",{type:"text",id:"lab-patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:E,onChange:se,className:"lab-inventory-input",autoFocus:!0}),R&&r.jsx("span",{className:"loading-text",style:{position:"absolute",right:"10px",top:"35px",fontSize:"0.8em"},children:"Searching..."})]}),F&&r.jsx("div",{className:"error-text",children:F}),k.length>0&&r.jsx("div",{className:"lab-inventory-card",style:{maxHeight:"300px",overflowY:"auto",padding:"0",marginTop:"10px"},children:r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:k.map(ne=>r.jsxs("li",{onClick:()=>I(ne),className:"lab-inventory-link",style:{padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{children:[r.jsxs("span",{style:{color:"#007bff",marginRight:"10px"},children:["[#",ne.token,"]"]}),ne.name]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[ne.age?`${ne.age} yrs`:"",ne.age&&ne.gender?" / ":"",ne.gender||"N/A"]})]},ne.id))})}),E.length>=2&&!R&&k.length===0&&!F&&r.jsxs("p",{className:"no-data-message",children:['No patients found matching "',E,'".']}),E.length<2&&!R&&r.jsx("p",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter at least 2 characters to search."}),r.jsx("button",{onClick:X,className:"lab-inventory-link",style:{marginTop:"15px",background:"none",border:"none",padding:"0",cursor:"pointer"},children:"Or, Register New Patient"})]}),n==="create_patient"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsx("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"none",margin:"0"},children:"Register New Patient"}),r.jsx("button",{onClick:K,className:"lab-inventory-link",style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:" Back to Search "})]}),z&&r.jsx("div",{className:"error-text",children:z}),r.jsxs("form",{onSubmit:ve,children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-name",children:"Name *"}),r.jsx("input",{type:"text",name:"name",id:"lab-patient-name",required:!0,value:i.name,onChange:re,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"lab-patient-age",children:"Age"}),r.jsx("input",{type:"number",name:"age",id:"lab-patient-age",value:i.age??"",onChange:re,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:"lab-patient-gender",children:"Gender"}),r.jsxs("select",{name:"gender",id:"lab-patient-gender",value:i.gender??"",onChange:re,className:"lab-inventory-select",children:[r.jsx("option",{value:"",children:"Select..."})," ",r.jsx("option",{value:"M",children:"Male"})," ",r.jsx("option",{value:"F",children:"Female"})," ",r.jsx("option",{value:"O",children:"Other"})]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-phone",children:"Phone"}),r.jsx("input",{type:"tel",name:"phone",id:"lab-patient-phone",value:i.phone||"",onChange:re,className:"lab-inventory-input"})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{gridColumn:"1 / -1"},children:[r.jsx("label",{htmlFor:"lab-patient-address",children:"Address"}),r.jsx("textarea",{name:"address",id:"lab-patient-address",rows:2,value:i.address||"",onChange:re,className:"lab-inventory-input"})]})]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:K,className:"lab-inventory-button lab-inventory-button-secondary",children:" Cancel "}),r.jsx("button",{type:"submit",className:"lab-inventory-button",children:" Create Patient & Proceed "})]})]})]})]}),n==="create_order"&&l&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h2",{className:"lab-inventory-header",style:{fontSize:"1.5em",borderBottom:"none",margin:"0"},children:["Create Order for: ",l.name]}),r.jsx("button",{onClick:K,className:"lab-inventory-link",style:{background:"none",border:"none",padding:"0",cursor:"pointer"},children:" Change Patient "})]}),r.jsxs("p",{style:{fontSize:"0.9em",color:"#555",marginBottom:"20px"},children:["ID: ",l.id.substring(0,8),"... ",l.age&&`| Age: ${l.age}`," ",l.gender&&`| Gender: ${l.gender}`]}),V&&r.jsx("div",{className:"error-text",children:V}),r.jsxs("form",{onSubmit:H,children:[r.jsxs("div",{className:"lab-inventory-form-group",style:{position:"relative"},children:[r.jsx("label",{htmlFor:"lab-test-search",children:"Add Lab Test"}),r.jsx("input",{type:"text",id:"lab-test-search",placeholder:"Search available lab tests...",value:x,onChange:ne=>S(ne.target.value),className:"lab-inventory-input",disabled:B}),B&&r.jsx("span",{className:"loading-text",style:{position:"absolute",right:"10px",top:"35px",fontSize:"0.8em"},children:"Loading tests..."}),x&&w.length>0&&r.jsx("div",{className:"lab-inventory-card",style:{maxHeight:"200px",overflowY:"auto",padding:"0",marginTop:"5px",position:"absolute",width:"100%",zIndex:10},children:r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:w.map(ne=>r.jsxs("li",{onClick:()=>de(ne),className:"lab-inventory-link",style:{padding:"10px 15px",borderBottom:"1px solid #eee",cursor:"pointer",display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{children:ne.name}),r.jsxs("span",{style:{color:"#555",fontSize:"0.9em"},children:["(₹",parseFloat(ne.price).toFixed(2),")"]})]},ne.id))})}),x&&w.length===0&&!B&&r.jsxs("div",{className:"no-data-message",style:{marginTop:"5px"},children:['No tests found matching "',x,'".']})]}),r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px",maxHeight:"300px",overflowY:"auto"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.2em",borderBottom:"1px solid #eee",marginBottom:"10px"},children:"Selected Tests"}),f.length===0?r.jsx("p",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"0"},children:"No tests added yet."}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:f.map(ne=>r.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f0f0f0"},children:[r.jsx("span",{style:{flex:1,marginRight:"10px"},children:ne.name}),r.jsxs("span",{style:{fontWeight:"500",marginRight:"15px"},children:["₹",parseFloat(ne.price).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>ae(ne.id),className:"lab-inventory-link",title:"Remove Test",style:{background:"none",border:"none",padding:"0",cursor:"pointer",color:"#dc3545"},children:r.jsx(Co,{size:16})})]},ne.id))})]}),f.length>0&&r.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",fontSize:"1.2em",marginTop:"20px",marginBottom:"20px"},children:["Total: ₹",f.reduce((ne,me)=>ne+parseFloat(me.price),0).toFixed(2)]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[r.jsx("button",{type:"button",onClick:K,className:"lab-inventory-button lab-inventory-button-secondary",children:" Cancel Order "}),r.jsx("button",{type:"submit",disabled:f.length===0,className:`lab-inventory-button ${f.length===0?"opacity-50 cursor-not-allowed":""}`,children:" Create Lab Order "})]})]})]})]})};function hU(t,n){const e={};return(t[t.length-1]===""?[...t,""]:t).join((e.padRight?" ":"")+","+(e.padLeft===!1?"":" ")).trim()}const mU=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pU=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gU={};function KS(t,n){return(gU.jsx?pU:mU).test(t)}const yU=/[ \t\n\f\r]/g;function xU(t){return typeof t=="object"?t.type==="text"?XS(t.value):!1:XS(t)}function XS(t){return t.replace(yU,"")===""}class gp{constructor(n,e,i){this.normal=e,this.property=n,i&&(this.space=i)}}gp.prototype.normal={};gp.prototype.property={};gp.prototype.space=void 0;function oj(t,n){const e={},i={};for(const s of t)Object.assign(e,s.property),Object.assign(i,s.normal);return new gp(e,i,n)}function a0(t){return t.toLowerCase()}class Xr{constructor(n,e){this.attribute=e,this.property=n}}Xr.prototype.attribute="";Xr.prototype.booleanish=!1;Xr.prototype.boolean=!1;Xr.prototype.commaOrSpaceSeparated=!1;Xr.prototype.commaSeparated=!1;Xr.prototype.defined=!1;Xr.prototype.mustUseProperty=!1;Xr.prototype.number=!1;Xr.prototype.overloadedBoolean=!1;Xr.prototype.property="";Xr.prototype.spaceSeparated=!1;Xr.prototype.space=void 0;let vU=0;const It=rd(),yi=rd(),lj=rd(),He=rd(),On=rd(),Bf=rd(),wa=rd();function rd(){return 2**++vU}const s0=Object.freeze(Object.defineProperty({__proto__:null,boolean:It,booleanish:yi,commaOrSpaceSeparated:wa,commaSeparated:Bf,number:He,overloadedBoolean:lj,spaceSeparated:On},Symbol.toStringTag,{value:"Module"})),lb=Object.keys(s0);class H0 extends Xr{constructor(n,e,i,s){let l=-1;if(super(n,e),ZS(this,"space",s),typeof i=="number")for(;++l<lb.length;){const c=lb[l];ZS(this,lb[l],(i&s0[c])===s0[c])}}}H0.prototype.defined=!0;function ZS(t,n,e){e&&(t[n]=e)}function ih(t){const n={},e={};for(const[i,s]of Object.entries(t.properties)){const l=new H0(i,t.transform(t.attributes||{},i),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),n[i]=l,e[a0(i)]=i,e[a0(l.attribute)]=i}return new gp(n,e,t.space)}const cj=ih({properties:{ariaActiveDescendant:null,ariaAtomic:yi,ariaAutoComplete:null,ariaBusy:yi,ariaChecked:yi,ariaColCount:He,ariaColIndex:He,ariaColSpan:He,ariaControls:On,ariaCurrent:null,ariaDescribedBy:On,ariaDetails:null,ariaDisabled:yi,ariaDropEffect:On,ariaErrorMessage:null,ariaExpanded:yi,ariaFlowTo:On,ariaGrabbed:yi,ariaHasPopup:null,ariaHidden:yi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:On,ariaLevel:He,ariaLive:null,ariaModal:yi,ariaMultiLine:yi,ariaMultiSelectable:yi,ariaOrientation:null,ariaOwns:On,ariaPlaceholder:null,ariaPosInSet:He,ariaPressed:yi,ariaReadOnly:yi,ariaRelevant:null,ariaRequired:yi,ariaRoleDescription:On,ariaRowCount:He,ariaRowIndex:He,ariaRowSpan:He,ariaSelected:yi,ariaSetSize:He,ariaSort:null,ariaValueMax:He,ariaValueMin:He,ariaValueNow:He,ariaValueText:null,role:null},transform(t,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function uj(t,n){return n in t?t[n]:n}function dj(t,n){return uj(t,n.toLowerCase())}const bU=ih({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Bf,acceptCharset:On,accessKey:On,action:null,allow:null,allowFullScreen:It,allowPaymentRequest:It,allowUserMedia:It,alt:null,as:null,async:It,autoCapitalize:null,autoComplete:On,autoFocus:It,autoPlay:It,blocking:On,capture:null,charSet:null,checked:It,cite:null,className:On,cols:He,colSpan:null,content:null,contentEditable:yi,controls:It,controlsList:On,coords:He|Bf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:It,defer:It,dir:null,dirName:null,disabled:It,download:lj,draggable:yi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:It,formTarget:null,headers:On,height:He,hidden:It,high:He,href:null,hrefLang:null,htmlFor:On,httpEquiv:On,id:null,imageSizes:null,imageSrcSet:null,inert:It,inputMode:null,integrity:null,is:null,isMap:It,itemId:null,itemProp:On,itemRef:On,itemScope:It,itemType:On,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:It,low:He,manifest:null,max:null,maxLength:He,media:null,method:null,min:null,minLength:He,multiple:It,muted:It,name:null,nonce:null,noModule:It,noValidate:It,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:It,optimum:He,pattern:null,ping:On,placeholder:null,playsInline:It,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:It,referrerPolicy:null,rel:On,required:It,reversed:It,rows:He,rowSpan:He,sandbox:On,scope:null,scoped:It,seamless:It,selected:It,shadowRootClonable:It,shadowRootDelegatesFocus:It,shadowRootMode:null,shape:null,size:He,sizes:null,slot:null,span:He,spellCheck:yi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:He,step:null,style:null,tabIndex:He,target:null,title:null,translate:null,type:null,typeMustMatch:It,useMap:null,value:yi,width:He,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:On,axis:null,background:null,bgColor:null,border:He,borderColor:null,bottomMargin:He,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:It,declare:It,event:null,face:null,frame:null,frameBorder:null,hSpace:He,leftMargin:He,link:null,longDesc:null,lowSrc:null,marginHeight:He,marginWidth:He,noResize:It,noHref:It,noShade:It,noWrap:It,object:null,profile:null,prompt:null,rev:null,rightMargin:He,rules:null,scheme:null,scrolling:yi,standby:null,summary:null,text:null,topMargin:He,valueType:null,version:null,vAlign:null,vLink:null,vSpace:He,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:It,disableRemotePlayback:It,prefix:null,property:null,results:He,security:null,unselectable:null},space:"html",transform:dj}),wU=ih({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:wa,accentHeight:He,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:He,amplitude:He,arabicForm:null,ascent:He,attributeName:null,attributeType:null,azimuth:He,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:He,by:null,calcMode:null,capHeight:He,className:On,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:He,diffuseConstant:He,direction:null,display:null,dur:null,divisor:He,dominantBaseline:null,download:It,dx:null,dy:null,edgeMode:null,editable:null,elevation:He,enableBackground:null,end:null,event:null,exponent:He,externalResourcesRequired:null,fill:null,fillOpacity:He,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Bf,g2:Bf,glyphName:Bf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:He,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:He,horizOriginX:He,horizOriginY:He,id:null,ideographic:He,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:He,k:He,k1:He,k2:He,k3:He,k4:He,kernelMatrix:wa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:He,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:He,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:He,overlineThickness:He,paintOrder:null,panose1:null,path:null,pathLength:He,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:On,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:He,pointsAtY:He,pointsAtZ:He,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:wa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:wa,rev:wa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:wa,requiredFeatures:wa,requiredFonts:wa,requiredFormats:wa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:He,specularExponent:He,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:He,strikethroughThickness:He,string:null,stroke:null,strokeDashArray:wa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:He,strokeOpacity:He,strokeWidth:null,style:null,surfaceScale:He,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:wa,tabIndex:He,tableValues:null,target:null,targetX:He,targetY:He,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:wa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:He,underlineThickness:He,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:He,values:null,vAlphabetic:He,vMathematical:He,vectorEffect:null,vHanging:He,vIdeographic:He,version:null,vertAdvY:He,vertOriginX:He,vertOriginY:He,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:He,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:uj}),fj=ih({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,n){return"xlink:"+n.slice(5).toLowerCase()}}),hj=ih({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:dj}),mj=ih({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,n){return"xml:"+n.slice(3).toLowerCase()}}),SU={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},NU=/[A-Z]/g,eN=/-[a-z]/g,CU=/^data[-\w.:]+$/i;function _U(t,n){const e=a0(n);let i=n,s=Xr;if(e in t.normal)return t.property[t.normal[e]];if(e.length>4&&e.slice(0,4)==="data"&&CU.test(n)){if(n.charAt(4)==="-"){const l=n.slice(5).replace(eN,TU);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=n.slice(4);if(!eN.test(l)){let c=l.replace(NU,jU);c.charAt(0)!=="-"&&(c="-"+c),n="data"+c}}s=H0}return new s(i,n)}function jU(t){return"-"+t.toLowerCase()}function TU(t){return t.charAt(1).toUpperCase()}const EU=oj([cj,bU,fj,hj,mj],"html"),G0=oj([cj,wU,fj,hj,mj],"svg");function AU(t){return t.join(" ").trim()}var Mf={},cb,tN;function kU(){if(tN)return cb;tN=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,e=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,h=/^\s+|\s+$/g,m=`
`,f="/",y="*",x="",S="comment",w="declaration";cb=function(E,A){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];A=A||{};var k=1,P=1;function R(ie){var te=ie.match(n);te&&(k+=te.length);var se=ie.lastIndexOf(m);P=~se?ie.length-se:P+ie.length}function Y(){var ie={line:k,column:P};return function(te){return te.position=new F(ie),L(),te}}function F(ie){this.start=ie,this.end={line:k,column:P},this.source=A.source}F.prototype.content=E;function q(ie){var te=new Error(A.source+":"+k+":"+P+": "+ie);if(te.reason=ie,te.filename=A.source,te.line=k,te.column=P,te.source=E,!A.silent)throw te}function z(ie){var te=ie.exec(E);if(te){var se=te[0];return R(se),E=E.slice(se.length),te}}function L(){z(e)}function V(ie){var te;for(ie=ie||[];te=M();)te!==!1&&ie.push(te);return ie}function M(){var ie=Y();if(!(f!=E.charAt(0)||y!=E.charAt(1))){for(var te=2;x!=E.charAt(te)&&(y!=E.charAt(te)||f!=E.charAt(te+1));)++te;if(te+=2,x===E.charAt(te-1))return q("End of comment missing");var se=E.slice(2,te-2);return P+=2,R(se),E=E.slice(te),P+=2,ie({type:S,comment:se})}}function B(){var ie=Y(),te=z(i);if(te){if(M(),!z(s))return q("property missing ':'");var se=z(l),X=ie({type:w,property:j(te[0].replace(t,x)),value:se?j(se[0].replace(t,x)):x});return z(c),X}}function ee(){var ie=[];V(ie);for(var te;te=B();)te!==!1&&(ie.push(te),V(ie));return ie}return L(),ee()};function j(E){return E?E.replace(h,x):x}return cb}var nN;function DU(){if(nN)return Mf;nN=1;var t=Mf&&Mf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.default=e;var n=t(kU());function e(i,s){var l=null;if(!i||typeof i!="string")return l;var c=(0,n.default)(i),h=typeof s=="function";return c.forEach(function(m){if(m.type==="declaration"){var f=m.property,y=m.value;h?s(f,y,m):y&&(l=l||{},l[f]=y)}}),l}return Mf}var zm={},iN;function PU(){if(iN)return zm;iN=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,e=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,l=function(f){return!f||e.test(f)||t.test(f)},c=function(f,y){return y.toUpperCase()},h=function(f,y){return"".concat(y,"-")},m=function(f,y){return y===void 0&&(y={}),l(f)?f:(f=f.toLowerCase(),y.reactCompat?f=f.replace(s,h):f=f.replace(i,h),f.replace(n,c))};return zm.camelCase=m,zm}var $m,rN;function RU(){if(rN)return $m;rN=1;var t=$m&&$m.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},n=t(DU()),e=PU();function i(s,l){var c={};return!s||typeof s!="string"||(0,n.default)(s,function(h,m){h&&m&&(c[(0,e.camelCase)(h,l)]=m)}),c}return i.default=i,$m=i,$m}var MU=RU();const IU=Jf(MU),pj=gj("end"),Y0=gj("start");function gj(t){return n;function n(e){const i=e&&e.position&&e.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function OU(t){const n=Y0(t),e=pj(t);if(n&&e)return{start:n,end:e}}function Wm(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?aN(t.position):"start"in t||"end"in t?aN(t):"line"in t||"column"in t?o0(t):""}function o0(t){return sN(t&&t.line)+":"+sN(t&&t.column)}function aN(t){return o0(t&&t.start)+"-"+o0(t&&t.end)}function sN(t){return t&&typeof t=="number"?t:1}class pr extends Error{constructor(n,e,i){super(),typeof e=="string"&&(i=e,e=void 0);let s="",l={},c=!1;if(e&&("line"in e&&"column"in e?l={place:e}:"start"in e&&"end"in e?l={place:e}:"type"in e?l={ancestors:[e],place:e.position}:l={...e}),typeof n=="string"?s=n:!l.cause&&n&&(c=!0,s=n.message,l.cause=n),!l.ruleId&&!l.source&&typeof i=="string"){const m=i.indexOf(":");m===-1?l.ruleId=i:(l.source=i.slice(0,m),l.ruleId=i.slice(m+1))}if(!l.place&&l.ancestors&&l.ancestors){const m=l.ancestors[l.ancestors.length-1];m&&(l.place=m.position)}const h=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=h?h.line:void 0,this.name=Wm(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=c&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}pr.prototype.file="";pr.prototype.name="";pr.prototype.reason="";pr.prototype.message="";pr.prototype.stack="";pr.prototype.column=void 0;pr.prototype.line=void 0;pr.prototype.ancestors=void 0;pr.prototype.cause=void 0;pr.prototype.fatal=void 0;pr.prototype.place=void 0;pr.prototype.ruleId=void 0;pr.prototype.source=void 0;const W0={}.hasOwnProperty,LU=new Map,FU=/[A-Z]/g,zU=new Set(["table","tbody","thead","tfoot","tr"]),$U=new Set(["td","th"]),yj="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function UU(t,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const e=n.filePath||void 0;let i;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=JU(e,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=WU(e,n.jsx,n.jsxs)}const s={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:i,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:e,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?G0:EU,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},l=xj(s,t,void 0);return l&&typeof l!="string"?l:s.create(t,s.Fragment,{children:l||void 0},void 0)}function xj(t,n,e){if(n.type==="element")return BU(t,n,e);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return qU(t,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return HU(t,n,e);if(n.type==="mdxjsEsm")return VU(t,n);if(n.type==="root")return GU(t,n,e);if(n.type==="text")return YU(t,n)}function BU(t,n,e){const i=t.schema;let s=i;n.tagName.toLowerCase()==="svg"&&i.space==="html"&&(s=G0,t.schema=s),t.ancestors.push(n);const l=bj(t,n.tagName,!1),c=QU(t,n);let h=Q0(t,n);return zU.has(n.tagName)&&(h=h.filter(function(m){return typeof m=="string"?!xU(m):!0})),vj(t,c,l,n),J0(c,h),t.ancestors.pop(),t.schema=i,t.create(n,l,c,e)}function qU(t,n){if(n.data&&n.data.estree&&t.evaluater){const i=n.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}sp(t,n.position)}function VU(t,n){if(n.data&&n.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(n.data.estree);sp(t,n.position)}function HU(t,n,e){const i=t.schema;let s=i;n.name==="svg"&&i.space==="html"&&(s=G0,t.schema=s),t.ancestors.push(n);const l=n.name===null?t.Fragment:bj(t,n.name,!0),c=KU(t,n),h=Q0(t,n);return vj(t,c,l,n),J0(c,h),t.ancestors.pop(),t.schema=i,t.create(n,l,c,e)}function GU(t,n,e){const i={};return J0(i,Q0(t,n)),t.create(n,t.Fragment,i,e)}function YU(t,n){return n.value}function vj(t,n,e,i){typeof e!="string"&&e!==t.Fragment&&t.passNode&&(n.node=i)}function J0(t,n){if(n.length>0){const e=n.length>1?n:n[0];e&&(t.children=e)}}function WU(t,n,e){return i;function i(s,l,c,h){const f=Array.isArray(c.children)?e:n;return h?f(l,c,h):f(l,c)}}function JU(t,n){return e;function e(i,s,l,c){const h=Array.isArray(l.children),m=Y0(i);return n(s,l,c,h,{columnNumber:m?m.column-1:void 0,fileName:t,lineNumber:m?m.line:void 0},void 0)}}function QU(t,n){const e={};let i,s;for(s in n.properties)if(s!=="children"&&W0.call(n.properties,s)){const l=XU(t,s,n.properties[s]);if(l){const[c,h]=l;t.tableCellAlignToStyle&&c==="align"&&typeof h=="string"&&$U.has(n.tagName)?i=h:e[c]=h}}if(i){const l=e.style||(e.style={});l[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return e}function KU(t,n){const e={};for(const i of n.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const l=i.data.estree.body[0];l.type;const c=l.expression;c.type;const h=c.properties[0];h.type,Object.assign(e,t.evaluater.evaluateExpression(h.argument))}else sp(t,n.position);else{const s=i.name;let l;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const h=i.value.data.estree.body[0];h.type,l=t.evaluater.evaluateExpression(h.expression)}else sp(t,n.position);else l=i.value===null?!0:i.value;e[s]=l}return e}function Q0(t,n){const e=[];let i=-1;const s=t.passKeys?new Map:LU;for(;++i<n.children.length;){const l=n.children[i];let c;if(t.passKeys){const m=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(m){const f=s.get(m)||0;c=m+"-"+f,s.set(m,f+1)}}const h=xj(t,l,c);h!==void 0&&e.push(h)}return e}function XU(t,n,e){const i=_U(t.schema,n);if(!(e==null||typeof e=="number"&&Number.isNaN(e))){if(Array.isArray(e)&&(e=i.commaSeparated?hU(e):AU(e)),i.property==="style"){let s=typeof e=="object"?e:ZU(t,String(e));return t.stylePropertyNameCase==="css"&&(s=e8(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&i.space?SU[i.property]||i.property:i.attribute,e]}}function ZU(t,n){try{return IU(n,{reactCompat:!0})}catch(e){if(t.ignoreInvalidStyle)return{};const i=e,s=new pr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=yj+"#cannot-parse-style-attribute",s}}function bj(t,n,e){let i;if(!e)i={type:"Literal",value:n};else if(n.includes(".")){const s=n.split(".");let l=-1,c;for(;++l<s.length;){const h=KS(s[l])?{type:"Identifier",name:s[l]}:{type:"Literal",value:s[l]};c=c?{type:"MemberExpression",object:c,property:h,computed:!!(l&&h.type==="Literal"),optional:!1}:h}i=c}else i=KS(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(i.type==="Literal"){const s=i.value;return W0.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(i);sp(t)}function sp(t,n){const e=new pr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw e.file=t.filePath||void 0,e.url=yj+"#cannot-handle-mdx-estrees-without-createevaluater",e}function e8(t){const n={};let e;for(e in t)W0.call(t,e)&&(n[t8(e)]=t[e]);return n}function t8(t){let n=t.replace(FU,n8);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function n8(t){return"-"+t.toLowerCase()}const ub={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},i8={};function K0(t,n){const e=i8,i=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,s=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return wj(t,i,s)}function wj(t,n,e){if(r8(t)){if("value"in t)return t.type==="html"&&!e?"":t.value;if(n&&"alt"in t&&t.alt)return t.alt;if("children"in t)return oN(t.children,n,e)}return Array.isArray(t)?oN(t,n,e):""}function oN(t,n,e){const i=[];let s=-1;for(;++s<t.length;)i[s]=wj(t[s],n,e);return i.join("")}function r8(t){return!!(t&&typeof t=="object")}const lN=document.createElement("i");function X0(t){const n="&"+t+";";lN.innerHTML=n;const e=lN.textContent;return e.charCodeAt(e.length-1)===59&&t!=="semi"||e===n?!1:e}function Ca(t,n,e,i){const s=t.length;let l=0,c;if(n<0?n=-n>s?0:s+n:n=n>s?s:n,e=e>0?e:0,i.length<1e4)c=Array.from(i),c.unshift(n,e),t.splice(...c);else for(e&&t.splice(n,e);l<i.length;)c=i.slice(l,l+1e4),c.unshift(n,0),t.splice(...c),l+=1e4,n+=1e4}function Ka(t,n){return t.length>0?(Ca(t,t.length,0,n),t):n}const cN={}.hasOwnProperty;function Sj(t){const n={};let e=-1;for(;++e<t.length;)a8(n,t[e]);return n}function a8(t,n){let e;for(e in n){const s=(cN.call(t,e)?t[e]:void 0)||(t[e]={}),l=n[e];let c;if(l)for(c in l){cN.call(s,c)||(s[c]=[]);const h=l[c];s8(s[c],Array.isArray(h)?h:h?[h]:[])}}}function s8(t,n){let e=-1;const i=[];for(;++e<n.length;)(n[e].add==="after"?t:i).push(n[e]);Ca(t,0,0,i)}function Nj(t,n){const e=Number.parseInt(t,n);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCodePoint(e)}function Es(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Er=Rc(/[A-Za-z]/),hr=Rc(/[\dA-Za-z]/),o8=Rc(/[#-'*+\--9=?A-Z^-~]/);function fx(t){return t!==null&&(t<32||t===127)}const l0=Rc(/\d/),l8=Rc(/[\dA-Fa-f]/),c8=Rc(/[!-/:-@[-`{-~]/);function vt(t){return t!==null&&t<-2}function kn(t){return t!==null&&(t<0||t===32)}function Jt(t){return t===-2||t===-1||t===32}const Lx=Rc(new RegExp("\\p{P}|\\p{S}","u")),nd=Rc(/\s/);function Rc(t){return n;function n(e){return e!==null&&e>-1&&t.test(String.fromCharCode(e))}}function rh(t){const n=[];let e=-1,i=0,s=0;for(;++e<t.length;){const l=t.charCodeAt(e);let c="";if(l===37&&hr(t.charCodeAt(e+1))&&hr(t.charCodeAt(e+2)))s=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(c=String.fromCharCode(l));else if(l>55295&&l<57344){const h=t.charCodeAt(e+1);l<56320&&h>56319&&h<57344?(c=String.fromCharCode(l,h),s=1):c="�"}else c=String.fromCharCode(l);c&&(n.push(t.slice(i,e),encodeURIComponent(c)),i=e+s+1,c=""),s&&(e+=s,s=0)}return n.join("")+t.slice(i)}function an(t,n,e,i){const s=i?i-1:Number.POSITIVE_INFINITY;let l=0;return c;function c(m){return Jt(m)?(t.enter(e),h(m)):n(m)}function h(m){return Jt(m)&&l++<s?(t.consume(m),h):(t.exit(e),n(m))}}const u8={tokenize:d8};function d8(t){const n=t.attempt(this.parser.constructs.contentInitial,i,s);let e;return n;function i(h){if(h===null){t.consume(h);return}return t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),an(t,n,"linePrefix")}function s(h){return t.enter("paragraph"),l(h)}function l(h){const m=t.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=m),e=m,c(h)}function c(h){if(h===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(h);return}return vt(h)?(t.consume(h),t.exit("chunkText"),l):(t.consume(h),c)}}const f8={tokenize:h8},uN={tokenize:m8};function h8(t){const n=this,e=[];let i=0,s,l,c;return h;function h(R){if(i<e.length){const Y=e[i];return n.containerState=Y[1],t.attempt(Y[0].continuation,m,f)(R)}return f(R)}function m(R){if(i++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,s&&P();const Y=n.events.length;let F=Y,q;for(;F--;)if(n.events[F][0]==="exit"&&n.events[F][1].type==="chunkFlow"){q=n.events[F][1].end;break}k(i);let z=Y;for(;z<n.events.length;)n.events[z][1].end={...q},z++;return Ca(n.events,F+1,0,n.events.slice(Y)),n.events.length=z,f(R)}return h(R)}function f(R){if(i===e.length){if(!s)return S(R);if(s.currentConstruct&&s.currentConstruct.concrete)return j(R);n.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return n.containerState={},t.check(uN,y,x)(R)}function y(R){return s&&P(),k(i),S(R)}function x(R){return n.parser.lazy[n.now().line]=i!==e.length,c=n.now().offset,j(R)}function S(R){return n.containerState={},t.attempt(uN,w,j)(R)}function w(R){return i++,e.push([n.currentConstruct,n.containerState]),S(R)}function j(R){if(R===null){s&&P(),k(0),t.consume(R);return}return s=s||n.parser.flow(n.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:l}),E(R)}function E(R){if(R===null){A(t.exit("chunkFlow"),!0),k(0),t.consume(R);return}return vt(R)?(t.consume(R),A(t.exit("chunkFlow")),i=0,n.interrupt=void 0,h):(t.consume(R),E)}function A(R,Y){const F=n.sliceStream(R);if(Y&&F.push(null),R.previous=l,l&&(l.next=R),l=R,s.defineSkip(R.start),s.write(F),n.parser.lazy[R.start.line]){let q=s.events.length;for(;q--;)if(s.events[q][1].start.offset<c&&(!s.events[q][1].end||s.events[q][1].end.offset>c))return;const z=n.events.length;let L=z,V,M;for(;L--;)if(n.events[L][0]==="exit"&&n.events[L][1].type==="chunkFlow"){if(V){M=n.events[L][1].end;break}V=!0}for(k(i),q=z;q<n.events.length;)n.events[q][1].end={...M},q++;Ca(n.events,L+1,0,n.events.slice(z)),n.events.length=q}}function k(R){let Y=e.length;for(;Y-- >R;){const F=e[Y];n.containerState=F[1],F[0].exit.call(n,t)}e.length=R}function P(){s.write([null]),l=void 0,s=void 0,n.containerState._closeFlow=void 0}}function m8(t,n,e){return an(t,t.attempt(this.parser.constructs.document,n,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Wf(t){if(t===null||kn(t)||nd(t))return 1;if(Lx(t))return 2}function Fx(t,n,e){const i=[];let s=-1;for(;++s<t.length;){const l=t[s].resolveAll;l&&!i.includes(l)&&(n=l(n,e),i.push(l))}return n}const c0={name:"attention",resolveAll:p8,tokenize:g8};function p8(t,n){let e=-1,i,s,l,c,h,m,f,y;for(;++e<t.length;)if(t[e][0]==="enter"&&t[e][1].type==="attentionSequence"&&t[e][1]._close){for(i=e;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&n.sliceSerialize(t[i][1]).charCodeAt(0)===n.sliceSerialize(t[e][1]).charCodeAt(0)){if((t[i][1]._close||t[e][1]._open)&&(t[e][1].end.offset-t[e][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[e][1].end.offset-t[e][1].start.offset)%3))continue;m=t[i][1].end.offset-t[i][1].start.offset>1&&t[e][1].end.offset-t[e][1].start.offset>1?2:1;const x={...t[i][1].end},S={...t[e][1].start};dN(x,-m),dN(S,m),c={type:m>1?"strongSequence":"emphasisSequence",start:x,end:{...t[i][1].end}},h={type:m>1?"strongSequence":"emphasisSequence",start:{...t[e][1].start},end:S},l={type:m>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[e][1].start}},s={type:m>1?"strong":"emphasis",start:{...c.start},end:{...h.end}},t[i][1].end={...c.start},t[e][1].start={...h.end},f=[],t[i][1].end.offset-t[i][1].start.offset&&(f=Ka(f,[["enter",t[i][1],n],["exit",t[i][1],n]])),f=Ka(f,[["enter",s,n],["enter",c,n],["exit",c,n],["enter",l,n]]),f=Ka(f,Fx(n.parser.constructs.insideSpan.null,t.slice(i+1,e),n)),f=Ka(f,[["exit",l,n],["enter",h,n],["exit",h,n],["exit",s,n]]),t[e][1].end.offset-t[e][1].start.offset?(y=2,f=Ka(f,[["enter",t[e][1],n],["exit",t[e][1],n]])):y=0,Ca(t,i-1,e-i+3,f),e=i+f.length-y-2;break}}for(e=-1;++e<t.length;)t[e][1].type==="attentionSequence"&&(t[e][1].type="data");return t}function g8(t,n){const e=this.parser.constructs.attentionMarkers.null,i=this.previous,s=Wf(i);let l;return c;function c(m){return l=m,t.enter("attentionSequence"),h(m)}function h(m){if(m===l)return t.consume(m),h;const f=t.exit("attentionSequence"),y=Wf(m),x=!y||y===2&&s||e.includes(m),S=!s||s===2&&y||e.includes(i);return f._open=!!(l===42?x:x&&(s||!S)),f._close=!!(l===42?S:S&&(y||!x)),n(m)}}function dN(t,n){t.column+=n,t.offset+=n,t._bufferIndex+=n}const y8={name:"autolink",tokenize:x8};function x8(t,n,e){let i=0;return s;function s(w){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),l}function l(w){return Er(w)?(t.consume(w),c):w===64?e(w):f(w)}function c(w){return w===43||w===45||w===46||hr(w)?(i=1,h(w)):f(w)}function h(w){return w===58?(t.consume(w),i=0,m):(w===43||w===45||w===46||hr(w))&&i++<32?(t.consume(w),h):(i=0,f(w))}function m(w){return w===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),n):w===null||w===32||w===60||fx(w)?e(w):(t.consume(w),m)}function f(w){return w===64?(t.consume(w),y):o8(w)?(t.consume(w),f):e(w)}function y(w){return hr(w)?x(w):e(w)}function x(w){return w===46?(t.consume(w),i=0,y):w===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(w),t.exit("autolinkMarker"),t.exit("autolink"),n):S(w)}function S(w){if((w===45||hr(w))&&i++<63){const j=w===45?S:x;return t.consume(w),j}return e(w)}}const yp={partial:!0,tokenize:v8};function v8(t,n,e){return i;function i(l){return Jt(l)?an(t,s,"linePrefix")(l):s(l)}function s(l){return l===null||vt(l)?n(l):e(l)}}const Cj={continuation:{tokenize:w8},exit:S8,name:"blockQuote",tokenize:b8};function b8(t,n,e){const i=this;return s;function s(c){if(c===62){const h=i.containerState;return h.open||(t.enter("blockQuote",{_container:!0}),h.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(c),t.exit("blockQuoteMarker"),l}return e(c)}function l(c){return Jt(c)?(t.enter("blockQuotePrefixWhitespace"),t.consume(c),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),n):(t.exit("blockQuotePrefix"),n(c))}}function w8(t,n,e){const i=this;return s;function s(c){return Jt(c)?an(t,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):l(c)}function l(c){return t.attempt(Cj,n,e)(c)}}function S8(t){t.exit("blockQuote")}const _j={name:"characterEscape",tokenize:N8};function N8(t,n,e){return i;function i(l){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(l),t.exit("escapeMarker"),s}function s(l){return c8(l)?(t.enter("characterEscapeValue"),t.consume(l),t.exit("characterEscapeValue"),t.exit("characterEscape"),n):e(l)}}const jj={name:"characterReference",tokenize:C8};function C8(t,n,e){const i=this;let s=0,l,c;return h;function h(x){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),m}function m(x){return x===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(x),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),l=31,c=hr,y(x))}function f(x){return x===88||x===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(x),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),l=6,c=l8,y):(t.enter("characterReferenceValue"),l=7,c=l0,y(x))}function y(x){if(x===59&&s){const S=t.exit("characterReferenceValue");return c===hr&&!X0(i.sliceSerialize(S))?e(x):(t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),t.exit("characterReference"),n)}return c(x)&&s++<l?(t.consume(x),y):e(x)}}const fN={partial:!0,tokenize:j8},hN={concrete:!0,name:"codeFenced",tokenize:_8};function _8(t,n,e){const i=this,s={partial:!0,tokenize:F};let l=0,c=0,h;return m;function m(q){return f(q)}function f(q){const z=i.events[i.events.length-1];return l=z&&z[1].type==="linePrefix"?z[2].sliceSerialize(z[1],!0).length:0,h=q,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),y(q)}function y(q){return q===h?(c++,t.consume(q),y):c<3?e(q):(t.exit("codeFencedFenceSequence"),Jt(q)?an(t,x,"whitespace")(q):x(q))}function x(q){return q===null||vt(q)?(t.exit("codeFencedFence"),i.interrupt?n(q):t.check(fN,E,Y)(q)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),S(q))}function S(q){return q===null||vt(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),x(q)):Jt(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),an(t,w,"whitespace")(q)):q===96&&q===h?e(q):(t.consume(q),S)}function w(q){return q===null||vt(q)?x(q):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),j(q))}function j(q){return q===null||vt(q)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),x(q)):q===96&&q===h?e(q):(t.consume(q),j)}function E(q){return t.attempt(s,Y,A)(q)}function A(q){return t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),k}function k(q){return l>0&&Jt(q)?an(t,P,"linePrefix",l+1)(q):P(q)}function P(q){return q===null||vt(q)?t.check(fN,E,Y)(q):(t.enter("codeFlowValue"),R(q))}function R(q){return q===null||vt(q)?(t.exit("codeFlowValue"),P(q)):(t.consume(q),R)}function Y(q){return t.exit("codeFenced"),n(q)}function F(q,z,L){let V=0;return M;function M(se){return q.enter("lineEnding"),q.consume(se),q.exit("lineEnding"),B}function B(se){return q.enter("codeFencedFence"),Jt(se)?an(q,ee,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(se):ee(se)}function ee(se){return se===h?(q.enter("codeFencedFenceSequence"),ie(se)):L(se)}function ie(se){return se===h?(V++,q.consume(se),ie):V>=c?(q.exit("codeFencedFenceSequence"),Jt(se)?an(q,te,"whitespace")(se):te(se)):L(se)}function te(se){return se===null||vt(se)?(q.exit("codeFencedFence"),z(se)):L(se)}}}function j8(t,n,e){const i=this;return s;function s(c){return c===null?e(c):(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),l)}function l(c){return i.parser.lazy[i.now().line]?e(c):n(c)}}const db={name:"codeIndented",tokenize:E8},T8={partial:!0,tokenize:A8};function E8(t,n,e){const i=this;return s;function s(f){return t.enter("codeIndented"),an(t,l,"linePrefix",5)(f)}function l(f){const y=i.events[i.events.length-1];return y&&y[1].type==="linePrefix"&&y[2].sliceSerialize(y[1],!0).length>=4?c(f):e(f)}function c(f){return f===null?m(f):vt(f)?t.attempt(T8,c,m)(f):(t.enter("codeFlowValue"),h(f))}function h(f){return f===null||vt(f)?(t.exit("codeFlowValue"),c(f)):(t.consume(f),h)}function m(f){return t.exit("codeIndented"),n(f)}}function A8(t,n,e){const i=this;return s;function s(c){return i.parser.lazy[i.now().line]?e(c):vt(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),s):an(t,l,"linePrefix",5)(c)}function l(c){const h=i.events[i.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?n(c):vt(c)?s(c):e(c)}}const k8={name:"codeText",previous:P8,resolve:D8,tokenize:R8};function D8(t){let n=t.length-4,e=3,i,s;if((t[e][1].type==="lineEnding"||t[e][1].type==="space")&&(t[n][1].type==="lineEnding"||t[n][1].type==="space")){for(i=e;++i<n;)if(t[i][1].type==="codeTextData"){t[e][1].type="codeTextPadding",t[n][1].type="codeTextPadding",e+=2,n-=2;break}}for(i=e-1,n++;++i<=n;)s===void 0?i!==n&&t[i][1].type!=="lineEnding"&&(s=i):(i===n||t[i][1].type==="lineEnding")&&(t[s][1].type="codeTextData",i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),n-=i-s-2,i=s+2),s=void 0);return t}function P8(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function R8(t,n,e){let i=0,s,l;return c;function c(x){return t.enter("codeText"),t.enter("codeTextSequence"),h(x)}function h(x){return x===96?(t.consume(x),i++,h):(t.exit("codeTextSequence"),m(x))}function m(x){return x===null?e(x):x===32?(t.enter("space"),t.consume(x),t.exit("space"),m):x===96?(l=t.enter("codeTextSequence"),s=0,y(x)):vt(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),m):(t.enter("codeTextData"),f(x))}function f(x){return x===null||x===32||x===96||vt(x)?(t.exit("codeTextData"),m(x)):(t.consume(x),f)}function y(x){return x===96?(t.consume(x),s++,y):s===i?(t.exit("codeTextSequence"),t.exit("codeText"),n(x)):(l.type="codeTextData",f(x))}}class M8{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,e){const i=e??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(n,i):n>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(n,e,i){const s=e||0;this.setCursor(Math.trunc(n));const l=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return i&&Um(this.left,i),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Um(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Um(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const e=this.left.splice(n,Number.POSITIVE_INFINITY);Um(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Um(this.left,e.reverse())}}}function Um(t,n){let e=0;if(n.length<1e4)t.push(...n);else for(;e<n.length;)t.push(...n.slice(e,e+1e4)),e+=1e4}function Tj(t){const n={};let e=-1,i,s,l,c,h,m,f;const y=new M8(t);for(;++e<y.length;){for(;e in n;)e=n[e];if(i=y.get(e),e&&i[1].type==="chunkFlow"&&y.get(e-1)[1].type==="listItemPrefix"&&(m=i[1]._tokenizer.events,l=0,l<m.length&&m[l][1].type==="lineEndingBlank"&&(l+=2),l<m.length&&m[l][1].type==="content"))for(;++l<m.length&&m[l][1].type!=="content";)m[l][1].type==="chunkText"&&(m[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(n,I8(y,e)),e=n[e],f=!0);else if(i[1]._container){for(l=e,s=void 0;l--;)if(c=y.get(l),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(s&&(y.get(s)[1].type="lineEndingBlank"),c[1].type="lineEnding",s=l);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;s&&(i[1].end={...y.get(s)[1].start},h=y.slice(s,e),h.unshift(i),y.splice(s,e-s+1,h))}}return Ca(t,0,Number.POSITIVE_INFINITY,y.slice(0)),!f}function I8(t,n){const e=t.get(n)[1],i=t.get(n)[2];let s=n-1;const l=[];let c=e._tokenizer;c||(c=i.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const h=c.events,m=[],f={};let y,x,S=-1,w=e,j=0,E=0;const A=[E];for(;w;){for(;t.get(++s)[1]!==w;);l.push(s),w._tokenizer||(y=i.sliceStream(w),w.next||y.push(null),x&&c.defineSkip(w.start),w._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(y),w._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),x=w,w=w.next}for(w=e;++S<h.length;)h[S][0]==="exit"&&h[S-1][0]==="enter"&&h[S][1].type===h[S-1][1].type&&h[S][1].start.line!==h[S][1].end.line&&(E=S+1,A.push(E),w._tokenizer=void 0,w.previous=void 0,w=w.next);for(c.events=[],w?(w._tokenizer=void 0,w.previous=void 0):A.pop(),S=A.length;S--;){const k=h.slice(A[S],A[S+1]),P=l.pop();m.push([P,P+k.length-1]),t.splice(P,2,k)}for(m.reverse(),S=-1;++S<m.length;)f[j+m[S][0]]=j+m[S][1],j+=m[S][1]-m[S][0]-1;return f}const O8={resolve:F8,tokenize:z8},L8={partial:!0,tokenize:$8};function F8(t){return Tj(t),t}function z8(t,n){let e;return i;function i(h){return t.enter("content"),e=t.enter("chunkContent",{contentType:"content"}),s(h)}function s(h){return h===null?l(h):vt(h)?t.check(L8,c,l)(h):(t.consume(h),s)}function l(h){return t.exit("chunkContent"),t.exit("content"),n(h)}function c(h){return t.consume(h),t.exit("chunkContent"),e.next=t.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,s}}function $8(t,n,e){const i=this;return s;function s(c){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),an(t,l,"linePrefix")}function l(c){if(c===null||vt(c))return e(c);const h=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?n(c):t.interrupt(i.parser.constructs.flow,e,n)(c)}}function Ej(t,n,e,i,s,l,c,h,m){const f=m||Number.POSITIVE_INFINITY;let y=0;return x;function x(k){return k===60?(t.enter(i),t.enter(s),t.enter(l),t.consume(k),t.exit(l),S):k===null||k===32||k===41||fx(k)?e(k):(t.enter(i),t.enter(c),t.enter(h),t.enter("chunkString",{contentType:"string"}),E(k))}function S(k){return k===62?(t.enter(l),t.consume(k),t.exit(l),t.exit(s),t.exit(i),n):(t.enter(h),t.enter("chunkString",{contentType:"string"}),w(k))}function w(k){return k===62?(t.exit("chunkString"),t.exit(h),S(k)):k===null||k===60||vt(k)?e(k):(t.consume(k),k===92?j:w)}function j(k){return k===60||k===62||k===92?(t.consume(k),w):w(k)}function E(k){return!y&&(k===null||k===41||kn(k))?(t.exit("chunkString"),t.exit(h),t.exit(c),t.exit(i),n(k)):y<f&&k===40?(t.consume(k),y++,E):k===41?(t.consume(k),y--,E):k===null||k===32||k===40||fx(k)?e(k):(t.consume(k),k===92?A:E)}function A(k){return k===40||k===41||k===92?(t.consume(k),E):E(k)}}function Aj(t,n,e,i,s,l){const c=this;let h=0,m;return f;function f(w){return t.enter(i),t.enter(s),t.consume(w),t.exit(s),t.enter(l),y}function y(w){return h>999||w===null||w===91||w===93&&!m||w===94&&!h&&"_hiddenFootnoteSupport"in c.parser.constructs?e(w):w===93?(t.exit(l),t.enter(s),t.consume(w),t.exit(s),t.exit(i),n):vt(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),y):(t.enter("chunkString",{contentType:"string"}),x(w))}function x(w){return w===null||w===91||w===93||vt(w)||h++>999?(t.exit("chunkString"),y(w)):(t.consume(w),m||(m=!Jt(w)),w===92?S:x)}function S(w){return w===91||w===92||w===93?(t.consume(w),h++,x):x(w)}}function kj(t,n,e,i,s,l){let c;return h;function h(S){return S===34||S===39||S===40?(t.enter(i),t.enter(s),t.consume(S),t.exit(s),c=S===40?41:S,m):e(S)}function m(S){return S===c?(t.enter(s),t.consume(S),t.exit(s),t.exit(i),n):(t.enter(l),f(S))}function f(S){return S===c?(t.exit(l),m(c)):S===null?e(S):vt(S)?(t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),an(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),y(S))}function y(S){return S===c||S===null||vt(S)?(t.exit("chunkString"),f(S)):(t.consume(S),S===92?x:y)}function x(S){return S===c||S===92?(t.consume(S),y):y(S)}}function Jm(t,n){let e;return i;function i(s){return vt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e=!0,i):Jt(s)?an(t,i,e?"linePrefix":"lineSuffix")(s):n(s)}}const U8={name:"definition",tokenize:q8},B8={partial:!0,tokenize:V8};function q8(t,n,e){const i=this;let s;return l;function l(w){return t.enter("definition"),c(w)}function c(w){return Aj.call(i,t,h,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(w)}function h(w){return s=Es(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),w===58?(t.enter("definitionMarker"),t.consume(w),t.exit("definitionMarker"),m):e(w)}function m(w){return kn(w)?Jm(t,f)(w):f(w)}function f(w){return Ej(t,y,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(w)}function y(w){return t.attempt(B8,x,x)(w)}function x(w){return Jt(w)?an(t,S,"whitespace")(w):S(w)}function S(w){return w===null||vt(w)?(t.exit("definition"),i.parser.defined.push(s),n(w)):e(w)}}function V8(t,n,e){return i;function i(h){return kn(h)?Jm(t,s)(h):e(h)}function s(h){return kj(t,l,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function l(h){return Jt(h)?an(t,c,"whitespace")(h):c(h)}function c(h){return h===null||vt(h)?n(h):e(h)}}const H8={name:"hardBreakEscape",tokenize:G8};function G8(t,n,e){return i;function i(l){return t.enter("hardBreakEscape"),t.consume(l),s}function s(l){return vt(l)?(t.exit("hardBreakEscape"),n(l)):e(l)}}const Y8={name:"headingAtx",resolve:W8,tokenize:J8};function W8(t,n){let e=t.length-2,i=3,s,l;return t[i][1].type==="whitespace"&&(i+=2),e-2>i&&t[e][1].type==="whitespace"&&(e-=2),t[e][1].type==="atxHeadingSequence"&&(i===e-1||e-4>i&&t[e-2][1].type==="whitespace")&&(e-=i+1===e?2:4),e>i&&(s={type:"atxHeadingText",start:t[i][1].start,end:t[e][1].end},l={type:"chunkText",start:t[i][1].start,end:t[e][1].end,contentType:"text"},Ca(t,i,e-i+1,[["enter",s,n],["enter",l,n],["exit",l,n],["exit",s,n]])),t}function J8(t,n,e){let i=0;return s;function s(y){return t.enter("atxHeading"),l(y)}function l(y){return t.enter("atxHeadingSequence"),c(y)}function c(y){return y===35&&i++<6?(t.consume(y),c):y===null||kn(y)?(t.exit("atxHeadingSequence"),h(y)):e(y)}function h(y){return y===35?(t.enter("atxHeadingSequence"),m(y)):y===null||vt(y)?(t.exit("atxHeading"),n(y)):Jt(y)?an(t,h,"whitespace")(y):(t.enter("atxHeadingText"),f(y))}function m(y){return y===35?(t.consume(y),m):(t.exit("atxHeadingSequence"),h(y))}function f(y){return y===null||y===35||kn(y)?(t.exit("atxHeadingText"),h(y)):(t.consume(y),f)}}const Q8=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mN=["pre","script","style","textarea"],K8={concrete:!0,name:"htmlFlow",resolveTo:eB,tokenize:tB},X8={partial:!0,tokenize:iB},Z8={partial:!0,tokenize:nB};function eB(t){let n=t.length;for(;n--&&!(t[n][0]==="enter"&&t[n][1].type==="htmlFlow"););return n>1&&t[n-2][1].type==="linePrefix"&&(t[n][1].start=t[n-2][1].start,t[n+1][1].start=t[n-2][1].start,t.splice(n-2,2)),t}function tB(t,n,e){const i=this;let s,l,c,h,m;return f;function f(H){return y(H)}function y(H){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(H),x}function x(H){return H===33?(t.consume(H),S):H===47?(t.consume(H),l=!0,E):H===63?(t.consume(H),s=3,i.interrupt?n:I):Er(H)?(t.consume(H),c=String.fromCharCode(H),A):e(H)}function S(H){return H===45?(t.consume(H),s=2,w):H===91?(t.consume(H),s=5,h=0,j):Er(H)?(t.consume(H),s=4,i.interrupt?n:I):e(H)}function w(H){return H===45?(t.consume(H),i.interrupt?n:I):e(H)}function j(H){const ne="CDATA[";return H===ne.charCodeAt(h++)?(t.consume(H),h===ne.length?i.interrupt?n:ee:j):e(H)}function E(H){return Er(H)?(t.consume(H),c=String.fromCharCode(H),A):e(H)}function A(H){if(H===null||H===47||H===62||kn(H)){const ne=H===47,me=c.toLowerCase();return!ne&&!l&&mN.includes(me)?(s=1,i.interrupt?n(H):ee(H)):Q8.includes(c.toLowerCase())?(s=6,ne?(t.consume(H),k):i.interrupt?n(H):ee(H)):(s=7,i.interrupt&&!i.parser.lazy[i.now().line]?e(H):l?P(H):R(H))}return H===45||hr(H)?(t.consume(H),c+=String.fromCharCode(H),A):e(H)}function k(H){return H===62?(t.consume(H),i.interrupt?n:ee):e(H)}function P(H){return Jt(H)?(t.consume(H),P):M(H)}function R(H){return H===47?(t.consume(H),M):H===58||H===95||Er(H)?(t.consume(H),Y):Jt(H)?(t.consume(H),R):M(H)}function Y(H){return H===45||H===46||H===58||H===95||hr(H)?(t.consume(H),Y):F(H)}function F(H){return H===61?(t.consume(H),q):Jt(H)?(t.consume(H),F):R(H)}function q(H){return H===null||H===60||H===61||H===62||H===96?e(H):H===34||H===39?(t.consume(H),m=H,z):Jt(H)?(t.consume(H),q):L(H)}function z(H){return H===m?(t.consume(H),m=null,V):H===null||vt(H)?e(H):(t.consume(H),z)}function L(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||kn(H)?F(H):(t.consume(H),L)}function V(H){return H===47||H===62||Jt(H)?R(H):e(H)}function M(H){return H===62?(t.consume(H),B):e(H)}function B(H){return H===null||vt(H)?ee(H):Jt(H)?(t.consume(H),B):e(H)}function ee(H){return H===45&&s===2?(t.consume(H),X):H===60&&s===1?(t.consume(H),K):H===62&&s===4?(t.consume(H),de):H===63&&s===3?(t.consume(H),I):H===93&&s===5?(t.consume(H),ve):vt(H)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(X8,ae,ie)(H)):H===null||vt(H)?(t.exit("htmlFlowData"),ie(H)):(t.consume(H),ee)}function ie(H){return t.check(Z8,te,ae)(H)}function te(H){return t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),se}function se(H){return H===null||vt(H)?ie(H):(t.enter("htmlFlowData"),ee(H))}function X(H){return H===45?(t.consume(H),I):ee(H)}function K(H){return H===47?(t.consume(H),c="",re):ee(H)}function re(H){if(H===62){const ne=c.toLowerCase();return mN.includes(ne)?(t.consume(H),de):ee(H)}return Er(H)&&c.length<8?(t.consume(H),c+=String.fromCharCode(H),re):ee(H)}function ve(H){return H===93?(t.consume(H),I):ee(H)}function I(H){return H===62?(t.consume(H),de):H===45&&s===2?(t.consume(H),I):ee(H)}function de(H){return H===null||vt(H)?(t.exit("htmlFlowData"),ae(H)):(t.consume(H),de)}function ae(H){return t.exit("htmlFlow"),n(H)}}function nB(t,n,e){const i=this;return s;function s(c){return vt(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),l):e(c)}function l(c){return i.parser.lazy[i.now().line]?e(c):n(c)}}function iB(t,n,e){return i;function i(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(yp,n,e)}}const rB={name:"htmlText",tokenize:aB};function aB(t,n,e){const i=this;let s,l,c;return h;function h(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),m}function m(I){return I===33?(t.consume(I),f):I===47?(t.consume(I),F):I===63?(t.consume(I),R):Er(I)?(t.consume(I),L):e(I)}function f(I){return I===45?(t.consume(I),y):I===91?(t.consume(I),l=0,j):Er(I)?(t.consume(I),P):e(I)}function y(I){return I===45?(t.consume(I),w):e(I)}function x(I){return I===null?e(I):I===45?(t.consume(I),S):vt(I)?(c=x,K(I)):(t.consume(I),x)}function S(I){return I===45?(t.consume(I),w):x(I)}function w(I){return I===62?X(I):I===45?S(I):x(I)}function j(I){const de="CDATA[";return I===de.charCodeAt(l++)?(t.consume(I),l===de.length?E:j):e(I)}function E(I){return I===null?e(I):I===93?(t.consume(I),A):vt(I)?(c=E,K(I)):(t.consume(I),E)}function A(I){return I===93?(t.consume(I),k):E(I)}function k(I){return I===62?X(I):I===93?(t.consume(I),k):E(I)}function P(I){return I===null||I===62?X(I):vt(I)?(c=P,K(I)):(t.consume(I),P)}function R(I){return I===null?e(I):I===63?(t.consume(I),Y):vt(I)?(c=R,K(I)):(t.consume(I),R)}function Y(I){return I===62?X(I):R(I)}function F(I){return Er(I)?(t.consume(I),q):e(I)}function q(I){return I===45||hr(I)?(t.consume(I),q):z(I)}function z(I){return vt(I)?(c=z,K(I)):Jt(I)?(t.consume(I),z):X(I)}function L(I){return I===45||hr(I)?(t.consume(I),L):I===47||I===62||kn(I)?V(I):e(I)}function V(I){return I===47?(t.consume(I),X):I===58||I===95||Er(I)?(t.consume(I),M):vt(I)?(c=V,K(I)):Jt(I)?(t.consume(I),V):X(I)}function M(I){return I===45||I===46||I===58||I===95||hr(I)?(t.consume(I),M):B(I)}function B(I){return I===61?(t.consume(I),ee):vt(I)?(c=B,K(I)):Jt(I)?(t.consume(I),B):V(I)}function ee(I){return I===null||I===60||I===61||I===62||I===96?e(I):I===34||I===39?(t.consume(I),s=I,ie):vt(I)?(c=ee,K(I)):Jt(I)?(t.consume(I),ee):(t.consume(I),te)}function ie(I){return I===s?(t.consume(I),s=void 0,se):I===null?e(I):vt(I)?(c=ie,K(I)):(t.consume(I),ie)}function te(I){return I===null||I===34||I===39||I===60||I===61||I===96?e(I):I===47||I===62||kn(I)?V(I):(t.consume(I),te)}function se(I){return I===47||I===62||kn(I)?V(I):e(I)}function X(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),n):e(I)}function K(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),re}function re(I){return Jt(I)?an(t,ve,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):ve(I)}function ve(I){return t.enter("htmlTextData"),c(I)}}const Z0={name:"labelEnd",resolveAll:cB,resolveTo:uB,tokenize:dB},sB={tokenize:fB},oB={tokenize:hB},lB={tokenize:mB};function cB(t){let n=-1;const e=[];for(;++n<t.length;){const i=t[n][1];if(e.push(t[n]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const s=i.type==="labelImage"?4:2;i.type="data",n+=s}}return t.length!==e.length&&Ca(t,0,t.length,e),t}function uB(t,n){let e=t.length,i=0,s,l,c,h;for(;e--;)if(s=t[e][1],l){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[e][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(c){if(t[e][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(l=e,s.type!=="labelLink")){i=2;break}}else s.type==="labelEnd"&&(c=e);const m={type:t[l][1].type==="labelLink"?"link":"image",start:{...t[l][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[l][1].start},end:{...t[c][1].end}},y={type:"labelText",start:{...t[l+i+2][1].end},end:{...t[c-2][1].start}};return h=[["enter",m,n],["enter",f,n]],h=Ka(h,t.slice(l+1,l+i+3)),h=Ka(h,[["enter",y,n]]),h=Ka(h,Fx(n.parser.constructs.insideSpan.null,t.slice(l+i+4,c-3),n)),h=Ka(h,[["exit",y,n],t[c-2],t[c-1],["exit",f,n]]),h=Ka(h,t.slice(c+1)),h=Ka(h,[["exit",m,n]]),Ca(t,l,t.length,h),t}function dB(t,n,e){const i=this;let s=i.events.length,l,c;for(;s--;)if((i.events[s][1].type==="labelImage"||i.events[s][1].type==="labelLink")&&!i.events[s][1]._balanced){l=i.events[s][1];break}return h;function h(S){return l?l._inactive?x(S):(c=i.parser.defined.includes(Es(i.sliceSerialize({start:l.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(S),t.exit("labelMarker"),t.exit("labelEnd"),m):e(S)}function m(S){return S===40?t.attempt(sB,y,c?y:x)(S):S===91?t.attempt(oB,y,c?f:x)(S):c?y(S):x(S)}function f(S){return t.attempt(lB,y,x)(S)}function y(S){return n(S)}function x(S){return l._balanced=!0,e(S)}}function fB(t,n,e){return i;function i(x){return t.enter("resource"),t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),s}function s(x){return kn(x)?Jm(t,l)(x):l(x)}function l(x){return x===41?y(x):Ej(t,c,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function c(x){return kn(x)?Jm(t,m)(x):y(x)}function h(x){return e(x)}function m(x){return x===34||x===39||x===40?kj(t,f,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):y(x)}function f(x){return kn(x)?Jm(t,y)(x):y(x)}function y(x){return x===41?(t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),t.exit("resource"),n):e(x)}}function hB(t,n,e){const i=this;return s;function s(h){return Aj.call(i,t,l,c,"reference","referenceMarker","referenceString")(h)}function l(h){return i.parser.defined.includes(Es(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?n(h):e(h)}function c(h){return e(h)}}function mB(t,n,e){return i;function i(l){return t.enter("reference"),t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),s}function s(l){return l===93?(t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),t.exit("reference"),n):e(l)}}const pB={name:"labelStartImage",resolveAll:Z0.resolveAll,tokenize:gB};function gB(t,n,e){const i=this;return s;function s(h){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(h),t.exit("labelImageMarker"),l}function l(h){return h===91?(t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelImage"),c):e(h)}function c(h){return h===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(h):n(h)}}const yB={name:"labelStartLink",resolveAll:Z0.resolveAll,tokenize:xB};function xB(t,n,e){const i=this;return s;function s(c){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelLink"),l}function l(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?e(c):n(c)}}const fb={name:"lineEnding",tokenize:vB};function vB(t,n){return e;function e(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),an(t,n,"linePrefix")}}const Vy={name:"thematicBreak",tokenize:bB};function bB(t,n,e){let i=0,s;return l;function l(f){return t.enter("thematicBreak"),c(f)}function c(f){return s=f,h(f)}function h(f){return f===s?(t.enter("thematicBreakSequence"),m(f)):i>=3&&(f===null||vt(f))?(t.exit("thematicBreak"),n(f)):e(f)}function m(f){return f===s?(t.consume(f),i++,m):(t.exit("thematicBreakSequence"),Jt(f)?an(t,h,"whitespace")(f):h(f))}}const Yr={continuation:{tokenize:CB},exit:jB,name:"list",tokenize:NB},wB={partial:!0,tokenize:TB},SB={partial:!0,tokenize:_B};function NB(t,n,e){const i=this,s=i.events[i.events.length-1];let l=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,c=0;return h;function h(w){const j=i.containerState.type||(w===42||w===43||w===45?"listUnordered":"listOrdered");if(j==="listUnordered"?!i.containerState.marker||w===i.containerState.marker:l0(w)){if(i.containerState.type||(i.containerState.type=j,t.enter(j,{_container:!0})),j==="listUnordered")return t.enter("listItemPrefix"),w===42||w===45?t.check(Vy,e,f)(w):f(w);if(!i.interrupt||w===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),m(w)}return e(w)}function m(w){return l0(w)&&++c<10?(t.consume(w),m):(!i.interrupt||c<2)&&(i.containerState.marker?w===i.containerState.marker:w===41||w===46)?(t.exit("listItemValue"),f(w)):e(w)}function f(w){return t.enter("listItemMarker"),t.consume(w),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||w,t.check(yp,i.interrupt?e:y,t.attempt(wB,S,x))}function y(w){return i.containerState.initialBlankLine=!0,l++,S(w)}function x(w){return Jt(w)?(t.enter("listItemPrefixWhitespace"),t.consume(w),t.exit("listItemPrefixWhitespace"),S):e(w)}function S(w){return i.containerState.size=l+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,n(w)}}function CB(t,n,e){const i=this;return i.containerState._closeFlow=void 0,t.check(yp,s,l);function s(h){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,an(t,n,"listItemIndent",i.containerState.size+1)(h)}function l(h){return i.containerState.furtherBlankLines||!Jt(h)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,c(h)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(SB,n,c)(h))}function c(h){return i.containerState._closeFlow=!0,i.interrupt=void 0,an(t,t.attempt(Yr,n,e),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function _B(t,n,e){const i=this;return an(t,s,"listItemIndent",i.containerState.size+1);function s(l){const c=i.events[i.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===i.containerState.size?n(l):e(l)}}function jB(t){t.exit(this.containerState.type)}function TB(t,n,e){const i=this;return an(t,s,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(l){const c=i.events[i.events.length-1];return!Jt(l)&&c&&c[1].type==="listItemPrefixWhitespace"?n(l):e(l)}}const pN={name:"setextUnderline",resolveTo:EB,tokenize:AB};function EB(t,n){let e=t.length,i,s,l;for(;e--;)if(t[e][0]==="enter"){if(t[e][1].type==="content"){i=e;break}t[e][1].type==="paragraph"&&(s=e)}else t[e][1].type==="content"&&t.splice(e,1),!l&&t[e][1].type==="definition"&&(l=e);const c={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",l?(t.splice(s,0,["enter",c,n]),t.splice(l+1,0,["exit",t[i][1],n]),t[i][1].end={...t[l][1].end}):t[i][1]=c,t.push(["exit",c,n]),t}function AB(t,n,e){const i=this;let s;return l;function l(f){let y=i.events.length,x;for(;y--;)if(i.events[y][1].type!=="lineEnding"&&i.events[y][1].type!=="linePrefix"&&i.events[y][1].type!=="content"){x=i.events[y][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||x)?(t.enter("setextHeadingLine"),s=f,c(f)):e(f)}function c(f){return t.enter("setextHeadingLineSequence"),h(f)}function h(f){return f===s?(t.consume(f),h):(t.exit("setextHeadingLineSequence"),Jt(f)?an(t,m,"lineSuffix")(f):m(f))}function m(f){return f===null||vt(f)?(t.exit("setextHeadingLine"),n(f)):e(f)}}const kB={tokenize:DB};function DB(t){const n=this,e=t.attempt(yp,i,t.attempt(this.parser.constructs.flowInitial,s,an(t,t.attempt(this.parser.constructs.flow,s,t.attempt(O8,s)),"linePrefix")));return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEndingBlank"),t.consume(l),t.exit("lineEndingBlank"),n.currentConstruct=void 0,e}function s(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),n.currentConstruct=void 0,e}}const PB={resolveAll:Pj()},RB=Dj("string"),MB=Dj("text");function Dj(t){return{resolveAll:Pj(t==="text"?IB:void 0),tokenize:n};function n(e){const i=this,s=this.parser.constructs[t],l=e.attempt(s,c,h);return c;function c(y){return f(y)?l(y):h(y)}function h(y){if(y===null){e.consume(y);return}return e.enter("data"),e.consume(y),m}function m(y){return f(y)?(e.exit("data"),l(y)):(e.consume(y),m)}function f(y){if(y===null)return!0;const x=s[y];let S=-1;if(x)for(;++S<x.length;){const w=x[S];if(!w.previous||w.previous.call(i,i.previous))return!0}return!1}}}function Pj(t){return n;function n(e,i){let s=-1,l;for(;++s<=e.length;)l===void 0?e[s]&&e[s][1].type==="data"&&(l=s,s++):(!e[s]||e[s][1].type!=="data")&&(s!==l+2&&(e[l][1].end=e[s-1][1].end,e.splice(l+2,s-l-2),s=l+2),l=void 0);return t?t(e,i):e}}function IB(t,n){let e=0;for(;++e<=t.length;)if((e===t.length||t[e][1].type==="lineEnding")&&t[e-1][1].type==="data"){const i=t[e-1][1],s=n.sliceStream(i);let l=s.length,c=-1,h=0,m;for(;l--;){const f=s[l];if(typeof f=="string"){for(c=f.length;f.charCodeAt(c-1)===32;)h++,c--;if(c)break;c=-1}else if(f===-2)m=!0,h++;else if(f!==-1){l++;break}}if(n._contentTypeTextTrailing&&e===t.length&&(h=0),h){const f={type:e===t.length||m||h<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?c:i.start._bufferIndex+c,_index:i.start._index+l,line:i.end.line,column:i.end.column-h,offset:i.end.offset-h},end:{...i.end}};i.end={...f.start},i.start.offset===i.end.offset?Object.assign(i,f):(t.splice(e,0,["enter",f,n],["exit",f,n]),e+=2)}e++}return t}const OB={42:Yr,43:Yr,45:Yr,48:Yr,49:Yr,50:Yr,51:Yr,52:Yr,53:Yr,54:Yr,55:Yr,56:Yr,57:Yr,62:Cj},LB={91:U8},FB={[-2]:db,[-1]:db,32:db},zB={35:Y8,42:Vy,45:[pN,Vy],60:K8,61:pN,95:Vy,96:hN,126:hN},$B={38:jj,92:_j},UB={[-5]:fb,[-4]:fb,[-3]:fb,33:pB,38:jj,42:c0,60:[y8,rB],91:yB,92:[H8,_j],93:Z0,95:c0,96:k8},BB={null:[c0,PB]},qB={null:[42,95]},VB={null:[]},HB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qB,contentInitial:LB,disable:VB,document:OB,flow:zB,flowInitial:FB,insideSpan:BB,string:$B,text:UB},Symbol.toStringTag,{value:"Module"}));function GB(t,n,e){let i={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const s={},l=[];let c=[],h=[];const m={attempt:z(F),check:z(q),consume:P,enter:R,exit:Y,interrupt:z(q,{interrupt:!0})},f={code:null,containerState:{},defineSkip:E,events:[],now:j,parser:t,previous:null,sliceSerialize:S,sliceStream:w,write:x};let y=n.tokenize.call(f,m);return n.resolveAll&&l.push(n),f;function x(B){return c=Ka(c,B),A(),c[c.length-1]!==null?[]:(L(n,0),f.events=Fx(l,f.events,f),f.events)}function S(B,ee){return WB(w(B),ee)}function w(B){return YB(c,B)}function j(){const{_bufferIndex:B,_index:ee,line:ie,column:te,offset:se}=i;return{_bufferIndex:B,_index:ee,line:ie,column:te,offset:se}}function E(B){s[B.line]=B.column,M()}function A(){let B;for(;i._index<c.length;){const ee=c[i._index];if(typeof ee=="string")for(B=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===B&&i._bufferIndex<ee.length;)k(ee.charCodeAt(i._bufferIndex));else k(ee)}}function k(B){y=y(B)}function P(B){vt(B)?(i.line++,i.column=1,i.offset+=B===-3?2:1,M()):B!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===c[i._index].length&&(i._bufferIndex=-1,i._index++)),f.previous=B}function R(B,ee){const ie=ee||{};return ie.type=B,ie.start=j(),f.events.push(["enter",ie,f]),h.push(ie),ie}function Y(B){const ee=h.pop();return ee.end=j(),f.events.push(["exit",ee,f]),ee}function F(B,ee){L(B,ee.from)}function q(B,ee){ee.restore()}function z(B,ee){return ie;function ie(te,se,X){let K,re,ve,I;return Array.isArray(te)?ae(te):"tokenize"in te?ae([te]):de(te);function de(ue){return je;function je(ge){const Ge=ge!==null&&ue[ge],Te=ge!==null&&ue.null,Ne=[...Array.isArray(Ge)?Ge:Ge?[Ge]:[],...Array.isArray(Te)?Te:Te?[Te]:[]];return ae(Ne)(ge)}}function ae(ue){return K=ue,re=0,ue.length===0?X:H(ue[re])}function H(ue){return je;function je(ge){return I=V(),ve=ue,ue.partial||(f.currentConstruct=ue),ue.name&&f.parser.constructs.disable.null.includes(ue.name)?me():ue.tokenize.call(ee?Object.assign(Object.create(f),ee):f,m,ne,me)(ge)}}function ne(ue){return B(ve,I),se}function me(ue){return I.restore(),++re<K.length?H(K[re]):X}}}function L(B,ee){B.resolveAll&&!l.includes(B)&&l.push(B),B.resolve&&Ca(f.events,ee,f.events.length-ee,B.resolve(f.events.slice(ee),f)),B.resolveTo&&(f.events=B.resolveTo(f.events,f))}function V(){const B=j(),ee=f.previous,ie=f.currentConstruct,te=f.events.length,se=Array.from(h);return{from:te,restore:X};function X(){i=B,f.previous=ee,f.currentConstruct=ie,f.events.length=te,h=se,M()}}function M(){i.line in s&&i.column<2&&(i.column=s[i.line],i.offset+=s[i.line]-1)}}function YB(t,n){const e=n.start._index,i=n.start._bufferIndex,s=n.end._index,l=n.end._bufferIndex;let c;if(e===s)c=[t[e].slice(i,l)];else{if(c=t.slice(e,s),i>-1){const h=c[0];typeof h=="string"?c[0]=h.slice(i):c.shift()}l>0&&c.push(t[s].slice(0,l))}return c}function WB(t,n){let e=-1;const i=[];let s;for(;++e<t.length;){const l=t[e];let c;if(typeof l=="string")c=l;else switch(l){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=n?" ":"	";break}case-1:{if(!n&&s)continue;c=" ";break}default:c=String.fromCharCode(l)}s=l===-2,i.push(c)}return i.join("")}function JB(t){const i={constructs:Sj([HB,...(t||{}).extensions||[]]),content:s(u8),defined:[],document:s(f8),flow:s(kB),lazy:{},string:s(RB),text:s(MB)};return i;function s(l){return c;function c(h){return GB(i,l,h)}}}function QB(t){for(;!Tj(t););return t}const gN=/[\0\t\n\r]/g;function KB(){let t=1,n="",e=!0,i;return s;function s(l,c,h){const m=[];let f,y,x,S,w;for(l=n+(typeof l=="string"?l.toString():new TextDecoder(c||void 0).decode(l)),x=0,n="",e&&(l.charCodeAt(0)===65279&&x++,e=void 0);x<l.length;){if(gN.lastIndex=x,f=gN.exec(l),S=f&&f.index!==void 0?f.index:l.length,w=l.charCodeAt(S),!f){n=l.slice(x);break}if(w===10&&x===S&&i)m.push(-3),i=void 0;else switch(i&&(m.push(-5),i=void 0),x<S&&(m.push(l.slice(x,S)),t+=S-x),w){case 0:{m.push(65533),t++;break}case 9:{for(y=Math.ceil(t/4)*4,m.push(-2);t++<y;)m.push(-1);break}case 10:{m.push(-4),t=1;break}default:i=!0,t=1}x=S+1}return h&&(i&&m.push(-5),n&&m.push(n),m.push(null)),m}}const XB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ZB(t){return t.replace(XB,e9)}function e9(t,n,e){if(n)return n;if(e.charCodeAt(0)===35){const s=e.charCodeAt(1),l=s===120||s===88;return Nj(e.slice(l?2:1),l?16:10)}return X0(e)||t}const Rj={}.hasOwnProperty;function t9(t,n,e){return typeof n!="string"&&(e=n,n=void 0),n9(e)(QB(JB(e).document().write(KB()(t,n,!0))))}function n9(t){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Pi),autolinkProtocol:V,autolinkEmail:V,atxHeading:l(ht),blockQuote:l(Te),characterEscape:V,characterReference:V,codeFenced:l(Ne),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(Ne,c),codeText:l(Be,c),codeTextData:V,data:V,codeFlowValue:V,definition:l(Qe),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l($e),hardBreakEscape:l(Cn),hardBreakTrailing:l(Cn),htmlFlow:l(tt,c),htmlFlowData:V,htmlText:l(tt,c),htmlTextData:V,image:l(li),label:c,link:l(Pi),listItem:l(tn),listItemValue:S,listOrdered:l(ei,x),listUnordered:l(ei),paragraph:l(vi),reference:H,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(ht),strong:l(zn),thematicBreak:l(Qn)},exit:{atxHeading:m(),atxHeadingSequence:F,autolink:m(),autolinkEmail:Ge,autolinkProtocol:ge,blockQuote:m(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:ue,characterReference:je,codeFenced:m(A),codeFencedFence:E,codeFencedFenceInfo:w,codeFencedFenceMeta:j,codeFlowValue:M,codeIndented:m(k),codeText:m(se),codeTextData:M,data:M,definition:m(),definitionDestinationString:Y,definitionLabelString:P,definitionTitleString:R,emphasis:m(),hardBreakEscape:m(ee),hardBreakTrailing:m(ee),htmlFlow:m(ie),htmlFlowData:M,htmlText:m(te),htmlTextData:M,image:m(K),label:ve,labelText:re,lineEnding:B,link:m(X),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:ne,resourceDestinationString:I,resourceTitleString:de,resource:ae,setextHeading:m(L),setextHeadingLineSequence:z,setextHeadingText:q,strong:m(),thematicBreak:m()}};Mj(n,(t||{}).mdastExtensions||[]);const e={};return i;function i(Ee){let Le={type:"root",children:[]};const nt={stack:[Le],tokenStack:[],config:n,enter:h,exit:f,buffer:c,resume:y,data:e},rt=[];let zt=-1;for(;++zt<Ee.length;)if(Ee[zt][1].type==="listOrdered"||Ee[zt][1].type==="listUnordered")if(Ee[zt][0]==="enter")rt.push(zt);else{const xn=rt.pop();zt=s(Ee,xn,zt)}for(zt=-1;++zt<Ee.length;){const xn=n[Ee[zt][0]];Rj.call(xn,Ee[zt][1].type)&&xn[Ee[zt][1].type].call(Object.assign({sliceSerialize:Ee[zt][2].sliceSerialize},nt),Ee[zt][1])}if(nt.tokenStack.length>0){const xn=nt.tokenStack[nt.tokenStack.length-1];(xn[1]||yN).call(nt,void 0,xn[0])}for(Le.position={start:wc(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:wc(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},zt=-1;++zt<n.transforms.length;)Le=n.transforms[zt](Le)||Le;return Le}function s(Ee,Le,nt){let rt=Le-1,zt=-1,xn=!1,ci,Ie,Je,Ve;for(;++rt<=nt;){const lt=Ee[rt];switch(lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{lt[0]==="enter"?zt++:zt--,Ve=void 0;break}case"lineEndingBlank":{lt[0]==="enter"&&(ci&&!Ve&&!zt&&!Je&&(Je=rt),Ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ve=void 0}if(!zt&&lt[0]==="enter"&&lt[1].type==="listItemPrefix"||zt===-1&&lt[0]==="exit"&&(lt[1].type==="listUnordered"||lt[1].type==="listOrdered")){if(ci){let Dt=rt;for(Ie=void 0;Dt--;){const nn=Ee[Dt];if(nn[1].type==="lineEnding"||nn[1].type==="lineEndingBlank"){if(nn[0]==="exit")continue;Ie&&(Ee[Ie][1].type="lineEndingBlank",xn=!0),nn[1].type="lineEnding",Ie=Dt}else if(!(nn[1].type==="linePrefix"||nn[1].type==="blockQuotePrefix"||nn[1].type==="blockQuotePrefixWhitespace"||nn[1].type==="blockQuoteMarker"||nn[1].type==="listItemIndent"))break}Je&&(!Ie||Je<Ie)&&(ci._spread=!0),ci.end=Object.assign({},Ie?Ee[Ie][1].start:lt[1].end),Ee.splice(Ie||rt,0,["exit",ci,lt[2]]),rt++,nt++}if(lt[1].type==="listItemPrefix"){const Dt={type:"listItem",_spread:!1,start:Object.assign({},lt[1].start),end:void 0};ci=Dt,Ee.splice(rt,0,["enter",Dt,lt[2]]),rt++,nt++,Je=void 0,Ve=!0}}}return Ee[Le][1]._spread=xn,nt}function l(Ee,Le){return nt;function nt(rt){h.call(this,Ee(rt),rt),Le&&Le.call(this,rt)}}function c(){this.stack.push({type:"fragment",children:[]})}function h(Ee,Le,nt){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([Le,nt||void 0]),Ee.position={start:wc(Le.start),end:void 0}}function m(Ee){return Le;function Le(nt){Ee&&Ee.call(this,nt),f.call(this,nt)}}function f(Ee,Le){const nt=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==Ee.type&&(Le?Le.call(this,Ee,rt[0]):(rt[1]||yN).call(this,Ee,rt[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+Wm({start:Ee.start,end:Ee.end})+"): it’s not open");nt.position.end=wc(Ee.end)}function y(){return K0(this.stack.pop())}function x(){this.data.expectingFirstListItemValue=!0}function S(Ee){if(this.data.expectingFirstListItemValue){const Le=this.stack[this.stack.length-2];Le.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function w(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.lang=Ee}function j(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.meta=Ee}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Ee.replace(/(\r?\n|\r)$/g,"")}function P(Ee){const Le=this.resume(),nt=this.stack[this.stack.length-1];nt.label=Le,nt.identifier=Es(this.sliceSerialize(Ee)).toLowerCase()}function R(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Ee}function Y(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Ee}function F(Ee){const Le=this.stack[this.stack.length-1];if(!Le.depth){const nt=this.sliceSerialize(Ee).length;Le.depth=nt}}function q(){this.data.setextHeadingSlurpLineEnding=!0}function z(Ee){const Le=this.stack[this.stack.length-1];Le.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function V(Ee){const nt=this.stack[this.stack.length-1].children;let rt=nt[nt.length-1];(!rt||rt.type!=="text")&&(rt=Hi(),rt.position={start:wc(Ee.start),end:void 0},nt.push(rt)),this.stack.push(rt)}function M(Ee){const Le=this.stack.pop();Le.value+=this.sliceSerialize(Ee),Le.position.end=wc(Ee.end)}function B(Ee){const Le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const nt=Le.children[Le.children.length-1];nt.position.end=wc(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(Le.type)&&(V.call(this,Ee),M.call(this,Ee))}function ee(){this.data.atHardBreak=!0}function ie(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Ee}function te(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Ee}function se(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.value=Ee}function X(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Le,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function K(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Le=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Le,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function re(Ee){const Le=this.sliceSerialize(Ee),nt=this.stack[this.stack.length-2];nt.label=ZB(Le),nt.identifier=Es(Le).toLowerCase()}function ve(){const Ee=this.stack[this.stack.length-1],Le=this.resume(),nt=this.stack[this.stack.length-1];if(this.data.inReference=!0,nt.type==="link"){const rt=Ee.children;nt.children=rt}else nt.alt=Le}function I(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.url=Ee}function de(){const Ee=this.resume(),Le=this.stack[this.stack.length-1];Le.title=Ee}function ae(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function ne(Ee){const Le=this.resume(),nt=this.stack[this.stack.length-1];nt.label=Le,nt.identifier=Es(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function me(Ee){this.data.characterReferenceType=Ee.type}function ue(Ee){const Le=this.sliceSerialize(Ee),nt=this.data.characterReferenceType;let rt;nt?(rt=Nj(Le,nt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=X0(Le);const zt=this.stack[this.stack.length-1];zt.value+=rt}function je(Ee){const Le=this.stack.pop();Le.position.end=wc(Ee.end)}function ge(Ee){M.call(this,Ee);const Le=this.stack[this.stack.length-1];Le.url=this.sliceSerialize(Ee)}function Ge(Ee){M.call(this,Ee);const Le=this.stack[this.stack.length-1];Le.url="mailto:"+this.sliceSerialize(Ee)}function Te(){return{type:"blockquote",children:[]}}function Ne(){return{type:"code",lang:null,meta:null,value:""}}function Be(){return{type:"inlineCode",value:""}}function Qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $e(){return{type:"emphasis",children:[]}}function ht(){return{type:"heading",depth:0,children:[]}}function Cn(){return{type:"break"}}function tt(){return{type:"html",value:""}}function li(){return{type:"image",title:null,url:"",alt:null}}function Pi(){return{type:"link",title:null,url:"",children:[]}}function ei(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function tn(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function vi(){return{type:"paragraph",children:[]}}function zn(){return{type:"strong",children:[]}}function Hi(){return{type:"text",value:""}}function Qn(){return{type:"thematicBreak"}}}function wc(t){return{line:t.line,column:t.column,offset:t.offset}}function Mj(t,n){let e=-1;for(;++e<n.length;){const i=n[e];Array.isArray(i)?Mj(t,i):i9(t,i)}}function i9(t,n){let e;for(e in n)if(Rj.call(n,e))switch(e){case"canContainEols":{const i=n[e];i&&t[e].push(...i);break}case"transforms":{const i=n[e];i&&t[e].push(...i);break}case"enter":case"exit":{const i=n[e];i&&Object.assign(t[e],i);break}}}function yN(t,n){throw t?new Error("Cannot close `"+t.type+"` ("+Wm({start:t.start,end:t.end})+"): a different token (`"+n.type+"`, "+Wm({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+Wm({start:n.start,end:n.end})+") is still open")}function r9(t){const n=this;n.parser=e;function e(i){return t9(i,{...n.data("settings"),...t,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function a9(t,n){const e={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(n),!0)};return t.patch(n,e),t.applyData(n,e)}function s9(t,n){const e={type:"element",tagName:"br",properties:{},children:[]};return t.patch(n,e),[t.applyData(n,e),{type:"text",value:`
`}]}function o9(t,n){const e=n.value?n.value+`
`:"",i={};n.lang&&(i.className=["language-"+n.lang]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:e}]};return n.meta&&(s.data={meta:n.meta}),t.patch(n,s),s=t.applyData(n,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(n,s),s}function l9(t,n){const e={type:"element",tagName:"del",properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}function c9(t,n){const e={type:"element",tagName:"em",properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}function u9(t,n){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(n.identifier).toUpperCase(),s=rh(i.toLowerCase()),l=t.footnoteOrder.indexOf(i);let c,h=t.footnoteCounts.get(i);h===void 0?(h=0,t.footnoteOrder.push(i),c=t.footnoteOrder.length):c=l+1,h+=1,t.footnoteCounts.set(i,h);const m={type:"element",tagName:"a",properties:{href:"#"+e+"fn-"+s,id:e+"fnref-"+s+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};t.patch(n,m);const f={type:"element",tagName:"sup",properties:{},children:[m]};return t.patch(n,f),t.applyData(n,f)}function d9(t,n){const e={type:"element",tagName:"h"+n.depth,properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}function f9(t,n){if(t.options.allowDangerousHtml){const e={type:"raw",value:n.value};return t.patch(n,e),t.applyData(n,e)}}function Ij(t,n){const e=n.referenceType;let i="]";if(e==="collapsed"?i+="[]":e==="full"&&(i+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+i}];const s=t.all(n),l=s[0];l&&l.type==="text"?l.value="["+l.value:s.unshift({type:"text",value:"["});const c=s[s.length-1];return c&&c.type==="text"?c.value+=i:s.push({type:"text",value:i}),s}function h9(t,n){const e=String(n.identifier).toUpperCase(),i=t.definitionById.get(e);if(!i)return Ij(t,n);const s={src:rh(i.url||""),alt:n.alt};i.title!==null&&i.title!==void 0&&(s.title=i.title);const l={type:"element",tagName:"img",properties:s,children:[]};return t.patch(n,l),t.applyData(n,l)}function m9(t,n){const e={src:rh(n.url)};n.alt!==null&&n.alt!==void 0&&(e.alt=n.alt),n.title!==null&&n.title!==void 0&&(e.title=n.title);const i={type:"element",tagName:"img",properties:e,children:[]};return t.patch(n,i),t.applyData(n,i)}function p9(t,n){const e={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};t.patch(n,e);const i={type:"element",tagName:"code",properties:{},children:[e]};return t.patch(n,i),t.applyData(n,i)}function g9(t,n){const e=String(n.identifier).toUpperCase(),i=t.definitionById.get(e);if(!i)return Ij(t,n);const s={href:rh(i.url||"")};i.title!==null&&i.title!==void 0&&(s.title=i.title);const l={type:"element",tagName:"a",properties:s,children:t.all(n)};return t.patch(n,l),t.applyData(n,l)}function y9(t,n){const e={href:rh(n.url)};n.title!==null&&n.title!==void 0&&(e.title=n.title);const i={type:"element",tagName:"a",properties:e,children:t.all(n)};return t.patch(n,i),t.applyData(n,i)}function x9(t,n,e){const i=t.all(n),s=e?v9(e):Oj(n),l={},c=[];if(typeof n.checked=="boolean"){const y=i[0];let x;y&&y.type==="element"&&y.tagName==="p"?x=y:(x={type:"element",tagName:"p",properties:{},children:[]},i.unshift(x)),x.children.length>0&&x.children.unshift({type:"text",value:" "}),x.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let h=-1;for(;++h<i.length;){const y=i[h];(s||h!==0||y.type!=="element"||y.tagName!=="p")&&c.push({type:"text",value:`
`}),y.type==="element"&&y.tagName==="p"&&!s?c.push(...y.children):c.push(y)}const m=i[i.length-1];m&&(s||m.type!=="element"||m.tagName!=="p")&&c.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:l,children:c};return t.patch(n,f),t.applyData(n,f)}function v9(t){let n=!1;if(t.type==="list"){n=t.spread||!1;const e=t.children;let i=-1;for(;!n&&++i<e.length;)n=Oj(e[i])}return n}function Oj(t){const n=t.spread;return n??t.children.length>1}function b9(t,n){const e={},i=t.all(n);let s=-1;for(typeof n.start=="number"&&n.start!==1&&(e.start=n.start);++s<i.length;){const c=i[s];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){e.className=["contains-task-list"];break}}const l={type:"element",tagName:n.ordered?"ol":"ul",properties:e,children:t.wrap(i,!0)};return t.patch(n,l),t.applyData(n,l)}function w9(t,n){const e={type:"element",tagName:"p",properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}function S9(t,n){const e={type:"root",children:t.wrap(t.all(n))};return t.patch(n,e),t.applyData(n,e)}function N9(t,n){const e={type:"element",tagName:"strong",properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}function C9(t,n){const e=t.all(n),i=e.shift(),s=[];if(i){const c={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(n.children[0],c),s.push(c)}if(e.length>0){const c={type:"element",tagName:"tbody",properties:{},children:t.wrap(e,!0)},h=Y0(n.children[1]),m=pj(n.children[n.children.length-1]);h&&m&&(c.position={start:h,end:m}),s.push(c)}const l={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(n,l),t.applyData(n,l)}function _9(t,n,e){const i=e?e.children:void 0,l=(i?i.indexOf(n):1)===0?"th":"td",c=e&&e.type==="table"?e.align:void 0,h=c?c.length:n.children.length;let m=-1;const f=[];for(;++m<h;){const x=n.children[m],S={},w=c?c[m]:void 0;w&&(S.align=w);let j={type:"element",tagName:l,properties:S,children:[]};x&&(j.children=t.all(x),t.patch(x,j),j=t.applyData(x,j)),f.push(j)}const y={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(n,y),t.applyData(n,y)}function j9(t,n){const e={type:"element",tagName:"td",properties:{},children:t.all(n)};return t.patch(n,e),t.applyData(n,e)}const xN=9,vN=32;function T9(t){const n=String(t),e=/\r?\n|\r/g;let i=e.exec(n),s=0;const l=[];for(;i;)l.push(bN(n.slice(s,i.index),s>0,!0),i[0]),s=i.index+i[0].length,i=e.exec(n);return l.push(bN(n.slice(s),s>0,!1)),l.join("")}function bN(t,n,e){let i=0,s=t.length;if(n){let l=t.codePointAt(i);for(;l===xN||l===vN;)i++,l=t.codePointAt(i)}if(e){let l=t.codePointAt(s-1);for(;l===xN||l===vN;)s--,l=t.codePointAt(s-1)}return s>i?t.slice(i,s):""}function E9(t,n){const e={type:"text",value:T9(String(n.value))};return t.patch(n,e),t.applyData(n,e)}function A9(t,n){const e={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(n,e),t.applyData(n,e)}const k9={blockquote:a9,break:s9,code:o9,delete:l9,emphasis:c9,footnoteReference:u9,heading:d9,html:f9,imageReference:h9,image:m9,inlineCode:p9,linkReference:g9,link:y9,listItem:x9,list:b9,paragraph:w9,root:S9,strong:N9,table:C9,tableCell:j9,tableRow:_9,text:E9,thematicBreak:A9,toml:jy,yaml:jy,definition:jy,footnoteDefinition:jy};function jy(){}const Lj=-1,zx=0,Qm=1,hx=2,e1=3,t1=4,n1=5,i1=6,Fj=7,zj=8,wN=typeof self=="object"?self:globalThis,D9=(t,n)=>{const e=(s,l)=>(t.set(l,s),s),i=s=>{if(t.has(s))return t.get(s);const[l,c]=n[s];switch(l){case zx:case Lj:return e(c,s);case Qm:{const h=e([],s);for(const m of c)h.push(i(m));return h}case hx:{const h=e({},s);for(const[m,f]of c)h[i(m)]=i(f);return h}case e1:return e(new Date(c),s);case t1:{const{source:h,flags:m}=c;return e(new RegExp(h,m),s)}case n1:{const h=e(new Map,s);for(const[m,f]of c)h.set(i(m),i(f));return h}case i1:{const h=e(new Set,s);for(const m of c)h.add(i(m));return h}case Fj:{const{name:h,message:m}=c;return e(new wN[h](m),s)}case zj:return e(BigInt(c),s);case"BigInt":return e(Object(BigInt(c)),s);case"ArrayBuffer":return e(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:h}=new Uint8Array(c);return e(new DataView(h),c)}}return e(new wN[l](c),s)};return i},SN=t=>D9(new Map,t)(0),If="",{toString:P9}={},{keys:R9}=Object,Bm=t=>{const n=typeof t;if(n!=="object"||!t)return[zx,n];const e=P9.call(t).slice(8,-1);switch(e){case"Array":return[Qm,If];case"Object":return[hx,If];case"Date":return[e1,If];case"RegExp":return[t1,If];case"Map":return[n1,If];case"Set":return[i1,If];case"DataView":return[Qm,e]}return e.includes("Array")?[Qm,e]:e.includes("Error")?[Fj,e]:[hx,e]},Ty=([t,n])=>t===zx&&(n==="function"||n==="symbol"),M9=(t,n,e,i)=>{const s=(c,h)=>{const m=i.push(c)-1;return e.set(h,m),m},l=c=>{if(e.has(c))return e.get(c);let[h,m]=Bm(c);switch(h){case zx:{let y=c;switch(m){case"bigint":h=zj,y=c.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+m);y=null;break;case"undefined":return s([Lj],c)}return s([h,y],c)}case Qm:{if(m){let S=c;return m==="DataView"?S=new Uint8Array(c.buffer):m==="ArrayBuffer"&&(S=new Uint8Array(c)),s([m,[...S]],c)}const y=[],x=s([h,y],c);for(const S of c)y.push(l(S));return x}case hx:{if(m)switch(m){case"BigInt":return s([m,c.toString()],c);case"Boolean":case"Number":case"String":return s([m,c.valueOf()],c)}if(n&&"toJSON"in c)return l(c.toJSON());const y=[],x=s([h,y],c);for(const S of R9(c))(t||!Ty(Bm(c[S])))&&y.push([l(S),l(c[S])]);return x}case e1:return s([h,c.toISOString()],c);case t1:{const{source:y,flags:x}=c;return s([h,{source:y,flags:x}],c)}case n1:{const y=[],x=s([h,y],c);for(const[S,w]of c)(t||!(Ty(Bm(S))||Ty(Bm(w))))&&y.push([l(S),l(w)]);return x}case i1:{const y=[],x=s([h,y],c);for(const S of c)(t||!Ty(Bm(S)))&&y.push(l(S));return x}}const{message:f}=c;return s([h,{name:m,message:f}],c)};return l},NN=(t,{json:n,lossy:e}={})=>{const i=[];return M9(!(n||e),!!n,new Map,i)(t),i},mx=typeof structuredClone=="function"?(t,n)=>n&&("json"in n||"lossy"in n)?SN(NN(t,n)):structuredClone(t):(t,n)=>SN(NN(t,n));function I9(t,n){const e=[{type:"text",value:"↩"}];return n>1&&e.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),e}function O9(t,n){return"Back to reference "+(t+1)+(n>1?"-"+n:"")}function L9(t){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",e=t.options.footnoteBackContent||I9,i=t.options.footnoteBackLabel||O9,s=t.options.footnoteLabel||"Footnotes",l=t.options.footnoteLabelTagName||"h2",c=t.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let m=-1;for(;++m<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[m]);if(!f)continue;const y=t.all(f),x=String(f.identifier).toUpperCase(),S=rh(x.toLowerCase());let w=0;const j=[],E=t.footnoteCounts.get(x);for(;E!==void 0&&++w<=E;){j.length>0&&j.push({type:"text",value:" "});let P=typeof e=="string"?e:e(m,w);typeof P=="string"&&(P={type:"text",value:P}),j.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+S+(w>1?"-"+w:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(m,w),className:["data-footnote-backref"]},children:Array.isArray(P)?P:[P]})}const A=y[y.length-1];if(A&&A.type==="element"&&A.tagName==="p"){const P=A.children[A.children.length-1];P&&P.type==="text"?P.value+=" ":A.children.push({type:"text",value:" "}),A.children.push(...j)}else y.push(...j);const k={type:"element",tagName:"li",properties:{id:n+"fn-"+S},children:t.wrap(y,!0)};t.patch(f,k),h.push(k)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...mx(c),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(h,!0)},{type:"text",value:`
`}]}}const $x=function(t){if(t==null)return U9;if(typeof t=="function")return Ux(t);if(typeof t=="object")return Array.isArray(t)?F9(t):z9(t);if(typeof t=="string")return $9(t);throw new Error("Expected function, string, or object as test")};function F9(t){const n=[];let e=-1;for(;++e<t.length;)n[e]=$x(t[e]);return Ux(i);function i(...s){let l=-1;for(;++l<n.length;)if(n[l].apply(this,s))return!0;return!1}}function z9(t){const n=t;return Ux(e);function e(i){const s=i;let l;for(l in t)if(s[l]!==n[l])return!1;return!0}}function $9(t){return Ux(n);function n(e){return e&&e.type===t}}function Ux(t){return n;function n(e,i,s){return!!(B9(e)&&t.call(this,e,typeof i=="number"?i:void 0,s||void 0))}}function U9(){return!0}function B9(t){return t!==null&&typeof t=="object"&&"type"in t}const $j=[],q9=!0,u0=!1,V9="skip";function Uj(t,n,e,i){let s;typeof n=="function"&&typeof e!="function"?(i=e,e=n):s=n;const l=$x(s),c=i?-1:1;h(t,void 0,[])();function h(m,f,y){const x=m&&typeof m=="object"?m:{};if(typeof x.type=="string"){const w=typeof x.tagName=="string"?x.tagName:typeof x.name=="string"?x.name:void 0;Object.defineProperty(S,"name",{value:"node ("+(m.type+(w?"<"+w+">":""))+")"})}return S;function S(){let w=$j,j,E,A;if((!n||l(m,f,y[y.length-1]||void 0))&&(w=H9(e(m,y)),w[0]===u0))return w;if("children"in m&&m.children){const k=m;if(k.children&&w[0]!==V9)for(E=(i?k.children.length:-1)+c,A=y.concat(k);E>-1&&E<k.children.length;){const P=k.children[E];if(j=h(P,E,A)(),j[0]===u0)return j;E=typeof j[1]=="number"?j[1]:E+c}}return w}}}function H9(t){return Array.isArray(t)?t:typeof t=="number"?[q9,t]:t==null?$j:[t]}function r1(t,n,e,i){let s,l,c;typeof n=="function"?(l=void 0,c=n,s=e):(l=n,c=e,s=i),Uj(t,l,h,s);function h(m,f){const y=f[f.length-1],x=y?y.children.indexOf(m):void 0;return c(m,x,y)}}const d0={}.hasOwnProperty,G9={};function Y9(t,n){const e=n||G9,i=new Map,s=new Map,l=new Map,c={...k9,...e.handlers},h={all:f,applyData:J9,definitionById:i,footnoteById:s,footnoteCounts:l,footnoteOrder:[],handlers:c,one:m,options:e,patch:W9,wrap:K9};return r1(t,function(y){if(y.type==="definition"||y.type==="footnoteDefinition"){const x=y.type==="definition"?i:s,S=String(y.identifier).toUpperCase();x.has(S)||x.set(S,y)}}),h;function m(y,x){const S=y.type,w=h.handlers[S];if(d0.call(h.handlers,S)&&w)return w(h,y,x);if(h.options.passThrough&&h.options.passThrough.includes(S)){if("children"in y){const{children:E,...A}=y,k=mx(A);return k.children=h.all(y),k}return mx(y)}return(h.options.unknownHandler||Q9)(h,y,x)}function f(y){const x=[];if("children"in y){const S=y.children;let w=-1;for(;++w<S.length;){const j=h.one(S[w],y);if(j){if(w&&S[w-1].type==="break"&&(!Array.isArray(j)&&j.type==="text"&&(j.value=CN(j.value)),!Array.isArray(j)&&j.type==="element")){const E=j.children[0];E&&E.type==="text"&&(E.value=CN(E.value))}Array.isArray(j)?x.push(...j):x.push(j)}}}return x}}function W9(t,n){t.position&&(n.position=OU(t))}function J9(t,n){let e=n;if(t&&t.data){const i=t.data.hName,s=t.data.hChildren,l=t.data.hProperties;if(typeof i=="string")if(e.type==="element")e.tagName=i;else{const c="children"in e?e.children:[e];e={type:"element",tagName:i,properties:{},children:c}}e.type==="element"&&l&&Object.assign(e.properties,mx(l)),"children"in e&&e.children&&s!==null&&s!==void 0&&(e.children=s)}return e}function Q9(t,n){const e=n.data||{},i="value"in n&&!(d0.call(e,"hProperties")||d0.call(e,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:t.all(n)};return t.patch(n,i),t.applyData(n,i)}function K9(t,n){const e=[];let i=-1;for(n&&e.push({type:"text",value:`
`});++i<t.length;)i&&e.push({type:"text",value:`
`}),e.push(t[i]);return n&&t.length>0&&e.push({type:"text",value:`
`}),e}function CN(t){let n=0,e=t.charCodeAt(n);for(;e===9||e===32;)n++,e=t.charCodeAt(n);return t.slice(n)}function _N(t,n){const e=Y9(t,n),i=e.one(t,void 0),s=L9(e),l=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return s&&l.children.push({type:"text",value:`
`},s),l}function X9(t,n){return t&&"run"in t?async function(e,i){const s=_N(e,{file:i,...n});await t.run(s,i)}:function(e,i){return _N(e,{file:i,...t||n})}}function jN(t){if(t)throw t}var hb,TN;function Z9(){if(TN)return hb;TN=1;var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):n.call(f)==="[object Array]"},l=function(f){if(!f||n.call(f)!=="[object Object]")return!1;var y=t.call(f,"constructor"),x=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!y&&!x)return!1;var S;for(S in f);return typeof S>"u"||t.call(f,S)},c=function(f,y){e&&y.name==="__proto__"?e(f,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):f[y.name]=y.newValue},h=function(f,y){if(y==="__proto__")if(t.call(f,y)){if(i)return i(f,y).value}else return;return f[y]};return hb=function m(){var f,y,x,S,w,j,E=arguments[0],A=1,k=arguments.length,P=!1;for(typeof E=="boolean"&&(P=E,E=arguments[1]||{},A=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});A<k;++A)if(f=arguments[A],f!=null)for(y in f)x=h(E,y),S=h(f,y),E!==S&&(P&&S&&(l(S)||(w=s(S)))?(w?(w=!1,j=x&&s(x)?x:[]):j=x&&l(x)?x:{},c(E,{name:y,newValue:m(P,j,S)})):typeof S<"u"&&c(E,{name:y,newValue:S}));return E},hb}var eq=Z9();const mb=Jf(eq);function f0(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function tq(){const t=[],n={run:e,use:i};return n;function e(...s){let l=-1;const c=s.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);h(null,...s);function h(m,...f){const y=t[++l];let x=-1;if(m){c(m);return}for(;++x<s.length;)(f[x]===null||f[x]===void 0)&&(f[x]=s[x]);s=f,y?nq(y,h)(...f):c(null,...f)}}function i(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),n}}function nq(t,n){let e;return i;function i(...c){const h=t.length>c.length;let m;h&&c.push(s);try{m=t.apply(this,c)}catch(f){const y=f;if(h&&e)throw y;return s(y)}h||(m&&m.then&&typeof m.then=="function"?m.then(l,s):m instanceof Error?s(m):l(m))}function s(c,...h){e||(e=!0,n(c,...h))}function l(c){s(null,c)}}const wo={basename:iq,dirname:rq,extname:aq,join:sq,sep:"/"};function iq(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');xp(t);let e=0,i=-1,s=t.length,l;if(n===void 0||n.length===0||n.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(l){e=s+1;break}}else i<0&&(l=!0,i=s+1);return i<0?"":t.slice(e,i)}if(n===t)return"";let c=-1,h=n.length-1;for(;s--;)if(t.codePointAt(s)===47){if(l){e=s+1;break}}else c<0&&(l=!0,c=s+1),h>-1&&(t.codePointAt(s)===n.codePointAt(h--)?h<0&&(i=s):(h=-1,i=c));return e===i?i=c:i<0&&(i=t.length),t.slice(e,i)}function rq(t){if(xp(t),t.length===0)return".";let n=-1,e=t.length,i;for(;--e;)if(t.codePointAt(e)===47){if(i){n=e;break}}else i||(i=!0);return n<0?t.codePointAt(0)===47?"/":".":n===1&&t.codePointAt(0)===47?"//":t.slice(0,n)}function aq(t){xp(t);let n=t.length,e=-1,i=0,s=-1,l=0,c;for(;n--;){const h=t.codePointAt(n);if(h===47){if(c){i=n+1;break}continue}e<0&&(c=!0,e=n+1),h===46?s<0?s=n:l!==1&&(l=1):s>-1&&(l=-1)}return s<0||e<0||l===0||l===1&&s===e-1&&s===i+1?"":t.slice(s,e)}function sq(...t){let n=-1,e;for(;++n<t.length;)xp(t[n]),t[n]&&(e=e===void 0?t[n]:e+"/"+t[n]);return e===void 0?".":oq(e)}function oq(t){xp(t);const n=t.codePointAt(0)===47;let e=lq(t,!n);return e.length===0&&!n&&(e="."),e.length>0&&t.codePointAt(t.length-1)===47&&(e+="/"),n?"/"+e:e}function lq(t,n){let e="",i=0,s=-1,l=0,c=-1,h,m;for(;++c<=t.length;){if(c<t.length)h=t.codePointAt(c);else{if(h===47)break;h=47}if(h===47){if(!(s===c-1||l===1))if(s!==c-1&&l===2){if(e.length<2||i!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(m=e.lastIndexOf("/"),m!==e.length-1){m<0?(e="",i=0):(e=e.slice(0,m),i=e.length-1-e.lastIndexOf("/")),s=c,l=0;continue}}else if(e.length>0){e="",i=0,s=c,l=0;continue}}n&&(e=e.length>0?e+"/..":"..",i=2)}else e.length>0?e+="/"+t.slice(s+1,c):e=t.slice(s+1,c),i=c-s-1;s=c,l=0}else h===46&&l>-1?l++:l=-1}return e}function xp(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const cq={cwd:uq};function uq(){return"/"}function h0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function dq(t){if(typeof t=="string")t=new URL(t);else if(!h0(t)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(t.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return fq(t)}function fq(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const n=t.pathname;let e=-1;for(;++e<n.length;)if(n.codePointAt(e)===37&&n.codePointAt(e+1)===50){const i=n.codePointAt(e+2);if(i===70||i===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(n)}const pb=["history","path","basename","stem","extname","dirname"];class Bj{constructor(n){let e;n?h0(n)?e={path:n}:typeof n=="string"||hq(n)?e={value:n}:e=n:e={},this.cwd="cwd"in e?"":cq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<pb.length;){const l=pb[i];l in e&&e[l]!==void 0&&e[l]!==null&&(this[l]=l==="history"?[...e[l]]:e[l])}let s;for(s in e)pb.includes(s)||(this[s]=e[s])}get basename(){return typeof this.path=="string"?wo.basename(this.path):void 0}set basename(n){yb(n,"basename"),gb(n,"basename"),this.path=wo.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?wo.dirname(this.path):void 0}set dirname(n){EN(this.basename,"dirname"),this.path=wo.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?wo.extname(this.path):void 0}set extname(n){if(gb(n,"extname"),EN(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=wo.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){h0(n)&&(n=dq(n)),yb(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?wo.basename(this.path,this.extname):void 0}set stem(n){yb(n,"stem"),gb(n,"stem"),this.path=wo.join(this.dirname||"",n+(this.extname||""))}fail(n,e,i){const s=this.message(n,e,i);throw s.fatal=!0,s}info(n,e,i){const s=this.message(n,e,i);return s.fatal=void 0,s}message(n,e,i){const s=new pr(n,e,i);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function gb(t,n){if(t&&t.includes(wo.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+wo.sep+"`")}function yb(t,n){if(!t)throw new Error("`"+n+"` cannot be empty")}function EN(t,n){if(!t)throw new Error("Setting `"+n+"` requires `path` to be set too")}function hq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const mq=function(t){const i=this.constructor.prototype,s=i[t],l=function(){return s.apply(l,arguments)};return Object.setPrototypeOf(l,i),l},pq={}.hasOwnProperty;class a1 extends mq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=tq()}copy(){const n=new a1;let e=-1;for(;++e<this.attachers.length;){const i=this.attachers[e];n.use(...i)}return n.data(mb(!0,{},this.namespace)),n}data(n,e){return typeof n=="string"?arguments.length===2?(bb("data",this.frozen),this.namespace[n]=e,this):pq.call(this.namespace,n)&&this.namespace[n]||void 0:n?(bb("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const s=e.call(n,...i);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const e=Ey(n),i=this.parser||this.Parser;return xb("parse",i),i(String(e),e)}process(n,e){const i=this;return this.freeze(),xb("process",this.parser||this.Parser),vb("process",this.compiler||this.Compiler),e?s(void 0,e):new Promise(s);function s(l,c){const h=Ey(n),m=i.parse(h);i.run(m,h,function(y,x,S){if(y||!x||!S)return f(y);const w=x,j=i.stringify(w,S);xq(j)?S.value=j:S.result=j,f(y,S)});function f(y,x){y||!x?c(y):l?l(x):e(void 0,x)}}}processSync(n){let e=!1,i;return this.freeze(),xb("processSync",this.parser||this.Parser),vb("processSync",this.compiler||this.Compiler),this.process(n,s),kN("processSync","process",e),i;function s(l,c){e=!0,jN(l),i=c}}run(n,e,i){AN(n),this.freeze();const s=this.transformers;return!i&&typeof e=="function"&&(i=e,e=void 0),i?l(void 0,i):new Promise(l);function l(c,h){const m=Ey(e);s.run(n,m,f);function f(y,x,S){const w=x||n;y?h(y):c?c(w):i(void 0,w,S)}}}runSync(n,e){let i=!1,s;return this.run(n,e,l),kN("runSync","run",i),s;function l(c,h){jN(c),s=h,i=!0}}stringify(n,e){this.freeze();const i=Ey(e),s=this.compiler||this.Compiler;return vb("stringify",s),AN(n),s(n,i)}use(n,...e){const i=this.attachers,s=this.namespace;if(bb("use",this.frozen),n!=null)if(typeof n=="function")m(n,e);else if(typeof n=="object")Array.isArray(n)?h(n):c(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function l(f){if(typeof f=="function")m(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[y,...x]=f;m(y,x)}else c(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function c(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(f.plugins),f.settings&&(s.settings=mb(!0,s.settings,f.settings))}function h(f){let y=-1;if(f!=null)if(Array.isArray(f))for(;++y<f.length;){const x=f[y];l(x)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function m(f,y){let x=-1,S=-1;for(;++x<i.length;)if(i[x][0]===f){S=x;break}if(S===-1)i.push([f,...y]);else if(y.length>0){let[w,...j]=y;const E=i[S][1];f0(E)&&f0(w)&&(w=mb(!0,E,w)),i[S]=[f,w,...j]}}}}const gq=new a1().freeze();function xb(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function vb(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function bb(t,n){if(n)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function AN(t){if(!f0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function kN(t,n,e){if(!e)throw new Error("`"+t+"` finished async. Use `"+n+"` instead")}function Ey(t){return yq(t)?t:new Bj(t)}function yq(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function xq(t){return typeof t=="string"||vq(t)}function vq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bq="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",DN=[],PN={allowDangerousHtml:!0},wq=/^(https?|ircs?|mailto|xmpp)$/i,Sq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Sc(t){const n=Nq(t),e=Cq(t);return _q(n.runSync(n.parse(e),e),t)}function Nq(t){const n=t.rehypePlugins||DN,e=t.remarkPlugins||DN,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...PN}:PN;return gq().use(r9).use(e).use(X9,i).use(n)}function Cq(t){const n=t.children||"",e=new Bj;return typeof n=="string"&&(e.value=n),e}function _q(t,n){const e=n.allowedElements,i=n.allowElement,s=n.components,l=n.disallowedElements,c=n.skipHtml,h=n.unwrapDisallowed,m=n.urlTransform||jq;for(const y of Sq)Object.hasOwn(n,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+bq+y.id,void 0);return r1(t,f),UU(t,{Fragment:r.Fragment,components:s,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function f(y,x,S){if(y.type==="raw"&&S&&typeof x=="number")return c?S.children.splice(x,1):S.children[x]={type:"text",value:y.value},x;if(y.type==="element"){let w;for(w in ub)if(Object.hasOwn(ub,w)&&Object.hasOwn(y.properties,w)){const j=y.properties[w],E=ub[w];(E===null||E.includes(y.tagName))&&(y.properties[w]=m(String(j||""),w,y))}}if(y.type==="element"){let w=e?!e.includes(y.tagName):l?l.includes(y.tagName):!1;if(!w&&i&&typeof x=="number"&&(w=!i(y,x,S)),w&&S&&typeof x=="number")return h&&y.children?S.children.splice(x,1,...y.children):S.children.splice(x,1),x}}}function jq(t){const n=t.indexOf(":"),e=t.indexOf("?"),i=t.indexOf("#"),s=t.indexOf("/");return n===-1||s!==-1&&n>s||e!==-1&&n>e||i!==-1&&n>i||wq.test(t.slice(0,n))?t:""}function RN(t,n){const e=String(t);if(typeof n!="string")throw new TypeError("Expected character");let i=0,s=e.indexOf(n);for(;s!==-1;)i++,s=e.indexOf(n,s+n.length);return i}function Tq(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Eq(t,n,e){const s=$x((e||{}).ignore||[]),l=Aq(n);let c=-1;for(;++c<l.length;)Uj(t,"text",h);function h(f,y){let x=-1,S;for(;++x<y.length;){const w=y[x],j=S?S.children:void 0;if(s(w,j?j.indexOf(w):void 0,S))return;S=w}if(S)return m(f,y)}function m(f,y){const x=y[y.length-1],S=l[c][0],w=l[c][1];let j=0;const A=x.children.indexOf(f);let k=!1,P=[];S.lastIndex=0;let R=S.exec(f.value);for(;R;){const Y=R.index,F={index:R.index,input:R.input,stack:[...y,f]};let q=w(...R,F);if(typeof q=="string"&&(q=q.length>0?{type:"text",value:q}:void 0),q===!1?S.lastIndex=Y+1:(j!==Y&&P.push({type:"text",value:f.value.slice(j,Y)}),Array.isArray(q)?P.push(...q):q&&P.push(q),j=Y+R[0].length,k=!0),!S.global)break;R=S.exec(f.value)}return k?(j<f.value.length&&P.push({type:"text",value:f.value.slice(j)}),x.children.splice(A,1,...P)):P=[f],A+P.length}}function Aq(t){const n=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const e=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<e.length;){const s=e[i];n.push([kq(s[0]),Dq(s[1])])}return n}function kq(t){return typeof t=="string"?new RegExp(Tq(t),"g"):t}function Dq(t){return typeof t=="function"?t:function(){return t}}const wb="phrasing",Sb=["autolink","link","image","label"];function Pq(){return{transforms:[zq],enter:{literalAutolink:Mq,literalAutolinkEmail:Nb,literalAutolinkHttp:Nb,literalAutolinkWww:Nb},exit:{literalAutolink:Fq,literalAutolinkEmail:Lq,literalAutolinkHttp:Iq,literalAutolinkWww:Oq}}}function Rq(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wb,notInConstruct:Sb},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wb,notInConstruct:Sb},{character:":",before:"[ps]",after:"\\/",inConstruct:wb,notInConstruct:Sb}]}}function Mq(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Nb(t){this.config.enter.autolinkProtocol.call(this,t)}function Iq(t){this.config.exit.autolinkProtocol.call(this,t)}function Oq(t){this.config.exit.data.call(this,t);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(t)}function Lq(t){this.config.exit.autolinkEmail.call(this,t)}function Fq(t){this.exit(t)}function zq(t){Eq(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$q],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Uq]],{ignore:["link","linkReference"]})}function $q(t,n,e,i,s){let l="";if(!qj(s)||(/^w/i.test(n)&&(e=n+e,n="",l="http://"),!Bq(e)))return!1;const c=qq(e+i);if(!c[0])return!1;const h={type:"link",title:null,url:l+n+c[0],children:[{type:"text",value:n+c[0]}]};return c[1]?[h,{type:"text",value:c[1]}]:h}function Uq(t,n,e,i){return!qj(i,!0)||/[-\d_]$/.test(e)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+e,children:[{type:"text",value:n+"@"+e}]}}function Bq(t){const n=t.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function qq(t){const n=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!n)return[t,void 0];t=t.slice(0,n.index);let e=n[0],i=e.indexOf(")");const s=RN(t,"(");let l=RN(t,")");for(;i!==-1&&s>l;)t+=e.slice(0,i+1),e=e.slice(i+1),i=e.indexOf(")"),l++;return[t,e]}function qj(t,n){const e=t.input.charCodeAt(t.index-1);return(t.index===0||nd(e)||Lx(e))&&(!n||e!==47)}Vj.peek=Xq;function Vq(){this.buffer()}function Hq(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Gq(){this.buffer()}function Yq(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Wq(t){const n=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=Es(this.sliceSerialize(t)).toLowerCase(),e.label=n}function Jq(t){this.exit(t)}function Qq(t){const n=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=Es(this.sliceSerialize(t)).toLowerCase(),e.label=n}function Kq(t){this.exit(t)}function Xq(){return"["}function Vj(t,n,e,i){const s=e.createTracker(i);let l=s.move("[^");const c=e.enter("footnoteReference"),h=e.enter("reference");return l+=s.move(e.safe(e.associationId(t),{after:"]",before:l})),h(),c(),l+=s.move("]"),l}function Zq(){return{enter:{gfmFootnoteCallString:Vq,gfmFootnoteCall:Hq,gfmFootnoteDefinitionLabelString:Gq,gfmFootnoteDefinition:Yq},exit:{gfmFootnoteCallString:Wq,gfmFootnoteCall:Jq,gfmFootnoteDefinitionLabelString:Qq,gfmFootnoteDefinition:Kq}}}function e7(t){let n=!1;return t&&t.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:e,footnoteReference:Vj},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function e(i,s,l,c){const h=l.createTracker(c);let m=h.move("[^");const f=l.enter("footnoteDefinition"),y=l.enter("label");return m+=h.move(l.safe(l.associationId(i),{before:m,after:"]"})),y(),m+=h.move("]:"),i.children&&i.children.length>0&&(h.shift(4),m+=h.move((n?`
`:" ")+l.indentLines(l.containerFlow(i,h.current()),n?Hj:t7))),f(),m}}function t7(t,n,e){return n===0?t:Hj(t,n,e)}function Hj(t,n,e){return(e?"":"    ")+t}const n7=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Gj.peek=o7;function i7(){return{canContainEols:["delete"],enter:{strikethrough:a7},exit:{strikethrough:s7}}}function r7(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:n7}],handlers:{delete:Gj}}}function a7(t){this.enter({type:"delete",children:[]},t)}function s7(t){this.exit(t)}function Gj(t,n,e,i){const s=e.createTracker(i),l=e.enter("strikethrough");let c=s.move("~~");return c+=e.containerPhrasing(t,{...s.current(),before:c,after:"~"}),c+=s.move("~~"),l(),c}function o7(){return"~"}function l7(t){return t.length}function c7(t,n){const e=n||{},i=(e.align||[]).concat(),s=e.stringLength||l7,l=[],c=[],h=[],m=[];let f=0,y=-1;for(;++y<t.length;){const E=[],A=[];let k=-1;for(t[y].length>f&&(f=t[y].length);++k<t[y].length;){const P=u7(t[y][k]);if(e.alignDelimiters!==!1){const R=s(P);A[k]=R,(m[k]===void 0||R>m[k])&&(m[k]=R)}E.push(P)}c[y]=E,h[y]=A}let x=-1;if(typeof i=="object"&&"length"in i)for(;++x<f;)l[x]=MN(i[x]);else{const E=MN(i);for(;++x<f;)l[x]=E}x=-1;const S=[],w=[];for(;++x<f;){const E=l[x];let A="",k="";E===99?(A=":",k=":"):E===108?A=":":E===114&&(k=":");let P=e.alignDelimiters===!1?1:Math.max(1,m[x]-A.length-k.length);const R=A+"-".repeat(P)+k;e.alignDelimiters!==!1&&(P=A.length+P+k.length,P>m[x]&&(m[x]=P),w[x]=P),S[x]=R}c.splice(1,0,S),h.splice(1,0,w),y=-1;const j=[];for(;++y<c.length;){const E=c[y],A=h[y];x=-1;const k=[];for(;++x<f;){const P=E[x]||"";let R="",Y="";if(e.alignDelimiters!==!1){const F=m[x]-(A[x]||0),q=l[x];q===114?R=" ".repeat(F):q===99?F%2?(R=" ".repeat(F/2+.5),Y=" ".repeat(F/2-.5)):(R=" ".repeat(F/2),Y=R):Y=" ".repeat(F)}e.delimiterStart!==!1&&!x&&k.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&P==="")&&(e.delimiterStart!==!1||x)&&k.push(" "),e.alignDelimiters!==!1&&k.push(R),k.push(P),e.alignDelimiters!==!1&&k.push(Y),e.padding!==!1&&k.push(" "),(e.delimiterEnd!==!1||x!==f-1)&&k.push("|")}j.push(e.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return j.join(`
`)}function u7(t){return t==null?"":String(t)}function MN(t){const n=typeof t=="string"?t.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function d7(t,n,e,i){const s=e.enter("blockquote"),l=e.createTracker(i);l.move("> "),l.shift(2);const c=e.indentLines(e.containerFlow(t,l.current()),f7);return s(),c}function f7(t,n,e){return">"+(e?"":" ")+t}function h7(t,n){return IN(t,n.inConstruct,!0)&&!IN(t,n.notInConstruct,!1)}function IN(t,n,e){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return e;let i=-1;for(;++i<n.length;)if(t.includes(n[i]))return!0;return!1}function ON(t,n,e,i){let s=-1;for(;++s<e.unsafe.length;)if(e.unsafe[s].character===`
`&&h7(e.stack,e.unsafe[s]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function m7(t,n){const e=String(t);let i=e.indexOf(n),s=i,l=0,c=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===s?++l>c&&(c=l):l=1,s=i+n.length,i=e.indexOf(n,s);return c}function p7(t,n){return!!(n.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function g7(t){const n=t.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function y7(t,n,e,i){const s=g7(e),l=t.value||"",c=s==="`"?"GraveAccent":"Tilde";if(p7(t,e)){const x=e.enter("codeIndented"),S=e.indentLines(l,x7);return x(),S}const h=e.createTracker(i),m=s.repeat(Math.max(m7(l,s)+1,3)),f=e.enter("codeFenced");let y=h.move(m);if(t.lang){const x=e.enter(`codeFencedLang${c}`);y+=h.move(e.safe(t.lang,{before:y,after:" ",encode:["`"],...h.current()})),x()}if(t.lang&&t.meta){const x=e.enter(`codeFencedMeta${c}`);y+=h.move(" "),y+=h.move(e.safe(t.meta,{before:y,after:`
`,encode:["`"],...h.current()})),x()}return y+=h.move(`
`),l&&(y+=h.move(l+`
`)),y+=h.move(m),f(),y}function x7(t,n,e){return(e?"":"    ")+t}function s1(t){const n=t.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function v7(t,n,e,i){const s=s1(e),l=s==='"'?"Quote":"Apostrophe",c=e.enter("definition");let h=e.enter("label");const m=e.createTracker(i);let f=m.move("[");return f+=m.move(e.safe(e.associationId(t),{before:f,after:"]",...m.current()})),f+=m.move("]: "),h(),!t.url||/[\0- \u007F]/.test(t.url)?(h=e.enter("destinationLiteral"),f+=m.move("<"),f+=m.move(e.safe(t.url,{before:f,after:">",...m.current()})),f+=m.move(">")):(h=e.enter("destinationRaw"),f+=m.move(e.safe(t.url,{before:f,after:t.title?" ":`
`,...m.current()}))),h(),t.title&&(h=e.enter(`title${l}`),f+=m.move(" "+s),f+=m.move(e.safe(t.title,{before:f,after:s,...m.current()})),f+=m.move(s),h()),c(),f}function b7(t){const n=t.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function op(t){return"&#x"+t.toString(16).toUpperCase()+";"}function px(t,n,e){const i=Wf(t),s=Wf(n);return i===void 0?s===void 0?e==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Yj.peek=w7;function Yj(t,n,e,i){const s=b7(e),l=e.enter("emphasis"),c=e.createTracker(i),h=c.move(s);let m=c.move(e.containerPhrasing(t,{after:s,before:h,...c.current()}));const f=m.charCodeAt(0),y=px(i.before.charCodeAt(i.before.length-1),f,s);y.inside&&(m=op(f)+m.slice(1));const x=m.charCodeAt(m.length-1),S=px(i.after.charCodeAt(0),x,s);S.inside&&(m=m.slice(0,-1)+op(x));const w=c.move(s);return l(),e.attentionEncodeSurroundingInfo={after:S.outside,before:y.outside},h+m+w}function w7(t,n,e){return e.options.emphasis||"*"}function S7(t,n){let e=!1;return r1(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return e=!0,u0}),!!((!t.depth||t.depth<3)&&K0(t)&&(n.options.setext||e))}function N7(t,n,e,i){const s=Math.max(Math.min(6,t.depth||1),1),l=e.createTracker(i);if(S7(t,e)){const y=e.enter("headingSetext"),x=e.enter("phrasing"),S=e.containerPhrasing(t,{...l.current(),before:`
`,after:`
`});return x(),y(),S+`
`+(s===1?"=":"-").repeat(S.length-(Math.max(S.lastIndexOf("\r"),S.lastIndexOf(`
`))+1))}const c="#".repeat(s),h=e.enter("headingAtx"),m=e.enter("phrasing");l.move(c+" ");let f=e.containerPhrasing(t,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(f)&&(f=op(f.charCodeAt(0))+f.slice(1)),f=f?c+" "+f:c,e.options.closeAtx&&(f+=" "+c),m(),h(),f}Wj.peek=C7;function Wj(t){return t.value||""}function C7(){return"<"}Jj.peek=_7;function Jj(t,n,e,i){const s=s1(e),l=s==='"'?"Quote":"Apostrophe",c=e.enter("image");let h=e.enter("label");const m=e.createTracker(i);let f=m.move("![");return f+=m.move(e.safe(t.alt,{before:f,after:"]",...m.current()})),f+=m.move("]("),h(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(h=e.enter("destinationLiteral"),f+=m.move("<"),f+=m.move(e.safe(t.url,{before:f,after:">",...m.current()})),f+=m.move(">")):(h=e.enter("destinationRaw"),f+=m.move(e.safe(t.url,{before:f,after:t.title?" ":")",...m.current()}))),h(),t.title&&(h=e.enter(`title${l}`),f+=m.move(" "+s),f+=m.move(e.safe(t.title,{before:f,after:s,...m.current()})),f+=m.move(s),h()),f+=m.move(")"),c(),f}function _7(){return"!"}Qj.peek=j7;function Qj(t,n,e,i){const s=t.referenceType,l=e.enter("imageReference");let c=e.enter("label");const h=e.createTracker(i);let m=h.move("![");const f=e.safe(t.alt,{before:m,after:"]",...h.current()});m+=h.move(f+"]["),c();const y=e.stack;e.stack=[],c=e.enter("reference");const x=e.safe(e.associationId(t),{before:m,after:"]",...h.current()});return c(),e.stack=y,l(),s==="full"||!f||f!==x?m+=h.move(x+"]"):s==="shortcut"?m=m.slice(0,-1):m+=h.move("]"),m}function j7(){return"!"}Kj.peek=T7;function Kj(t,n,e){let i=t.value||"",s="`",l=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(i);)s+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++l<e.unsafe.length;){const c=e.unsafe[l],h=e.compilePattern(c);let m;if(c.atBreak)for(;m=h.exec(i);){let f=m.index;i.charCodeAt(f)===10&&i.charCodeAt(f-1)===13&&f--,i=i.slice(0,f)+" "+i.slice(m.index+1)}}return s+i+s}function T7(){return"`"}function Xj(t,n){const e=K0(t);return!!(!n.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(e===t.url||"mailto:"+e===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Zj.peek=E7;function Zj(t,n,e,i){const s=s1(e),l=s==='"'?"Quote":"Apostrophe",c=e.createTracker(i);let h,m;if(Xj(t,e)){const y=e.stack;e.stack=[],h=e.enter("autolink");let x=c.move("<");return x+=c.move(e.containerPhrasing(t,{before:x,after:">",...c.current()})),x+=c.move(">"),h(),e.stack=y,x}h=e.enter("link"),m=e.enter("label");let f=c.move("[");return f+=c.move(e.containerPhrasing(t,{before:f,after:"](",...c.current()})),f+=c.move("]("),m(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(m=e.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(e.safe(t.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(m=e.enter("destinationRaw"),f+=c.move(e.safe(t.url,{before:f,after:t.title?" ":")",...c.current()}))),m(),t.title&&(m=e.enter(`title${l}`),f+=c.move(" "+s),f+=c.move(e.safe(t.title,{before:f,after:s,...c.current()})),f+=c.move(s),m()),f+=c.move(")"),h(),f}function E7(t,n,e){return Xj(t,e)?"<":"["}eT.peek=A7;function eT(t,n,e,i){const s=t.referenceType,l=e.enter("linkReference");let c=e.enter("label");const h=e.createTracker(i);let m=h.move("[");const f=e.containerPhrasing(t,{before:m,after:"]",...h.current()});m+=h.move(f+"]["),c();const y=e.stack;e.stack=[],c=e.enter("reference");const x=e.safe(e.associationId(t),{before:m,after:"]",...h.current()});return c(),e.stack=y,l(),s==="full"||!f||f!==x?m+=h.move(x+"]"):s==="shortcut"?m=m.slice(0,-1):m+=h.move("]"),m}function A7(){return"["}function o1(t){const n=t.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function k7(t){const n=o1(t),e=t.options.bulletOther;if(!e)return n==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+e+"`) to be different");return e}function D7(t){const n=t.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function tT(t){const n=t.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function P7(t,n,e,i){const s=e.enter("list"),l=e.bulletCurrent;let c=t.ordered?D7(e):o1(e);const h=t.ordered?c==="."?")":".":k7(e);let m=n&&e.bulletLastUsed?c===e.bulletLastUsed:!1;if(!t.ordered){const y=t.children?t.children[0]:void 0;if((c==="*"||c==="-")&&y&&(!y.children||!y.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(m=!0),tT(e)===c&&y){let x=-1;for(;++x<t.children.length;){const S=t.children[x];if(S&&S.type==="listItem"&&S.children&&S.children[0]&&S.children[0].type==="thematicBreak"){m=!0;break}}}}m&&(c=h),e.bulletCurrent=c;const f=e.containerFlow(t,i);return e.bulletLastUsed=c,e.bulletCurrent=l,s(),f}function R7(t){const n=t.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function M7(t,n,e,i){const s=R7(e);let l=e.bulletCurrent||o1(e);n&&n.type==="list"&&n.ordered&&(l=(typeof n.start=="number"&&n.start>-1?n.start:1)+(e.options.incrementListMarker===!1?0:n.children.indexOf(t))+l);let c=l.length+1;(s==="tab"||s==="mixed"&&(n&&n.type==="list"&&n.spread||t.spread))&&(c=Math.ceil(c/4)*4);const h=e.createTracker(i);h.move(l+" ".repeat(c-l.length)),h.shift(c);const m=e.enter("listItem"),f=e.indentLines(e.containerFlow(t,h.current()),y);return m(),f;function y(x,S,w){return S?(w?"":" ".repeat(c))+x:(w?l:l+" ".repeat(c-l.length))+x}}function I7(t,n,e,i){const s=e.enter("paragraph"),l=e.enter("phrasing"),c=e.containerPhrasing(t,i);return l(),s(),c}const O7=$x(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function L7(t,n,e,i){return(t.children.some(function(c){return O7(c)})?e.containerPhrasing:e.containerFlow).call(e,t,i)}function F7(t){const n=t.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}nT.peek=z7;function nT(t,n,e,i){const s=F7(e),l=e.enter("strong"),c=e.createTracker(i),h=c.move(s+s);let m=c.move(e.containerPhrasing(t,{after:s,before:h,...c.current()}));const f=m.charCodeAt(0),y=px(i.before.charCodeAt(i.before.length-1),f,s);y.inside&&(m=op(f)+m.slice(1));const x=m.charCodeAt(m.length-1),S=px(i.after.charCodeAt(0),x,s);S.inside&&(m=m.slice(0,-1)+op(x));const w=c.move(s+s);return l(),e.attentionEncodeSurroundingInfo={after:S.outside,before:y.outside},h+m+w}function z7(t,n,e){return e.options.strong||"*"}function $7(t,n,e,i){return e.safe(t.value,i)}function U7(t){const n=t.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function B7(t,n,e){const i=(tT(e)+(e.options.ruleSpaces?" ":"")).repeat(U7(e));return e.options.ruleSpaces?i.slice(0,-1):i}const iT={blockquote:d7,break:ON,code:y7,definition:v7,emphasis:Yj,hardBreak:ON,heading:N7,html:Wj,image:Jj,imageReference:Qj,inlineCode:Kj,link:Zj,linkReference:eT,list:P7,listItem:M7,paragraph:I7,root:L7,strong:nT,text:$7,thematicBreak:B7};function q7(){return{enter:{table:V7,tableData:LN,tableHeader:LN,tableRow:G7},exit:{codeText:Y7,table:H7,tableData:Cb,tableHeader:Cb,tableRow:Cb}}}function V7(t){const n=t._align;this.enter({type:"table",align:n.map(function(e){return e==="none"?null:e}),children:[]},t),this.data.inTable=!0}function H7(t){this.exit(t),this.data.inTable=void 0}function G7(t){this.enter({type:"tableRow",children:[]},t)}function Cb(t){this.exit(t)}function LN(t){this.enter({type:"tableCell",children:[]},t)}function Y7(t){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,W7));const e=this.stack[this.stack.length-1];e.type,e.value=n,this.exit(t)}function W7(t,n){return n==="|"?n:t}function J7(t){const n=t||{},e=n.tableCellPadding,i=n.tablePipeAlign,s=n.stringLength,l=e?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:S,table:c,tableCell:m,tableRow:h}};function c(w,j,E,A){return f(y(w,E,A),w.align)}function h(w,j,E,A){const k=x(w,E,A),P=f([k]);return P.slice(0,P.indexOf(`
`))}function m(w,j,E,A){const k=E.enter("tableCell"),P=E.enter("phrasing"),R=E.containerPhrasing(w,{...A,before:l,after:l});return P(),k(),R}function f(w,j){return c7(w,{align:j,alignDelimiters:i,padding:e,stringLength:s})}function y(w,j,E){const A=w.children;let k=-1;const P=[],R=j.enter("table");for(;++k<A.length;)P[k]=x(A[k],j,E);return R(),P}function x(w,j,E){const A=w.children;let k=-1;const P=[],R=j.enter("tableRow");for(;++k<A.length;)P[k]=m(A[k],w,j,E);return R(),P}function S(w,j,E){let A=iT.inlineCode(w,j,E);return E.stack.includes("tableCell")&&(A=A.replace(/\|/g,"\\$&")),A}}function Q7(){return{exit:{taskListCheckValueChecked:FN,taskListCheckValueUnchecked:FN,paragraph:X7}}}function K7(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Z7}}}function FN(t){const n=this.stack[this.stack.length-2];n.type,n.checked=t.type==="taskListCheckValueChecked"}function X7(t){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const e=this.stack[this.stack.length-1];e.type;const i=e.children[0];if(i&&i.type==="text"){const s=n.children;let l=-1,c;for(;++l<s.length;){const h=s[l];if(h.type==="paragraph"){c=h;break}}c===e&&(i.value=i.value.slice(1),i.value.length===0?e.children.shift():e.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,e.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function Z7(t,n,e,i){const s=t.children[0],l=typeof t.checked=="boolean"&&s&&s.type==="paragraph",c="["+(t.checked?"x":" ")+"] ",h=e.createTracker(i);l&&h.move(c);let m=iT.listItem(t,n,e,{...i,...h.current()});return l&&(m=m.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),m;function f(y){return y+c}}function eV(){return[Pq(),Zq(),i7(),q7(),Q7()]}function tV(t){return{extensions:[Rq(),e7(t),r7(),J7(t),K7()]}}const nV={tokenize:lV,partial:!0},rT={tokenize:cV,partial:!0},aT={tokenize:uV,partial:!0},sT={tokenize:dV,partial:!0},iV={tokenize:fV,partial:!0},oT={name:"wwwAutolink",tokenize:sV,previous:cT},lT={name:"protocolAutolink",tokenize:oV,previous:uT},ml={name:"emailAutolink",tokenize:aV,previous:dT},jo={};function rV(){return{text:jo}}let Yu=48;for(;Yu<123;)jo[Yu]=ml,Yu++,Yu===58?Yu=65:Yu===91&&(Yu=97);jo[43]=ml;jo[45]=ml;jo[46]=ml;jo[95]=ml;jo[72]=[ml,lT];jo[104]=[ml,lT];jo[87]=[ml,oT];jo[119]=[ml,oT];function aV(t,n,e){const i=this;let s,l;return c;function c(x){return!m0(x)||!dT.call(i,i.previous)||l1(i.events)?e(x):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),h(x))}function h(x){return m0(x)?(t.consume(x),h):x===64?(t.consume(x),m):e(x)}function m(x){return x===46?t.check(iV,y,f)(x):x===45||x===95||hr(x)?(l=!0,t.consume(x),m):y(x)}function f(x){return t.consume(x),s=!0,m}function y(x){return l&&s&&Er(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),n(x)):e(x)}}function sV(t,n,e){const i=this;return s;function s(c){return c!==87&&c!==119||!cT.call(i,i.previous)||l1(i.events)?e(c):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(nV,t.attempt(rT,t.attempt(aT,l),e),e)(c))}function l(c){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),n(c)}}function oV(t,n,e){const i=this;let s="",l=!1;return c;function c(x){return(x===72||x===104)&&uT.call(i,i.previous)&&!l1(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(x),t.consume(x),h):e(x)}function h(x){if(Er(x)&&s.length<5)return s+=String.fromCodePoint(x),t.consume(x),h;if(x===58){const S=s.toLowerCase();if(S==="http"||S==="https")return t.consume(x),m}return e(x)}function m(x){return x===47?(t.consume(x),l?f:(l=!0,m)):e(x)}function f(x){return x===null||fx(x)||kn(x)||nd(x)||Lx(x)?e(x):t.attempt(rT,t.attempt(aT,y),e)(x)}function y(x){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),n(x)}}function lV(t,n,e){let i=0;return s;function s(c){return(c===87||c===119)&&i<3?(i++,t.consume(c),s):c===46&&i===3?(t.consume(c),l):e(c)}function l(c){return c===null?e(c):n(c)}}function cV(t,n,e){let i,s,l;return c;function c(f){return f===46||f===95?t.check(sT,m,h)(f):f===null||kn(f)||nd(f)||f!==45&&Lx(f)?m(f):(l=!0,t.consume(f),c)}function h(f){return f===95?i=!0:(s=i,i=void 0),t.consume(f),c}function m(f){return s||i||!l?e(f):n(f)}}function uV(t,n){let e=0,i=0;return s;function s(c){return c===40?(e++,t.consume(c),s):c===41&&i<e?l(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?t.check(sT,n,l)(c):c===null||kn(c)||nd(c)?n(c):(t.consume(c),s)}function l(c){return c===41&&i++,t.consume(c),s}}function dV(t,n,e){return i;function i(h){return h===33||h===34||h===39||h===41||h===42||h===44||h===46||h===58||h===59||h===63||h===95||h===126?(t.consume(h),i):h===38?(t.consume(h),l):h===93?(t.consume(h),s):h===60||h===null||kn(h)||nd(h)?n(h):e(h)}function s(h){return h===null||h===40||h===91||kn(h)||nd(h)?n(h):i(h)}function l(h){return Er(h)?c(h):e(h)}function c(h){return h===59?(t.consume(h),i):Er(h)?(t.consume(h),c):e(h)}}function fV(t,n,e){return i;function i(l){return t.consume(l),s}function s(l){return hr(l)?e(l):n(l)}}function cT(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||kn(t)}function uT(t){return!Er(t)}function dT(t){return!(t===47||m0(t))}function m0(t){return t===43||t===45||t===46||t===95||hr(t)}function l1(t){let n=t.length,e=!1;for(;n--;){const i=t[n][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){e=!0;break}if(i._gfmAutolinkLiteralWalkedInto){e=!1;break}}return t.length>0&&!e&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),e}const hV={tokenize:wV,partial:!0};function mV(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:xV,continuation:{tokenize:vV},exit:bV}},text:{91:{name:"gfmFootnoteCall",tokenize:yV},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:pV,resolveTo:gV}}}}function pV(t,n,e){const i=this;let s=i.events.length;const l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let c;for(;s--;){const m=i.events[s][1];if(m.type==="labelImage"){c=m;break}if(m.type==="gfmFootnoteCall"||m.type==="labelLink"||m.type==="label"||m.type==="image"||m.type==="link")break}return h;function h(m){if(!c||!c._balanced)return e(m);const f=Es(i.sliceSerialize({start:c.end,end:i.now()}));return f.codePointAt(0)!==94||!l.includes(f.slice(1))?e(m):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(m),t.exit("gfmFootnoteCallLabelMarker"),n(m))}}function gV(t,n){let e=t.length;for(;e--;)if(t[e][1].type==="labelImage"&&t[e][0]==="enter"){t[e][1];break}t[e+1][1].type="data",t[e+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[e+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[e+3][1].end),end:Object.assign({},t[e+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},h=[t[e+1],t[e+2],["enter",i,n],t[e+3],t[e+4],["enter",s,n],["exit",s,n],["enter",l,n],["enter",c,n],["exit",c,n],["exit",l,n],t[t.length-2],t[t.length-1],["exit",i,n]];return t.splice(e,t.length-e+1,...h),t}function yV(t,n,e){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l=0,c;return h;function h(x){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(x),t.exit("gfmFootnoteCallLabelMarker"),m}function m(x){return x!==94?e(x):(t.enter("gfmFootnoteCallMarker"),t.consume(x),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",f)}function f(x){if(l>999||x===93&&!c||x===null||x===91||kn(x))return e(x);if(x===93){t.exit("chunkString");const S=t.exit("gfmFootnoteCallString");return s.includes(Es(i.sliceSerialize(S)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(x),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),n):e(x)}return kn(x)||(c=!0),l++,t.consume(x),x===92?y:f}function y(x){return x===91||x===92||x===93?(t.consume(x),l++,f):f(x)}}function xV(t,n,e){const i=this,s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l,c=0,h;return m;function m(j){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(j),t.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(j){return j===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(j),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",y):e(j)}function y(j){if(c>999||j===93&&!h||j===null||j===91||kn(j))return e(j);if(j===93){t.exit("chunkString");const E=t.exit("gfmFootnoteDefinitionLabelString");return l=Es(i.sliceSerialize(E)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(j),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),S}return kn(j)||(h=!0),c++,t.consume(j),j===92?x:y}function x(j){return j===91||j===92||j===93?(t.consume(j),c++,y):y(j)}function S(j){return j===58?(t.enter("definitionMarker"),t.consume(j),t.exit("definitionMarker"),s.includes(l)||s.push(l),an(t,w,"gfmFootnoteDefinitionWhitespace")):e(j)}function w(j){return n(j)}}function vV(t,n,e){return t.check(yp,n,t.attempt(hV,n,e))}function bV(t){t.exit("gfmFootnoteDefinition")}function wV(t,n,e){const i=this;return an(t,s,"gfmFootnoteDefinitionIndent",5);function s(l){const c=i.events[i.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?n(l):e(l)}}function SV(t){let e=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:l,resolveAll:s};return e==null&&(e=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function s(c,h){let m=-1;for(;++m<c.length;)if(c[m][0]==="enter"&&c[m][1].type==="strikethroughSequenceTemporary"&&c[m][1]._close){let f=m;for(;f--;)if(c[f][0]==="exit"&&c[f][1].type==="strikethroughSequenceTemporary"&&c[f][1]._open&&c[m][1].end.offset-c[m][1].start.offset===c[f][1].end.offset-c[f][1].start.offset){c[m][1].type="strikethroughSequence",c[f][1].type="strikethroughSequence";const y={type:"strikethrough",start:Object.assign({},c[f][1].start),end:Object.assign({},c[m][1].end)},x={type:"strikethroughText",start:Object.assign({},c[f][1].end),end:Object.assign({},c[m][1].start)},S=[["enter",y,h],["enter",c[f][1],h],["exit",c[f][1],h],["enter",x,h]],w=h.parser.constructs.insideSpan.null;w&&Ca(S,S.length,0,Fx(w,c.slice(f+1,m),h)),Ca(S,S.length,0,[["exit",x,h],["enter",c[m][1],h],["exit",c[m][1],h],["exit",y,h]]),Ca(c,f-1,m-f+3,S),m=f+S.length-2;break}}for(m=-1;++m<c.length;)c[m][1].type==="strikethroughSequenceTemporary"&&(c[m][1].type="data");return c}function l(c,h,m){const f=this.previous,y=this.events;let x=0;return S;function S(j){return f===126&&y[y.length-1][1].type!=="characterEscape"?m(j):(c.enter("strikethroughSequenceTemporary"),w(j))}function w(j){const E=Wf(f);if(j===126)return x>1?m(j):(c.consume(j),x++,w);if(x<2&&!e)return m(j);const A=c.exit("strikethroughSequenceTemporary"),k=Wf(j);return A._open=!k||k===2&&!!E,A._close=!E||E===2&&!!k,h(j)}}}class NV{constructor(){this.map=[]}add(n,e,i){CV(this,n,e,i)}consume(n){if(this.map.sort(function(l,c){return l[0]-c[0]}),this.map.length===0)return;let e=this.map.length;const i=[];for(;e>0;)e-=1,i.push(n.slice(this.map[e][0]+this.map[e][1]),this.map[e][2]),n.length=this.map[e][0];i.push(n.slice()),n.length=0;let s=i.pop();for(;s;){for(const l of s)n.push(l);s=i.pop()}this.map.length=0}}function CV(t,n,e,i){let s=0;if(!(e===0&&i.length===0)){for(;s<t.map.length;){if(t.map[s][0]===n){t.map[s][1]+=e,t.map[s][2].push(...i);return}s+=1}t.map.push([n,e,i])}}function _V(t,n){let e=!1;const i=[];for(;n<t.length;){const s=t[n];if(e){if(s[0]==="enter")s[1].type==="tableContent"&&i.push(t[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[n-1][1].type==="tableDelimiterMarker"){const l=i.length-1;i[l]=i[l]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(e=!0);n+=1}return i}function jV(){return{flow:{null:{name:"table",tokenize:TV,resolveAll:EV}}}}function TV(t,n,e){const i=this;let s=0,l=0,c;return h;function h(M){let B=i.events.length-1;for(;B>-1;){const te=i.events[B][1].type;if(te==="lineEnding"||te==="linePrefix")B--;else break}const ee=B>-1?i.events[B][1].type:null,ie=ee==="tableHead"||ee==="tableRow"?q:m;return ie===q&&i.parser.lazy[i.now().line]?e(M):ie(M)}function m(M){return t.enter("tableHead"),t.enter("tableRow"),f(M)}function f(M){return M===124||(c=!0,l+=1),y(M)}function y(M){return M===null?e(M):vt(M)?l>1?(l=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),w):e(M):Jt(M)?an(t,y,"whitespace")(M):(l+=1,c&&(c=!1,s+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),c=!0,y):(t.enter("data"),x(M)))}function x(M){return M===null||M===124||kn(M)?(t.exit("data"),y(M)):(t.consume(M),M===92?S:x)}function S(M){return M===92||M===124?(t.consume(M),x):x(M)}function w(M){return i.interrupt=!1,i.parser.lazy[i.now().line]?e(M):(t.enter("tableDelimiterRow"),c=!1,Jt(M)?an(t,j,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):j(M))}function j(M){return M===45||M===58?A(M):M===124?(c=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),E):F(M)}function E(M){return Jt(M)?an(t,A,"whitespace")(M):A(M)}function A(M){return M===58?(l+=1,c=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),k):M===45?(l+=1,k(M)):M===null||vt(M)?Y(M):F(M)}function k(M){return M===45?(t.enter("tableDelimiterFiller"),P(M)):F(M)}function P(M){return M===45?(t.consume(M),P):M===58?(c=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),R):(t.exit("tableDelimiterFiller"),R(M))}function R(M){return Jt(M)?an(t,Y,"whitespace")(M):Y(M)}function Y(M){return M===124?j(M):M===null||vt(M)?!c||s!==l?F(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),n(M)):F(M)}function F(M){return e(M)}function q(M){return t.enter("tableRow"),z(M)}function z(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),z):M===null||vt(M)?(t.exit("tableRow"),n(M)):Jt(M)?an(t,z,"whitespace")(M):(t.enter("data"),L(M))}function L(M){return M===null||M===124||kn(M)?(t.exit("data"),z(M)):(t.consume(M),M===92?V:L)}function V(M){return M===92||M===124?(t.consume(M),L):L(M)}}function EV(t,n){let e=-1,i=!0,s=0,l=[0,0,0,0],c=[0,0,0,0],h=!1,m=0,f,y,x;const S=new NV;for(;++e<t.length;){const w=t[e],j=w[1];w[0]==="enter"?j.type==="tableHead"?(h=!1,m!==0&&(zN(S,n,m,f,y),y=void 0,m=0),f={type:"table",start:Object.assign({},j.start),end:Object.assign({},j.end)},S.add(e,0,[["enter",f,n]])):j.type==="tableRow"||j.type==="tableDelimiterRow"?(i=!0,x=void 0,l=[0,0,0,0],c=[0,e+1,0,0],h&&(h=!1,y={type:"tableBody",start:Object.assign({},j.start),end:Object.assign({},j.end)},S.add(e,0,[["enter",y,n]])),s=j.type==="tableDelimiterRow"?2:y?3:1):s&&(j.type==="data"||j.type==="tableDelimiterMarker"||j.type==="tableDelimiterFiller")?(i=!1,c[2]===0&&(l[1]!==0&&(c[0]=c[1],x=Ay(S,n,l,s,void 0,x),l=[0,0,0,0]),c[2]=e)):j.type==="tableCellDivider"&&(i?i=!1:(l[1]!==0&&(c[0]=c[1],x=Ay(S,n,l,s,void 0,x)),l=c,c=[l[1],e,0,0])):j.type==="tableHead"?(h=!0,m=e):j.type==="tableRow"||j.type==="tableDelimiterRow"?(m=e,l[1]!==0?(c[0]=c[1],x=Ay(S,n,l,s,e,x)):c[1]!==0&&(x=Ay(S,n,c,s,e,x)),s=0):s&&(j.type==="data"||j.type==="tableDelimiterMarker"||j.type==="tableDelimiterFiller")&&(c[3]=e)}for(m!==0&&zN(S,n,m,f,y),S.consume(n.events),e=-1;++e<n.events.length;){const w=n.events[e];w[0]==="enter"&&w[1].type==="table"&&(w[1]._align=_V(n.events,e))}return t}function Ay(t,n,e,i,s,l){const c=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",h="tableContent";e[0]!==0&&(l.end=Object.assign({},zf(n.events,e[0])),t.add(e[0],0,[["exit",l,n]]));const m=zf(n.events,e[1]);if(l={type:c,start:Object.assign({},m),end:Object.assign({},m)},t.add(e[1],0,[["enter",l,n]]),e[2]!==0){const f=zf(n.events,e[2]),y=zf(n.events,e[3]),x={type:h,start:Object.assign({},f),end:Object.assign({},y)};if(t.add(e[2],0,[["enter",x,n]]),i!==2){const S=n.events[e[2]],w=n.events[e[3]];if(S[1].end=Object.assign({},w[1].end),S[1].type="chunkText",S[1].contentType="text",e[3]>e[2]+1){const j=e[2]+1,E=e[3]-e[2]-1;t.add(j,E,[])}}t.add(e[3]+1,0,[["exit",x,n]])}return s!==void 0&&(l.end=Object.assign({},zf(n.events,s)),t.add(s,0,[["exit",l,n]]),l=void 0),l}function zN(t,n,e,i,s){const l=[],c=zf(n.events,e);s&&(s.end=Object.assign({},c),l.push(["exit",s,n])),i.end=Object.assign({},c),l.push(["exit",i,n]),t.add(e+1,0,l)}function zf(t,n){const e=t[n],i=e[0]==="enter"?"start":"end";return e[1][i]}const AV={name:"tasklistCheck",tokenize:DV};function kV(){return{text:{91:AV}}}function DV(t,n,e){const i=this;return s;function s(m){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?e(m):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(m),t.exit("taskListCheckMarker"),l)}function l(m){return kn(m)?(t.enter("taskListCheckValueUnchecked"),t.consume(m),t.exit("taskListCheckValueUnchecked"),c):m===88||m===120?(t.enter("taskListCheckValueChecked"),t.consume(m),t.exit("taskListCheckValueChecked"),c):e(m)}function c(m){return m===93?(t.enter("taskListCheckMarker"),t.consume(m),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),h):e(m)}function h(m){return vt(m)?n(m):Jt(m)?t.check({tokenize:PV},n,e)(m):e(m)}}function PV(t,n,e){return an(t,i,"whitespace");function i(s){return s===null?e(s):n(s)}}function RV(t){return Sj([rV(),mV(),SV(t),jV(),kV()])}const MV={};function Nc(t){const n=this,e=t||MV,i=n.data(),s=i.micromarkExtensions||(i.micromarkExtensions=[]),l=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),c=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);s.push(RV(e)),l.push(eV()),c.push(tV(e))}const ky=t=>{if(!t)return"";let n=t.toLowerCase();return n=n.replace(/\b(mg|g|ml|iu|unit|tabs|tablet|tablets|capsule|capsules|injection|injections|syrup|solution|cream|ointment|lotion|spray|drops|patch|suppository|vial|ampoule|bottle|pack|kit)\b/g,""),n=n.replace(/\b(test|panel|profile|assay|screen|analysis|level|count|culture)\b/g,""),n=n.replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim(),n},Dy=(t,n)=>{if(!t||!n||n.length===0)return;const e=ky(t);let i=n.find(c=>ky(c.name)===e);if(i)return i;let s=n.find(c=>ky(c.name).includes(e));if(s)return s;let l=n.find(c=>e.includes(ky(c.name)));if(l)return l},IV=t=>{if(!t)return"Unknown Date";try{return new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}catch{return"Invalid Date"}},OV=t=>{switch(t){case"pending":return{text:"Billing Pending",className:"status-badge status-pending"};case"billed":return{text:"Sample Pending",className:"status-badge status-billed"};case"collected":return{text:"Sample Collected",className:"status-badge status-collected"};case"processing":return{text:"Processing",className:"status-badge status-processing"};case"report_ready":return{text:"Report Ready",className:"status-badge status-report_ready"};case"reported":return{text:"Reported",className:"status-badge status-reported"};case"completed":return{text:"Completed",className:"status-badge status-completed"};case"cancelled":return{text:"Cancelled",className:"status-badge status-cancelled"};default:return{text:t,className:"status-badge"}}},_b=({title:t,items:n,renderItemContent:e,headerAction:i,isLoading:s,loadingText:l,noDataText:c,onDeleteItem:h,onEditLabOrder:m,onSaveLabOrder:f,onCancelEditLabOrder:y,onLabOrderTestChange:x,onLabOrderStatusChange:S,onEditPharmacyOrder:w,onPrintUnavailablePrescription:j,onBillLabOrder:E,onUpdateLabOrderStatus:A,onEnterLabReport:k,onViewLabReport:P,labInventory:R,isSavingLabOrder:Y,expandedLabReports:F,toggleLabReport:q})=>{const z=_.useMemo(()=>{const V={};n.forEach(B=>{if(isNaN(B.date.getTime())){V["Unknown Date"]||(V["Unknown Date"]=[]),V["Unknown Date"].push(B);return}const ee=IV(B.originalDateString);V[ee]||(V[ee]=[]),V[ee].push(B)});const M=Object.keys(V);return M.sort((B,ee)=>{if(B==="Unknown Date")return 1;if(ee==="Unknown Date")return-1;try{const ie=new Date(B.split(" ").reverse().join(" ")),te=new Date(ee.split(" ").reverse().join(" "));if(!isNaN(ie.getTime())&&!isNaN(te.getTime()))return te.getTime()-ie.getTime()}catch{}return ee.localeCompare(B)}),M.map(B=>({date:B,items:V[B]}))},[n]),L=["pending","billed","collected","processing","report_ready","completed","cancelled","reported"];return r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h4",{className:"ai-context-section-title mb-2 pb-1",children:t}),i]}),s&&r.jsx("p",{className:"ai-context-text italic",children:l}),!s&&n.length===0&&r.jsx("p",{className:"ai-context-text italic",children:c}),!s&&n.length>0&&r.jsx("div",{className:"space-y-3",children:z.map(({date:V,items:M})=>r.jsxs("div",{children:[r.jsx("h5",{className:"grouped-history-date",children:V}),r.jsx("div",{className:"space-y-1 grouped-history-item-container",children:M.map((B,ee)=>r.jsxs("div",{className:"grouped-history-item ai-context-item flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("div",{className:"flex-grow mr-2 ai-context-text",children:e(B,ee,F,q)}),r.jsxs("div",{className:"flex items-center space-x-1",children:[B.type==="Lab Order"&&!B.data.isEditing&&m&&r.jsx("button",{onClick:()=>m(B.data.id),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:"Edit this lab order",disabled:Y,children:r.jsx(Ym,{size:14})}),B.type==="Lab Order"&&B.data.isEditing&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>f&&f(B.data.id,B.data.editedTests,B.data.editedStatus),className:"text-green-600 hover:text-green-800 p-1 rounded hover:bg-green-100 focus:outline-none focus:ring-1 focus:ring-green-400",title:"Save lab order changes",disabled:Y,children:r.jsx(id,{size:14})}),r.jsx("button",{onClick:()=>y&&y(B.data.id),className:"text-gray-600 hover:text-gray-800 p-1 rounded hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-gray-400",title:"Cancel editing",disabled:Y,children:r.jsx(Co,{size:14})})]}),B.type==="Lab Order"&&r.jsxs("div",{className:"lab-table-actions",children:[B.data.status==="pending"&&E&&r.jsx("button",{onClick:()=>E(B.data),className:"lab-action-button btn-bill",title:"Generate Bill",children:"Bill"}),B.data.status==="billed"&&A&&r.jsx("button",{onClick:()=>A(B.data.id,"collected"),className:"lab-action-button btn-collect",title:"Collect Sample",children:"Collect"}),B.data.status==="collected"&&A&&r.jsx("button",{onClick:()=>A(B.data.id,"processing"),className:"lab-action-button btn-process",title:"Mark Processing",children:"Process"}),(B.data.status==="processing"||B.data.status==="report_ready"||B.data.status==="reported")&&k&&r.jsx("button",{onClick:()=>k(B.data),className:"lab-action-button btn-enter-report",title:"Enter Report",children:"Enter Report"}),(B.data.status==="report_ready"||B.data.status==="reported")&&A&&r.jsx("button",{onClick:()=>A(B.data.id,"completed"),className:"lab-action-button btn-complete",title:"Mark Completed",children:"Complete"}),(B.data.status==="completed"||B.data.status==="report_ready"||B.data.status==="reported")&&P&&r.jsx("button",{onClick:()=>P(B.data),className:"lab-action-button btn-view-report",title:"View Report",children:"View"})]}),B.type==="Pharmacy Order"&&B.data.status==="pending"&&w&&r.jsx("button",{onClick:()=>w(B.data.id),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:"Edit this pharmacy order",disabled:Y,children:r.jsx(Ym,{size:14})}),B.type==="Pharmacy Order"&&B.data.prescriptionForUnavailableDrugs&&j&&r.jsx("button",{onClick:()=>j(B.data.prescriptionForUnavailableDrugs,`Prescription for Order ${B.data.id}`),className:"text-purple-600 hover:text-purple-800 p-1 rounded hover:bg-purple-100 focus:outline-none focus:ring-1 focus:ring-purple-400",title:"Print Prescription for Unavailable Drugs",disabled:Y,children:r.jsx(Ky,{size:14})}),B.type==="Pharmacy Order"&&B.data.status==="pending"&&h&&r.jsx("button",{onClick:()=>h({type:B.type,data:B.data}),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:"Delete this pending pharmacy order",disabled:Y,children:r.jsx(Co,{size:14})}),h&&["Complaint","Lab Order","Lab Report"].includes(B.type)&&r.jsx("button",{onClick:()=>h({type:B.type,data:B.data}),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:`Delete this ${B.type.toLowerCase()}`,disabled:Y,children:r.jsx(Co,{size:14})})]})]}),B.type==="Lab Order"&&B.data.isEditing&&r.jsxs("div",{className:"lab-order-edit-form mt-2 w-full",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status:"}),r.jsx("select",{value:B.data.editedStatus||B.data.status,onChange:ie=>S&&S(B.data.id,ie.target.value),className:"form-select block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:Y,children:L.map(ie=>r.jsx("option",{value:ie,children:ie.replace(/_/g," ")},ie))})]}),r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tests:"}),B.data.editedTests.map((ie,te)=>r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsxs("select",{value:ie.id,onChange:se=>{const X=R.find(K=>String(K.id)===se.target.value);X&&(x&&x(B.data.id,te,"id",X.id),x&&x(B.data.id,te,"name",X.name),x&&x(B.data.id,te,"price",X.price))},className:"form-select block w-full text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:Y,children:[r.jsx("option",{value:"",children:"Select Test"}),R.map(se=>r.jsxs("option",{value:se.id,children:[se.name," (₹",se.price,")"]},se.id))]}),r.jsx("button",{onClick:()=>{const se=B.data.editedTests.filter((X,K)=>K!==te);x&&x(B.data.id,-1,"remove",se)},className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-100 focus:outline-none focus:ring-1 focus:ring-red-400",title:"Remove test",disabled:Y,children:r.jsx(Co,{size:14})})]},te)),r.jsx("button",{onClick:()=>{x&&x(B.data.id,-1,"add",{id:"",name:"",price:0})},className:"button-secondary mt-2 text-xs",disabled:Y,children:"Add Test"})]})]},`${B.type}-${B.originalDateString}-${ee}`))})]},V))})]})},LV=`You are an expert OPD (Outpatient Department) medical assistant for a Doctor in a clinic in India. You will receive all the medical data of the patient including complaints (history), labs, pharmacy orders, etc., along with their date and time. Your primary goal is to assist the doctor and analyze patient chief complaints (Co), provide a structured clinical assessment including lab test suggestions (Lx), differential diagnoses (Dx), and a treatment plan (Tx). You have access to tools (actions) to order lab tests and pharmacy items, and update patient details.



**1. Definitions:**
   - Co: Chief complaints
   - Pt: Patient (assume living in India)
   - Lx: Laboratory tests
   - Dx: Differential Diagnosis
   - Tx: Treatment Plan

**2. Workflow:**
   - Analyze Co, generate Lx, Dx, and Tx sections as described below.
   - **Prioritization for Orders:** Always prioritize using \`edit_pharmacy_order\` or \`edit_lab_order\` if there are existing pending orders for the patient, before considering \`create_pharmacy_order\` or \`create_lab_order\`.
   - using edit_lab_order edits the lab order with the given serial numnber use to add new tests to the existing order or remove the tests from existing order, marking the status affects all tests in the order not only the test,always use this tool if there are pending lab orders instead of creating new orders.
   - using edit_pharmacy_order edits the pharmacy order with the given serial numnber to add new items to the existing order, update existing items, or remove items (either by \`items_to_remove\` or by setting \`quantity\` to 0). Always use this tool if there are pending pharmacy orders instead of creating new orders.
   - If your Lx section suggests tests from the inventory, use the \`create_lab_order\` action, but only for tests that are both clinically required and have not already been ordered or are still pending. Skip tests that are already ordered and in pending.
   - If your Tx section prescribes medications, use the \`create_pharmacy_order\` action — but only for medications that are clinically required and have not already been prescribed or are still pending. Skip medications that are already dispensed or already ordered.
   - If your Tx section prescribes medications that are *not* available in the inventory, use the \`prescription_for_unavailable_drugs\` parameter within the \`create_pharmacy_order\` action to specify the prescription details for these unavailable drugs.
   - When ordering pharmacy items, if the drug name in the inventory includes a pack size (e.g., 'Azithromycin 500mg 10 tablets pack'), set the \`quantity\` in the \`create_pharmacy_order\` action to '1(representing one pack) or Number of packs'. If the drug name does not specify a pack size (e.g., 'Azithromycin 500mg tablet'), set the \`quantity\` to '7' or the total number of tablets required.
   - **Patient Details Management:** Always store or update patient name, age, sex, and phone number using the \`update_patient_details\` action. If patient name, age, or sex is received as 'New Patient - Direct Entry', 'N/A', or blank, treat it as missing data; if the user input provides anything resembling a name, age, or sex (e.g., shiva 25m, robin 50m, priya 19f), update them using the \`update_patient_details\` action. If details are missing, you can ask the user for the missing details using the \`ask_followup_question\` action.
   - Always update new complaints of the patient using the \`add_complaint_history\` action.
   - If you generate a concise summary of the patient's current situation based on the interaction and history, use the \`update_case_summary\` action to save it.
   - Remember, when you use \`update_case_summary\`, the previous case summary will be replaced by the new one, so you can use it like a short-term memory to store other stuff that **keeps changing**, like the current treatment plan, plan of action, active problems, or current vitals, etc.
   - When you use \`add_complaint_history\`, it will add the complaint to the previous ones. You will be given all the previous complaints back in every query, so you can use it to store other long-term facts that do **not change**, like the history of a chronic illness, surgical history, allergies, or social history, etc.
   - while placing or editing a pharmacy order make sure to set the quantity right.
   - Use the \`update_clinic_ai_memory\` action to store or update **various types of clinic-wide persistent information in a concise way**. This can include 'summaries of common patient encounters'+'summeries of previous **Clinic-wide AI Memory**'(e.g., 'Patient X, 50m, chronic gastritis, last visit YYYY-MM-DD, prescribed Z, follow-up in N days'+'**Clinic-wide AI Memory** summary'), notes on local health trends, common diagnostic patterns observed in the clinic, specific operational protocols. This memory is shared across all interactions for the clinic and helps tailor responses to its specific context over time.
**3.**Multiple Actions:** You can perform multiple actions (like ordering labs AND meds, adding complaints, updating patient information, and asking a follow-up question) in a single response by including multiple action objects within the main JSON array.


**4. Chief Complaints (Co):**
   - Analyze the provided chief complaints.
   - Present them in a table with two columns: 'Relevant Complaint (Score 8-10)' and 'Irrelevant Complaint (Score 0-7)', based on clinical relevance.

**5. Lab Tests (Lx):**
   - Suggest the most probable basic lab tests based on the clinical picture, ordered by likelihood.
   - If a basic test is positive/abnormal, suggest relevant advanced tests.
   - **Inventory Check:** Compare suggested tests against the provided inventory list.
   - **Table 1: Available Lab Tests:** Present tests *available* in the inventory in a table with columns: '**Clinical Importance (High/Medium/Low)**', 'Lab Test'. If suggesting tests from this table, prepare to use the \`create_lab_order\` tool in your response.
   - **Table 2: Unavailable Lab Tests:** Present tests *not available* in the inventory in a separate table with columns: '**Clinical Importance (High/Medium/Low)**', 'Unavailable Basic Test'. Clearly state these are not orderable via the tool (generate Table 2 only when required tests are unavailable).

**6. Differential Diagnosis (Dx):**
   - List potential differential diagnoses.
   - Provide a confidence score (0-10) for each.
   - Present in a table with columns: 'Differential Diagnosis' and 'Confidence Score (0-10)'.

**7. Treatment Plan (Tx):**
   - Create a structured treatment plan including ideal medications based on the diagnosis.
   - **Inventory Check:** Compare prescribed medications against the provided inventory list.
   - **Table 1: Available Medications:** Present medications *available* in the inventory in a table with columns: 'Time Frame' (from and to dates), 'Treatment Goal', 'Intervention', 'Medication Type', 'Drug Form', 'Drug Name', 'Regimen (Dose, Freq)', 'Duration'. Before using the \`create_pharmacy_order\` tool, check if an order for the same drug has already been placed for this patient today. If an order already exists for today, do *not* create a duplicate order. If no order exists for today, prepare to use the \`create_pharmacy_order\` tool in your response.
   - **Table 2: Unavailable Medications:** Present medications *not available* in the inventory in a separate table with columns: 'Unavailable Drug Name', 'Ideal Regimen', 'Reasoning/Indication', '**Clinical Importance (High/Medium/Low)**', 'Suggested Available Substitute (from inventory, if possible)'. Clearly state these are not orderable via the tool (generate Table 2 only when required medications are unavailable in the inventory).

**8. Tools / Actions:**
   When you need to perform actions like ordering tests/meds, updating patient info, or adding history, use the following JSON array format. The response should ONLY contain this JSON array, nothing else.

   ****STRICT JSON****>>>>>>\`\`\`json
[
  { "action": "create_pharmacy_order", "items": [ { "name": "Drug Name", "tabletsPerDay": number | null, "numberOfDays": number | null, "quantity": number, "directions_to_use": "string | null" } ], "prescription_for_unavailable_drugs": "string | null" },
  { "action": "edit_pharmacy_order", "serialNumber": number, "items": [ { "name": "Drug Name", "tabletsPerDay": number | null, "numberOfDays": number | null, "quantity": number, "directions_to_use": "string | null" } ], "items_to_remove": [ { "drug_id": number | null, "name": "Drug Name" } ], "status": "pending" | "billed" | "dispensed" | "cancelled", "prescription_for_unavailable_drugs": "string | null" },
  { "action": "create_lab_order", "tests": [ { "name": "Test Name" } ] },
  { "action": "edit_lab_order", "serialNumber": number, "tests": [ { "name": "Test Name" } ], "items_to_remove": [ { "id": number | string | null, "name": "Test Name" } ], "status": "pending" | "billed" | "collected" | "processing" | "report_ready" | "completed" | "cancelled" | "reported" },
  { "action": "add_complaint_history", "complaint": "Specific past complaint text..." },
  { "action": "update_patient_details", "name": "New Name (optional)", "age": number (optional), "gender": "M" | "F" | "O" | null (optional), "phone_number": "string (optional)" },
  { "action": "update_case_summary", "summary": "Concise summary text..." },
  { "action": "update_clinic_ai_memory", "memory_content": "New clinic-wide AI memory content..." }
]
\`\`\`

   - **Multiple Actions in One Response:** You can include multiple action objects within this single JSON array if several actions are required based on your analysis (e.g., adding history AND ordering labs).
   - **Prioritization Within the Array:** If including multiple actions, order them within the array according to this priority:
     1. \`add_complaint_history\`
     2. \`update_patient_details\`
     3. \`update_case_summary\`
     4. \`update_clinic_ai_memory\`
     5. \`create_lab_order\`
     6. \`edit_lab_order\`
     7. \`create_pharmacy_order\`
     8. \`edit_pharmacy_order\`
   - **Example (Multiple Actions):**
     \`\`\`json
     [
       { "action": "add_complaint_history", "complaint": "Patient also reports mild fever since yesterday." },
       { "action": "create_lab_order", "tests": [ { "name": "CBC" } ] }
     ]
     \`\`\`

   - **\`ask_followup_question\`**: Use this *separate* tool format (a single JSON object, NOT inside the array) only when you need clarification or missing information that prevents you from completing the assessment or required actions.
     \`\`\`json
     {
       "action": "ask_followup_question",
       "question": "Your clear, specific question here.",
       "options": ["Optional Answer 1", "Optional Answer 2"] // Optional: Provide 2-5 choices
     }
     \`\`\`
     *Description:* Ask the user a question to gather additional information needed to complete the task. This tool should be used when you encounter ambiguities, need clarification, or require more details to proceed effectively. It allows for interactive problem-solving by enabling direct communication with the user. Use this tool judiciously to maintain a balance between gathering necessary information and avoiding excessive back-and-forth.
     *Parameters:*
       - question: (required) The question to ask the user. This should be a clear, specific question that addresses the information you need.
       - options: (optional) An array of 2-5 options for the user to choose from. Each option should be a string describing a possible answer. You may not always need to provide options, but it may be helpful in many cases where it can save the user from having to type out a response manually.


**Important:**
- Ensure all tables are clearly formatted using Markdown.
- Strictly adhere to the inventory constraints for labs and medications when deciding whether to use \`create_lab_order\` or \`create_pharmacy_order\`.
- When using actions, provide ONLY the JSON array (or the single JSON object for \`ask_followup_question\`) as the *very last* part of your response, after all other content including tables. Do not include any other text after the JSON.

**Plan Mode:**
When the user asks a question about a patient's condition or general medical topics (not entering new medical data), respond in PLAN MODE. In this mode, focus on answering the user's inquiry, clarifying their request, brainstorming ideas, or architecting a solution (like exploring treatment options). Ask clarifying questions if needed. Present detailed plans or explanations **using clear table formats and markdown (like bolding) for easy readability**. Engage in back-and-back discussion to finalize details. Do not use action tools (\`create_lab_order\`, \`create_pharmacy_order\`, \`add_complaint_history\`, \`update_patient_details\`) while in PLAN MODE).`,$N="AIzaSyBEt7v-LxBxAKwpTCtkI-3IshYxdnEqbes",FV="gemini-2.5-flash";async function zV(){const t=hC();if(!t)return console.warn("No auth token found, using default Gemini API key."),$N;try{const e=(await Wn.get("/api/clinics/gemini-api-key",{headers:{Authorization:`Bearer ${t}`}})).data.geminiApiKey;if(e)return e}catch(n){console.error("Failed to fetch clinic-specific Gemini API key:",n)}return console.warn("Clinic-specific Gemini API key not found or failed to fetch, using default."),$N}let jb=null;async function $V(){if(!jb){const t=await zV();jb=new T_({apiKey:t})}return jb}async function UV(t,n){const{query:e,currentDateTime:i,patientName:s,patientAge:l,patientGender:c,case_summary:h,case_summary_last_updated:m,clinic_ai_memory:f,clinic_ai_memory_last_updated:y,clinic_wide_system_prompt:x,labHistory:S,pharmacyOrders:w,pastComplaints:j,pharmacyInventory:E,labInventory:A}=t;let k=`Patient Complaint: ${e}`;if(h&&(k+=`

--- Case Summary (Provided by Doctor) ---
${h}`,m))try{const M=new Date(m).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`
(Last Updated: ${M})`}catch{console.warn(`Could not format case_summary_last_updated: ${m}`),k+=`
(Last Updated: ${m})`}if(s&&(k+=`

Patient Name: ${s}`),l!=null&&(k+=`
Patient Age: ${l}`),c&&(k+=`
Patient Gender: ${c}`),i)try{const M=new Date(i).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`

Current Interaction Time: ${M}`}catch{console.warn(`Could not format currentDateTime: ${i}`),k+=`

Current Interaction Time: ${i}`}if(f&&(k+=`

--- Clinic-wide AI Memory/Context ---
${f}`,y))try{const M=new Date(y).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});k+=`
(Last Updated: ${M})`}catch{console.warn(`Could not format clinic_ai_memory_last_updated: ${y}`),k+=`
(Last Updated: ${y})`}let P="";S&&Array.isArray(S)&&S.length>0&&(P=`

--- Lab History (Orders & Reports) ---
`,S.forEach(M=>{let B="Unknown Date";try{B=new Date(M.orderDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab order: ${M.orderDate}`)}if(P+=`
Order #${M.serialNumber} Date: ${B} (Status: ${M.status})
`,P+=`Tests: ${M.tests.map(ee=>ee.name).join(", ")}
`,M.report){let ee="Unknown Date";try{ee=new Date(M.report.reportDate).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date for lab report: ${M.report.reportDate}`)}P+=`  -> Report Date: ${ee}
`,M.report.tests&&Array.isArray(M.report.tests)?(P+=`     Findings:
`,M.report.tests.forEach(ie=>{P+=`       - Test: ${ie.testName}
`,ie.parameters&&Array.isArray(ie.parameters)&&ie.parameters.forEach(te=>{P+=`         - ${te.name}: ${te.value} (Normal: ${te.normal_range})
`})})):(P+=`     Findings: ${M.report.reportContent||"N/A"}
`,M.report.error&&(P+=`     Note: ${M.report.error}
`))}P+=`---
`}),k+=P);let R="";w&&Array.isArray(w)&&w.length>0&&(R=`

--- Recent Pharmacy Orders ---
`,w.forEach(M=>{let B="Unknown Date/Time";try{B=new Date(M.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for pharmacy order: ${M.date}`)}R+=`
Order #${M.serialNumber} Date/Time: ${B} (Status: ${M.status})
`,R+=`Prescribed By: ${M.prescribedBy||"N/A"}
`,M.dispensedBy&&(R+=`Dispensed By: ${M.dispensedBy}
`),R+=`Medications:
`,M.medications.forEach(ee=>{R+=`  - ${ee.name} (Qty: ${ee.quantity}`,ee.tabletsPerDay&&(R+=`, ${ee.tabletsPerDay}/day`),ee.numberOfDays&&(R+=` for ${ee.numberOfDays} days`),R+=`)
`}),M.prescriptionForUnavailableDrugs&&(R+=`  Prescription for Unavailable Drugs: ${M.prescriptionForUnavailableDrugs}
`),R+=`---
`}),k+=R);let Y="";j&&Array.isArray(j)&&j.length>0&&(Y=`

--- Past Complaints History ---
`,j.forEach(M=>{let B="Unknown Date/Time";try{B=new Date(M.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{console.warn(`Could not format date/time for past complaint: ${M.createdAt}`)}Y+=`
Date/Time: ${B}
Complaint: ${M.complaint||"N/A"}
---
`}),k+=Y);let F="";E&&Array.isArray(E)&&E.length>0&&(F=`

--- Current Pharmacy Inventory (Stock Levels) ---
`,E.forEach(M=>{F+=`- ${M.name}: ${M.quantity_in_stock??"N/A"}
`}),k+=F);let q="";A&&Array.isArray(A)&&A.length>0&&(q=`

--- Available Lab Tests ---
`,A.forEach(M=>{q+=`- ${M.name} (Price: ${M.price??"N/A"})
`}),k+=q);const z=[{text:LV}];x&&x.trim()!==""&&z.push({text:`--- Additional Clinic-Specific Instructions ---
${x}`});const L=[{text:k}];if(n){const M=new FileReader,B=await new Promise((ee,ie)=>{M.onloadend=()=>{typeof M.result=="string"?ee(M.result.split(",")[1]):ie(new Error("Failed to read image file as base64."))},M.onerror=ie,M.readAsDataURL(n)});L.push({inlineData:{mimeType:n.type,data:B}})}const V=[];z.length>0&&V.push({role:"user",parts:z}),V.push({role:"user",parts:L});try{const M={model:FV,contents:V,generationConfig:{temperature:.7,maxOutputTokens:1024,responseMimeType:"text/plain"}},ee=await(await $V()).models.generateContentStream(M);let ie="";for await(const te of ee)if(te&&typeof te.text=="function"){const se=te.text;se&&(ie+=se)}else te&&te.candidates&&te.candidates[0]&&te.candidates[0].content&&te.candidates[0].content.parts&&te.candidates[0].content.parts[0]&&te.candidates[0].content.parts[0].text&&(ie+=te.candidates[0].content.parts[0].text);if(ie&&ie.trim()!=="")return ie.trim();throw console.error("Empty or invalid response received from Gemini API stream."),new Error("Failed to get suggestion from AI (Gemini). Empty or invalid stream response.")}catch(M){console.error("Error calling Gemini API:",M);let B="Failed to get suggestion from Gemini.";throw M.message&&(B=`Error processing Gemini request: ${M.message}`),new Error(B)}}const BV=()=>{var cs,ua;const{recordId:t}=Ar(),n=Tt(),e=Kr(),[i,s]=_.useState(""),[l,c]=_.useState([]),[h,m]=_.useState(null),[f,y]=_.useState(null),[x,S]=_.useState(void 0),[w,j]=_.useState(void 0),[E,A]=_.useState(null),[k,P]=_.useState(!1),[R,Y]=_.useState(""),[F,q]=_.useState(!1),[z,L]=_.useState(null),[V,M]=_.useState(null),[B,ee]=_.useState(!1),[ie,te]=_.useState(!1),[se,X]=_.useState(null),[K,re]=_.useState(""),[ve,I]=_.useState(""),[de,ae]=_.useState(null),[H,ne]=_.useState(!1),[me,ue]=_.useState(!1),[je,ge]=_.useState(null),[Ge,Te]=_.useState(!1),[Ne,Be]=_.useState(null),[Qe,$e]=_.useState(window.innerHeight),[ht,Cn]=_.useState([]),[tt,li]=_.useState(!1),[Pi,ei]=_.useState(null),[tn,vi]=_.useState([]),[zn,Hi]=_.useState([]),[Qn,Ee]=_.useState(!1),[Le,nt]=_.useState(null),rt=_.useRef(null),zt=_.useRef(null),xn=_.useRef(!1),ci=_.useRef(null),Ie=_.useRef(null),[Je,Ve]=_.useState(33.33),[lt,Dt]=_.useState(!1),nn=_.useRef(null),_a=_.useRef(null),ja=150,[Si,Zr]=_.useState([]),[ea,ad]=_.useState([]),[Ta,pl]=_.useState(!1),[To,gl]=_.useState(null),[ah,gr]=_.useState(!1),[Dn,Jn]=_.useState(null),[Ea,yl]=_.useState(!1),[Eo,Is]=_.useState(null),[sd,Os]=_.useState(!1),[Ao,Aa]=_.useState(null),[Ls,es]=_.useState(!1),[ka,$n]=_.useState(null),[od,Mc]=_.useState(!1),[ta,Da]=_.useState(null),[Pa,na]=_.useState([]),[ia,ld]=_.useState(!1),[ko,Do]=_.useState(null),[Ni,ts]=_.useState(!1),[xl,Ra]=_.useState(!1),[vl,bl]=_.useState(null),[Fs,Ic]=_.useState({}),[Ci,wl]=_.useState(!1),[Sl,Po]=_.useState(!1),[Nl,Ma]=_.useState(!1),[Oc,Ri]=_.useState(!1),[ns,zs]=_.useState(!1),Ia=_.useMemo(()=>(f==null?void 0:f.admission_date)&&!(f!=null&&f.discharge_date),[f]),[is,$s]=_.useState(!1),[Us,kr]=_.useState(""),[Oa,Ro]=_.useState(void 0),[Mo,Io]=_.useState(void 0),[Cl,_l]=_.useState(void 0),[Gi,Bs]=_.useState(!1),[jl,Yi]=_.useState(null),[Dr,Lc]=_.useState(!1),qs=_.useRef(null),[Fc,rs]=_.useState(null),[Wi,Vs]=_.useState(null),La=_.useRef(null),[Fa,Tl]=_.useState("Loading..."),[El,Al]=_.useState(!1),[sn,rn]=_.useState(!1),[bt,ui]=_.useState(null),[Pr,Hs]=_.useState(""),[ra,Oo]=_.useState(""),[kl,Dl]=_.useState(!0),[vn,as]=_.useState(!1),[Rr,Lo]=_.useState(!1),[ss,Mi]=_.useState(!1),aa=async O=>{try{const G=await pe(`/api/patients/${O}`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`Failed to fetch patient details: ${G.status}`)}const W=await G.json();if(y(W),S(W.age),j(W.gender),re(W.ai_response||""),y(ce=>ce?{...ce,current_status:W.current_status,admission_date:W.admission_date,discharge_date:W.discharge_date}:{...W,current_status:W.current_status,admission_date:W.admission_date,discharge_date:W.discharge_date}),W.insurance_type&&y(ce=>ce?{...ce,insurance_type:W.insurance_type}:{...W}),zc(O),W.ai_response){const ce=/```json\s*([\s\S]*?)\s*```/,_e=W.ai_response.match(ce);if(_e&&_e[1])I(W.ai_response.replace(ce,"").trim()),ae(_e[1].trim());else{const Oe=W.ai_response.trim();if(Oe.startsWith("{")&&Oe.endsWith("}"))try{JSON.parse(Oe),I(""),ae(Oe)}catch{I(Oe),ae(null)}else if(Oe.startsWith("[")&&Oe.endsWith("]"))try{JSON.parse(Oe),I(""),ae(Oe)}catch{I(Oe),ae(null)}else I(Oe),ae(null)}}else I(""),ae(null)}catch{y(null),re(""),I(""),ae(null)}},cd=async(O,G)=>{y(W=>W?{...W,insurance_type:G}:null);try{const W=await pe(`/api/patients/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurance_type:G})});if(!W.ok){const ce=await W.json();throw new Error(ce.message||"Failed to update insurance type")}}catch(W){console.error("Error updating insurance type:",W),O&&aa(O)}},Pl=async O=>{Ee(!0),nt(null),Hi([]);try{const G=await pe(`/api/queue/patient/${O}/complaints`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`HTTP error! status: ${G.status}`)}const W=await G.json();Hi(W||[])}catch(G){nt(`Past complaints error: ${G.message}`)}finally{Ee(!1)}},os=async O=>{vi([]);try{const G=await pe(`/api/pharmacy-orders/patient/${O}`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`HTTP error! status: ${G.status}`)}const W=await G.json();vi(W||[])}catch{}},ls=async O=>{ld(!0),Do(null),na([]);try{const G=await pe(`/api/lab/orders/patient/${O}`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`HTTP error! status: ${G.status}`)}const W=await G.json();na(W||[])}catch(G){Do(`Pending labs error: ${G.message}`)}finally{ld(!1)}},Gs=async O=>{li(!0),ei(null),Cn([]);try{const G=await pe(`/api/lab/patient/${O}`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`HTTP error! status: ${G.status}`)}const W=await G.json();Cn(W||[])}catch(G){ei(`Lab reports error: ${G.message}`)}finally{li(!1)}},_i=O=>{aa(O),Pl(O),os(O),ls(O),Gs(O)},zc=async O=>{try{const G=await pe(`/api/queue/patient/${O}/latest`);if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||`Failed to fetch queue status: ${G.status}`)}const W=await G.json();if(W){const ce=new Date(W.createdAt),_e=new Date,Oe=ce.getDate()===_e.getDate()&&ce.getMonth()===_e.getMonth()&&ce.getFullYear()===_e.getFullYear(),it=["waiting","consulting"].includes(W.status);zs(Oe&&it)}else zs(!1)}catch(G){console.error("Error checking patient queue status:",G),zs(!1)}},Ji=O=>{n(`/dashboard/edit-pharmacy-order/${O}`)},ud=O=>{X(null),console.log(`Preparing billing navigation for order: ${O}`);const G=tn.find(W=>W.id===O);if(G){const W=G.medications.map(_e=>{const Oe=_e.price??0;return(_e.price===void 0||_e.price===null)&&console.warn(`Medication "${_e.name}" in order ${O} is missing a price. Defaulting to 0.`),{name:_e.name,quantity:_e.quantity,price:Oe,total:Oe*_e.quantity,drug_id:_e.drug_id?String(_e.drug_id):null}}),ce={patientId:G.patientId,patientName:(f==null?void 0:f.name)||`Patient (ID: ${G.patientId.substring(0,6)})`,initialItems:W,billType:"pharmacy",relatedId:G.id,initialStatus:"pending"};console.log("Navigating to /billing with state:",ce),n("/billing",{state:ce})}else console.error(`Order with ID ${O} not found.`),X(`Order with ID ${O} not found.`),alert(`Error: Could not find order ${O} to bill.`)},$c=async(O,G)=>{X(null);const W={status:G};try{const ce=await pe(`/api/pharmacy-orders/${O}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!ce.ok){const Oe=await ce.text();throw new Error(`Failed to update status: ${ce.statusText} (${ce.status}) - ${Oe}`)}const _e=await ce.json();vi(Oe=>Oe.map(it=>it.id===_e.id?{...it,status:_e.status}:it)),h&&os(h)}catch(ce){console.error("Failed to update order status:",ce),X(ce.message||`Failed to update status for order ${O}.`),alert(`Error updating status for order ${O}: ${ce.message||"Please try again."}`)}},Mr=O=>{na(G=>G.map(W=>W.id===O?{...W,isEditing:!0,editedTests:[...W.tests],editedStatus:W.status}:{...W,isEditing:!1}))},Rl=O=>{na(G=>G.map(W=>W.id===O?{...W,isEditing:!1,editedTests:void 0,editedStatus:void 0}:W))},Uc=(O,G,W,ce)=>{na(_e=>_e.map(Oe=>{if(Oe.id===O){const it=Oe.editedTests?[...Oe.editedTests]:[...Oe.tests];if(W==="add")return{...Oe,editedTests:[...it,{id:"",name:"",price:0}]};if(W==="remove")return{...Oe,editedTests:ce};if(G!==-1){const Fe={...it[G],[W]:ce};return it[G]=Fe,{...Oe,editedTests:it}}}return Oe}))},_n=(O,G)=>{na(W=>W.map(ce=>ce.id===O?{...ce,editedStatus:G}:ce))},sa=async O=>{if(!O){console.error("Cannot navigate to billing: Lab Order data is missing."),alert("Could not open billing page: Lab Order information is missing.");return}try{await Ml(O.id,"billed"),console.log(`Lab Order ${O.id} status updated to 'billed'.`),O.bill_id?(console.log(`Navigating to existing bill for Bill ID: ${O.bill_id}, Patient ID: ${O.patient_id}`),n("/billing",{state:{billId:O.bill_id,patientId:O.patient_id,patientName:(f==null?void 0:f.name)||`Patient (ID: ${O.patient_id})`,billType:"lab"}})):(console.log(`Navigating to create new bill for Lab Order ID: ${O.id}, Patient ID: ${O.patient_id}`),n("/billing",{state:{labOrderId:O.id,patientId:O.patient_id,patientName:(f==null?void 0:f.name)||`Patient (ID: ${O.patient_id})`,billType:"lab"}}))}catch(G){console.error("Error updating lab order status before billing:",G),alert(`Failed to mark lab order as billed: ${G instanceof Error?G.message:"Unknown error"}`)}},Ml=async(O,G)=>{console.log(`Updating lab order ${O} to status ${G}`);try{const W=await pe(`/api/lab/${O}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:G})});if(!W.ok){const ce=await W.json();throw new Error(ce.message||`Failed to update lab order status: ${W.status}`)}h&&(ls(h),Gs(h)),console.log(`Lab Order ${O} status updated to ${G}, refetching data.`)}catch(W){console.error("Error updating lab order status:",W),alert(`Failed to update lab order status: ${W instanceof Error?W.message:"Unknown error"}`)}},sh=O=>{O&&O.id?n(`/lab/report/${O.id}`):(console.error("Cannot navigate: Lab Order or Lab Order ID is missing."),alert("Could not open the report entry page: Lab Order information is missing."))},Bc=O=>{O&&O.id?n(`/lab/view-report/${O.id}`):(console.error("Attempted to view report for a lab order with no ID:",O),alert("Cannot view report: Lab Order ID is missing."))},oh=async(O,G,W)=>{ts(!0),X(null);try{if(!G||G.length===0)throw new Error("Lab order must have at least one test.");for(const Oe of G)if(!Oe.id||!Oe.name||isNaN(Oe.price)||Oe.price<0)throw new Error(`Invalid test data: ${JSON.stringify(Oe)}. Each test must have id, name, and a valid price.`);const ce={tests:G,status:W},_e=await pe(`/api/lab/orders/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)});if(!_e.ok){const Oe=await _e.json().catch(()=>({}));throw new Error(Oe.message||`Failed to update lab order: ${_e.statusText}`)}h&&ls(h),na(Oe=>Oe.map(it=>it.id===O?{...it,isEditing:!1,editedTests:void 0,editedStatus:void 0}:it))}catch(ce){X(`Lab Order Save Error: ${ce.message}`)}finally{ts(!1)}},Fo=async O=>{if(!window.confirm(`Are you sure you want to delete this ${O.type.toLowerCase()} record? This action cannot be undone.`))return;Ra(!0),bl(null);let W=null,ce;const _e=O.type;try{switch(_e){case"Complaint":if(ce=O.data.id,!ce)throw new Error("Complaint ID is missing.");W=`/api/patients/complaints/${ce}`;break;case"Lab Order":if(ce=O.data.id,!ce)throw new Error("Lab Order ID is missing.");W=`/api/lab/orders/${ce}`;break;case"Lab Report":if(ce=O.data.reportId,!ce)throw new Error("Lab Report ID is missing.");W=`/api/lab/reports/${ce}`;break;case"Pharmacy Order":if(ce=O.data.id,!ce)throw new Error("Pharmacy Order ID is missing.");W=`/api/pharmacy-orders/${ce}`;break;default:throw new Error(`Deletion not supported for item type: ${_e}`)}if(!W)throw new Error(`Could not determine delete URL for type: ${_e}`);const Oe=await pe(W,{method:"DELETE"});if(!Oe.ok){const it=await Oe.json().catch(()=>({}));throw new Error(it.message||`Failed to delete ${_e}: ${Oe.statusText}`)}h&&(_e==="Complaint"?Pl(h):_e==="Lab Order"?(ls(h),Gs(h)):_e==="Lab Report"?Gs(h):_e==="Pharmacy Order"&&os(h))}catch(Oe){bl(`Delete Error (${_e}): ${Oe.message}`),xl&&Ra(!1)}finally{Ra(!1)}},lh=async()=>{if(!h)return;if(tn.filter(G=>G.status==="pending").length<2){alert("You need at least two pending orders to merge.");return}rn(!0);try{const G=await pe(`/api/pharmacy-orders/patient/${h}/merge-pending`,{method:"POST"});if(!G.ok){const W=await G.json().catch(()=>({}));throw new Error(W.message||"Failed to merge orders")}os(h)}catch(G){X(`Merge Error: ${G.message}`)}finally{rn(!1)}},oa=_.useMemo(()=>{if(!h||!zn)return[];const O=zn.map(G=>({date:new Date(G.createdAt),type:"Complaint",data:G,originalDateString:G.createdAt})).filter(G=>!isNaN(G.date.getTime()));return O.sort((G,W)=>W.date.getTime()-G.date.getTime()),O},[h,zn]),yr=_.useMemo(()=>{if(!h)return[];const O=new Map;(Pa??[]).forEach(W=>{O.set(W.id,{...W})}),(ht??[]).forEach(W=>{if(!O.has(W.id))O.set(W.id,{id:W.id,patient_id:W.patient_id,tests:W.tests,status:W.status,createdAt:W.createdAt,report:W});else{const ce=O.get(W.id);ce&&(ce.report=W,ce.status=W.status)}});let G=Array.from(O.values());return G.sort((W,ce)=>new Date(W.createdAt).getTime()-new Date(ce.createdAt).getTime()),G=G.map((W,ce)=>({...W,serialNumber:ce+1})),G.map(W=>({date:new Date(W.createdAt),type:"Lab Order",data:W,originalDateString:W.createdAt}))},[h,Pa,ht]),la=_.useMemo(()=>["Processing...","Please wait...","Loading...","Retrying..."],[]),xr=_.useMemo(()=>{if(!h||!tn)return[];const O=tn.map(G=>({date:new Date(G.date),type:"Pharmacy Order",data:G,originalDateString:G.date})).filter(G=>!isNaN(G.date.getTime()));return O.sort((G,W)=>W.date.getTime()-G.date.getTime()),O},[h,tn]),[za,Il]=_.useState(null),[zo,Ys]=_.useState([]),[Ol,dd]=_.useState("");_.useEffect(()=>{const O=()=>{$e(window.innerHeight)};return window.addEventListener("resize",O),O(),()=>window.removeEventListener("resize",O)},[]),_.useEffect(()=>{const O=W=>{if(!lt||!_a.current||!nn.current)return;const ce=nn.current.getBoundingClientRect(),Oe=W.clientX-_a.current.x;let it=_a.current.initialWidth-Oe;const Fe=ce.width-ja-10;it=Math.max(ja,it),it=Math.min(it,Fe);const Un=it/ce.width*100;Ve(Un)},G=()=>{Dt(!1),_a.current=null,document.body.style.cursor="",document.body.style.userSelect=""};return lt&&(window.addEventListener("mousemove",O),window.addEventListener("mouseup",G),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",G),document.body.style.cursor="",document.body.style.userSelect=""}},[lt]);const Ll=O=>{if(!nn.current)return;O.preventDefault();const G=nn.current.querySelector(".edit-complaint-context-column");G&&(_a.current={x:O.clientX,initialWidth:G.offsetWidth},Dt(!0))},ca=_.useCallback(async()=>{te(!0),X(null);try{const O=await pe("/api/queue/doctor/new",{method:"POST"});if(!O.ok){const W=await O.json().catch(()=>({}));throw new Error(W.message||`Failed to create record: ${O.statusText}`)}const G=await O.json();if(!G.recordId)throw new Error("New record ID not received from server.");n(`/edit-complaint/${G.recordId}`,{replace:!0})}catch(O){X(`Failed to create new complaint record: ${O.message}`)}finally{te(!1)}},[n]);_.useEffect(()=>{(async()=>{Dl(!0);try{const G=await pe("/api/clinics/settings");if(!G.ok){const ce=await G.json().catch(()=>({}));throw new Error(ce.message||"Failed to fetch clinic settings.")}const W=await G.json();ui({admissionCharge:parseFloat(W.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(W.perDayCharge||0).toFixed(2),otherCharges:parseFloat(W.otherCharges||0).toFixed(2),aiMemory:W.aiMemory||"",aiMemoryUpdatedAt:W.aiMemoryUpdatedAt||null,clinicWideSystemPrompt:W.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:W.clinicWideSystemPromptUpdatedAt||null}),Hs(W.aiMemory||""),Oo(W.clinicWideSystemPrompt||"")}catch{}finally{Dl(!1)}})()},[]),_.useEffect(()=>{var G;(G=e.state)!=null&&G.initialComplaint&&s(e.state.initialComplaint),t?(async W=>{ee(!0),X(null);try{const ce=await pe(`/api/queue/doctor/complaint/${W}`);if(!ce.ok){const Oe=await ce.json().catch(()=>({}));throw new Error(Oe.message||`HTTP error! status: ${ce.status}`)}const _e=await ce.json();m(_e.patientId),S(_e.age),j(_e.gender),A(_e.case_summary||null),M(_e.updatedAt||null)}catch{X("Failed to load current complaint details."),m(null),S(void 0),j(void 0),A(null),M(null)}finally{ee(!1)}})(t):ca()},[t,ca,(cs=e.state)==null?void 0:cs.initialComplaint]),_.useEffect(()=>{h?_i(h):(y(null),Hi([]),vi([]),na([]),Cn([]),M(null),zs(!1))},[h]),_.useEffect(()=>{var W;const O=(W=e.state)==null?void 0:W.initialComplaint;O&&t&&(!B&&!Qn&&!ia&&!tt&&!Ta)&&!xn.current&&i===O&&(xn.current=!0,vr(),n(e.pathname,{replace:!0,state:{}}))},[(ua=e.state)==null?void 0:ua.initialComplaint,t,i,B,Qn,ia,tt,Ta,n]);const ch=()=>{Y(E||""),P(!0),L(null)},fd=()=>{P(!1),Y(""),L(null)},Ii=async()=>{if(!t){L("Missing Record ID.");return}q(!0),L(null);try{const O=await pe(`/api/queue/doctor/complaint/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({case_summary:R.trim()})});if(!O.ok){const W=await O.json().catch(()=>({}));throw new Error(W.message||`Failed to save case summary: ${O.statusText}`)}const G=await O.json();A(G.case_summary||R.trim()),M(G.updatedAt||null),P(!1)}catch(O){L(`Save Error: ${O.message}`)}finally{q(!1)}};_.useEffect(()=>{(async()=>{pl(!0),gl(null);try{const G=await pe("/api/drugs");if(!G.ok)throw new Error(`HTTP error! status: ${G.status}`);const W=await G.json();Zr(W||[])}catch{gl("Pharmacy inventory error.")}})()},[]),_.useEffect(()=>{(async()=>{try{const G=await pe("/api/lab-tests");if(!G.ok)throw new Error(`HTTP error! status: ${G.status}`);const W=await G.json();ad(W||[])}catch{gl(W=>W?`${W} & Lab inventory error.`:"Lab inventory error.")}finally{pl(!1)}})()},[]);const Fl=async()=>{if(!bt)return;if(Pr===bt.aiMemory&&ra===bt.clinicWideSystemPrompt){Lo(!1);return}const O=Pr!==bt.aiMemory,G=ra!==bt.clinicWideSystemPrompt;O&&as(!0),G&&Mi(!0);try{const W={...bt};O&&(W.aiMemory=Pr),G&&(W.clinicWideSystemPrompt=ra);const ce=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify(W)});if(!ce.ok){const Oe=await ce.json().catch(()=>({}));throw new Error(Oe.message||"Failed to update clinic settings.")}const _e=await ce.json();ui({admissionCharge:parseFloat(_e.settings.admissionCharge).toFixed(2),perDayCharge:parseFloat(_e.settings.perDayCharge).toFixed(2),otherCharges:parseFloat(_e.settings.otherCharges).toFixed(2),aiMemory:_e.settings.aiMemory||"",aiMemoryUpdatedAt:_e.settings.aiMemoryUpdatedAt||(bt==null?void 0:bt.aiMemoryUpdatedAt)||null,clinicWideSystemPrompt:_e.settings.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:_e.settings.clinicWideSystemPromptUpdatedAt||(bt==null?void 0:bt.clinicWideSystemPromptUpdatedAt)||null}),O&&Hs(_e.settings.aiMemory||""),G&&(Oo(_e.settings.clinicWideSystemPrompt||""),Lo(!1))}catch{}finally{O&&as(!1),G&&Mi(!1)}},Ws=()=>{bt&&(Oo(bt.clinicWideSystemPrompt||""),Lo(!0))},Js=()=>{Lo(!1),bt&&Oo(bt.clinicWideSystemPrompt||"")},vr=_.useCallback(async O=>{ee(!0),X(null),ge(null);const G=O??i;if(!t){X("Missing Record ID."),ee(!1);return}if(!G.trim()){X("Input is empty."),ee(!1);return}try{await hd(G)}catch(W){me||X(W.message||"An unexpected error occurred.")}finally{ee(!1)}},[t,i,me,l,Wi,Pa,ht,zn,tn,Si,ea,f,x,w,E,V,bt]),hd=async O=>{ue(!0),ge(null);const G=[...l,O],W=G.join(`

`);try{const ce=new Map;(Pa??[]).forEach(Ue=>{ce.set(Ue.id,{...Ue})}),(ht??[]).forEach(Ue=>{if(!ce.has(Ue.id))ce.set(Ue.id,{id:Ue.id,patient_id:Ue.patient_id,tests:Ue.tests,status:Ue.status,createdAt:Ue.createdAt,report:Ue});else{const dt=ce.get(Ue.id);dt&&(dt.report=Ue,dt.status=Ue.status)}});const _e=Array.from(ce.values());_e.sort((Ue,dt)=>new Date(dt.createdAt).getTime()-new Date(Ue.createdAt).getTime());const Oe=_e.map((Ue,dt)=>{let ct=null;if(Ue.report)try{const at=typeof Ue.report.report_content=="string"?Ue.report.report_content:JSON.stringify(Ue.report.report_content||{}),wt=JSON.parse(at||"{}"),mt=(Ue.report.tests||[]).map(Pt=>{const Qt=wt[Pt.id]||{},_t=Rt=>({name:Rt.name,value:Qt[Rt.name]!==void 0?String(Qt[Rt.name]):String(Rt.defaultValue),normal_range:Rt.normal_range||"N/A"});return{testId:Pt.id,testName:Pt.name,parameters:(Pt.default_parameters||[]).map(_t)}});ct={reportId:Ue.report.reportId,reportDate:Ue.report.report_date,tests:mt}}catch{ct={reportId:Ue.report.reportId,reportDate:Ue.report.report_date,reportContent:typeof Ue.report.report_content=="string"?Ue.report.report_content:JSON.stringify(Ue.report.report_content),error:"Failed to parse report content JSON."}}return{serialNumber:_e.length-dt,orderId:Ue.id,orderDate:isNaN(new Date(Ue.createdAt).getTime())?Ue.createdAt:new Date(Ue.createdAt).toISOString(),tests:Ue.tests.map(at=>({id:at.id,name:at.name,price:at.price})),status:Ue.status,report:ct}}),it=zn.map(Ue=>{try{return{...Ue,createdAt:isNaN(new Date(Ue.createdAt).getTime())?Ue.createdAt:new Date(Ue.createdAt).toISOString()}}catch{return Ue}}),Un=[...tn].sort((Ue,dt)=>{const ct=new Date(Ue.date).getTime(),at=new Date(dt.date).getTime();return ct-at}).map((Ue,dt)=>{try{return{serialNumber:dt+1,...Ue,date:Ue.date&&!isNaN(new Date(Ue.date).getTime())?new Date(Ue.date).toISOString():Ue.date}}catch{return{serialNumber:dt+1,...Ue}}}),Ye={query:W,currentDateTime:new Date().toISOString(),patientName:(f==null?void 0:f.name)||"",patientAge:(f==null?void 0:f.age)||void 0,patientGender:(f==null?void 0:f.gender)||void 0,case_summary:E||"",case_summary_last_updated:V?new Date(V).toISOString():void 0,clinic_ai_memory:(bt==null?void 0:bt.aiMemory)||"",clinic_ai_memory_last_updated:bt!=null&&bt.aiMemoryUpdatedAt?new Date(bt.aiMemoryUpdatedAt).toISOString():void 0,clinic_wide_system_prompt:(bt==null?void 0:bt.clinicWideSystemPrompt)||"",labHistory:Oe,pharmacyOrders:Un,pastComplaints:it,pharmacyInventory:Si,labInventory:ea};console.log("DEBUG: Payload before sending to Gemini API:",JSON.stringify(Ye,null,2));const Ke=await UV(Ye,Wi);if(Ke){re(Ke);const Ue=/```json\s*([\s\S]*?)\s*```/,dt=Ke.match(Ue);if(dt&&dt[1])I(Ke.replace(Ue,"").trim()),ae(dt[1].trim());else{const ct=Ke.trim();if(ct.startsWith("{")&&ct.endsWith("}"))try{JSON.parse(ct),I(""),ae(ct)}catch{I(ct),ae(null)}else if(ct.startsWith("[")&&ct.endsWith("]"))try{JSON.parse(ct),I(""),ae(ct)}catch{I(ct),ae(null)}else I(Ke),ae(null)}ne(!1),await Promise.all([md(Ke),h&&Ke?xd(h,Ke):Promise.resolve()]),c(G),s("")}else throw new Error("Invalid AI response format.")}catch(ce){Oi("call_generative_api",ce,K)}finally{ue(!1)}},Oi=(O,G,W)=>{let ce;const Oe=["AI response did not contain a recognized function call","AI response did not result in a recognized or performed function call"].some(it=>{var Fe;return(Fe=G.message)==null?void 0:Fe.includes(it)});W&&Oe?ce=`AI Error: ${G.message}

${W}`:(ce=`I encountered a frontend error while trying to execute the '${O}' function. The error message is: "${G.message}". Based on this error, please analyze what went wrong and either correct the function call and try again, or explain the problem.`,(O==="create_pharmacy_order"||O==="edit_pharmacy_order")&&(ce+=`

IMPORTANT: When ordering medication, please first check if the medication ordered matches the exact name given in the inventory. If the name itself is not given in the inventory, you can also use 'prescription_for_unavailable_drugs' to write a prescription for unavailable drugs.`),W&&(ce+=`

The original AI response that caused the error was:
\`\`\`
${W}
\`\`\``)),s(ce),setTimeout(()=>{vr()},100)},md=async O=>{Jn(null),Is(null),Aa(null),$n(null),Da(null),Il(null),Ys([]),X(null);let G=!1,W=null;const ce=/```json\s*([\s\S]*?)\s*```/,_e=O.match(ce);if(_e&&_e[1])W=_e[1];else{const Oe=O.trim();if(Oe.startsWith("{")&&Oe.endsWith("}"))W=Oe;else if(Oe.startsWith("[")&&Oe.endsWith("]"))W=Oe;else throw new Error("AI response did not contain a recognized function call.")}if(W)try{const Oe=JSON.parse(W),it=Array.isArray(Oe)?Oe:[Oe],Fe=[];let Un=null;for(const Ye of it){if(Ye.action==="ask_followup_question"){Un=Ye,G=!0;continue}Ye.action==="update_clinic_ai_memory"&&typeof Ye.memory_content=="string"?(G=!0,Fe.push((async()=>{Mc(!0),Da("Processing AI mem...");try{if(!bt)throw new Error("Clinic settings not loaded, cannot update AI memory.");const Ke={...bt,aiMemory:Ye.memory_content.trim(),admissionCharge:bt.admissionCharge,perDayCharge:bt.perDayCharge,otherCharges:bt.otherCharges,clinicWideSystemPrompt:bt.clinicWideSystemPrompt},Ue=await pe("/api/clinics/settings",{method:"PUT",body:JSON.stringify(Ke)});if(!Ue.ok){const ct=await Ue.json().catch(()=>({}));throw new Error(ct.message||`AI-triggered clinic memory update failed: ${Ue.statusText}`)}const dt=await Ue.json();ui({admissionCharge:parseFloat(dt.settings.admissionCharge||0).toFixed(2),perDayCharge:parseFloat(dt.settings.perDayCharge||0).toFixed(2),otherCharges:parseFloat(dt.settings.otherCharges||0).toFixed(2),aiMemory:dt.settings.aiMemory||"",aiMemoryUpdatedAt:dt.settings.aiMemoryUpdatedAt||null,clinicWideSystemPrompt:dt.settings.clinicWideSystemPrompt||"",clinicWideSystemPromptUpdatedAt:dt.settings.clinicWideSystemPromptUpdatedAt||null}),Hs(dt.settings.aiMemory||""),Da("AI mem updated!")}catch(Ke){Oi(Ye.action,Ke,O)}finally{Mc(!1)}})())):Ye.action==="create_pharmacy_order"&&(Array.isArray(Ye.items)||Ye.prescription_for_unavailable_drugs&&Ye.prescription_for_unavailable_drugs.trim()!=="")?(G=!0,Fe.push((async()=>{gr(!0),Jn("Processing order...");try{if(!h)throw new Error("Missing patient ID for pharmacy order.");const Ke=[];let Ue=null;for(const at of Ye.items){let wt;if(at.drug_id?wt=Si.find(_t=>_t.id===at.drug_id):at.name&&(wt=Dy(at.name,Si)),!wt){Ue=`Drug "${at.name||at.drug_id||"Unknown"}" not found or no close match.`;break}const mt=Number(at.tabletsPerDay)||1,Pt=Number(at.numberOfDays)||1,Qt=at.quantity?Number(at.quantity):mt*Pt;if(Qt<=0){Ue=`Invalid dosage/duration for ${wt.name}.`;break}Ke.push({drug_id:wt.id,name:wt.name,tabletsPerDay:mt,numberOfDays:Pt,quantity:Qt,price:wt.price,stock:wt.quantity_in_stock,directions_to_use:at.directions_to_use||void 0})}if(Ue)throw new Error(Ue);const dt={patient_id:h,items:Ke.map(({drug_id:at,name:wt,quantity:mt,tabletsPerDay:Pt,numberOfDays:Qt,directions_to_use:_t})=>({drug_id:at,name:wt,tabletsPerDay:Pt,numberOfDays:Qt,quantity:mt,directions_to_use:_t})),prescription_for_unavailable_drugs:Ye.prescription_for_unavailable_drugs||null},ct=await pe("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(dt)});if(!ct.ok){const at=await ct.json().catch(()=>({}));throw new Error(at.message||`AI order creation failed: ${ct.statusText}`)}Jn("Order created!"),h&&os(h)}catch(Ke){Oi(Ye.action,Ke,O)}finally{gr(!1)}})())):Ye.action==="update_patient_details"?(G=!0,Fe.push((async()=>{ee(!0),X(null);try{if(!h)throw new Error("Missing patient ID for updating details.");const Ke={};let Ue=!1;if(Ye.name!==void 0&&typeof Ye.name=="string"&&(Ke.name=Ye.name,Ue=!0),Ye.age!==void 0&&typeof Ye.age=="number"&&(Ke.age=Ye.age,Ue=!0),Ye.gender!==void 0&&typeof Ye.gender=="string"){if(!["M","F","O",null,""].includes(Ye.gender))throw new Error(`Invalid gender specified: "${Ye.gender}". Use M, F, or O.`);Ke.gender=Ye.gender===""?null:Ye.gender,Ue=!0}if(Ye.phone_number!==void 0&&(typeof Ye.phone_number=="string"||Ye.phone_number===null)&&(Ke.phone_number=Ye.phone_number,Ue=!0),!Ue)throw new Error("No valid patient details provided for update.");const dt=await pe(`/api/patients/${h}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if(!dt.ok){const at=await dt.json().catch(()=>({}));throw new Error(at.message||`AI patient update failed: ${dt.statusText}`)}const ct=await dt.json();y(ct),S(ct.age),j(ct.gender)}catch(Ke){Oi(Ye.action,Ke,O)}finally{ee(!1)}})())):Ye.action==="create_lab_order"&&Array.isArray(Ye.tests)&&Ye.tests.length>0?(G=!0,Fe.push((async()=>{yl(!0),Is("Processing lab...");try{if(!h)throw new Error("Missing patient ID for lab order.");const Ke=[];let Ue=null;for(const at of Ye.tests){let wt;if(at.id?wt=ea.find(Pt=>String(Pt.id)===String(at.id)):at.name&&(wt=Dy(at.name,ea)),!wt){Ue=`Lab test "${at.name||at.id||"Unknown"}" not found or no close match.`;break}const mt=typeof wt.price=="string"?parseFloat(wt.price):wt.price;Ke.push({id:wt.id,name:wt.name,price:mt,description:wt.description})}if(Ue)throw new Error(Ue);const dt={patient_id:h,tests:Ke.map(at=>({id:at.id,name:at.name,price:at.price}))},ct=await pe("/api/lab",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(dt)});if(!ct.ok){const at=await ct.json().catch(()=>({}));throw new Error(at.message||`AI lab order creation failed: ${ct.statusText}`)}await ct.json(),Is("Success: Lab order created!"),h&&ls(h)}catch(Ke){Oi(Ye.action,Ke,O)}finally{yl(!1)}})())):Ye.action==="edit_pharmacy_order"?(G=!0,Fe.push((async()=>{gr(!0),Jn("Processing pharmacy order edit...");try{const Ke=Ye.serialNumber;let Ue;if(Ke?Ue=[...tn].sort((Qt,_t)=>{const Rt=new Date(Qt.date).getTime(),ln=new Date(_t.date).getTime();return Rt-ln})[Ke-1]:Ue=tn.sort((Pt,Qt)=>new Date(Pt.date).getTime()-new Date(Qt.date).getTime()).find(Pt=>Pt.status==="pending"),!Ue)throw new Error(`Pharmacy order with serial number ${Ke} not found, or no pending order to edit.`);const dt=Ue.id,ct=Ye.items,at=Ye.items_to_remove,wt=Ye.status,mt=Ye.prescription_for_unavailable_drugs;if((!ct||Array.isArray(ct)&&ct.length===0)&&!at&&!wt&&(!mt||mt.trim()===""))throw new Error("No items, items to remove, status, or unavailable drugs prescription provided for pharmacy order edit.");if(wt==="cancelled")await Fo({type:"Pharmacy Order",data:Ue}),Jn("Success: Pharmacy order cancelled and deleted!");else{let Pt=[...Ue.medications];if(Array.isArray(at)&&at.length>0&&(Pt=Pt.filter(Rt=>{const ln=Rt.name.toLowerCase().replace(/\s+/g," ").trim();return!at.some(ji=>{if(ji.drug_id&&Rt.drug_id===ji.drug_id)return!0;if(ji.name){const Kn=ji.name.toLowerCase().replace(/\s+/g," ").trim();return ln===Kn}return!1})})),Array.isArray(ct)&&ct.length>0)for(const Rt of ct){let ln;if(Rt.drug_id?ln=Si.find(da=>da.id===Rt.drug_id):Rt.name&&(ln=Dy(Rt.name,Si)),!ln)throw new Error(`Drug "${Rt.name||Rt.drug_id||"Unknown"}" not found or no close match for update.`);const ji=Number(Rt.tabletsPerDay)||1,Kn=Number(Rt.numberOfDays)||1,Ti=Rt.quantity!==void 0?Number(Rt.quantity):ji*Kn,Ki=Pt.findIndex(da=>da.drug_id&&da.drug_id===(ln==null?void 0:ln.id)||da.name.toLowerCase()===(ln==null?void 0:ln.name.toLowerCase()));if(Ti<=0){Ki!==-1&&Pt.splice(Ki,1);continue}const $a={drug_id:ln.id,name:ln.name,tabletsPerDay:ji,numberOfDays:Kn,quantity:Ti,price:ln.price,stock:ln.quantity_in_stock,directions_to_use:Rt.directions_to_use||void 0};Ki!==-1?Pt[Ki]={...Pt[Ki],...$a}:Pt.push($a)}const Qt={};if(Pt.length>0?Qt.items=Pt.map(({drug_id:Rt,name:ln,quantity:ji,tabletsPerDay:Kn,numberOfDays:Ti,directions_to_use:Ki})=>({drug_id:Rt,name:ln,tabletsPerDay:Kn,numberOfDays:Ti,quantity:ji,directions_to_use:Ki})):ct&&ct.length>0&&(Qt.items=[]),mt!==void 0&&(Qt.prescription_for_unavailable_drugs=mt),wt){if(!["pending","billed","dispensed","cancelled"].includes(wt))throw new Error(`Invalid status for pharmacy order: ${wt}.`);Qt.status=wt}const _t=await pe(`/api/pharmacy-orders/${dt}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qt)});if(!_t.ok){const Rt=await _t.json().catch(()=>({}));throw new Error(Rt.message||`AI pharmacy order edit failed: ${_t.statusText}`)}Jn("Success: Pharmacy order updated!"),h&&os(h)}}catch(Ke){Oi(Ye.action,Ke,O)}finally{gr(!1)}})())):Ye.action==="edit_lab_order"?(G=!0,Fe.push((async()=>{ts(!0),Is("Processing lab order edit...");try{const Ke=Pa.sort((wt,mt)=>new Date(mt.createdAt).getTime()-new Date(wt.createdAt).getTime()).find(wt=>wt.status==="pending");if(!Ke)throw new Error("No pending lab orders found to edit.");const Ue=Ke.id,dt=Ye.tests,ct=Ye.items_to_remove,at=Ye.status;if(!dt&&!ct&&!at)throw new Error("No tests, items to remove, or status provided for lab order edit.");if(at==="cancelled"){if(Ke.report)throw new Error("Cannot delete lab order with an associated report. Please delete the report first.");await Fo({type:"Lab Order",data:Ke}),Is("Success: Lab order cancelled and deleted!")}else{let wt=[...Ke.tests];if(Array.isArray(ct)&&ct.length>0&&(wt=wt.filter(Qt=>!ct.some(_t=>!!(_t.id&&String(Qt.id)===String(_t.id)||_t.name&&Qt.name.toLowerCase()===_t.name.toLowerCase())))),Array.isArray(dt)&&dt.length>0)for(const Qt of dt){let _t;if(Qt.id?_t=ea.find(Kn=>String(Kn.id)===String(Qt.id)):Qt.name&&(_t=Dy(Qt.name,ea)),!_t)throw new Error(`Lab test "${Qt.name||Qt.id||"Unknown"}" not found or no close match for update.`);const Rt=typeof _t.price=="string"?parseFloat(_t.price):_t.price,ln=wt.findIndex(Kn=>Kn.id&&String(Kn.id)===String(_t==null?void 0:_t.id)||Kn.name.toLowerCase()===(_t==null?void 0:_t.name.toLowerCase())),ji={id:_t.id,name:_t.name,price:Rt};ln!==-1?wt[ln]={...wt[ln],...ji}:wt.push(ji)}const mt={};if(wt.length>0?mt.tests=wt:dt&&dt.length>0&&(mt.tests=[]),at){if(!["pending","billed","collected","processing","report_ready","completed","cancelled","reported"].includes(at))throw new Error(`Invalid status for lab order: ${at}.`);mt.status=at}const Pt=await pe(`/api/lab/orders/${Ue}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(mt)});if(!Pt.ok){const Qt=await Pt.json().catch(()=>({}));throw new Error(Qt.message||`AI lab order edit failed: ${Pt.statusText}`)}Is("Success: Lab order updated!"),h&&(ls(h),Gs(h))}}catch(Ke){Oi(Ye.action,Ke,O)}finally{ts(!1)}})())):Ye.action==="add_complaint_history"&&Ye.complaint?(G=!0,Fe.push((async()=>{Os(!0),Aa("Processing Hx...");try{if(!t)throw new Error("Missing Record ID for complaint history.");if(!Ye.complaint||typeof Ye.complaint!="string")throw new Error("Invalid AI complaint text.");const Ke={complaint:Ye.complaint.trim()},Ue=await pe(`/api/queue/doctor/complaint/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if(!Ue.ok){const dt=await Ue.json().catch(()=>({}));throw new Error(dt.message||`AI complaint add failed: ${Ue.statusText}`)}s(Ke.complaint),Aa("Hx updated!"),h&&Pl(h)}catch(Ke){Oi(Ye.action,Ke,O)}finally{Os(!1)}})())):Ye.action==="update_case_summary"&&Ye.summary?(G=!0,Fe.push((async()=>{es(!0),$n("Processing summary...");try{if(!t)throw new Error("Missing Record ID for case summary update.");if(typeof Ye.summary!="string")throw new Error("Invalid AI case summary text.");const Ke={case_summary:Ye.summary.trim()},Ue=await pe(`/api/queue/doctor/complaint/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ke)});if(!Ue.ok){const dt=await Ue.json().catch(()=>({}));throw new Error(dt.message||`AI case summary update failed: ${Ue.statusText}`)}A(Ke.case_summary),$n("Summary updated!")}catch(Ke){Oi(Ye.action,Ke,O)}finally{es(!1)}})())):Ye.action&&console.warn(`Unrecognized AI action: ${Ye.action}`)}if(await Promise.allSettled(Fe),Un)typeof Un.question=="string"?(Il(Un.question),Ys(Array.isArray(Un.options)?Un.options:[])):console.warn("Invalid 'ask_followup_question' format.");else if(!G)throw new Error("AI response did not result in a recognized or performed function call.")}catch(Oe){Oi("parse_json_actions",Oe,O)}else throw new Error("AI response did not contain a recognized function call.")},pd=async O=>{const G=i.trim()?`

`:"",W=`Question: ${za}
Answer: ${O}`,ce=`${i}${G}${W}`;Il(null),Ys([]),ce.trim()&&await hd(ce)},qc=O=>{O!==null&&navigator.clipboard.writeText(O).catch(G=>{})},Ir=(O,G="Document")=>{const W=window.open("","_blank","height=600,width=800");W?(W.document.write(`<html><head><title>${G}</title>`),W.document.write(`
                <style>
                    body { font-family: sans-serif; margin: 20px; line-height: 1.6; color: #333; }
                    h1, h2, h3, h4, h5, h6 { margin-top: 1em; margin-bottom: 0.5em; color: #000; }
                    ul, ol { margin-bottom: 1em; padding-left: 20px; }
                    table { border-collapse: collapse; width: 100%; margin-bottom: 1rem; border: 1px solid #dee2e6; font-size: 0.9em; }
                    th, td { padding: 0.75rem; vertical-align: top; border: 1px solid #dee2e6; text-align: left; }
                    th { background-color: #f8f9fa; font-weight: bold; }
                    .section-title { font-weight: bold; margin-top: 1.5em; margin-bottom: 0.5em; border-bottom: 1px solid #ccc; padding-bottom: 5px; font-size: 1.2em; }
                    .item-content { margin-bottom: 0.5em; }
                    .date-group { font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; }
                    .abnormal-result { color: #dc3545; font-weight: bold; }
                    .reactive-result { color: #28a745; font-weight: bold; }
                    .report-test-name { font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; font-size: 1.1em; }
                    .report-markdown-content { white-space: pre-wrap; } /* Preserve whitespace for markdown */

                    @media print {
                        .unavailable-drug-text {
                            color: black !important;
                            text-decoration: underline !important;
                            font-weight: normal !important;
                        }
                        body, html {
                            margin: 0;
                            padding: 0;
                            -webkit-print-color-adjust: exact; /* For Chrome/Safari */
                            print-color-adjust: exact; /* Standard */
                        }
                        table {
                            page-break-inside: avoid;
                        }
                        .section-title, .report-test-name {
                            page-break-after: avoid;
                        }
                    }
                </style>
            `),W.document.write("</head><body>"),W.document.write(O),W.document.write("</body></html>"),W.document.close(),W.focus(),setTimeout(()=>{W.print(),W.close()},250)):alert("Could not open print window. Please check your browser's popup blocker settings.")},gd=()=>{rt.current&&Ir(rt.current.innerHTML,"AI Summary")},yd=()=>{Ir(Ol,"Patient Details")},zl=()=>{let O="";if(O+="<h2>Patient Demographics</h2>",f?(O+=`<p><strong>Name:</strong> ${f.name||"N/A"}</p>`,O+=`<p><strong>Token Number:</strong> ${f.patient_token_number||"N/A"}</p>`,O+=`<p><strong>Age:</strong> ${f.age||"N/A"}</p>`,O+=`<p><strong>Gender:</strong> ${f.gender||"N/A"}</p>`,O+=`<p><strong>Phone Number:</strong> ${f.phone||"N/A"}</p>`):O+="<p>No patient details available.</p>",O+='<h2 class="section-title">Case Summary</h2>',E){const G=E.replace(/\n/g,"<br/>");O+=`<div class="item-content report-markdown-content">${G}</div>`,V&&(O+=`<p><em>Last Edited: ${new Date(V).toLocaleDateString()}</em></p>`)}else O+="<p>No case summary available.</p>";return O+='<h2 class="section-title">Complaints History</h2>',oa.length>0?oa.forEach(G=>{O+=`<p class="item-content"><strong>Complaint:</strong> ${G.data.complaint} <em>(${new Date(G.originalDateString).toLocaleDateString()})</em></p>`}):O+="<p>No past complaints.</p>",O+='<h2 class="section-title">Pharmacy Order History</h2>',xr.length>0?xr.forEach(G=>{O+=`<p class="item-content"><strong>Order:</strong> ${G.data.medications.map(W=>{let ce=`${W.name} Qty: ${W.quantity}`;return W.tabletsPerDay&&W.numberOfDays&&(ce+=` (${W.tabletsPerDay}/${W.numberOfDays}d)`),W.directions_to_use&&(ce+=` - Directions: ${W.directions_to_use}`),ce}).join(", ")} <em>(${G.data.status}, ${new Date(G.originalDateString).toLocaleDateString()})</em></p>`,G.data.prescriptionForUnavailableDrugs&&(O+=`<p class="item-content text-sm text-gray-600 mt-1"><strong>Prescription:</strong> <span class="unavailable-drug-text" style="color: #dc3545;">${G.data.prescriptionForUnavailableDrugs}</span></p>`)}):O+="<p>No pharmacy orders.</p>",O+='<h2 class="section-title">Lab History (Orders & Reports)</h2>',yr.length>0?yr.forEach(G=>{if(O+=`<p class="item-content"><strong>Lab Order:</strong> ${G.data.tests.map(W=>W.name).join(", ")} <em>(${G.data.status}, ${new Date(G.originalDateString).toLocaleDateString()})</em></p>`,G.data.report){O+='<div style="margin-left: 20px;">',O+=`<p class="item-content"><strong>Report:</strong> <em>(${new Date(G.data.report.report_date).toLocaleDateString()})</em></p>`;try{const W=G.data.report.report_content,ce=JSON.parse(W||"{}");typeof ce=="object"&&ce!==null&&G.data.report.tests?G.data.report.tests.forEach(_e=>{O+=`<h5 class="report-test-name">${_e.name}</h5>`,ce[_e.id]?(O+='<table class="lab-inventory-table"><thead><tr><th>Parameter</th><th>Value</th><th>Normal Range</th></tr></thead><tbody>',Object.entries(ce[_e.id]).forEach(([Oe,it])=>{var dt;const Fe=(dt=_e.default_parameters)==null?void 0:dt.find(ct=>ct.name===Oe),Un=typeof it=="string"?parseFloat(it):typeof it=="number"?it:NaN,Ye=(Fe==null?void 0:Fe.type)==="number"&&!isNaN(Un)&&(Fe.lower_limit!=null&&Un<Fe.lower_limit||Fe.upper_limit!=null&&Un>Fe.upper_limit),Ke=(Fe==null?void 0:Fe.type)==="boolean"?it===!0||it==="true"?"Reactive":"Non-Reactive":String(it),Ue=(Fe==null?void 0:Fe.type)==="boolean"&&(it===!0||it==="true");O+="<tr>",O+=`<td>${Oe}</td>`,O+=`<td class="${Ye?"abnormal-result":""} ${Ue?"reactive-result":""}">${Ke} ${(Fe==null?void 0:Fe.unit)||""}</td>`,O+="<td>",Fe&&Fe.type==="number"&&(Fe.lower_limit!==null||Fe.upper_limit!==null)?(Fe.lower_limit!=null&&(O+=` > ${Fe.lower_limit}`),Fe.lower_limit!=null&&Fe.upper_limit!=null&&(O+=" - "),Fe.upper_limit!=null&&(O+=` < ${Fe.upper_limit}`),Fe.unit&&(O+=` ${Fe.unit}`)):(Fe==null||Fe.type,O+="N/A"),O+="</td>",O+="</tr>"}),O+="</tbody></table>"):O+='<p class="italic">No parameters reported for this test.</p>'}):O+=`<div class="report-markdown-content">${W.replace(/\n/g,"<br/>")}</div>`}catch{O+=`<div class="report-markdown-content">${G.data.report.report_content.replace(/\n/g,"<br/>")||"*No findings recorded.*"}</div>`}O+="</div>"}}):O+="<p>No lab history.</p>",O};_.useEffect(()=>{dd(zl())},[f,E,V,oa,xr,yr,bt]),_.useEffect(()=>{let O;if(me){let G=0;Tl(la[G]),O=setInterval(()=>{G=(G+1)%la.length,Tl(la[G])},2e3)}return()=>{O&&clearInterval(O)}},[me,la]);const xd=async(O,G)=>{Te(!0),Be(null);try{const W={ai_response:G},ce=await pe(`/api/patients/${O}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!ce.ok){const _e=await ce.json().catch(()=>({}));throw new Error(_e.message||`Failed to save AI response to patient: ${ce.statusText}`)}}catch(W){Be(`AI Response Save Error: ${W.message}`)}finally{Te(!1)}},di=B||me||Ge,$l=()=>{s("reports came,please anaylse"),setTimeout(()=>{vr()},0)},Ul=O=>{Ic(G=>({...G,[O]:!G[O]}))},uh=O=>{O.key==="Enter"&&!O.shiftKey&&(O.preventDefault(),!di&&!Ta&&!ie&&i.trim()&&t&&vr())};_.useEffect(()=>{const O=window.SpeechRecognition||window.webkitSpeechRecognition;if(!O){rs("Speech recognition not supported in this browser.");return}const G=new O;return G.continuous=!0,G.interimResults=!0,G.lang="en-US",G.onresult=W=>{let ce="";for(let _e=W.resultIndex;_e<W.results.length;++_e)W.results[_e].isFinal&&(ce+=W.results[_e][0].transcript);ce&&s(_e=>_e+(_e.endsWith(" ")||_e===""?"":" ")+ce)},G.onerror=W=>{rs(`Speech error: ${W.error}`),Lc(!1)},G.onend=()=>{},qs.current=G,()=>{qs.current&&qs.current.stop()}},[]);const Li=async()=>{if(h)if(Ia){Po(!0);try{const O=await pe(`/api/patients/${h}/discharge`,{method:"POST"});if(!O.ok){const G=await O.json().catch(()=>({}));throw new Error(G.message||`Failed to discharge patient: ${O.status}`)}aa(h)}catch(O){X(`Discharge Error: ${O.message}`)}finally{Po(!1)}}else{wl(!0);try{const O=await pe(`/api/patients/${h}/admit`,{method:"POST"});if(!O.ok){const G=await O.json().catch(()=>({}));throw new Error(G.message||`Failed to admit patient: ${O.status}`)}aa(h)}catch(O){X(`Admit Error: ${O.message}`)}finally{wl(!1)}}},Or=async O=>{if(h){Ma(!0);try{const W=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:h})});if(!W.ok){const ce=await W.json().catch(()=>({}));throw new Error(ce.message||`Failed to add patient to ${O} queue: ${W.status}`)}alert(`Patient added to ${O} queue successfully!`),h&&(aa(h),zc(h))}catch(G){X(`Add to Queue Error: ${G.message}`)}finally{Ma(!1)}}},Qi=async()=>{if(t){Ri(!0),X(null);try{const O=await pe(`/api/queue/${t}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"seen"})});if(!O.ok){const G=await O.json().catch(()=>({}));throw new Error(G.message||"Failed to complete consultation")}alert("Consultation completed successfully!"),h&&(aa(h),zc(h))}catch(O){X(`Error completing consultation: ${O.message}`)}finally{Ri(!1)}}},Vc=async()=>{if(!h){Yi("Missing Patient ID.");return}if(!f){Yi("Patient details not loaded.");return}Bs(!0),Yi(null);try{const O={};let G=!1;if(Us!==f.name&&(O.name=Us,G=!0),Oa!==f.age&&(O.age=Oa,G=!0),Mo!==f.gender&&(O.gender=Mo,G=!0),Cl!==f.phone&&(O.phone=Cl,G=!0),!G){Yi("No changes detected."),Bs(!1),$s(!1);return}const W=await pe(`/api/patients/${h}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!W.ok){const _e=await W.json().catch(()=>({}));throw new Error(_e.message||`Failed to update patient details: ${W.statusText}`)}const ce=await W.json();y(ce),S(ce.age),j(ce.gender),kr(ce.name),Ro(ce.age),Io(ce.gender),_l(ce.phone),$s(!1)}catch(O){Yi(`Save Error: ${O.message}`)}finally{Bs(!1)}},vd=_.useCallback(()=>{if(!f)return null;const O={token_number:f.patient_token_number||"N/A",name:f.name||"N/A",age:f.age||"N/A",gender:f.gender||"N/A",phone:f.phone||"N/A"};return oa.length>0?O.complaints_history=oa.map(G=>`${G.data.complaint} (${new Date(G.originalDateString).toLocaleDateString()})`).join("; "):O.complaints_history="No past complaints.",xr.length>0?O.pharmacy_orders_history=xr.map(G=>`Order: ${G.data.medications.map(ce=>`${ce.name} Qty: ${ce.quantity}`).join(", ")} (${G.data.status}, ${new Date(G.originalDateString).toLocaleDateString()})`).join("; "):O.pharmacy_orders_history="No pharmacy orders.",yr.length>0?O.lab_orders_history=yr.map(G=>{let ce=`Lab Order: ${G.data.tests.map(_e=>_e.name).join(", ")} (${G.data.status}, ${new Date(G.originalDateString).toLocaleDateString()})`;return G.data.report&&(ce+=` - Report: ${G.data.report.report_content} (${new Date(G.data.report.report_date).toLocaleDateString()})`),ce}).join("; "):O.lab_orders_history="No lab history.",O},[f,oa,xr,yr]),bd=()=>{if(!f){rs("Patient details are required to use the Live API.");return}Al(!0)},Hc=()=>{var O;(O=La.current)==null||O.click()},dh=O=>{var W;const G=(W=O.target.files)==null?void 0:W[0];G&&Vs(G)};return r.jsxs("div",{className:"edit-complaint-page",style:{height:`${Qe}px`},children:[El&&f&&r.jsx(rj,{onClose:()=>Al(!1),patientData:vd(),tokenNumber:f.patient_token_number?String(f.patient_token_number):null,onAiSummaryChange:O=>{O&&(s(O),vr(O),Al(!1))}}),r.jsxs("div",{className:"edit-complaint-header",children:[r.jsx("button",{onClick:()=>n(-1),disabled:di,className:"back-button",title:"Go Back",children:"< Back"}),r.jsx("span",{ref:Ie,style:{position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap"}}),f&&r.jsx("div",{className:"edit-complaint-patient-details",children:f&&!is?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{$s(!0),kr(f.name||""),Ro(f.age),Io(f.gender),_l(f.phone),Yi(null)},className:"edit-button mr-2",title:"Edit Patient Details",disabled:Gi,children:r.jsx(Ym,{size:14})}),f.name??"N/A",f.patient_token_number!==null&&f.patient_token_number!==void 0&&` (${f.patient_token_number})`," - ",f.age??"N/A"," / ",f.gender??"N/A",f.phone&&` / ${f.phone}`]}):f&&is?r.jsxs("div",{className:"patient-details-edit-form",children:[r.jsx("input",{type:"text",value:Us,onChange:O=>kr(O.target.value),placeholder:"Name",className:"edit-input",disabled:Gi}),r.jsx("input",{type:"number",value:Oa??"",onChange:O=>Ro(O.target.value?parseInt(O.target.value):null),placeholder:"Age",className:"edit-input",disabled:Gi}),r.jsxs("select",{value:Mo??"",onChange:O=>Io(O.target.value||null),className:"edit-input",disabled:Gi,children:[r.jsx("option",{value:"",children:"Select Gender"}),r.jsx("option",{value:"",children:"Select Gender"}),r.jsx("option",{value:"M",children:"Male"}),r.jsx("option",{value:"F",children:"Female"}),r.jsx("option",{value:"O",children:"Other"})]}),r.jsx("input",{type:"text",value:Cl??"",onChange:O=>_l(O.target.value||null),placeholder:"Phone Number",className:"edit-input",disabled:Gi}),r.jsxs("div",{className:"edit-actions",children:[r.jsx("button",{onClick:()=>{$s(!1),Yi(null)},className:"button-secondary",disabled:Gi,children:"Cancel"}),r.jsx("button",{onClick:Vc,className:"button-primary blue",disabled:Gi,children:Gi?"Saving...":"Save"})]}),jl&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:jl})]}):r.jsxs("div",{className:"edit-complaint-patient-details",children:[x??"N/A"," / ",w??"N/A"]})}),!f&&x!==void 0&&w!==void 0&&r.jsxs("div",{className:"edit-complaint-patient-details",children:[x??"N/A"," / ",w??"N/A"]}),r.jsx("div",{style:{width:"64px"}})]}),r.jsxs("div",{className:"edit-complaint-content-area",ref:nn,children:[r.jsxs("div",{className:"edit-complaint-main-column",style:{flexBasis:`calc(${100-Je}% - 5px)`},children:[se&&r.jsxs("div",{className:"general-error-message",children:["Error: ",se]}),ie&&r.jsx("div",{className:"ai-function-status info text-center",children:"Creating record..."}),me&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:Fa})}),je&&r.jsx("div",{className:"ai-error-message",children:je}),Dn&&r.jsxs("div",{className:`ai-function-status ${Dn.toLowerCase().includes("error:")?"error":Dn.toLowerCase().startsWith("order created")||Dn.toLowerCase().startsWith("success:")?"success":"info"}`,children:[ah&&r.jsx("span",{className:"animate-spin",role:"status"}),Dn]}),Eo&&r.jsxs("div",{className:`ai-function-status ${Eo.toLowerCase().includes("error:")?"error":Eo.toLowerCase().startsWith("success:")||Eo.toLowerCase().startsWith("lab order created")?"success":"info"}`,children:[Ea&&r.jsx("span",{className:"animate-spin",role:"status"}),Eo]}),Ao&&r.jsxs("div",{className:`ai-function-status ${Ao.toLowerCase().includes("error:")?"error":"info"}`,children:[sd&&r.jsx("span",{className:"animate-spin",role:"status"}),Ao]}),ka&&r.jsxs("div",{className:`ai-function-status ${ka.toLowerCase().includes("error:")?"error":"info"}`,children:[Ls&&r.jsx("span",{className:"animate-spin",role:"status"}),ka]}),ta&&r.jsxs("div",{className:`ai-function-status ${ta.toLowerCase().includes("error:")?"error":"info"}`,children:[od&&r.jsx("span",{className:"animate-spin",role:"status"}),ta]}),Ne&&r.jsxs("div",{className:"general-error-message",children:["Error saving AI response: ",Ne]}),Ge&&r.jsx("div",{className:"ai-function-status info text-center",children:"Saving AI response..."}),(ve||de)&&r.jsxs("div",{ref:rt,className:`${de?"ai-function-call-block":"ai-response-container"} group`,children:[ve&&r.jsx(Sc,{remarkPlugins:[Nc],children:ve}),de&&r.jsxs("div",{className:"ai-json-details-container",children:[r.jsxs("button",{onClick:()=>ne(!H),className:"ai-json-toggle-button",children:[H?r.jsx(Jy,{size:14,className:"mr-1"}):r.jsx(Wy,{size:14,className:"mr-1"}),H?"Hide":"Show"," AI Function Call Details"]}),H&&r.jsx("pre",{className:"ai-json-pre",children:r.jsx("code",{children:JSON.stringify(JSON.parse(de),null,2)})})]}),r.jsxs("div",{className:"ai-response-actions",children:[r.jsx("button",{onClick:()=>qc(K),disabled:!K,title:"Copy Full AI Response",children:r.jsx(pA,{size:12})}),r.jsx("button",{onClick:gd,disabled:!K,title:"Print AI Response",children:r.jsx(Ky,{size:12})})]})]})]}),r.jsx("div",{className:"draggable-divider",onMouseDown:Ll}),r.jsx("div",{className:"edit-complaint-context-column",style:{flexBasis:`calc(${Je}% - 5px)`},children:r.jsxs("div",{className:"ai-context-container",children:[r.jsxs("h3",{className:"ai-context-header",children:[r.jsx("span",{children:"AI Context:"}),r.jsx("div",{className:"ai-context-actions-top",children:r.jsxs("button",{onClick:yd,disabled:!Ol,title:"Print All Patient Details",className:"context-action-button",children:[r.jsx(Ky,{size:14})," Print"]})}),(f==null?void 0:f.insurance_type)&&r.jsx("div",{className:"insurance-type-container mt-2",children:r.jsxs("select",{ref:ci,value:f.insurance_type,onChange:O=>cd(f.id,O.target.value),className:"insurance-type-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"insurance",children:"Insurance"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})})]}),r.jsxs("div",{className:"ai-context-section",children:[r.jsx("h4",{className:"ai-context-section-title",children:"Admission Status"}),(f==null?void 0:f.admission_date)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Admitted:"})," ",new Date(f.admission_date).toLocaleDateString()]}),(f==null?void 0:f.discharge_date)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Discharged:"})," ",new Date(f.discharge_date).toLocaleDateString()]}),(f==null?void 0:f.current_status)&&r.jsxs("p",{className:"ai-context-text",children:[r.jsx("strong",{children:"Current Status:"})," ",r.jsx("span",{className:"font-semibold",children:f.current_status})]}),r.jsxs("div",{className:"flex space-x-2 mt-2",children:[r.jsx("button",{onClick:Li,className:`admit-discharge-button ${Ia?"discharge":"admit"}`,title:Ia?"Discharge Patient":"Admit Patient",disabled:!h||Ci||Sl,children:Ci?"Admitting...":Sl?"Discharging...":Ia?"Discharge":"Admit"}),r.jsx("button",{onClick:()=>Or("doctor"),className:`queue-status-button ${ns?"in-queue":"add-to-queue"}`,title:ns?"Patient is in Doctor Queue":"Add Patient to Doctor Queue",disabled:!h||Nl||ns,children:Nl?"Adding...":ns?"In Queue":"Add to Queue"}),r.jsx("button",{onClick:Qi,className:"complete-consultation-button",title:"Mark Consultation as Complete",disabled:Oc,children:Oc?"Completing...":"Complete Consultation"})]})]}),r.jsx(_b,{title:"Pharmacy Order History",headerAction:r.jsx("button",{onClick:lh,className:"button-primary blue text-xs px-2 py-1",disabled:sn||tn.filter(O=>O.status==="pending").length<2,title:"Merge all pending orders into one",children:sn?"Merging...":"Merge Orders"}),items:xr,onDeleteItem:Fo,onEditPharmacyOrder:Ji,onPrintUnavailablePrescription:Ir,onBillPharmacyOrder:ud,onDispensePharmacyOrder:$c,isLoading:!1,loadingText:"Loading...",noDataText:"No orders.",renderItemContent:(O,G)=>r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs("span",{className:"ai-context-text",children:[xr.length-G,". ",O.data.medications.map((W,ce)=>r.jsxs(_.Fragment,{children:[ce>0&&", ",r.jsx("strong",{children:W.name})," Qty: ",W.quantity,W.tabletsPerDay&&W.numberOfDays?` (${W.tabletsPerDay}/${W.numberOfDays}d)`:"",W.directions_to_use&&r.jsxs("span",{className:"text-gray-500 text-xs ml-1",children:["(Directions: ",W.directions_to_use,")"]})]},W.drug_id||W.name||ce))," (",O.data.status,")",O.data.prescriptionForUnavailableDrugs&&r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[r.jsx("span",{className:"font-semibold",children:"Prescription:"})," ",O.data.prescriptionForUnavailableDrugs]}),r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(O.originalDateString).toLocaleDateString(),")"]})]}),r.jsxs("div",{className:"flex space-x-2 mt-2",children:[O.data.status==="pending"&&r.jsxs("button",{onClick:()=>ud(O.data.id),className:"pharmacy-bill-button",title:"Bill this pharmacy order",disabled:Ni,children:[r.jsx(Ku,{size:12,className:"mr-1"})," Bill"]}),O.data.status==="billed"&&r.jsxs("button",{onClick:()=>$c(O.data.id,"dispensed"),className:"pharmacy-dispense-button",title:"Dispense this pharmacy order",disabled:Ni,children:[r.jsx(Xa,{size:12,className:"mr-1"})," Dispense"]})]})]}),labInventory:ea,isSavingLabOrder:Ni,expandedLabReports:Fs,toggleLabReport:Ul}),r.jsx(_b,{title:"Lab History (Orders & Reports)",headerAction:r.jsx("button",{onClick:$l,className:"button-primary blue text-xs px-2 py-1",title:"Tell AI to analyse the reports",disabled:di,children:"Analyse Reports"}),items:yr,onDeleteItem:Fo,onEditLabOrder:Mr,onSaveLabOrder:oh,onCancelEditLabOrder:Rl,onLabOrderTestChange:Uc,onLabOrderStatusChange:_n,onBillLabOrder:sa,onUpdateLabOrderStatus:Ml,onEnterLabReport:sh,onViewLabReport:Bc,labInventory:ea,isSavingLabOrder:Ni,isLoading:ia||tt,loadingText:"Loading...",noDataText:"No lab Hx.",expandedLabReports:Fs,toggleLabReport:Ul,renderItemContent:(O,G)=>{const W=OV(O.data.report?O.data.report.status:O.data.status);return r.jsxs("div",{className:"ai-context-text",children:[O.data.serialNumber,". ",r.jsx("span",{className:"font-medium",children:"[Order]"})," ",O.data.tests&&O.data.tests.length>0?O.data.tests.map(ce=>r.jsx("strong",{children:ce.name},ce.id||ce.name)).reduce((ce,_e)=>[ce,", ",_e]):r.jsx("span",{className:"italic text-gray-500",children:"No tests specified"})," ","(",r.jsx("span",{className:W.className,children:W.text}),")",r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(O.originalDateString).toLocaleDateString(),")"]}),O.data.report&&r.jsxs("div",{className:"ml-4 mt-1 p-2 border-l-2 border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"[Report]"}),r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(O.data.report.report_date).toLocaleDateString(),")"]}),r.jsx("button",{onClick:()=>Ul(O.data.report.reportId),className:"text-blue-600 hover:text-blue-800 p-1 rounded hover:bg-blue-100 focus:outline-none focus:ring-1 focus:ring-blue-400",title:Fs[O.data.report.reportId]?"Collapse Report":"Expand Report",children:Fs[O.data.report.reportId]?r.jsx(Jy,{size:14}):r.jsx(Wy,{size:14})})]}),Fs[O.data.report.reportId]&&(()=>{try{const ce=JSON.parse(O.data.report.report_content||"{}");return typeof ce=="object"&&ce!==null&&O.data.report.tests?O.data.report.tests.map(_e=>r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("h5",{className:"font-semibold text-sm mt-2 mb-1",children:_e.name}),ce[_e.id]?r.jsxs("table",{className:"lab-inventory-table w-full text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-1 px-2",children:"Parameter"}),r.jsx("th",{className:"py-1 px-2",children:"Value"}),r.jsx("th",{className:"py-1 px-2",children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(ce[_e.id]).map(([Oe,it])=>{var Un;const Fe=(Un=_e.default_parameters)==null?void 0:Un.find(Ye=>Ye.name===Oe);return r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 px-2",children:Oe}),r.jsxs("td",{className:"py-1 px-2",children:[String(it)," ",(Fe==null?void 0:Fe.unit)||""]}),r.jsx("td",{className:"py-1 px-2",children:(()=>{if(Fe&&Fe.type==="number"&&(Fe.lower_limit!=null||Fe.upper_limit!=null)){let Ye="";return Fe.lower_limit!=null&&(Ye+=` > ${Fe.lower_limit}`),Fe.lower_limit!=null&&Fe.upper_limit!=null&&(Ye+=" - "),Fe.upper_limit!=null&&(Ye+=` < ${Fe.upper_limit}`),Ye.trim()||"N/A"}else if((Fe==null?void 0:Fe.type)==="boolean")return"N/A";return(Fe==null?void 0:Fe.normal_range)||"N/A"})()})]},Oe)})})]}):r.jsx("p",{className:"italic text-gray-500 text-xs",children:"No parameters reported for this test."})]},_e.id)):r.jsx(Sc,{remarkPlugins:[Nc],children:O.data.report.report_content})}catch{return r.jsx(Sc,{remarkPlugins:[Nc],children:O.data.report.report_content||"*No findings recorded.*"})}})()]})]})}}),r.jsx(_b,{title:"Complaints History",items:oa,isLoading:Qn,loadingText:"Loading...",noDataText:"No past Hx.",renderItemContent:(O,G)=>r.jsxs("span",{className:"ai-context-text",children:[O.data.complaint,r.jsxs("span",{className:"text-gray-400 ml-1",children:["(",new Date(O.originalDateString).toLocaleDateString(),")"]})]}),onDeleteItem:Fo,labInventory:ea,isSavingLabOrder:Ni,expandedLabReports:Fs,toggleLabReport:Ul}),r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h4",{className:"ai-context-section-title",children:[r.jsx(dp,{size:16,className:"text-purple-600"})," Clinic-wide System Prompt"]}),!Rr&&r.jsx("button",{onClick:Ws,className:"edit-button",title:"Edit System Prompt",disabled:kl||vn||ss,children:r.jsx(Ym,{size:14})})]}),Rr&&bt?r.jsxs("div",{className:"mt-2",children:[r.jsx("textarea",{value:ra,onChange:O=>Oo(O.target.value),className:"context-edit-textarea",placeholder:"Enter clinic system prompt...",disabled:vn||ss}),r.jsxs("div",{className:"context-edit-actions",children:[r.jsx("button",{onClick:Js,disabled:vn||ss,className:"button-secondary",children:"Cancel"}),r.jsxs("button",{onClick:Fl,disabled:vn||ss||Pr===bt.aiMemory&&ra===bt.clinicWideSystemPrompt,className:"button-primary purple",children:[r.jsx(id,{size:14,className:"mr-1"}),ss||vn?"Saving...":"Save Settings"]})]})]}):r.jsx("div",{className:"ai-context-text whitespace-pre-wrap mt-1 prose prose-sm max-w-none",children:bt!=null&&bt.clinicWideSystemPrompt?r.jsx(Sc,{remarkPlugins:[Nc],children:bt.clinicWideSystemPrompt}):r.jsx("span",{className:"italic text-gray-400",children:"N/A - Click edit to add."})}),!Rr&&(bt==null?void 0:bt.clinicWideSystemPromptUpdatedAt)&&r.jsxs("p",{className:"ai-context-text text-gray-400 mt-1",style:{fontSize:"0.625rem"},children:["Prompt Last Updated: ",new Date(bt.clinicWideSystemPromptUpdatedAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"ai-context-section",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h4",{className:"ai-context-section-title",children:"Case Summary"}),!k&&r.jsx("button",{onClick:ch,className:"edit-button",title:"Edit Case Summary",disabled:B||F,children:r.jsx(Ym,{size:14})})]}),k?r.jsxs("div",{className:"mt-2",children:[r.jsx("textarea",{value:R,onChange:O=>Y(O.target.value),className:"context-edit-textarea",rows:4,placeholder:"Enter case summary...",disabled:F}),z&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:z}),r.jsxs("div",{className:"context-edit-actions",children:[r.jsx("button",{onClick:fd,disabled:F,className:"button-secondary",children:"Cancel"}),r.jsx("button",{onClick:Ii,disabled:F||R===E,className:"button-primary blue",children:F?"Saving...":"Save"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"ai-context-text whitespace-pre-wrap mt-1 prose prose-sm max-w-none",children:E?r.jsx(Sc,{remarkPlugins:[Nc],components:{},children:E}):r.jsx("span",{className:"italic text-gray-400",children:"N/A - Click edit to add."})}),V&&r.jsxs("p",{className:"ai-context-text text-gray-400 mt-1",style:{fontSize:"0.625rem"},children:["Last Edited: ",new Date(V).toLocaleDateString()]})]})]}),oa.length===0&&yr.length===0&&xr.length===0&&!(Qn||ia||tt)&&r.jsx("p",{className:"ai-context-text italic mt-4",children:"No recent history for this patient."}),xl&&r.jsx("p",{className:"text-yellow-600 text-xs mt-2 ai-context-text",children:"Deleting..."}),vl&&r.jsx("p",{className:"text-red-600 text-xs mt-2 ai-context-text",children:vl})]})})]}),r.jsxs("div",{className:"edit-complaint-input-area",children:[r.jsxs("div",{className:"status-messages-container",children:[Pi&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:Pi}),Qn&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading past complaints..."})}),Le&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:Le}),ia&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading pending lab orders..."})}),ko&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:ko}),Ta&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading inventory..."})}),To&&r.jsx("p",{className:"text-center text-red-500 text-xs mb-1",children:To}),B&&r.jsx("div",{className:"loading-animation-container",children:r.jsx("div",{className:"loading-text",children:"Loading..."})})]}),t&&!ie&&r.jsxs(_.Fragment,{children:[za&&r.jsxs("div",{className:"follow-up-question-container",children:[r.jsx("p",{className:"question-text",children:za}),zo.length>0&&r.jsx("div",{className:"options-grid",children:zo.map((O,G)=>r.jsx("button",{onClick:()=>pd(O),className:"option-button",children:O},G))})]}),Fc&&r.jsx("div",{className:"speech-error-display",children:Fc}),Wi&&r.jsxs("div",{className:"selected-file-display",children:[r.jsxs("span",{children:["Selected: ",Wi.name]}),r.jsx("button",{onClick:()=>{Vs(null),La.current&&(La.current.value="")},className:"remove-file-button",title:"Remove image",children:"×"})]}),r.jsx("div",{className:"input-wrapper",children:r.jsxs("div",{className:"main-input-container",children:[r.jsx("input",{type:"file",ref:La,onChange:dh,accept:"image/*",className:"hidden"}),r.jsx("textarea",{ref:zt,className:"complaint-textarea",value:i,onChange:O=>s(O.target.value),onKeyDown:uh,placeholder:"name,age,sex,phone,complaints,reports,history",disabled:di||!t||Dr}),r.jsxs("div",{className:"chat-input-actions-container",children:[h&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>n(`/patient/${h}/lab-reports`),disabled:tt||!h,className:"icon-button",title:"View Lab Reports",children:r.jsx(Tc,{size:14})}),r.jsx("button",{onClick:()=>n("/inventory"),disabled:Ta,className:"icon-button",title:"View Inventory",children:r.jsx(Xm,{size:14})})]}),r.jsx("button",{type:"button",onClick:Hc,disabled:di||!t||Dr,className:"icon-button",title:"Attach Image",children:r.jsx(VA,{size:14})}),r.jsx("button",{type:"button",onClick:bd,disabled:di||!t||!qs.current,className:`mic-button ${Dr?"listening":""}`,title:Dr?"Stop":"Mic",children:r.jsx(uC,{size:14})}),r.jsx("button",{onClick:()=>vr(),disabled:di||Ta||ie||!i.trim()||!t||Dr,className:"send-button",title:di||Ta||ie?"Processing...":"Save & Ask AI",children:di?r.jsx("span",{className:"animate-spin",role:"status","aria-label":"loading"}):r.jsx(Ab,{size:14})})]})]})})]})]})]})},qV=()=>{const{patientId:t}=Ar(),n=Tt(),[e,i]=_.useState([]),[s,l]=_.useState(null),[c,h]=_.useState(!1),[m,f]=_.useState(null);_.useEffect(()=>{(async()=>{if(!t){f("Patient ID not provided.");return}h(!0),f(null);try{const S=await pe(`/api/patients/${t}`);if(!S.ok)throw new Error(`Failed to fetch patient details: ${S.status}`);const w=await S.json();l({name:w.name,age:w.age,gender:w.gender});const j=await pe(`/api/patients/${t}/complaints`);if(j.ok){const A=(await j.json()).sort((k,P)=>new Date(P.createdAt).getTime()-new Date(k.createdAt).getTime());i(A)}else if(j.status===404)i([]);else throw new Error(`Failed to fetch complaints: ${j.status}`)}catch(S){console.error("Error fetching past complaints or patient info:",S),f(`Failed to load data. ${S.message}`),i([]),l(null)}finally{h(!1)}})()},[t]);const y=x=>{navigator.clipboard.writeText(x).then(()=>console.log("Complaint copied to clipboard")).catch(S=>console.error("Failed to copy complaint: ",S))};return r.jsxs("div",{className:"container mx-auto p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("button",{onClick:()=>n(-1),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-3 rounded text-sm",children:"< Back"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center flex-grow",children:"Past Complaints"}),r.jsx("div",{className:"w-16"})," "]}),s&&r.jsxs("div",{className:"mb-4 p-2 bg-gray-100 rounded text-center text-sm sm:text-base",children:["Patient: ",r.jsx("strong",{children:s.name})," (",s.age??"N/A"," / ",s.gender??"N/A",")"]}),m&&r.jsxs("div",{className:"text-red-500 p-3 mb-4 border border-red-500 rounded bg-red-50 text-sm",children:["Error: ",m]}),c&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading..."}),!c&&e.length===0&&!m&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No past complaints found for this patient."}),!c&&e.length>0&&r.jsx("div",{className:"space-y-4",children:e.map(x=>r.jsxs("div",{className:"p-3 border rounded shadow-sm bg-white group relative",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(x.createdAt).toLocaleString()}),r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.complaint}),r.jsx("button",{onClick:()=>y(x.complaint),className:"absolute top-1 right-1 bg-gray-200 hover:bg-gray-300 text-gray-600 text-xs p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy complaint text",children:"📋"})]},x.id))})]})},Py=500,UN="defaultConsultationFee",VV=({patientId:t,billId:n,queueId:e,onBillCreated:i,onBillUpdated:s,initialItems:l=[],billType:c="other",relatedId:h,initialStatus:m="pending",initialDiscountPercentage:f=0,readOnlyMode:y=!1,doctorId:x,labOrderId:S,patientInsuranceType:w})=>{const[j,E]=_.useState(null),[A,k]=_.useState([]),[P,R]=_.useState(""),[Y,F]=_.useState(""),[q,z]=_.useState(1),[L,V]=_.useState(f),[M,B]=_.useState("cash"),[ee,ie]=_.useState(!1),[te,se]=_.useState(null),[X,K]=_.useState(!1),[re,ve]=_.useState(!1),[I,de]=_.useState(!1),[ae,H]=_.useState(null),[,ne]=_.useState([]),[me,ue]=_.useState(null),[je,ge]=_.useState(""),[Ge,Te]=_.useState("cash"),[Ne,Be]=_.useState(!1),[Qe,$e]=_.useState(Py),[ht,Cn]=_.useState(Py.toString()),tt=n?"view_pay":"create";_.useEffect(()=>{const Ie=localStorage.getItem(UN),Je=Ie?parseFloat(Ie):Py;isNaN(Je)||($e(Je),Cn(Je.toString()))},[]);const li=l.length===0;_.useEffect(()=>{t?(async()=>{ie(!0),se(null);try{const Je=await pe(`/api/patients/${t}`);if(!Je.ok){const lt=await Je.json().catch(()=>({}));throw new Error(lt.message||"Failed to fetch patient details")}const Ve=await Je.json();E(Ve)}catch(Je){se(`Failed to load patient details: ${Je.message}`),E(null)}finally{ie(!1)}})():E(null)},[t]),_.useEffect(()=>{n?(async()=>{de(!0),se(null),H(null),ne([]),ue(null);try{const Je=await pe(`/api/bills/${n}`);if(!Je.ok){const lt=await Je.json().catch(()=>({}));throw new Error(lt.message||"Failed to fetch bill details")}const Ve=await Je.json();if(!Ve.bill||!Ve.payments||!Ve.calculated)throw new Error("Invalid bill details structure.");H(Ve.bill),ne(Ve.payments),ue(Ve.calculated),V(Ve.bill.discount_percentage!==void 0&&Ve.bill.discount_percentage!==null?parseFloat(Ve.bill.discount_percentage.toString()):0),!j&&Ve.bill.patient_id&&Pi(Ve.bill.patient_id.toString())}catch(Je){se(`Failed to load bill details: ${Je.message}`),H(null),ne([]),ue(null)}finally{de(!1)}})():(H(null),ne([]),ue(null))},[n]);const Pi=async Ie=>{ie(!0);try{const Je=await pe(`/api/patients/${Ie}`);if(!Je.ok)throw new Error("Failed to fetch patient");const Ve=await Je.json();E(Ve)}catch(Je){console.error("Error fetching patient details:",Je),E(null)}finally{ie(!1)}},ei=_.useCallback(async Ie=>{ve(!0),se(null);const Je=Ie.filter(Ve=>Ve.drug_id!=null).map(async Ve=>{try{const lt=await pe(`/api/drugs/${Ve.drug_id}`);if(!lt.ok)throw new Error(`Drug ${Ve.drug_id} not found.`);const Dt=await lt.json();return{...Ve,price:Dt.price,total:Dt.price*Ve.quantity}}catch{return se(Dt=>`${Dt?Dt+"; ":""}Failed to fetch price for ${Ve.name}`),Ve}});try{const Ve=await Promise.all(Je);k(lt=>{const Dt=new Map(Ve.map(nn=>[nn.id,nn]));return lt.map(nn=>Dt.get(nn.id)||nn)})}catch{}finally{ve(!1)}},[pe]);_.useEffect(()=>{n||(async()=>{let Je=[];if(l&&l.length>0)Je=l.map((Ve,lt)=>({...Ve,id:`initial-${lt}-${Date.now()}`})),B(m==="paid"?"cash":w==="no_cash_insurance"?"no_cash_insurance":"cash"),V(f),c==="pharmacy"&&!y&&ei(Je);else if(t&&li&&c==="consultation"){let Ve=Qe;if(x)try{const lt=await pe(`/api/staff/${x}`);if(!lt.ok){const nn=await lt.json().catch(()=>({}));throw new Error(nn.message||"Doctor not found or error fetching fee")}const Dt=await lt.json();Dt.opd_fee!=null&&!isNaN(parseFloat(String(Dt.opd_fee)))&&parseFloat(String(Dt.opd_fee))>=0&&(Ve=parseFloat(String(Dt.opd_fee)))}catch(lt){se(Dt=>`${Dt?Dt+"; ":""}Could not fetch doctor's fee, using default. (${lt.message})`)}Je=[{id:Date.now(),name:"Consultation Fee",price:Ve,quantity:1,total:Ve*1,drug_id:null}],B(w==="no_cash_insurance"?"no_cash_insurance":"cash")}else Je=[],B(w==="no_cash_insurance"?"no_cash_insurance":"cash");k(Je)})()},[n,t,x,l,c,Qe,li,m,y,ei,f,w]);const tn=()=>{const Ie=parseFloat(Y);if(!y)if(P&&!isNaN(Ie)&&Ie>=0&&q>0){if(P.trim().toLowerCase()==="consultation fee"&&A.some(Ve=>Ve.name.toLowerCase()==="consultation fee")){alert("Consultation Fee already added.");return}const Je={id:Date.now(),name:P.trim(),price:Ie,quantity:q,total:Ie*q,drug_id:null};k([...A,Je]),R(""),F(""),z(1)}else alert("Invalid item details.")},vi=Ie=>{y||k(A.filter(Je=>Je.id!==Ie))},zn=_.useMemo(()=>{let Ie=A.reduce((Je,Ve)=>Je+Ve.total,0);return tt==="create"&&L>0&&(Ie=Ie*(1-L/100)),(me==null?void 0:me.totalDue)!==void 0&&(me==null?void 0:me.totalDue)!==null?me.totalDue:Ie},[A,me,L,tt]),Hi=_.useMemo(()=>(me==null?void 0:me.totalPaid)??0,[me]),Qn=_.useMemo(()=>(me==null?void 0:me.balance)!==void 0&&(me==null?void 0:me.balance)!==null?me.balance:zn-Hi,[me,zn,Hi]),Ee=()=>{const Ie=parseFloat(ht);!isNaN(Ie)&&Ie>=0?($e(Ie),localStorage.setItem(UN,Ie.toString()),alert(`Default Fee set to ₹${Ie.toFixed(2)}`)):alert("Invalid fee amount.")},Le=async(Ie,Je)=>{K(!0),se(null);try{const Ve=await pe("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Je,billId:Ie})}),lt=await Ve.json();if(!Ve.ok||!lt.order)throw new Error(lt.message||"Failed to create Razorpay order.");const{key_id:Dt,order:nn}=lt,_a={key:Dt,amount:nn.amount,currency:nn.currency,name:"Newtons OPD Zero Clinic",description:`Bill Payment for Patient ID: ${t}`,order_id:nn.id,handler:async function(ja){try{const Si=await pe("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_payment_id:ja.razorpay_payment_id,razorpay_order_id:ja.razorpay_order_id,razorpay_signature:ja.razorpay_signature,billId:Ie})}),Zr=await Si.json();if(Si.ok&&Zr.success)alert("Payment Successful!"),i&&i(Ie),s&&s(),setTimeout(()=>window.print(),200);else throw new Error(Zr.message||"Payment verification failed.")}catch(Si){se(`Payment verification failed: ${Si.message}. Contact support.`)}finally{K(!1)}},prefill:{name:(j==null?void 0:j.name)||""},notes:{bill_id:Ie,patient_id:t},theme:{color:"#3399cc"},modal:{ondismiss:function(){se("Payment cancelled."),K(!1)}}};if(window.Razorpay)new window.Razorpay(_a).open();else throw new Error("Razorpay SDK not loaded.")}catch(Ve){se(`Failed to initiate online payment: ${Ve.message}`),K(!1)}},nt=async()=>{if(!n){se("Bill ID is missing.");return}if(!je||isNaN(parseFloat(je))||parseFloat(je)<=0){se("Please enter a valid positive payment amount.");return}Be(!0),se(null);const Ie={amount_paid:parseFloat(je),payment_mode:Ge};try{const Je=await pe(`/api/bills/${n}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ie)}),Ve=await Je.json();if(!Je.ok)throw new Error(Ve.message||`Failed to record payment (Status: ${Je.status})`);alert(`Payment of ₹${Ie.amount_paid.toFixed(2)} recorded.`),ge(""),s?s():console.log("Payment recorded.")}catch(Je){se(`Failed to record payment: ${Je.message}`)}finally{Be(!1)}},rt=async()=>{if(tt==="view_pay")return;if(!t){se("Patient ID is missing for creating a bill.");return}if(A.length===0){se("Cannot finalize an empty bill.");return}K(!0),se(null);const Ie=zn,Je=A.map(({id:Ve,...lt})=>lt);if(M==="online"){const Ve={patientId:t,queueId:e||null,items:Je,amount:Ie,paymentMode:"online",type:c,related_id:h||S||null,status:"pending",discountPercentage:L,labOrderId:S||null};try{const lt=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ve)}),Dt=await lt.json();if(!lt.ok)throw new Error(Dt.message||"Failed to create pending bill.");Le(Dt.id,Math.round(Ie*100))}catch(lt){se(`Failed to create pending bill: ${lt.message}`),K(!1)}}else{const Ve="paid";if(!M){se("Payment mode required."),K(!1);return}const lt={patientId:t,queueId:e||null,items:Je,amount:Ie,paymentMode:M,type:c,related_id:h||S||null,status:Ve,discountPercentage:L,labOrderId:S||null};setTimeout(()=>window.print(),200);try{const Dt=await pe("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(lt)}),nn=await Dt.json();if(!Dt.ok)throw new Error(nn.message||"Failed to create bill.");alert("Bill marked as paid!"),i&&i(nn.id),K(!1)}catch(Dt){se(`Failed to process bill: ${Dt.message}`),K(!1)}}},zt=(ae==null?void 0:ae.type)??c,xn=(ae==null?void 0:ae.status)??m,ci=tt==="view_pay"&&ae&&xn==="pending";return!t&&!n?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow text-gray-500",children:"Select patient or provide Bill ID."}):ee||tt==="view_pay"&&I?r.jsx("div",{className:"p-6 bg-white rounded-lg shadow",children:"Loading..."}):tt==="view_pay"&&!ae&&!I&&te?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading bill: ",te]}):tt==="create"&&!j&&!ee&&te?r.jsxs("div",{className:"p-6 bg-white rounded-lg shadow text-red-600",children:["Error loading patient: ",te]}):r.jsxs("div",{className:"billing-component-container printable-section",children:[r.jsxs("div",{className:"billing-header",children:[r.jsx("h2",{children:tt==="create"?"Create Bill":"Bill Details"}),tt==="create"&&c==="consultation"&&!y&&r.jsxs("div",{className:"default-fee-section",children:[r.jsx("label",{htmlFor:"defaultFee",className:"whitespace-nowrap",children:"Default Fee:"}),r.jsx("input",{id:"defaultFee",type:"number",value:ht,onChange:Ie=>Cn(Ie.target.value),className:"",placeholder:Py.toString(),disabled:y}),r.jsx("button",{onClick:Ee,title:"Set Default Fee",className:"",disabled:y,children:r.jsx(id,{size:16})})]})]}),te&&!I&&!Ne&&r.jsxs("div",{className:"error-message",role:"alert",children:[r.jsx("strong",{children:"Error: "}),te]}),j&&r.jsxs("div",{className:"patient-details-section",children:[r.jsx("h3",{children:"Patient Details"}),r.jsxs("p",{children:[r.jsx("strong",{children:"ID:"})," ",j.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",j.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Age:"})," ",j.age||"N/A",", ",r.jsx("strong",{children:"Gender:"})," ",j.gender||"N/A"]})]}),r.jsxs("div",{className:"bill-items-summary-section",children:[r.jsxs("div",{className:"bill-items-header",children:[r.jsx("h3",{children:tt==="create"?"Bill Items":"Billing Summary"}),tt==="create"&&c==="pharmacy"&&!y&&A.some(Ie=>Ie.drug_id!=null)&&r.jsxs("button",{onClick:()=>ei(A),disabled:re,className:"refresh-prices-button",title:"Refresh item prices from inventory",children:[r.jsx(kb,{size:14,className:`lucide ${re?"animate-spin":""}`}),re?"Refreshing...":"Refresh"]})]}),tt==="view_pay"&&ae&&r.jsxs("div",{className:"bill-info-bar",children:[r.jsxs("span",{children:["Bill ID: ",r.jsx("strong",{children:ae.id})]}),r.jsxs("span",{children:["Type: ",r.jsx("strong",{className:"capitalize",children:zt})]}),r.jsxs("span",{children:["Status: ",r.jsx("strong",{className:`capitalize ${xn==="paid"?"status-paid":"status-pending"}`,children:xn})]})]}),(tt==="create"||tt==="view_pay"&&ae)&&r.jsxs("div",{className:"bill-items-list",children:[tt==="create"&&re&&A.length>0&&r.jsx("div",{className:"loading-placeholder",children:"Updating prices..."}),tt==="create"&&!re&&A.map((Ie,Je)=>r.jsxs("div",{className:"bill-item",children:[r.jsxs("div",{className:"bill-item-details",children:[r.jsxs("span",{children:[Je+1,". ",Ie.name]}),Ie.quantity>1&&r.jsxs("span",{className:"bill-item-quantity",children:["(Qty: ",Ie.quantity,")"]})]}),r.jsxs("div",{className:"bill-item-price-actions",children:[r.jsxs("span",{className:"bill-item-price",children:["₹",Ie.total.toFixed(2)]}),tt==="create"&&typeof Ie.id=="number"&&!y&&r.jsxs("button",{onClick:()=>vi(Ie.id),className:"remove-item-button",title:"Remove",children:[" ",r.jsx(Vi,{size:16})," "]}),(typeof Ie.id!="number"||y||Ie.name==="Consultation Fee")&&r.jsxs("span",{className:"lock-icon",title:"Cannot remove",children:[" ",r.jsx(F1,{size:14})," "]})]})]},Ie.id)),tt==="view_pay"&&ae&&ae.items.map((Ie,Je)=>r.jsxs("div",{className:"bill-item",children:[r.jsxs("div",{className:"bill-item-details",children:[r.jsxs("span",{children:[Je+1,". ",Ie.name]}),Ie.quantity>1&&r.jsxs("span",{className:"bill-item-quantity",children:["(Qty: ",Ie.quantity,")"]})]}),r.jsxs("div",{className:"bill-item-price-actions",children:[r.jsxs("span",{className:"bill-item-price",children:["₹",(Ie.total??Ie.price*Ie.quantity).toFixed(2)]}),r.jsxs("span",{className:"lock-icon",title:"Cannot remove from existing bill",children:[" ",r.jsx(F1,{size:14})," "]})]})]},Je)),tt==="create"&&A.length===0&&r.jsx("p",{className:"empty-items-message",children:"No items added."}),tt==="view_pay"&&ae&&ae.items.length===0&&r.jsx("p",{className:"empty-items-message",children:"No items in bill."})]}),tt==="create"&&!y&&r.jsxs("div",{className:"add-item-form",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Item"}),r.jsx("input",{type:"text",value:P,onChange:Ie=>R(Ie.target.value),placeholder:"Service/Item",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{flexGrow:.5,minWidth:"80px"},children:[r.jsx("label",{children:"Qty"}),r.jsx("input",{type:"number",min:"1",value:q,onChange:Ie=>z(parseInt(Ie.target.value)||1),placeholder:"1",className:"custom-text-input"})]}),r.jsxs("div",{className:"form-group",style:{flexGrow:.7,minWidth:"100px"},children:[r.jsx("label",{children:"Price (₹)"}),r.jsx("input",{type:"number",value:Y,onChange:Ie=>F(Ie.target.value),placeholder:"0.00",className:"custom-text-input"})]}),r.jsx("button",{onClick:tn,className:"add-item-button",children:"Add"})]})]})," ",r.jsxs("div",{className:"billing-footer",children:[r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Total Amount:"}),r.jsxs("span",{className:"total-amount-value",children:["₹",typeof zn=="number"?zn.toFixed(2):"0.00"]}),tt==="create"&&!y&&r.jsxs("div",{className:"discount-section",children:[r.jsx("label",{htmlFor:"discountPercentage",className:"whitespace-nowrap",children:"Discount (%):"}),r.jsx("input",{id:"discountPercentage",type:"number",min:"0",max:"100",step:"0.01",value:L,onChange:Ie=>V(parseFloat(Ie.target.value)||0),className:"",disabled:y||X})]}),tt==="view_pay"&&ae&&(ae.status==="pending"||ae.status==="paid")&&r.jsxs("div",{className:"discount-section",children:[r.jsx("label",{className:"whitespace-nowrap",children:"Discount (%):"}),r.jsxs("span",{className:"discount-value",children:[L.toFixed(2),"%"]})]})]}),tt==="view_pay"&&me&&r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Amount Paid:"}),r.jsxs("span",{className:"total-amount-value",children:["₹",Hi.toFixed(2)]})]}),tt==="view_pay"&&me&&r.jsxs("div",{className:"total-amount-section",children:[r.jsx("span",{className:"total-amount-label",children:"Balance Due:"}),r.jsxs("span",{className:"total-amount-value",children:["₹",Qn.toFixed(2)]})]}),r.jsxs("div",{className:"footer-actions",children:[tt==="create"&&!y&&r.jsxs("div",{className:"action-group",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Payment Mode"}),r.jsxs("select",{value:M,onChange:Ie=>B(Ie.target.value),className:"custom-select-input",disabled:y||X,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"online",children:"Pay Online (Razorpay)"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),r.jsx("button",{onClick:rt,disabled:X||A.length===0||y,className:"finalize-button",children:X?"Processing...":"Finalize Bill"})]}),tt==="view_pay"&&ci&&!y&&r.jsxs("div",{className:"action-group",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Record Payment Amount (₹)"}),r.jsx("input",{type:"number",value:je,onChange:Ie=>ge(Ie.target.value),placeholder:`Max: ${Qn.toFixed(2)}`,className:"custom-text-input",disabled:Ne})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Payment Mode"}),r.jsxs("select",{value:Ge,onChange:Ie=>Te(Ie.target.value),className:"custom-select-input",disabled:Ne,children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"upi",children:"UPI"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),r.jsx("button",{onClick:nt,disabled:Ne||!je||parseFloat(je)<=0||parseFloat(je)>Qn,className:"record-payment-button",children:Ne?"Recording...":"Record Payment"})]}),tt==="create"&&y&&A.length>0&&r.jsx("div",{className:"status-message read-only",children:"Read-only."}),tt==="view_pay"&&xn==="paid"&&r.jsx("div",{className:"status-message paid",children:"PAID."}),tt==="view_pay"&&xn==="cancelled"&&r.jsx("div",{className:"status-message cancelled",children:"CANCELLED."})]})]})]})},HV=()=>{const t=Tt(),n=Kr(),{patientId:e,queueId:i,patientName:s,initialItems:l,billType:c,relatedId:h,initialStatus:m,initialDiscountPercentage:f,doctorId:y,billId:x,labOrderId:S}=n.state||{},[w,j]=_.useState(null),[E,A]=_.useState(null),[k,P]=_.useState(null),[R,Y]=_.useState(null),[F,q]=_.useState(null),[z,L]=_.useState(null),[V,M]=_.useState(null),[B,ee]=_.useState(null),[ie,te]=_.useState(!0),[se,X]=_.useState(null),[K,re]=_.useState(s||"");_.useEffect(()=>{if(!e){console.error("BillingPage loaded without required patientId in location state."),t("/");return}(async()=>{te(!0),X(null);try{let ne=e,me=l||null,ue=m||null,je=c||null,ge=h||null,Ge=f!==void 0?parseFloat(f):null,Te=s||null,Ne=null;if(x){console.log(`Fetching details for Bill ID: ${x}`);const Be=await pe(`/api/bills/${x}`);if(!Be.ok){const $e=await Be.json().catch(()=>({message:`Failed to fetch bill details for ID ${x}`}));throw new Error($e.message||`Failed to fetch bill details (Status: ${Be.status})`)}const Qe=await Be.json();if(console.log("Fetched Bill Data:",Qe),me=Qe.bill.items||[],ue=Qe.bill.status||"pending",je=Qe.bill.type||null,ge=Qe.bill.related_id||null,Ge=Qe.bill.discount_percentage!==void 0&&Qe.bill.discount_percentage!==null?parseFloat(Qe.bill.discount_percentage):0,ne=Qe.bill.patient_id,Y(me),q(ue),L(je),M(ge),ee(Ge),ne){const $e=await pe(`/api/patients/${ne}`);if($e.ok){const ht=await $e.json();Te=ht.name,Ne=ht.phone??null,P(ht.insurance_type??null),re(Te),A(Ne)}else console.warn(`Could not fetch patient details for ID ${ne} from bill.`),re("Patient (Not Found)")}else console.warn(`Bill ${x} does not have an associated patient_id.`),re("Patient (Unknown)")}else if(S){console.log(`Fetching details for Lab Order ID: ${S}`);const Be=await pe(`/api/lab/${S}`);if(!Be.ok){let $e=`Failed to fetch lab order details (Status: ${Be.status} ${Be.statusText})`;try{$e=(await Be.json()).message||$e}catch{console.error("Response was not valid JSON:",await Be.text())}throw new Error($e)}const Qe=await Be.json();if(console.log("Fetched Lab Order Data:",JSON.stringify(Qe,null,2)),me=(Qe.tests||[]).filter($e=>$e&&typeof $e.name=="string"&&$e.price!==void 0&&$e.id!==void 0).map($e=>{const ht=parseFloat($e.price||"0"),Cn=!isNaN(ht)&&isFinite(ht)?ht:0;return{item_id:$e.id,name:$e.name,price:Cn,quantity:1,total:Cn*1,type:"lab_test"}}),me&&me.length===0&&(Qe.tests||[]).length>0&&(console.warn("Warning: Some tests from the lab order were filtered out due to missing id, name, or price.",Qe.tests),X($e=>`${$e?$e+"; ":""}Warning: Some lab items could not be added to the bill due to missing details.`)),ue="pending",je="lab",ge=S,ne=Qe.patient_id,Y(me),q(ue),L(je),M(ge),ne){const $e=await pe(`/api/patients/${ne}`);if($e.ok){const ht=await $e.json();Te=ht.name,Ne=ht.phone??null,P(ht.insurance_type??null),re(Te),A(Ne)}else console.warn(`Could not fetch patient details for ID ${ne} from lab order.`),re("Patient (Not Found)")}else console.warn(`Lab Order ${S} does not have an associated patient_id.`),re("Patient (Unknown)")}else if(Y(l||null),q(m||null),L(c||null),M(h||null),ee(f!==void 0?parseFloat(f):null),re(s||`ID ${e}`),ne){const Be=await pe(`/api/patients/${ne}`);if(Be.ok){const Qe=await Be.json();A(Qe.phone??null),P(Qe.insurance_type??null)}else console.warn(`Could not fetch patient details for ID ${ne}.`)}if(i){const Be=await pe(`/api/queue/${i}`);if(Be.ok){const Qe=await Be.json();j(Qe.token_number)}else console.warn(`Could not fetch queue details for ID ${i}.`)}}catch(ne){console.error("Error fetching billing page details:",ne),X(`Failed to load details: ${ne.message}`),Y(null),q(null),L(null),M(null),re(s||""),A(null),j(null)}finally{te(!1)}})()},[e,x,S,i,t]);const ve=H=>{console.log(`Billing process completed for patient ID ${e}. New Bill ID: ${H}`),t(-1)},I=()=>{console.log(`Bill updated for patient ID ${e}.`),t(-1)};if(!e)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-gray-600",children:[r.jsx(z1,{size:48,className:"mb-4 text-red-500"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Missing Patient Information"}),r.jsx("p",{className:"text-sm",children:"Cannot load the billing page without a patient ID."}),r.jsx("button",{onClick:()=>t("/"),className:"mt-4 px-4 py-2 bg-teal-600 text-white rounded hover:bg-teal-700",children:"Go to Dashboard"})]});if(ie)return r.jsx("div",{className:"min-h-screen bg-neutral-light flex items-center justify-center",children:r.jsx("p",{className:"text-teal-600 animate-pulse",children:"Loading Billing Details..."})});if(se)return r.jsxs("div",{className:"min-h-screen bg-neutral-light flex flex-col items-center justify-center text-red-600 p-4",children:[r.jsx(z1,{size:48,className:"mb-4"}),r.jsx("p",{className:"text-lg font-medium mb-2",children:"Error Loading Billing Details"}),r.jsx("p",{className:"text-sm text-center mb-4",children:se}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),r.jsx("button",{onClick:()=>t(-1),className:"mt-2 text-sm text-gray-600 hover:text-teal-700",children:"Go Back"})]});const ae=(F??m)==="paid";return r.jsxs("div",{className:"billing-page-container",children:[r.jsx("div",{className:"back-button-container",children:r.jsxs("button",{onClick:()=>t(-1),className:"back-button",title:"Go Back",children:[r.jsx(en,{size:20,className:"lucide"})," Back"]})}),r.jsxs("div",{className:"billing-content-wrapper",children:[r.jsxs("h3",{className:"billing-page-title",children:[x?"Bill Details":S?"Create Lab Bill":"Create Bill"," for Patient: ",K||`ID ${e}`]}),r.jsxs("div",{className:"patient-info-bar",children:[w!==null&&r.jsxs("span",{children:[r.jsx(CA,{size:14,className:"lucide"})," Token: ",w]}),E&&r.jsxs("span",{children:[r.jsx(JA,{size:14,className:"lucide"})," Phone: ",E]}),S&&r.jsxs("span",{className:"lab-order-info",children:[r.jsx(Qy,{size:14,className:"lucide"})," Lab Order: ",S.substring(0,8),"..."]}),!E&&w===null&&!S&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"}),k&&r.jsxs("span",{className:"insurance-info",children:[r.jsx(dk,{size:14,className:"lucide"})," Insurance: ",k.replace(/_/g," ").replace(/\b\w/g,H=>H.toUpperCase())]}),!E&&w===null&&!S&&!k&&r.jsx("span",{className:"placeholder-text",children:"(Token/Phone not available)"})]}),r.jsx(VV,{patientId:e,labOrderId:S,queueId:i,onBillCreated:ve,onBillUpdated:I,initialItems:R??l,billType:z??c,relatedId:V??h,initialStatus:F??m,initialDiscountPercentage:B??f,readOnlyMode:ae,doctorId:y,patientInsuranceType:k??void 0})]})]})},GV=()=>{const{patientId:t}=Ar(),n=Tt(),[e,i]=_.useState([]),[s,l]=_.useState(!1),[c,h]=_.useState(null),[m,f]=_.useState("");return _.useEffect(()=>{(async()=>{if(!t){h("Patient ID not provided in URL.");return}l(!0),h(null),i([]);try{try{const w=await pe(`/api/patients/${t}`);if(w.ok){const j=await w.json();f(j.name)}}catch(w){console.warn("Could not fetch patient name:",w)}console.log(`Fetching pharmacy orders for patient ID: ${t}`);const x=await pe(`/api/pharmacy-orders/patient/${t}`);if(!x.ok){const w=await x.json().catch(()=>({}));throw new Error(w.message||`HTTP error! status: ${x.status}`)}const S=await x.json();console.log("Fetched Pharmacy Orders:",S),i(S||[])}catch(x){console.error("Error fetching pharmacy orders:",x),h(`Failed to load pharmacy orders: ${x.message}`)}finally{l(!1)}})()},[t]),r.jsxs("div",{className:"p-4 md:p-6 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b pb-3",children:[r.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-sm text-gray-600 hover:text-gray-900",children:[r.jsx(en,{size:16,className:"mr-1"}),"Back"]}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[r.jsx(Xm,{size:20,className:"mr-2 text-purple-600"}),"Pharmacy Order History ",m&&`for ${m}`]}),r.jsx("div",{})," "]}),s&&r.jsx("p",{className:"text-center text-gray-500",children:"Loading pharmacy orders..."}),c&&r.jsx("p",{className:"text-center text-red-500 bg-red-100 p-3 rounded border border-red-300",children:c}),!s&&e.length===0&&!c&&r.jsx("p",{className:"text-center text-gray-500",children:"No pharmacy orders found for this patient."}),!s&&e.length>0&&r.jsx("div",{className:"space-y-4",children:e.map(y=>r.jsxs("div",{className:"p-4 border rounded bg-white shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Date:"})," ",new Date(y.date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm font-medium capitalize",children:[r.jsx("strong",{children:"Status:"})," ",y.status]})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Prescribed By:"})," ",y.prescribedBy||"N/A"]}),y.dispensedBy&&r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:"Dispensed By:"})," ",y.dispensedBy]}),r.jsx("h4",{className:"text-md font-semibold mt-3 mb-1",children:"Medications:"}),r.jsx("ul",{className:"list-disc list-inside ml-4 text-sm text-gray-700 space-y-1",children:y.medications.map((x,S)=>r.jsxs("li",{children:[x.name," - Qty: ",x.quantity,x.tabletsPerDay&&` (${x.tabletsPerDay} per day`,x.numberOfDays&&` for ${x.numberOfDays} days)`,!x.tabletsPerDay&&x.numberOfDays&&` (for ${x.numberOfDays} days)`,x.tabletsPerDay&&!x.numberOfDays&&")"]},S))})]},y.id))})]})},YV=()=>{const t=Tt(),n=Kr(),[e,i]=_.useState(null),[s,l]=_.useState([]),[c,h]=_.useState([]),[m,f]=_.useState(""),[y,x]=_.useState([]),[S,w]=_.useState(null),[j,E]=_.useState(!1),[A,k]=_.useState(""),[P,R]=_.useState(!0),[Y,F]=_.useState(""),[q,z]=_.useState([]),[L,V]=_.useState(!1),[M,B]=_.useState(null),ee=_.useCallback(async()=>{try{const ne=await pe("/api/drugs");if(!ne.ok)throw new Error("Failed to fetch drugs");const me=await ne.json();l(me)}catch(ne){console.error("Failed to fetch available drugs:",ne),w("Could not load drug list. "+ne.message)}},[]);_.useEffect(()=>{var ne;ee(),(ne=n.state)!=null&&ne.patient?se(n.state.patient):R(!0)},[ee,n.state]),_.useEffect(()=>{if(!m){x([]);return}const ne=m.toLowerCase();x(s.filter(me=>me.name.toLowerCase().includes(ne)).slice(0,10))},[m,s]);const ie=_.useMemo(()=>T0(async ne=>{if(ne.trim().length<2){z([]),V(!1),B(null);return}V(!0),B(null);try{const me=new URLSearchParams({search:encodeURIComponent(ne),page:"1",limit:"10",sortBy:"name",sortOrder:"asc"}),ue=await pe(`/api/patients?${me.toString()}`);if(!ue.ok){const ge=await ue.text();throw new Error(`API Error (${ue.status}): ${ge||ue.statusText}`)}const je=await ue.json();z(je.patients)}catch(me){console.error("Error searching patients:",me),B(me.message||"Failed to search patients."),z([])}finally{V(!1)}},300),[]),te=ne=>{const me=ne.target.value;F(me),V(!0),ie(me)},se=ne=>{i(ne),R(!1),F(""),z([]),B(null)},X=()=>{i(null),R(!0),h([]),w(null)},K=ne=>{if(c.some(me=>me.drug_id===ne.id)){w(`${ne.name} is already in the order.`),setTimeout(()=>w(null),3e3),f(""),x([]);return}h(me=>[...me,{drug_id:ne.id,name:ne.name,quantity:1*1,tabletsPerDay:1,numberOfDays:1,price:Number(ne.price)||0,stock:ne.quantity_in_stock}]),f(""),x([])},re=()=>{const ne=m.trim();if(!ne){w("Please enter a drug name to navigate to the add drug page."),setTimeout(()=>w(null),3e3);return}t("/dashboard/inventory/add",{state:{initialDrugName:ne}}),f(""),x([])},ve=(ne,me)=>{const ue=Math.max(1,me);h(je=>je.map(ge=>{if((ge.drug_id??ge.name)===ne){const Te=ue*(ge.numberOfDays??1);return{...ge,tabletsPerDay:ue,quantity:Te}}return ge}))},I=(ne,me)=>{const ue=Math.max(1,me);h(je=>je.map(ge=>{if((ge.drug_id??ge.name)===ne){const Te=(ge.tabletsPerDay??1)*ue;return{...ge,numberOfDays:ue,quantity:Te}}return ge}))},de=ne=>{h(me=>me.filter(ue=>(ue.drug_id??ue.name)!==ne))},ae=async ne=>{if(ne.preventDefault(),w(null),E(!0),!e){w("No patient selected for the order."),E(!1);return}if(c.length===0&&!A.trim()){w("Please add at least one medication or provide a prescription for unavailable drugs."),E(!1);return}const me=c.filter(je=>je.quantity<=0||je.stock!==void 0&&je.quantity>je.stock);if(me.length>0){w(`Invalid quantity or insufficient stock for: ${me.map(je=>je.name).join(", ")}`),E(!1);return}const ue={patient_id:e.id,items:c.map(({drug_id:je,name:ge,quantity:Ge,tabletsPerDay:Te,numberOfDays:Ne,directions_to_use:Be})=>({drug_id:je,name:ge,quantity:Ge,tabletsPerDay:Te,numberOfDays:Ne,directions_to_use:Be})),prescription_for_unavailable_drugs:A};try{const je=await pe("/api/pharmacy-orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!je.ok){const ge=await je.json();throw new Error(ge.message||`Failed to create order: ${je.statusText}`)}alert(`Pharmacy order created successfully for ${e.name}!`),t(-1)}catch(je){console.error("Failed to create pharmacy order:",je),w(je.message||"Failed to create order. Please try again.")}finally{E(!1)}},H=_.useMemo(()=>c.reduce((ne,me)=>ne+(me.price??0)*me.quantity,0),[c]);return r.jsxs("div",{className:"add-pharmacy-order-page p-4 md:p-6 max-w-5xl mx-auto",children:[" ",r.jsxs("div",{className:"page-header flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 pb-4",children:[" ",r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button p-2 rounded-full mr-3",title:"Go Back",children:[r.jsx(en,{size:20})," "]}),r.jsx("h2",{className:"text-2xl",children:"Create New Pharmacy Order"})," "]})]}),P&&r.jsxs("div",{className:"content-section",children:[" ",r.jsx("h3",{className:"section-title",children:"Select Patient"})," ",r.jsxs("div",{className:"mb-3 relative",children:[r.jsx("label",{htmlFor:"patient-search",className:"form-label",children:"Search Patient (Name, Token, or Phone)"})," ",r.jsx("input",{type:"text",id:"patient-search",placeholder:"Search by Name, Token No, or Phone No (min 2 chars)...",value:Y,onChange:te,className:"custom-text-input mt-1",autoFocus:!0}),L&&r.jsx("span",{className:"absolute right-3 top-9 text-xs text-gray-400",children:"Searching..."})]}),M&&r.jsx("div",{className:"ai-function-status error mb-3 p-3",children:M})," ",q.length>0&&r.jsxs("div",{className:"patient-search-results max-h-64 overflow-y-auto rounded-md shadow-sm mt-1 z-10",children:[" ",r.jsxs("ul",{children:[" ",q.map(ne=>r.jsxs("li",{onClick:()=>se({id:ne.id,name:ne.name,token:ne.token,age:ne.age,gender:ne.gender,phone:ne.phone}),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center",children:[r.jsxs("div",{className:"font-medium",children:[r.jsxs("span",{className:"patient-token mr-2",children:["#",ne.token]}),ne.name]}),r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:mt-0",children:[ne.age?`${ne.age} yrs`:"Age N/A",ne.gender?` / ${ne.gender}`:" / Gender N/A",ne.phone&&r.jsxs("span",{className:"hidden sm:inline",children:[" / ",ne.phone]})]})]}),ne.phone&&r.jsxs("div",{className:"patient-details-text text-xs mt-1 sm:hidden",children:["Phone: ",ne.phone]})]},ne.id))]})]}),Y.length>=2&&!L&&q.length===0&&!M&&r.jsxs("p",{className:"text-gray-400 mt-2 text-sm",children:['No patients found matching "',Y,'".']}),Y.length<2&&!L&&r.jsx("p",{className:"text-gray-400 mt-2 text-sm",children:"Enter at least 2 characters to search."})]}),e&&!P&&r.jsxs("form",{onSubmit:ae,children:[r.jsxs("div",{className:"selected-patient-info content-section flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[" ",r.jsxs("div",{children:[r.jsxs("h3",{className:"section-title",children:[" ","Patient: ",r.jsx("span",{className:"font-normal",children:e.name})]}),r.jsxs("p",{className:"text-sm mt-1",children:["Token: ",r.jsx("span",{className:"font-medium",children:e.token??"N/A"}),e.age&&`  •  Age: ${e.age}`,e.gender&&`  •  Gender: ${e.gender}`,e.phone&&`  •  Phone: ${e.phone}`]}),r.jsxs("p",{className:"text-xs mt-1",title:`Patient UUID: ${e.id}`,children:["ID: ",e.id.substring(0,12),"..."]})]}),r.jsx("button",{type:"button",onClick:X,className:"change-patient-button mt-2 sm:mt-0 px-3 py-1.5 border rounded-md text-sm font-medium focus:outline-none focus:ring-2",children:"Change Patient"})]}),S&&r.jsx("div",{className:"ai-function-status error mb-4 p-3",children:S})," ",r.jsxs("div",{className:"mb-4 content-section",children:[r.jsx("label",{htmlFor:"prescription-unavailable",className:"form-label",children:"Prescription for Unavailable Drugs (Optional)"}),r.jsx("textarea",{id:"prescription-unavailable",rows:3,value:A,onChange:ne=>k(ne.target.value),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"custom-text-input mt-1 w-full"})]}),r.jsxs("div",{className:"mb-4 relative content-section",children:[" ",r.jsx("label",{htmlFor:"drug-search",className:"form-label",children:"Add Medication"})," ",r.jsx("input",{type:"text",id:"drug-search",placeholder:"Search for drug name or type to add custom...",value:m,onChange:ne=>f(ne.target.value),className:"custom-text-input mt-1"}),m&&r.jsxs("div",{className:"drug-search-dropdown mt-1 w-full max-h-60 rounded-md border shadow-lg overflow-auto focus:outline-none sm:text-sm z-20",children:[" ",y.length>0&&r.jsxs("ul",{children:[" ",y.map(ne=>r.jsxs("li",{onClick:()=>K(ne),className:"cursor-pointer select-none relative",children:[r.jsx("span",{className:"font-medium block truncate",children:ne.name}),r.jsxs("span",{className:"drug-stock-price text-xs",children:[" ","(Stock: ",ne.quantity_in_stock??"N/A",", Price: ₹",Number(ne.price||0).toFixed(2),")"]})]},ne.id))]}),m.trim()&&!s.some(ne=>ne.name.toLowerCase()===m.trim().toLowerCase())&&r.jsxs("div",{onClick:re,className:"add-custom-drug-button cursor-pointer text-sm font-medium",role:"button",children:['Add "',m.trim(),'" as new item']}),m.trim()&&y.length===0&&s.some(ne=>ne.name.toLowerCase()===m.trim().toLowerCase())&&r.jsx("p",{className:"text-gray-400 py-2.5 px-4 text-sm",children:"Drug already selected or no new matches."})]})]}),r.jsxs("div",{className:"order-items-section content-section max-h-96 overflow-y-auto",children:[" ",r.jsx("h4",{className:"section-title",children:"Order Items"})," ",c.length===0&&r.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No medications added yet."}),c.length>0&&r.jsx("ul",{className:"space-y-4",children:c.map(ne=>{const me=ne.drug_id??ne.name,ue=!ne.drug_id,je=(ne.price??0)*ne.quantity;return r.jsxs("li",{className:"order-item-card text-sm",children:[" ",r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3",children:[r.jsxs("div",{className:"flex-grow mb-2 md:mb-0",children:[r.jsxs("span",{className:`item-name block text-base ${ue?"custom":""}`,children:[" ",ne.name,ue?" (custom)":""]}),!ue&&ne.price!==void 0&&r.jsxs("span",{className:"item-details text-xs",children:[" ","@ ₹",(Number(ne.price)||0).toFixed(2)," each"]}),ne.stock!==void 0&&r.jsxs("span",{className:`item-details text-xs ml-2 ${ne.stock<=10?"item-stock low":""}`,children:[" ","(Stock: ",ne.stock,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-x-4 gap-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`tablets-${me}`,className:"dosage-label",children:"Per Day:"})," ",r.jsx("input",{type:"number",id:`tablets-${me}`,min:"1",value:ne.tabletsPerDay??1,onChange:ge=>{const Ge=parseInt(ge.target.value,10);ve(me,isNaN(Ge)?1:Ge)},onFocus:ge=>ge.target.select(),className:"dosage-input text-sm text-right"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("label",{htmlFor:`days-${me}`,className:"dosage-label",children:"Days:"})," ",r.jsx("input",{type:"number",id:`days-${me}`,min:"1",value:ne.numberOfDays??1,onChange:ge=>{const Ge=parseInt(ge.target.value,10);I(me,isNaN(Ge)?1:Ge)},onFocus:ge=>ge.target.select(),className:"dosage-input text-sm text-right"})]}),r.jsxs("div",{className:"flex items-center mt-1 sm:mt-0",children:[r.jsx("span",{className:"dosage-label",children:"Total Qty:"})," ",r.jsx("span",{className:"w-16 px-2 py-1 text-right font-semibold text-sm text-gray-200",children:ne.quantity})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-3 mt-2 md:mt-0 md:flex-col md:items-end",children:[r.jsxs("div",{className:"w-28 text-right font-semibold",children:[" ","₹",(Number(je)||0).toFixed(2)]}),r.jsx("button",{type:"button",onClick:()=>de(me),className:"remove-item-button p-1.5 -m-1.5 rounded-full",title:"Remove Item",children:r.jsx(Co,{size:18})})]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("label",{htmlFor:`directions-${me}`,className:"dosage-label",children:"Directions:"}),r.jsx("input",{type:"text",id:`directions-${me}`,placeholder:"e.g., 'After food', 'Twice a day'",value:ne.directions_to_use??"",onChange:ge=>{const Ge=ge.target.value;h(Te=>Te.map(Ne=>(Ne.drug_id??Ne.name)===me?{...Ne,directions_to_use:Ge}:Ne))},className:"dosage-input text-sm w-full mt-1"})]})]},me)})})]}),c.length>0&&r.jsx("div",{className:"mt-6 text-right pr-4",children:r.jsxs("span",{className:"grand-total font-bold",children:[" ","Grand Total: ₹",(Number(H)||0).toFixed(2)]})}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{type:"submit",disabled:j||c.length===0&&!A.trim(),className:`submit-order-button inline-flex items-center justify-center text-base shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 ${j||c.length===0&&!A.trim()?"":"hover:opacity-90"}`,children:j?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner animate-spin rounded-full h-5 w-5 border-2 mr-3"})," ","Creating Order..."]}):"Create Order"})})]})]})},fT=()=>{const{orderId:t}=Ar(),n=Tt(),[e,i]=_.useState([]),[s,l]=_.useState(!0),[c,h]=_.useState(!1),[m,f]=_.useState(null),[y,x]=_.useState(null),[S,w]=_.useState(""),[j,E]=_.useState([]),[A,k]=_.useState([]),[P,R]=_.useState(null);_.useEffect(()=>{const L=async()=>{if(!t){f("Order ID is missing."),l(!1);return}try{const M=await pe(`/api/pharmacy-orders/${t}`);if(!M.ok)throw new Error(`Failed to fetch order details: ${M.statusText}`);const B=await M.json(),ee=B.medications.map(ie=>({drug_id:ie.drug_id,name:ie.name,quantity:ie.quantity,tabletsPerDay:ie.tabletsPerDay,numberOfDays:ie.numberOfDays,directions_to_use:ie.directions_to_use,price:ie.price}));i(ee),k(ee.map(ie=>ie.name||"")),w(B.prescriptionForUnavailableDrugs||"")}catch(M){console.error("Error fetching order details:",M),f(M.message||"Failed to load order details.")}finally{l(!1)}},V=async()=>{try{const M=await pe("/api/drugs");if(!M.ok)throw new Error(`Failed to fetch drugs: ${M.statusText}`);const B=await M.json();E(B)}catch(M){console.error("Error fetching drugs:",M),f(B=>B?B+`
`+M.message:M.message)}};L(),V()},[t]);const Y=(L,V,M)=>{const B=[...e];if(B[L]={...B[L],[V]:M},V==="drug_id"&&M!==null){const ee=j.find(ie=>ie.id===M);ee?(B[L].name=ee.name,B[L].price=parseFloat(ee.price)):(B[L].name="",B[L].price=0)}else V==="drug_id"&&M===null&&(B[L].price=0);i(B)},F=()=>{i([...e,{name:"",quantity:1,drug_id:null,tabletsPerDay:1,numberOfDays:1,price:0}]),k([...A,""])},q=L=>{i(e.filter((V,M)=>M!==L)),k(A.filter((V,M)=>M!==L))},z=async L=>{if(L.preventDefault(),f(null),x(null),h(!0),!t){f("Order ID is missing for update."),h(!1);return}if(e.length===0){f("Please add at least one medication."),h(!1);return}if(e.some(V=>!V.name||V.quantity<=0)){f("All medications must have a name and a positive quantity."),h(!1);return}try{const V={items:e.map(B=>({drug_id:B.drug_id,name:B.name,quantity:B.quantity,tabletsPerDay:B.tabletsPerDay,numberOfDays:B.numberOfDays,directions_to_use:B.directions_to_use})),prescription_for_unavailable_drugs:S},M=await pe(`/api/pharmacy-orders/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(!M.ok){const B=await M.json();throw new Error(B.message||"Failed to update pharmacy order.")}x("Pharmacy order updated successfully!"),n(-1)}catch(V){console.error("Error updating pharmacy order:",V),f(V.message||"An unexpected error occurred.")}finally{h(!1)}};return s?r.jsx("div",{className:"loading-pulse",children:"Loading order details..."}):m&&!e.length?r.jsxs("div",{className:"error-message-box",children:["Error: ",m]}):r.jsxs("div",{className:"edit-pharmacy-order-container",children:[r.jsxs("div",{className:"edit-pharmacy-order-header",children:[r.jsxs("button",{onClick:()=>n(-1),className:"back-button",children:[r.jsx(en,{size:20})," Back"]}),r.jsx("h2",{className:"edit-pharmacy-order-title",children:"Edit Pharmacy Order"})]}),m&&r.jsx("div",{className:"error-message-box",children:m}),y&&r.jsx("div",{className:"success-message-box",children:y}),r.jsxs("form",{onSubmit:z,className:"edit-pharmacy-order-form",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{className:"section-title",children:"Prescription for Unavailable Drugs"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"prescription-unavailable",children:"Details:"}),r.jsx("textarea",{id:"prescription-unavailable",rows:4,value:S,onChange:L=>w(L.target.value),placeholder:"Enter prescription details for any drugs that are currently unavailable...",className:"form-input"})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{className:"section-title",children:"Medications"}),e.map((L,V)=>r.jsxs("div",{className:"medication-item-group",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`drug-search-${V}`,children:"Search for Drug:"}),r.jsx("input",{type:"text",id:`drug-search-${V}`,value:A[V]||"",onChange:M=>{const B=[...A];B[V]=M.target.value,k(B),R(V)},onFocus:()=>R(V),onBlur:()=>setTimeout(()=>R(null),100),placeholder:"Type to search for a drug...",className:"form-input"}),P===V&&r.jsx("ul",{className:"drug-suggestions",children:j.filter(M=>M.name.toLowerCase().includes(A[V].toLowerCase())).map(M=>r.jsxs("li",{onClick:()=>{Y(V,"drug_id",M.id);const B=[...A];B[V]=M.name,k(B),R(null)},children:[M.name," (Stock: ",M.quantity_in_stock,", Price: $",M.price,")"]},M.id))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`med-name-${V}`,children:"Medication Name:"}),r.jsx("input",{type:"text",id:`med-name-${V}`,value:L.name,onChange:M=>Y(V,"name",M.target.value),className:"form-input",readOnly:L.drug_id!==null})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`med-quantity-${V}`,children:"Quantity:"}),r.jsx("input",{type:"number",id:`med-quantity-${V}`,value:L.quantity,onChange:M=>Y(V,"quantity",parseInt(M.target.value)||0),min:"1",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`med-tablets-per-day-${V}`,children:"Tablets Per Day:"}),r.jsx("input",{type:"number",id:`med-tablets-per-day-${V}`,value:L.tabletsPerDay??"",onChange:M=>Y(V,"tabletsPerDay",parseInt(M.target.value)||1),min:"1",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`med-number-of-days-${V}`,children:"Number of Days:"}),r.jsx("input",{type:"number",id:`med-number-of-days-${V}`,value:L.numberOfDays??"",onChange:M=>Y(V,"numberOfDays",parseInt(M.target.value)||1),min:"1",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:`med-directions-${V}`,children:"Directions to Use:"}),r.jsx("input",{type:"text",id:`med-directions-${V}`,value:L.directions_to_use??"",onChange:M=>Y(V,"directions_to_use",M.target.value),placeholder:"e.g., 'After food', 'Twice a day'",className:"form-input"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Price (per unit):"}),r.jsx("input",{type:"text",value:L.price!==void 0?`$${L.price.toFixed(2)}`:"N/A",readOnly:!0,className:"form-input read-only"})]}),r.jsxs("button",{type:"button",onClick:()=>q(V),className:"remove-medication-button",children:[r.jsx(uA,{size:20})," Remove"]})]},V)),r.jsxs("button",{type:"button",onClick:F,className:"add-medication-button",children:[r.jsx(up,{size:16})," Add Medication"]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsxs("button",{type:"submit",className:"submit-button",disabled:c,children:[c?r.jsx(Zu,{size:20,className:"animate-spin"}):r.jsx(id,{size:20}),c?"Updating Order...":"Save Changes"]}),r.jsx("button",{type:"button",onClick:()=>n(-1),className:"cancel-button",children:"Cancel"})]})]})]})},WV=(t,n,e,i="non-black")=>{if(isNaN(t)||isNaN(n)||t<=0||n<=0)return null;let s;return e==="female"?t<=.7?s=141*Math.pow(t/.7,-.329)*Math.pow(.993,n):s=141*Math.pow(t/.7,-1.209)*Math.pow(.993,n):t<=.9?s=141*Math.pow(t/.9,-.411)*Math.pow(.993,n):s=141*Math.pow(t/.9,-1.209)*Math.pow(.993,n),i==="black"&&(s*=1.018),parseFloat(s.toFixed(2))},JV=(t,n,e)=>{if(isNaN(t)||isNaN(n)||isNaN(e)||t<0||n<0||e<0||e>=400)return null;const i=t-n-e/5;return parseFloat(i.toFixed(2))},QV=(t,n)=>{if(isNaN(t)||isNaN(n)||t<0||n<0)return null;const e=t-n;return parseFloat(e.toFixed(2))},KV=(t,n)=>{if(isNaN(t)||isNaN(n)||t<0||n<0)return null;const e=t-n;return parseFloat(e.toFixed(2))},XV=(t,n,e)=>{if(isNaN(t)||isNaN(n)||isNaN(e)||t<0||n<0||e<0)return null;const i=t-(n+e);return parseFloat(i.toFixed(2))},ZV=(t,n,e)=>{if(isNaN(t)||isNaN(n)||isNaN(e)||t<0||n<0||e<0)return null;const i=2*t+n/18+e/2.8;return parseFloat(i.toFixed(2))},BN=t=>["eGFR","LDL Cholesterol","Indirect Bilirubin","Globulin","Anion Gap","Osmolality"].includes(t),qN=()=>{var ee,ie;const{orderId:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState({}),[c,h]=_.useState(!0),[m,f]=_.useState(!1),[y,x]=_.useState(null),[S,w]=_.useState(new Set),[j,E]=_.useState(null),[A,k]=_.useState(null),[P,R]=_.useState({}),Y=te=>{w(se=>{const X=new Set(se);return X.has(te)?X.delete(te):X.add(te),X})},F=_.useCallback(async te=>{var se;try{const X=await pe(`/api/patients/${te}`);if(!X.ok)throw new Error(`Failed to fetch patient details: ${X.status}`);const K=await X.json();E(K.age),k(((se=K.sex)==null?void 0:se.toLowerCase())==="female"?"female":"male")}catch(X){console.error("Error fetching patient details:",X),E(null),k(null)}},[]),q=_.useCallback(async()=>{if(t){h(!0),x(null);try{const te=await pe(`/api/lab/${t}`);if(!te.ok){const K=await te.json().catch(()=>({message:`HTTP error! status: ${te.status}`}));throw new Error(K.message||`HTTP error! status: ${te.status}`)}const se=await te.json();i(se),se.patient_id&&F(se.patient_id);const X={};if(se.tests&&se.tests.forEach(K=>{X[K.id]={},K.default_parameters&&K.default_parameters.length>0?K.default_parameters.forEach(re=>{X[K.id][re.name]=re.defaultValue}):X[K.id].report_content=""}),se.report_content)try{const K=JSON.parse(se.report_content);typeof K=="object"&&K!==null&&!Array.isArray(K)?l(K):(console.warn("Legacy or unexpected report content format detected. Initializing with defaults."),l(X))}catch{console.warn("Legacy report content detected (not JSON). Initializing with defaults."),l(X)}else l(X)}catch(te){console.error("Failed to fetch lab order details:",te),x(te instanceof Error?te.message:"An unknown error occurred while fetching order details.")}finally{h(!1)}}},[t,F]);_.useEffect(()=>{t?q():(x("No Order ID provided in the URL."),h(!1))},[t,q]);const z=(te,se,X)=>{l(K=>{var $e,ht,Cn,tt,li,Pi,ei,tn,vi,zn,Hi,Qn,Ee,Le,nt,rt,zt,xn,ci;const re={...K,[te]:{...K[te],[se]:X}},ve=parseFloat(($e=re[te])==null?void 0:$e.Creatinine),I=j,de=A;if(se==="Creatinine"&&!isNaN(ve)&&I!==null&&de!==null){const Ie=WV(ve,I,de);Ie!==null&&((ht=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&ht.default_parameters.find(Ve=>Ve.name==="eGFR"))&&(re[te].eGFR=Ie)}const ae=parseFloat((Cn=re[te])==null?void 0:Cn["Total Cholesterol"]),H=parseFloat((tt=re[te])==null?void 0:tt["HDL Cholesterol"]),ne=parseFloat((li=re[te])==null?void 0:li.Triglycerides);if((se==="Total Cholesterol"||se==="HDL Cholesterol"||se==="Triglycerides")&&!isNaN(ae)&&!isNaN(H)&&!isNaN(ne)){const Ie=JV(ae,H,ne);Ie!==null&&((Pi=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&Pi.default_parameters.find(Ve=>Ve.name==="LDL Cholesterol"))&&(re[te]["LDL Cholesterol"]=Ie)}const me=parseFloat((ei=re[te])==null?void 0:ei["Total Bilirubin"]),ue=parseFloat((tn=re[te])==null?void 0:tn["Direct Bilirubin"]);if((se==="Total Bilirubin"||se==="Direct Bilirubin")&&!isNaN(me)&&!isNaN(ue)){const Ie=QV(me,ue);Ie!==null&&((vi=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&vi.default_parameters.find(Ve=>Ve.name==="Indirect Bilirubin"))&&(re[te]["Indirect Bilirubin"]=Ie)}const je=parseFloat((zn=re[te])==null?void 0:zn["Total Protein"]),ge=parseFloat((Hi=re[te])==null?void 0:Hi.Albumin);if((se==="Total Protein"||se==="Albumin")&&!isNaN(je)&&!isNaN(ge)){const Ie=KV(je,ge);Ie!==null&&((Qn=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&Qn.default_parameters.find(Ve=>Ve.name==="Globulin"))&&(re[te].Globulin=Ie)}const Ge=parseFloat((Ee=re[te])==null?void 0:Ee.Sodium),Te=parseFloat((Le=re[te])==null?void 0:Le.Chloride),Ne=parseFloat((nt=re[te])==null?void 0:nt.Bicarbonate);if((se==="Sodium"||se==="Chloride"||se==="Bicarbonate")&&!isNaN(Ge)&&!isNaN(Te)&&!isNaN(Ne)){const Ie=XV(Ge,Te,Ne);Ie!==null&&((rt=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&rt.default_parameters.find(Ve=>Ve.name==="Anion Gap"))&&(re[te]["Anion Gap"]=Ie)}const Be=parseFloat((zt=re[te])==null?void 0:zt.Glucose),Qe=parseFloat((xn=re[te])==null?void 0:xn.BUN);if((se==="Sodium"||se==="Glucose"||se==="BUN")&&!isNaN(Ge)&&!isNaN(Be)&&!isNaN(Qe)){const Ie=ZV(Ge,Be,Qe);Ie!==null&&((ci=e==null?void 0:e.tests.find(Ve=>Ve.id===te))!=null&&ci.default_parameters.find(Ve=>Ve.name==="Osmolality"))&&(re[te].Osmolality=Ie)}return re})},L=async()=>{if(Object.keys(s).length===0){alert("Report content cannot be empty.");return}if(!t){alert("Cannot submit report without an Order ID.");return}f(!0),x(null);try{const te=await pe(`/api/lab/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({report_content:JSON.stringify(s)})});if(!te.ok){const se=await te.json().catch(()=>({message:`Submission failed: ${te.status}`}));throw new Error(se.message||`Submission failed: ${te.status}`)}alert("Report submitted successfully!"),n(-1)}catch(te){console.error("Error submitting report:",te),x(te instanceof Error?te.message:"An unknown error occurred during submission.")}finally{f(!1)}};if(c)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",style:{textAlign:"center",padding:"50px"},children:[" ",r.jsxs("div",{className:"loading-text",children:[r.jsx(Zu,{className:"animate-spin h-8 w-8 inline mr-2"}),"Loading details..."]})]})});if(y&&!e)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card error-message-container",style:{textAlign:"center",padding:"30px"},children:[r.jsx(wi,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("h3",{className:"error-title",style:{borderBottom:"none"},children:"Error Loading Details"}),r.jsx("p",{className:"error-text",children:y}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"20px"},children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]})});if(!e)return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(jc,{size:48,className:"mb-3",style:{margin:"0 auto"}}),r.jsx("p",{className:"no-data-message",style:{fontSize:"1.1em"},children:`Lab order not found for ID: ${t}.`}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",style:{marginTop:"15px"},children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]})});const V=(ee=e==null?void 0:e.Patient)==null?void 0:ee.name,M=(ie=e==null?void 0:e.Patient)==null?void 0:ie.patient_token_number,B=`Enter Report for Order #${(e==null?void 0:e.lab_token_number)??t}`;return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"none",paddingBottom:0,marginBottom:0},children:[" ",r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:B})," ",r.jsxs("button",{onClick:()=>n(t?"/lab":-1),className:"lab-inventory-button lab-inventory-button-secondary",disabled:m,children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),t?"Back to Lab Panel":"Back"]})]}),e&&r.jsxs("div",{className:"lab-inventory-card",style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginBottom:"10px"},children:[r.jsx(jc,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}})," Order Summary"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px",fontSize:"0.95em"},children:[r.jsxs("div",{children:[r.jsx(bx,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Patient:"})," ",V??"N/A"," (Token: ",M??"N/A",")"]}),r.jsxs("div",{children:[r.jsx(Tc,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Order Token:"})," ",e.lab_token_number??"N/A"]}),r.jsxs("div",{children:[r.jsx(JE,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Order Date:"})," ",Vf(new Date(e.createdAt),"PPpp")]}),r.jsxs("div",{style:{gridColumn:"1 / -1"},children:[r.jsx(EA,{size:15,style:{marginRight:"5px",verticalAlign:"middle"}}),r.jsx("strong",{children:"Tests:"})," ",(e.tests||[]).map(te=>te.name).join(", ")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:tH(e.status),children:eH(e.status)})]})]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px"},children:[r.jsx("h3",{className:"lab-inventory-header",style:{fontSize:"1.2em",marginBottom:"10px"},children:"Report Parameters"}),e==null?void 0:e.tests.map(te=>{var se;return r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"15px"},children:[r.jsxs("button",{type:"button",onClick:()=>Y(te.id),className:"test-header-button","aria-expanded":S.has(te.id),children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em",margin:0},children:te.name}),S.has(te.id)?r.jsx(Jy,{size:20}):r.jsx(Wy,{size:20})]}),S.has(te.id)&&r.jsx("div",{className:"test-parameters-body",children:te.default_parameters&&te.default_parameters.length>0?r.jsx(r.Fragment,{children:te.default_parameters.map(X=>{var K,re,ve,I,de,ae,H,ne,me,ue;return r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsxs("label",{htmlFor:`${te.id}-${X.name}`,children:[X.name,X.unit&&r.jsxs("span",{className:"normal-range-label",children:[" (",X.unit,")"]}),X.type==="number"&&(X.lower_limit!==null||X.upper_limit!==null)&&r.jsxs("span",{className:"normal-range-label",children:[" ","Normal:",X.lower_limit!==null&&X.lower_limit!==void 0&&` > ${X.lower_limit}`,X.lower_limit!==null&&X.lower_limit!==void 0&&X.upper_limit!==null&&X.upper_limit!==void 0&&" - ",X.upper_limit!==null&&X.upper_limit!==void 0&&` < ${X.upper_limit}`]})]}),X.type==="boolean"?r.jsxs("select",{id:`${te.id}-${X.name}`,value:((re=(K=s[te.id])==null?void 0:K[X.name])==null?void 0:re.toString())??"false",onChange:je=>z(te.id,X.name,je.target.value==="true"),className:"lab-inventory-input",disabled:m,children:[r.jsx("option",{value:"true",children:"Reactive"}),r.jsx("option",{value:"false",children:"Non-Reactive"})]}):r.jsx("input",{id:`${te.id}-${X.name}`,type:X.type==="number"?"number":"text",value:((ve=s[te.id])==null?void 0:ve[X.name])===null||((I=s[te.id])==null?void 0:I[X.name])===void 0?"":(de=s[te.id])==null?void 0:de[X.name],onChange:je=>{const ge=X.type==="number"&&je.target.value===""?0:je.target.value;z(te.id,X.name,ge)},className:`lab-inventory-input ${X.type==="number"&&((ae=s[te.id])==null?void 0:ae[X.name])!==""&&(X.lower_limit!=null&&parseFloat((H=s[te.id])==null?void 0:H[X.name])<X.lower_limit||X.upper_limit!=null&&parseFloat((ne=s[te.id])==null?void 0:ne[X.name])>X.upper_limit)?"abnormal-result":""}`,disabled:m||BN(X.name)&&!((me=P[te.id])!=null&&me[X.name])}),BN(X.name)&&r.jsx("div",{style:{marginTop:"5px",textAlign:"right"},children:r.jsx("button",{type:"button",onClick:()=>R(je=>{var ge;return{...je,[te.id]:{...je[te.id]||{},[X.name]:!((ge=je[te.id])!=null&&ge[X.name])}}}),className:"lab-inventory-button lab-inventory-button-tertiary",style:{fontSize:"0.8em",padding:"5px 10px"},disabled:m,children:(ue=P[te.id])!=null&&ue[X.name]?"Disable Edit":"Edit Calculated Field"})})]},X.name)})}):r.jsxs("div",{className:"lab-inventory-form-group",children:[r.jsx("label",{htmlFor:`${te.id}-report_content`,children:"Report Content"}),r.jsx("textarea",{id:`${te.id}-report_content`,value:((se=s[te.id])==null?void 0:se.report_content)??"",onChange:X=>z(te.id,"report_content",X.target.value),className:"lab-inventory-input",rows:5,placeholder:`Enter report for ${te.name}...`,disabled:m})]})})]},te.id)}),y&&r.jsxs("p",{className:"error-text",style:{marginTop:"10px"},children:[r.jsx(wi,{size:15,className:"inline mr-1"}),y]})]}),r.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[" ",r.jsx("button",{type:"button",onClick:()=>n(-1),disabled:m,className:"lab-inventory-button lab-inventory-button-secondary",children:"Cancel"}),r.jsx("button",{type:"button",onClick:L,disabled:m||Object.keys(s).length===0,className:"lab-inventory-button",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Zu,{className:"animate-spin mr-2",size:16})," Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(id,{size:16,style:{marginRight:"5px"}})," Submit Report"]})})]})]})})},eH=t=>t?t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase()):"Unknown",tH=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},nH=()=>{const{orderId:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState(!0),[c,h]=_.useState(null),m=_.useCallback(async y=>{if(!y){h("No Order ID specified in the URL."),l(!1),i(null);return}l(!0),h(null),i(null);try{console.log(`Fetching order details for ID: ${y}`);const x=await pe(`/api/lab/orders/${y}/report`);if(!x.ok){let w;try{w=await x.json()}catch{w={message:`Server returned status ${x.status}`}}throw console.error("Fetch order details error response:",w),new Error(w.message||`Failed to fetch order details: ${x.status}`)}const S=await x.json();if(console.log("Received order data:",S),!S)throw console.error("Invalid order data structure:",S),new Error("Invalid order data received from server.");i(S)}catch(x){console.error("Error fetching order details:",x),h(x instanceof Error?x.message:"An unknown error occurred while fetching the order details")}finally{l(!1)}},[pe]);_.useEffect(()=>{m(t)},[t,m]);const f=()=>{e&&sj(e)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:0,paddingBottom:0,borderBottom:"none"},children:[r.jsx("h2",{style:{margin:0,fontSize:"1.5em"},children:"Lab Report Viewer"})," ",r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs(ks,{to:"/lab/search-report",className:"lab-inventory-button","aria-label":"Search for other reports",children:[r.jsx(Ts,{size:16,style:{marginRight:"5px"}}),"Search Reports"]}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]}),r.jsxs("button",{onClick:()=>window.print(),className:"lab-inventory-button","aria-label":"Print report",children:[r.jsx(Ky,{size:16,style:{marginRight:"5px"}}),"Print"]}),r.jsxs("button",{onClick:f,className:"lab-inventory-button","aria-label":"Share report via WhatsApp",style:{backgroundColor:"#25D366",borderColor:"#25D366",color:"white"},children:[r.jsx(ck,{size:16,style:{marginRight:"5px"}}),"WhatsApp"]})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:["Report Details (Order ID: ",t||"None Specified",")"]}),s&&r.jsx("div",{className:"loading-text",children:"Loading report..."}),c&&!s&&r.jsxs("div",{className:"error-message-container",style:{textAlign:"center"},children:[r.jsx(wi,{size:48}),r.jsx("h3",{className:"error-title",children:"Error Loading Report"}),r.jsx("p",{children:c}),t&&r.jsx("button",{onClick:()=>m(t),className:"retry-button",children:"Retry"})]}),r.jsxs("div",{className:"printable-section",children:[!s&&!c&&(e==null?void 0:e.Patient)&&r.jsxs("div",{className:"lab-inventory-card",style:{marginBottom:"20px"},children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(bx,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Patient Information"]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",e.Patient.name||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Age:"})," ",e.Patient.age??"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Gender:"})," ",e.Patient.gender||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Token No:"})," ",e.Patient.patient_token_number||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Patient ID:"})," ",e.Patient.id]}),e.Patient.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Phone:"})," ",e.Patient.phone]})]})]}),!s&&!c&&(e==null?void 0:e.report_content)&&r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("h3",{className:"lab-inventory-header",children:[r.jsx(Tc,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}})," Report Findings"]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6"},children:(()=>{try{const y=JSON.parse(e.report_content||"{}");return typeof y=="object"&&y!==null&&e.tests?e.tests.map(x=>r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("h4",{className:"lab-inventory-header",style:{fontSize:"1.1em"},children:x.name}),y[x.id]?r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Parameter"}),r.jsx("th",{children:"Value"}),r.jsx("th",{children:"Normal Range"})]})}),r.jsx("tbody",{children:Object.entries(y[x.id]).map(([S,w])=>{var R;const j=(R=x.default_parameters)==null?void 0:R.find(Y=>Y.name===S),E=typeof w=="string"?parseFloat(w):typeof w=="number"?w:NaN,A=(j==null?void 0:j.type)==="number"&&!isNaN(E)&&(j.lower_limit!=null&&E<j.lower_limit||j.upper_limit!=null&&E>j.upper_limit),k=(j==null?void 0:j.type)==="boolean"?w===!0||w==="true"?"Reactive":"Non-Reactive":String(w),P=(j==null?void 0:j.type)==="boolean"&&(w===!0||w==="true");return r.jsxs("tr",{children:[r.jsx("td",{children:S}),r.jsxs("td",{className:`${A?"abnormal-result":""} ${P?"reactive-result":""}`,children:[k," ",j==null?void 0:j.unit]}),r.jsx("td",{children:j&&j.type==="number"&&(j.lower_limit!==null||j.upper_limit!==null)?r.jsxs(r.Fragment,{children:[j.lower_limit!=null&&` > ${j.lower_limit}`,j.lower_limit!=null&&j.upper_limit!=null&&" - ",j.upper_limit!=null&&` < ${j.upper_limit}`,j.unit&&` ${j.unit}`]}):((j==null?void 0:j.type)==="boolean","N/A")})]},S)})})]}):r.jsx("p",{children:"No parameters reported for this test."})]},x.id)):r.jsx(Sc,{remarkPlugins:[Nc],children:e.report_content})}catch{return r.jsx(Sc,{remarkPlugins:[Nc],children:e.report_content||"*No findings recorded.*"})}})()})]})]}),!s&&!c&&!(e!=null&&e.report_content)&&!(e!=null&&e.Patient)&&t&&r.jsxs("div",{className:"no-data-message",children:["No report content or patient details found for Order ID: ",t,". The order might be processing, does not exist, or the ID is incorrect."]}),!t&&!s&&!c&&r.jsxs("div",{className:"no-data-message",children:["No order ID specified in the URL.",r.jsx(ks,{to:"/lab/search-report",className:"lab-inventory-link",style:{display:"block",marginTop:"10px"},children:"Go to Search Page"})]})]})]})})},iH=()=>{const t=Tt(),[n,e]=_.useState(""),[i,s]=_.useState(!1),[l,c]=_.useState([]),[h,m]=_.useState(null),[f,y]=_.useState(n);_.useEffect(()=>{const E=setTimeout(()=>{y(n)},500);return()=>{clearTimeout(E)}},[n]),_.useEffect(()=>{x()},[f]);const x=async()=>{const E=n.trim();if(!E){c([]),m(null);return}s(!0),m(null),c([]),console.log(`Searching for: ${E}`);try{const A=await pe("/api/lab");if(!A.ok){let q;try{q=await A.json()}catch{q={message:`Server returned status ${A.status}`}}throw console.error("Search fetch error response:",q),new Error(q.message||`HTTP error! status: ${A.status}`)}const{orders:k}=await A.json();console.log("Received lab orders for search:",k);const R=k.filter(q=>!!q.report_content).map(q=>{var z,L;return{id:q.id,labTokenNumber:String(q.lab_token_number??"N/A"),patientName:((z=q.Patient)==null?void 0:z.name)||"N/A",patientId:q.patient_id,patientTokenNumber:String(((L=q.Patient)==null?void 0:L.patient_token_number)??"N/A"),tests:(q.tests||[]).map(V=>V.name||"Unknown Test"),date:Vf(new Date(q.createdAt),"yyyy-MM-dd"),status:q.status}}),Y=n.toLowerCase(),F=R.filter(q=>{var V,M,B,ee,ie;const z=String(q.labTokenNumber).toLowerCase(),L=String(q.patientTokenNumber).toLowerCase();return(((V=q.patientName)==null?void 0:V.toLowerCase())||"").includes(Y)||z.includes(Y)||L.includes(Y)||(((B=(M=q.tests)==null?void 0:M.join(" "))==null?void 0:B.toLowerCase())||"").includes(Y)||(((ee=q.id)==null?void 0:ee.toLowerCase())||"").includes(Y)||(((ie=q.patientId)==null?void 0:ie.toLowerCase())||"").includes(Y)});console.log("Filtered search results:",F),c(F),F.length===0&&E?m(`No matching reports found for "${E}".`):m(null)}catch(A){console.error("Failed to search lab reports:",A),m(A instanceof Error?A.message:"An unknown error occurred during search")}finally{s(!1)}},S=E=>{console.log(`Result clicked, navigating to view report for order ID: ${E}`),t(`/lab/view-report/${E}`)},w=E=>{switch(E){case"pending":return{text:"Sample Pending",color:"text-red-600 bg-red-100"};case"collected":return{text:"Sample Collected",color:"text-yellow-600 bg-yellow-100"};case"processing":return{text:"Processing",color:"text-blue-600 bg-blue-100"};case"completed":return{text:"Completed",color:"text-green-600 bg-green-100"};case"cancelled":return{text:"Cancelled",color:"text-gray-600 bg-gray-100 line-through"};case"reported":return{text:"Reported",color:"text-purple-600 bg-purple-100"};default:return{text:E,color:"text-gray-600 bg-gray-100"}}},j=E=>{switch(E){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h2",{style:{margin:0},children:"Search Lab Reports"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary","aria-label":"Go back",children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]}),r.jsxs("div",{className:"lab-inventory-form-group",style:{marginTop:"20px",position:"relative"},children:[r.jsx("label",{htmlFor:"report-search",children:"Enter Search Term"}),r.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[r.jsx(Ts,{size:20,style:{position:"absolute",left:"10px",color:"#777"}}),r.jsx("input",{id:"report-search",type:"text",placeholder:"Patient name, ID, token, report ID, test name...",value:n,onChange:E=>e(E.target.value),className:"lab-inventory-input",style:{paddingLeft:"40px",marginBottom:"0"}})]})]}),r.jsxs("div",{style:{marginTop:"20px"},children:[i&&r.jsx("div",{className:"loading-text",children:"Searching..."}),h&&!i&&r.jsxs("div",{className:"error-text",children:[r.jsx(wi,{size:20,className:"inline mr-2"})," ",h]}),l.length>0&&!i&&r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:l.map(E=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>S(E.id),style:{marginBottom:"15px",cursor:"pointer",padding:"15px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:[r.jsx(lA,{size:18,style:{marginRight:"8px",verticalAlign:"middle"}}),E.patientName," (Token: ",E.patientTokenNumber,")"]}),r.jsx("span",{className:j(E.status),children:w(E.status).text})]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:[r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(Tc,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Order ID: ",E.id]}),r.jsxs("div",{style:{marginBottom:"5px"},children:[r.jsx(gk,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Tests: ",E.tests.join(", ")]}),r.jsxs("div",{children:[r.jsx(KE,{size:16,style:{marginRight:"5px",verticalAlign:"middle"}}),"Date: ",E.date]})]})]},E.id))}),!i&&l.length===0&&!h&&n.trim()&&r.jsxs("div",{className:"no-data-message",children:['No results found for "',n,'".']}),!i&&l.length===0&&!h&&!n.trim()&&r.jsx("div",{className:"no-data-message",style:{backgroundColor:"transparent",border:"none",textAlign:"left",padding:"5px 0"},children:"Enter a search term above to find lab reports."})]})]})})},rH=()=>{const{patientId:t}=Ar(),n=Tt(),[e,i]=_.useState([]),[s,l]=_.useState(!0),[c,h]=_.useState(null),[m,f]=_.useState(null),[y,x]=_.useState(null);_.useEffect(()=>{(async()=>{if(!t){h("Patient ID is missing from the URL."),l(!1);return}l(!0),h(null),i([]),x(null);try{const j=await pe(`/api/patients/${t}`);if(j.ok){const k=await j.json();x(k.name||`Patient ID: ${t}`)}else console.warn(`Failed to fetch patient name for ID ${t}`),x(`Patient ID: ${t}`);const E=await pe(`/api/lab/patient/${t}`);if(!E.ok){const k=await E.json().catch(()=>({}));throw new Error(k.message||`HTTP error! status: ${E.status}`)}const A=await E.json();i(A||[])}catch(j){console.error("Error fetching data:",j),h(`Failed to load data: ${j.message}`)}finally{l(!1)}})()},[t]);const S=w=>{w.report_content?n(`/lab/view-report/${w.id}`):n(`/lab/enter-report/${w.id}`)};return r.jsx("div",{className:"lab-inventory-container",children:r.jsxs("div",{className:"lab-inventory-card",children:[r.jsxs("div",{className:"lab-inventory-header no-print",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("h2",{style:{margin:0},children:["Lab Reports ",y?`for ${y}`:`for Patient ID: ${t}`]}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsxs("button",{onClick:async()=>{if(!t){alert("Patient ID is missing. Cannot create a new report.");return}try{const w=await pe("/api/lab/create-empty-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patient_id:t})});if(!w.ok){const E=await w.json().catch(()=>({message:`Failed to create new lab order: ${w.status}`}));throw new Error(E.message||`Failed to create new lab order: ${w.status}`)}const j=await w.json();n(`/lab/enter-report/${j.newOrderId}`)}catch(w){console.error("Error creating new lab order:",w),alert(`Error creating new lab order: ${w.message}`)}},className:"lab-inventory-button",disabled:!t,title:t?"Enter a new lab report for this patient":"Patient ID missing",children:[r.jsx(up,{size:16,style:{marginRight:"5px"}}),"Enter New Report"]}),r.jsxs("button",{onClick:()=>n(-1),className:"lab-inventory-button lab-inventory-button-secondary",children:[r.jsx(en,{size:16,style:{marginRight:"5px"}}),"Back"]})]})]}),r.jsx("div",{style:{marginTop:"20px"},children:s?r.jsxs("div",{className:"loading-text",children:[r.jsx(Zu,{className:"animate-spin h-8 w-8 inline mr-2"}),"Loading reports..."]}):c?r.jsxs("div",{className:"error-text",style:{textAlign:"center",padding:"20px"},children:[r.jsx(vk,{size:40,style:{marginBottom:"10px",color:"#721c24"}}),r.jsx("h3",{style:{fontSize:"1.2em",color:"#721c24",margin:"10px 0"},children:"Error Loading Reports"}),r.jsx("p",{children:c})]}):e.length===0?r.jsxs("div",{className:"no-data-message",style:{textAlign:"center",padding:"30px"},children:[r.jsx(Tc,{size:48,className:"mb-3",style:{margin:"0 auto 15px auto",display:"block"}}),r.jsx("p",{children:"No lab reports found for this patient."}),r.jsxs("p",{children:["You can ",r.jsx(ks,{to:`/lab/create-order/${t}`,className:"lab-inventory-link",children:"create a new lab order"}),"."]})]}):m?r.jsxs("div",{className:"lab-inventory-card",style:{backgroundColor:"#fdfdfd"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[r.jsxs("h3",{className:"lab-inventory-header",style:{fontSize:"1.3em",borderBottom:"none",margin:0},children:["Report from: ",m.report_date?Vf(new Date(m.report_date),"PPP p"):"N/A"]}),r.jsxs("button",{onClick:()=>f(null),className:"lab-inventory-button lab-inventory-button-secondary",style:{fontSize:"0.9em",padding:"8px 12px"},children:[r.jsx(en,{size:16,style:{marginRight:"5px"}})," Back to List"]})]}),r.jsxs("p",{style:{marginBottom:"15px",fontSize:"1em"},children:[r.jsx("strong",{children:"Tests Ordered:"})," ",(m.tests||[]).map(w=>w.name).join(", ")]}),r.jsx("div",{className:"report-markdown-content",style:{fontSize:"1em",lineHeight:"1.6",border:"1px solid #eee",padding:"15px",borderRadius:"4px",background:"#fff"},children:r.jsx(Sc,{remarkPlugins:[Nc],children:m.report_content||"*No findings recorded.*"})})]}):r.jsx("ul",{style:{listStyle:"none",padding:"0",margin:"0"},children:e.map(w=>r.jsxs("li",{className:"lab-inventory-card",onClick:()=>S(w),tabIndex:0,onKeyPress:j=>j.key==="Enter"&&S(w),style:{marginBottom:"15px",cursor:"pointer",padding:"15px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx(Tc,{size:24,style:{marginRight:"15px",color:"#007bff"}}),r.jsxs("div",{children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1em"},children:["Order Date: ",Vf(new Date(w.createdAt),"PPP")]}),r.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Tests: ",w.tests&&w.tests.length>0?w.tests.map(j=>j.name).join(", "):"N/A"]})]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[w.status&&r.jsx("span",{className:sH(w.status),children:aH(w.status)}),r.jsx(xx,{size:20,style:{color:"#6c757d"}})]})]},w.id))})})]})})},aH=t=>{if(!t)return"Unknown";switch(t.toLowerCase()){case"pending":return"Pending Sample";case"collected":return"Sample Collected";case"processing":return"Processing";case"report_ready":return"Report Ready";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return t.charAt(0).toUpperCase()+t.slice(1)}},sH=t=>{if(!t)return"status-badge";switch(t.toLowerCase()){case"pending":return"status-badge status-pending";case"collected":return"status-badge status-collected";case"processing":return"status-badge status-processing";case"completed":return"status-badge status-completed";case"cancelled":return"status-badge status-cancelled";case"reported":return"status-badge status-reported";default:return"status-badge"}},hT=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState([]),[l,c]=_.useState(!1),[h,m]=_.useState(null),[f,y]=_.useState(""),[x,S]=_.useState("all"),w=10,j=1;_.useEffect(()=>{(async()=>{c(!0),m(null);try{console.log("Fetching pharmacy inventory for view page...");const k=await pe("/api/drugs");if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const P=await k.json();console.log("Fetched Pharmacy Inventory for view page:",P),e(P||[])}catch(k){console.error("Error fetching pharmacy inventory:",k),m("Failed to load pharmacy inventory.")}finally{}})()},[]),_.useEffect(()=>{(async()=>{try{console.log("Fetching lab inventory for view page...");const k=await pe("/api/lab-tests");if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const P=await k.json();console.log("Fetched Lab Inventory for view page:",P),s(P||[])}catch(k){console.error("Error fetching lab inventory:",k),m(P=>P?`${P} & Failed to load lab inventory.`:"Failed to load lab inventory.")}finally{c(!1)}})()},[]);const E=_.useMemo(()=>{let A=n;return f&&(A=A.filter(k=>k.name.toLowerCase().includes(f.toLowerCase()))),x!=="all"&&(A=A.filter(k=>{const P=(k.quantity_in_stock??1/0)<=w;let R=!1,Y=!1;if(k.expiry_date)try{const F=Zy(k.expiry_date);if(tp(F)){const q=Db(new Date,j),z=new Date;z.setHours(0,0,0,0),Y=Ju(F,z),R=!Y&&Ju(F,q)}}catch(F){console.error("Error parsing expiry date for filter:",k.expiry_date,F),R=!0}else R=!0;switch(x){case"low-stock":return P;case"near-expiry":return R;case"expired":return Y;default:return!0}})),A},[n,f,x]);return r.jsxs("div",{className:"lab-inventory-container",children:[r.jsxs("div",{className:"lab-inventory-header",children:[r.jsx("h1",{children:"Inventory Overview"}),r.jsxs("button",{onClick:()=>t(-1),className:"lab-inventory-button lab-inventory-button-secondary",title:"Go Back",children:[r.jsx(en,{size:18,style:{marginRight:"5px"}})," Back"]})]}),l&&r.jsx("p",{className:"loading-text",children:"Loading inventory..."}),h&&r.jsx("p",{className:"error-text",children:h}),!l&&!h&&r.jsxs("div",{className:"inventory-sections-container",children:[r.jsxs("div",{className:"lab-inventory-card",children:[" ",r.jsxs("div",{className:"inventory-section__header-bar",children:[r.jsxs("h2",{className:"lab-inventory-header",children:[r.jsx(_0,{size:24,style:{marginRight:"10px",verticalAlign:"middle"}})," Pharmacy Inventory"]}),r.jsxs("div",{className:"inventory-section__controls",children:[" ",r.jsxs("div",{className:"inventory-section__search-area",children:[r.jsx("input",{type:"text",placeholder:"Search drugs...",value:f,onChange:A=>y(A.target.value),className:"lab-inventory-input",style:{marginRight:"5px",marginBottom:"0"}}),r.jsx(Ts,{size:18,style:{color:"#777"}})]}),r.jsxs("div",{className:"inventory-section__filter-area",children:[" ",r.jsxs("select",{value:x,onChange:A=>S(A.target.value),className:"lab-inventory-select",children:[r.jsx("option",{value:"all",children:"All Drugs"}),r.jsx("option",{value:"low-stock",children:"Low Stock"}),r.jsx("option",{value:"near-expiry",children:"Near Expiry"}),r.jsx("option",{value:"expired",children:"Expired"})]})]})]})]}),E.length>0?r.jsxs("div",{className:"table-container",children:[" ",r.jsxs("div",{className:"table-scroll-wrapper",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Stock"}),r.jsx("th",{children:"Expiry Date"}),r.jsx("th",{children:"Buying Price"}),r.jsx("th",{children:"Selling Price"})]})}),r.jsx("tbody",{children:E.map(A=>{let k="N/A",P="";const R=(A.quantity_in_stock??1/0)<=w;if(A.expiry_date)try{const Y=Zy(A.expiry_date);if(tp(Y)){k=Vf(Y,"dd/MM/yyyy");const F=Db(new Date,1),q=new Date;q.setHours(0,0,0,0),Ju(Y,q)?P="highlight-expired":Ju(Y,F)&&(P="highlight-near-expiry")}else k="Invalid Date",P="highlight-near-expiry"}catch(Y){console.error("Error parsing expiry date:",A.expiry_date,Y),k="Error Parsing",P="highlight-near-expiry"}else P="highlight-near-expiry";return r.jsxs("tr",{children:[r.jsx("td",{children:A.name}),r.jsx("td",{children:r.jsx("span",{className:`highlight-box ${R?"highlight-low-stock":""}`,children:A.quantity_in_stock??"N/A"})}),r.jsx("td",{children:r.jsx("span",{className:`highlight-box ${P}`,children:k})}),r.jsx("td",{className:"price-text",children:A.buying_price?`₹${A.buying_price}`:"N/A"}),r.jsx("td",{className:"price-text",children:A.price?`₹${A.price}`:"N/A"})]},A.id)})})]})]})]}):r.jsx("p",{className:"no-data-message",children:f?`No drugs found matching "${f}".`:"No pharmacy inventory data available."})]}),r.jsxs("div",{className:"lab-inventory-card",children:[" ",r.jsxs("h2",{className:"lab-inventory-header inventory-section__lab-title",children:[r.jsx(N0,{size:24,style:{marginRight:"10px",verticalAlign:"middle"}})," Lab Test Inventory"]}),i.length>0?r.jsxs("div",{className:"table-container",children:[" ",r.jsxs("div",{className:"table-scroll-wrapper",children:[" ",r.jsxs("table",{className:"lab-inventory-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"})]})}),r.jsx("tbody",{children:i.map(A=>r.jsxs("tr",{children:[r.jsx("td",{children:A.name}),r.jsx("td",{className:"price-text",children:A.price?`₹${A.price}`:"N/A"})]},A.id))})]})]})]}):r.jsx("p",{className:"no-data-message",children:"No lab test inventory data available."})]})]})]})},oH=({fetchWithAuth:t})=>{const n=Tt(),[e,i]=_.useState(!0),[s,l]=_.useState([]),[c,h]=_.useState(null),[m,f]=_.useState(null),y=_.useCallback(async()=>{i(!0),h(null);try{const j=await(await t("/staff")).json();l(j.map(E=>({...E,id:E._id||E.id})))}catch(w){h(`Failed to load staff data: ${w.message}`),l([])}finally{i(!1)}},[t]);_.useEffect(()=>{y()},[y]),_.useEffect(()=>{if(m){const w=setTimeout(()=>f(null),5e3);return()=>clearTimeout(w)}},[m]);const x=w=>{switch(w){case"doctor":return"admin-pill-info";case"receptionist":return"admin-pill-success";case"pharmacy":return"admin-pill-primary";case"lab":return"admin-pill-warning";case"admin":return"admin-pill-neutral";default:return"admin-pill-neutral"}},S=w=>{switch(w){case"doctor":return r.jsx(mk,{size:16,className:"mr-2 text-blue-600"});case"receptionist":return r.jsx(dC,{size:16,className:"mr-2 text-green-600"});case"pharmacy":return r.jsx(_0,{size:16,className:"mr-2 text-purple-600"});case"lab":return r.jsx(Qy,{size:16,className:"mr-2 text-yellow-600"});case"admin":return r.jsx(dp,{size:16,className:"mr-2 text-teal-600"});default:return r.jsx(Zm,{size:16,className:"mr-2 text-gray-500"})}};return e?r.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:[" ",r.jsx("div",{className:"breathing-ball",style:{width:"30px",height:"30px"}})," "]}),r.jsx("div",{className:"mt-4 text-teal-600 text-xl font-medium",children:"Loading Staff..."})]})}):r.jsxs("div",{className:"staff-page-container",children:[m&&r.jsxs("div",{className:`mb-4 p-3 rounded-md flex items-center ${m.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,role:"alert",children:[m.type==="success"?r.jsx(Xa,{size:18,className:"mr-2"}):r.jsx(wi,{size:18,className:"mr-2"}),r.jsx("span",{children:m.message}),r.jsx("button",{onClick:()=>f(null),className:"ml-auto text-xl font-bold",children:"×"})]}),c&&r.jsxs("div",{className:"error-message mb-4 p-3 bg-red-100 border border-red-400 rounded-md flex items-center",role:"alert",children:[r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),c,r.jsx("button",{onClick:()=>h(null),className:"ml-auto text-red-600 hover:text-red-800 text-xl font-bold",children:"×"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>n(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Staff"})]}),r.jsxs("button",{onClick:()=>n("/dashboard/staff/add"),className:"bg-teal-600 text-white px-4 py-2 rounded-md hover:bg-teal-700 flex items-center",children:[r.jsx(vx,{size:16,className:"mr-2"})," Add New Staff"]})]}),r.jsx("div",{className:"staff-table-container",children:r.jsxs("table",{className:"staff-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{className:"hidden md:table-cell",children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{className:"hidden md:table-cell",children:"OPD Fee (₹)"}),r.jsx("th",{className:"hidden md:table-cell",children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:s.length===0&&!e?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center py-4",children:"No staff members found."})}):s.map(w=>r.jsxs("tr",{children:[r.jsx("td",{children:w.name}),r.jsx("td",{className:"hidden md:table-cell",children:w.email}),r.jsx("td",{children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(w.role)}`,children:[S(w.role),w.role.charAt(0).toUpperCase()+w.role.slice(1)]})}),r.jsx("td",{className:"hidden md:table-cell",children:w.role==="doctor"?w.opd_fee?parseFloat(String(w.opd_fee)).toFixed(2):"Not Set":"N/A"}),r.jsx("td",{className:"hidden md:table-cell",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.status==="active"?"Active":"Inactive"})}),r.jsx("td",{className:"actions",children:r.jsxs("button",{onClick:()=>n(`/dashboard/staff/edit/${w.id}`),className:"edit-link",disabled:w.role==="admin",title:"Edit Staff",children:[r.jsx(qf,{size:16})," Edit"]})})]},w.id))})]})})]})},lH=()=>{var E,A,k,P,R,Y,F,q,z,L,V,M,B,ee;const{patientId:t,billId:n}=Ar(),e=Tt(),[i,s]=_.useState(null),[l,c]=_.useState(!0),[h,m]=_.useState(null),[f,y]=_.useState(""),[x,S]=_.useState("cash"),w=((E=i==null?void 0:i.patient)==null?void 0:E.insurance_type)==="no_cash_insurance";_.useEffect(()=>{S(w?"no_cash_insurance":"cash")},[w]),_.useEffect(()=>{n?(async()=>{c(!0),m(null);try{const te=await pe(`/api/bills/${n}`);if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const se=await te.json();if(!se||!se.bill||!se.calculated)throw new Error("Incomplete data structure received from backend (missing bill or calculated fields).");if(se.bill.type!=="admission")throw console.error("Fetched bill is not an admission bill. Bill Type:",se.bill.type),new Error(`Unexpected bill type received: ${se.bill.type}. Expected 'admission'.`);console.log("Raw API data received:",JSON.stringify(se,null,2));const X=Array.isArray(se.admissionPayments)?se.admissionPayments:[];console.log("Processed admissionPaymentsData:",X);const K={...se.bill,amount:se.bill.amount,AdmissionPayments:X,calculated:se.calculated,patient:se.bill.Patient?{id:se.bill.Patient.id,name:se.bill.Patient.name,admission_date:se.bill.Patient.admission_date,discharge_date:se.bill.Patient.discharge_date}:void 0};console.log("Setting billDetails state to:",JSON.stringify(K,null,2)),s(K)}catch(te){console.error("Failed to fetch admission bill details:",te),m(te instanceof Error?te.message:"An unknown error occurred")}finally{c(!1)}})():(m("Bill ID is missing."),c(!1))},[n,t]);const j=async ie=>{var te;if(ie.preventDefault(),!t||!f||isNaN(parseFloat(f))||parseFloat(f)<=0||parseFloat(f)>(((te=i==null?void 0:i.calculated)==null?void 0:te.balance)??0)){m("Please enter a valid payment amount within the balance due. Patient ID must be present.");return}m(null);try{const se=await pe(`/api/patients/${t}/admission-payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount_paid:parseFloat(f),payment_mode:x})});if(!se.ok){const re=await se.json();throw new Error(re.message||`HTTP error! status: ${se.status}`)}const K=await(await pe(`/api/bills/${n}`)).json();if(K&&K.bill&&K.calculated&&K.admissionPayments)s({...K.bill,amount:parseFloat(K.bill.amount),AdmissionPayments:K.admissionPayments,calculated:K.calculated,patient:K.bill.Patient?{id:K.bill.Patient.id,name:K.bill.Patient.name,admission_date:K.bill.Patient.admission_date,discharge_date:K.bill.Patient.discharge_date}:void 0});else throw new Error("Invalid data structure received after payment submission.");y("")}catch(se){console.error("Failed to submit payment:",se),m(se instanceof Error?se.message:"Failed to record payment")}};return l?r.jsx("div",{className:"p-4",children:"Loading admission bill details..."}):h?r.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",h]}):!i||!i.calculated?r.jsx("div",{className:"p-4",children:"No bill details found or data is incomplete."}):r.jsx("div",{className:"admission-page-container",children:r.jsxs("div",{className:"admission-section",children:[" ",r.jsxs("div",{className:"p-4 border-b",children:[" ",r.jsxs("h2",{className:"admission-header",children:["Admission Billing Details (Bill #",i.id,")"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Patient: ",((A=i.patient)==null?void 0:A.name)??"N/A"," (ID: ",i.patient_id,")"]})," ",r.jsxs("p",{className:"text-sm text-gray-600",children:["Admission Date: ",(k=i.patient)!=null&&k.admission_date?new Date(i.patient.admission_date).toLocaleDateString():"N/A"]}),((P=i.patient)==null?void 0:P.discharge_date)&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Discharge Date: ",new Date(i.patient.discharge_date).toLocaleDateString()]}),r.jsxs("p",{className:"text-sm",children:["Status: ",r.jsx("span",{className:`font-semibold ${i.status==="paid"?"text-green-600":"text-orange-600"}`,children:((R=i.status)==null?void 0:R.toUpperCase())??"UNKNOWN"})]})]}),r.jsxs("div",{className:"p-4",children:[" ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title",children:"Billing Summary"}),r.jsxs("div",{className:"admission-card-content",children:[r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Initial Charges:"})," ",r.jsxs("span",{children:["₹",(parseFloat((i==null?void 0:i.amount)||"0")||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:"Days Stayed:"})," ",r.jsx("span",{children:((Y=i==null?void 0:i.calculated)==null?void 0:Y.daysStayed)??0})]}),r.jsxs("p",{className:"flex justify-between text-sm font-semibold mt-2 pt-2 border-t",children:[r.jsx("span",{children:"Total Due:"})," ",r.jsxs("span",{children:["₹",(Number((F=i==null?void 0:i.calculated)==null?void 0:F.totalDue)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-sm text-green-700",children:[r.jsx("span",{children:"Total Paid:"})," ",r.jsxs("span",{children:["₹",(Number((q=i==null?void 0:i.calculated)==null?void 0:q.totalPaid)||0).toFixed(2)]})]}),r.jsxs("p",{className:"flex justify-between text-lg font-bold mt-1 text-red-600",children:[r.jsx("span",{children:"Balance Due:"})," ",r.jsxs("span",{children:["₹",(Number((z=i==null?void 0:i.calculated)==null?void 0:z.balance)||0).toFixed(2)]})]})]})]}),(i==null?void 0:i.status)!=="paid"&&(Number((L=i==null?void 0:i.calculated)==null?void 0:L.balance)||0)>0&&r.jsxs("div",{className:"admission-card",children:[r.jsx("h3",{className:"admission-card-title text-blue-800",children:"Record New Payment"}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"admission-form-group",children:[r.jsx("label",{htmlFor:"paymentAmount",className:"admission-label",children:"Amount Paid (₹)"}),r.jsx("input",{id:"paymentAmount",type:"number",value:f,onChange:ie=>y(ie.target.value),placeholder:`Max ₹${(Number((V=i==null?void 0:i.calculated)==null?void 0:V.balance)||0).toFixed(2)}`,required:!0,min:"0.01",step:"0.01",max:Number((M=i==null?void 0:i.calculated)==null?void 0:M.balance)||0,className:"admission-input"})]}),r.jsxs("div",{className:"admission-form-group",children:[r.jsx("label",{htmlFor:"paymentMode",className:"admission-label",children:"Payment Mode"}),r.jsxs("select",{id:"paymentMode",value:x,onChange:ie=>S(ie.target.value),className:"admission-select",children:[r.jsx("option",{value:"cash",children:"Cash"}),r.jsx("option",{value:"card",children:"Card"}),r.jsx("option",{value:"upi",children:"UPI"}),w&&r.jsx("option",{value:"no_cash_insurance",children:"No Cash Insurance"})]})]}),r.jsx("button",{type:"submit",className:"admission-button",disabled:l||!f||parseFloat(f)<=0||parseFloat(f)>(Number((B=i==null?void 0:i.calculated)==null?void 0:B.balance)||0)||w&&x!=="no_cash_insurance",children:"Record Payment"})]})]})]}),r.jsx("h3",{className:"admission-section-title mt-6 border-t pt-4",children:"Admission Payment History"}),Array.isArray(i==null?void 0:i.AdmissionPayments)&&i.AdmissionPayments.length>0?r.jsxs("div",{className:"overflow-x-auto",children:[" ",r.jsxs("table",{className:"admission-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Payment ID"}),r.jsx("th",{children:"Date"}),r.jsx("th",{children:"Amount Paid"}),r.jsx("th",{children:"Mode"})]})}),r.jsx("tbody",{children:(ee=i==null?void 0:i.AdmissionPayments)==null?void 0:ee.map(ie=>{if(!ie||typeof ie!="object")return null;let te="Invalid Date";try{ie.payment_date&&!isNaN(new Date(ie.payment_date).getTime())&&(te=new Date(ie.payment_date).toLocaleString())}catch(se){console.error("Error formatting payment date:",ie.payment_date,se)}return r.jsxs("tr",{children:[" ",r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie.id??"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",(Number(ie.amount_paid)||0).toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize",children:ie.payment_mode??"N/A"})]},ie.id??Math.random())})})]})]}):r.jsx("p",{className:"text-gray-500 text-sm",children:"No payments recorded yet."})]}),r.jsxs("div",{className:"p-4 border-t bg-gray-50 text-right",children:[" ",r.jsx("button",{type:"button",onClick:()=>e(-1),className:"admission-button admission-button-secondary",children:"Back"})]})]})})},cH=t=>{switch(t){case"pending":return{text:"text-orange-700",bg:"bg-orange-100"};case"billed":return{text:"text-blue-700",bg:"bg-blue-100"};case"dispensed":return{text:"text-green-700",bg:"bg-green-100"};case"cancelled":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},uH=()=>{const{orderId:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState(!0),[c,h]=_.useState(null),[m,f]=_.useState(!1),[y,x]=_.useState({}),S=_.useMemo(()=>!e||!e.medications?0:e.medications.reduce((k,P,R)=>{const Y=P.drug_id??`index-${R}`,F=y[Y]||0,q=P.price??0;return k+F*q},0),[e,y]),w=_.useCallback(async()=>{if(!t){h("Order ID is missing."),l(!1);return}l(!0),h(null);try{const k=await pe(`/api/pharmacy-orders/${t}`);if(!k.ok)throw k.status===404?new Error(`Order with ID ${t} not found.`):new Error(`Failed to fetch order details: ${k.statusText} (${k.status})`);const P=await k.json();i(P);const R={};P.medications.forEach((Y,F)=>{const q=Y.drug_id??`index-${F}`;R[q]=0}),x(R)}catch(k){console.error("Failed to fetch order details:",k),h(k.message||"Failed to load order details.")}finally{l(!1)}},[t]);_.useEffect(()=>{w()},[w]);const j=(k,P,R)=>{const Y=Math.max(0,Math.min(P,R));x(F=>({...F,[k]:Y}))},E=async()=>{const k=e==null?void 0:e.medications.map((P,R)=>{const Y=P.drug_id??`index-${R}`,F=y[Y]||0;return F>0?{drug_id:P.drug_id,name:P.name,quantity:P.quantity,returnQuantity:F}:null}).filter(P=>P!==null);if(!k||k.length===0){alert("Please select a quantity greater than 0 for at least one item to return.");return}if(!t){alert("Order ID is missing. Cannot process return.");return}if(!k){alert("Could not prepare items for return.");return}f(!0),h(null);try{const P=await pe(`/api/pharmacy-orders/${t}/return`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemsToReturn:k})}),R=await P.json();if(!P.ok)throw new Error(R.message||`Failed to process return: ${P.statusText}`);alert("Return processed successfully! Stock has been updated.");const Y={};e==null||e.medications.forEach((F,q)=>{const z=F.drug_id??`index-${q}`;Y[z]=0}),x(Y),w()}catch(P){console.error("Failed to process return:",P),h(P.message||"An error occurred while processing the return."),alert(`Error processing return: ${P.message||"Unknown error"}`)}finally{f(!1)}};if(s)return r.jsx("div",{className:"text-center p-6 text-gray-500 animate-pulse",children:"Loading Order Details..."});if(c)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>n(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(en,{size:14,className:"mr-1.5"})," Back"]}),r.jsxs("div",{className:"bg-red-50 border border-red-300 text-red-700 rounded p-4",children:["Error: ",c]})]});if(!e)return r.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[r.jsxs("button",{onClick:()=>n(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(en,{size:14,className:"mr-1.5"})," Back"]}),r.jsx("div",{className:"text-center py-10 px-4 text-gray-500 bg-white rounded-lg shadow",children:"Order details could not be loaded."})]});const A=cH(e.status);return r.jsxs("div",{className:"p-4 md:p-6 max-w-3xl mx-auto",children:[r.jsxs("button",{onClick:()=>n(-1),className:"mb-4 inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(en,{size:14,className:"mr-1.5"})," Back to Queue"]}),r.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow border border-gray-200",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Pharmacy Order Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Order ID:"})," ",e.id]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Patient:"})," ",e.patientName||"N/A"," (",e.patientTokenNumber||"N/A",")"]})]}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Date:"})," ",new Date(e.date).toLocaleString()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Prescribed By:"})," ",e.prescribedBy||"N/A"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Status:"})," ",r.jsx("span",{className:`inline-flex items-center text-xs font-medium capitalize px-2 py-0.5 rounded-full ${A.text} ${A.bg}`,children:e.status})]})]})]}),r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsx("p",{className:"font-medium mb-2 text-gray-700",children:"Medications Ordered:"}),e.medications.length>0?r.jsx("div",{className:"space-y-3",children:e.medications.map((k,P)=>{const R=k.drug_id??`index-${P}`,Y=e.status==="dispensed"||e.status==="billed";return r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 border rounded-md bg-gray-50",children:[r.jsxs("div",{className:"flex-1 mb-2 sm:mb-0",children:[r.jsxs("span",{className:"font-medium text-sm text-gray-800",children:[k.name," ",k.drug_id?`(ID: ${k.drug_id})`:""]}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Ordered: ",k.quantity,k.tabletsPerDay&&` - ${k.tabletsPerDay}/day`,k.numberOfDays&&` for ${k.numberOfDays} days`,")",k.price!==void 0&&k.price!==null&&r.jsxs("span",{className:"text-xs text-blue-600 ml-2",children:["(Price: ₹",k.price.toFixed(2),")"]})]})]}),Y&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{htmlFor:`return-qty-${R}`,className:"text-xs font-medium text-gray-600 whitespace-nowrap",children:"Return Qty:"}),r.jsx("input",{type:"number",id:`return-qty-${R}`,name:`return-qty-${R}`,min:"0",max:k.quantity,value:y[R]??0,onChange:F=>j(R,parseInt(F.target.value,10)||0,k.quantity),className:"w-16 px-2 py-1 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-indigo-500 focus:border-indigo-500","aria-label":`Return quantity for ${k.name}`})]})]},R)})}):r.jsx("p",{className:"text-sm text-gray-500 italic",children:"No medications listed for this order."})]}),(e.status==="dispensed"||e.status==="billed")&&e.medications.length>0&&r.jsxs("div",{className:"mt-6 border-t pt-4 flex flex-col sm:flex-row justify-between items-center",children:[" ",S>0&&r.jsxs("div",{className:"mb-2 sm:mb-0 text-lg font-semibold text-red-600",children:["Total Refund: ₹",S.toFixed(2)]}),S<=0&&r.jsx("div",{className:"hidden sm:block"}),r.jsx("button",{onClick:E,disabled:Object.values(y).every(k=>k===0)||m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?r.jsxs(r.Fragment,{children:[r.jsx(kb,{size:16,className:"mr-2 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kb,{size:16,className:"mr-2"})," Process Return"]})})]})]})]})},dH=async()=>{const t=await pe("/subscriptions");if(!t.ok)throw new Error("Failed to fetch subscription plans");return await t.json()},fH=async t=>{const n=await pe(`/subscriptions/${t}`);if(!n.ok){const e=await n.json().catch(()=>({message:"Failed to fetch subscription plan details"}));throw new Error(e.message||"Failed to fetch subscription plan details")}return await n.json()},hH=async t=>{const n=await pe("/subscriptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.json().catch(()=>({message:"Failed to create subscription plan"}));throw new Error(e.message||"Failed to create subscription plan")}return await n.json()},mH=async(t,n)=>{const e=await pe(`/subscriptions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){const i=await e.json().catch(()=>({message:"Failed to update subscription plan"}));throw new Error(i.message||"Failed to update subscription plan")}return await e.json()},pH=async t=>{const n=await pe(`/subscriptions/${t}`,{method:"DELETE"});if(!n.ok){const e=await n.json().catch(()=>({message:"Failed to deactivate subscription plan"}));throw new Error(e.message||"Failed to deactivate subscription plan")}return await n.json()},gH=async(t,n)=>{const e=await pe("/api/payment/razorpay-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:t,planId:n})});if(!e.ok){const i=await e.json().catch(()=>({message:"Failed to initiate Razorpay subscription"}));throw new Error(i.message||"Failed to initiate Razorpay subscription")}return await e.json()},yH=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState(!1),[l,c]=_.useState(null),[h,m]=_.useState(null),f=_.useCallback(async()=>{s(!0),c(null);try{const x=await dH();e(x)}catch(x){c(x.message||"Failed to fetch subscription plans."),m({type:"error",message:x.message||"Failed to fetch plans."})}finally{s(!1)}},[]);_.useEffect(()=>{f()},[f]),_.useEffect(()=>{if(h){const x=setTimeout(()=>m(null),5e3);return()=>clearTimeout(x)}},[h]);const y=async x=>{if(m(null),c(null),window.confirm("Are you sure you want to deactivate this plan? This action cannot be undone directly.")){s(!0),c(null),m(null);try{await pH(x),m({type:"success",message:"Plan deactivated successfully!"}),f()}catch(S){c(S.message||"Failed to deactivate plan."),m({type:"error",message:S.message||"Failed to deactivate plan."})}finally{s(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[h&&r.jsxs("div",{className:`${h.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[h.type==="success"?r.jsx(Xa,{size:18,className:"mr-2 text-green-500"}):r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:h.message})]}),r.jsx("button",{onClick:()=>m(null),className:`${h.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{children:[" ",r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(en,{size:16}),"Back"]}),r.jsx("h1",{children:"Manage Subscription Plans"}),r.jsxs("button",{onClick:()=>t("/dashboard/subscriptions/add"),className:"subscription-btn",children:[r.jsx(vx,{size:16,className:"mr-1 inline-block"})," Add New Plan"]})]}),i&&n.length===0&&r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:r.jsx("div",{className:"breathing-ball",style:{width:"25px",height:"25px"}})}),r.jsx("div",{className:"mt-2 text-gray-600 text-md font-medium",children:"Loading plans..."})]})}),!i&&l&&n.length===0&&r.jsx("p",{className:"text-center text-red-500",children:l}),n.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:n.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsxs("td",{children:["₹",Number(x.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",x.interval>1?x.interval:""," ",x.period,x.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/subscriptions/edit/${x.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(qf,{size:16,className:"inline-block"})}),x.status==="active"&&r.jsx("button",{onClick:()=>y(x.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Co,{size:16,className:"inline-block"})})]})]},x.id))})]})}),!i&&n.length===0&&!l&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No subscription plans found. Add one to get started!"})]})]})},xH=()=>{const t=Tt(),[n,e]=_.useState({name:"",description:"",price:"",period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,s]=_.useState(!1),[l,c]=_.useState(null),[h,m]=_.useState(null);_.useEffect(()=>{if(h){const S=setTimeout(()=>m(null),5e3);return()=>clearTimeout(S)}},[h]);const f=S=>{const{name:w,value:j}=S.target;e(E=>({...E,[w]:j}))},y=async S=>{if(S.preventDefault(),s(!0),c(null),m(null),!n.name||!n.price||!n.period||n.interval===void 0||n.interval<=0){c("Please fill in all required fields (Name, Price, Period, Interval > 0)."),s(!1);return}try{await hH(n),m({type:"success",message:"Plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/subscriptions")},2e3)}catch(w){const j=w.message||"Failed to create plan.";c(j),m({type:"error",message:j})}finally{s(!1)}},x=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[h&&r.jsxs("div",{className:`${h.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[h.type==="success"?r.jsx(Xa,{size:18,className:"mr-2 text-green-500"}):r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:h.message})]}),r.jsx("button",{onClick:()=>m(null),className:`${h.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Subscription Plan"}),l&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:l}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:f,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:n.description||"",onChange:f})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:n.price||"",onChange:f,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:n.period||"monthly",onChange:f,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval||1,onChange:f,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:n.razorpay_plan_id||"",onChange:f})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:x,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},vH=()=>{const{id:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState({}),[c,h]=_.useState(!1),[m,f]=_.useState(!0),[y,x]=_.useState(null),[S,w]=_.useState(null),j=_.useCallback(async()=>{if(!t){x("Plan ID is missing."),f(!1);return}f(!0),x(null);try{const P=await fH(t);i(P),l({name:P.name,description:P.description||"",price:P.price,period:P.period,interval:P.interval,razorpay_plan_id:P.razorpay_plan_id||"",status:P.status})}catch(P){x(P.message||"Failed to fetch plan details."),w({type:"error",message:P.message||"Failed to fetch plan details."})}finally{f(!1)}},[t]);_.useEffect(()=>{j()},[j]),_.useEffect(()=>{if(S){const P=setTimeout(()=>w(null),5e3);return()=>clearTimeout(P)}},[S]);const E=P=>{const{name:R,value:Y}=P.target;l(F=>({...F,[R]:Y}))},A=async P=>{if(P.preventDefault(),!t){x("Plan ID is missing.");return}if(h(!0),x(null),w(null),!s.name||!s.price||!s.period||s.interval===void 0||s.interval<=0){x("Please fill in all required fields (Name, Price, Period, Interval > 0)."),h(!1);return}try{await mH(t,s),w({type:"success",message:"Plan updated successfully! Redirecting..."}),setTimeout(()=>{n(-1)},2e3)}catch(R){const Y=R.message||"Failed to update plan.";x(Y),w({type:"error",message:Y})}finally{h(!1)}},k=()=>{n(-1)};return m?r.jsx("div",{className:"p-6 text-center",children:"Loading plan details..."}):y&&!e?r.jsx("div",{className:"p-6 text-center text-red-500",children:y}):e?r.jsxs("div",{className:"subscription-page-container",children:[S&&r.jsxs("div",{className:`${S.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[S.type==="success"?r.jsx(Xa,{size:18,className:"mr-2"}):r.jsx(wi,{size:18,className:"mr-2"}),r.jsx("span",{children:S.message})]}),r.jsx("button",{onClick:()=>w(null),className:"ml-4",children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Subscription Plan"}),y&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:y}),r.jsxs("form",{onSubmit:A,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:s.name||"",onChange:E,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:s.description||"",onChange:E})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:s.price||"",onChange:E,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:s.period||"monthly",onChange:E,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:s.interval||1,onChange:E,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:s.razorpay_plan_id||"",onChange:E})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:s.status||"active",onChange:E,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:k,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:c,className:"subscription-btn",children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,c?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Plan not found."})},bH=()=>{const{patientId:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState([]),[c,h]=_.useState(""),[m,f]=_.useState(!0),[y,x]=_.useState(null),[S,w]=_.useState("manual"),[j,E]=_.useState(!1),[A,k]=_.useState(null),P=_.useCallback(async()=>{f(!0),x(null);try{const F=await pe(`/api/patients/${t}`);if(!F.ok){const V=await F.json();throw new Error(V.message||"Failed to fetch patient details")}const q=await F.json();i(q);const z=await pe("/api/subscriptions");if(!z.ok){const V=await z.json();throw new Error(V.message||"Failed to fetch subscription plans")}const L=await z.json();l(L.filter(V=>V.status==="active"))}catch(F){console.error("Error fetching data:",F),x(`Failed to load data: ${F.message}`)}finally{f(!1)}},[t]);_.useEffect(()=>{t?P():(x("Patient ID is missing."),f(!1))},[t,P]);const R=(F,q)=>{const z=new Date(F),L=q.interval||1;switch(q.period){case"daily":z.setDate(F.getDate()+L);break;case"weekly":z.setDate(F.getDate()+L*7);break;case"monthly":z.setMonth(F.getMonth()+L);break;case"yearly":z.setFullYear(F.getFullYear()+L);break;default:console.warn(`Unknown subscription period: ${q.period}. Defaulting to 1 month.`),z.setMonth(F.getMonth()+1)}return z},Y=async()=>{if(!t||!c){k("Please select a subscription plan.");return}const F=s.find(q=>q.id===c);if(!F){k("Selected plan details not found.");return}E(!0),k(null);try{const q=new Date,z=R(q,F);if(S==="manual"){const L={subscription_plan_id:c,subscription_status:"active",subscription_start_date:q.toISOString(),subscription_end_date:z.toISOString(),subscription_payment_method:"manual"},V=await pe(`/api/patients/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!V.ok){const M=await V.json();throw new Error(M.message||"Failed to start subscription manually")}alert(`Subscription started successfully for ${e==null?void 0:e.name} (Manual Payment)!`),n("/all-patients")}else if(S==="razorpay"){console.log("Initiating Razorpay subscription for plan:",F);const L=await gH(t,c);if(L&&L.short_url)window.location.href=L.short_url;else throw new Error("Failed to get Razorpay subscription link from backend.")}}catch(q){console.error("Error starting subscription:",q),k(`Failed to start subscription: ${q.message}`),E(!1)}};return m?r.jsx("div",{className:"loading-state-subscription",children:"Loading patient and plans..."}):y?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:y})]}),r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16})," ","Back"]})]}):e?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16})," ","Back"]}),r.jsxs("h1",{children:[r.jsx(bx,{size:28})," ","Start Subscription for ",e.name]}),A&&r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[" ",r.jsx("span",{children:A})]}),r.jsxs("div",{className:"subscription-form",children:[" ",r.jsx("h2",{children:"Available Subscription Plans"}),s.length===0?r.jsx("p",{className:"empty-state",children:"No active subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:s.map(F=>r.jsxs("div",{className:`subscription-plan-card ${c===F.id?"selected-plan":""}`,onClick:()=>h(F.id),children:[r.jsx("h3",{children:F.name}),r.jsxs("p",{className:"price",children:["₹",F.price]}),r.jsxs("p",{className:"duration",children:["Every ",F.interval," ",F.period,F.interval>1?"s":""]}),F.description&&r.jsx("p",{children:F.description})]},F.id))})]}),r.jsxs("div",{className:"subscription-form mb-6",children:[" ",r.jsx("h2",{children:"Select Payment Method"}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"manual",checked:S==="manual",onChange:()=>w("manual"),className:"mr-2"}),r.jsx("span",{children:"Cash (Manual)"})]})}),r.jsx("div",{className:"form-group",children:r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:S==="razorpay",onChange:()=>w("razorpay"),className:"mr-2"}),r.jsx("span",{children:"Razorpay"})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:Y,disabled:!c||j||s.length===0,className:"subscription-btn",children:[j&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),j?"Starting...":"Start Subscription"]})})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Warning: "}),r.jsx("span",{children:"Patient not found."})]}),r.jsxs("button",{onClick:()=>n(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16}),"Back"]})]})},c1=async()=>{const t=await pe("/api/clinic-subscriptions/plans",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch clinic subscription plans")}return t.json()},wH=async t=>{const n=await pe(`/api/clinic-subscriptions/cancel/${t}`,{method:"PUT"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to cancel clinic subscription")}return n.json()},SH=async t=>{const n=await pe(`/api/clinics/${t}/subscription-status`,{method:"GET"});if(!n.ok){const e=await n.json();throw new Error(e.message||`Failed to fetch subscription status for clinic ${t}`)}return n.json()},NH=async t=>{const n=await pe(`/api/clinic-subscriptions/plans/${t}`,{method:"GET"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to fetch clinic subscription plan")}return n.json()},CH=async t=>{const n=await pe("/api/clinic-subscriptions/plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to create clinic subscription plan")}return n.json()},_H=async(t,n)=>{const e=await pe(`/api/clinic-subscriptions/plans/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok){const i=await e.json();throw new Error(i.message||"Failed to update clinic subscription plan")}return e.json()},jH=async t=>{const n=await pe(`/api/clinic-subscriptions/plans/${t}`,{method:"DELETE"});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to deactivate clinic subscription plan")}return n.json()},TH=async t=>{const n=await pe("/api/clinic-subscriptions/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t})});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to initiate clinic subscription")}return n.json()},EH=async()=>{try{const t=await pe("/api/clinic-subscriptions/pending",{method:"GET"});return t.ok?t.json():null}catch(t){return console.error("Error checking for pending subscription:",t),null}},AH=async()=>{const t=await pe("/api/clinics/subscription-status",{method:"GET"});if(!t.ok){const n=await t.json();throw new Error(n.message||"Failed to fetch clinic subscription status")}return t.json()},kH=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState(!1),[l,c]=_.useState(null),[h,m]=_.useState(null),f=_.useCallback(async()=>{s(!0),c(null);try{const x=await c1();e(x)}catch(x){c(x.message||"Failed to fetch clinic subscription plans."),m({type:"error",message:x.message||"Failed to fetch plans."})}finally{s(!1)}},[]);_.useEffect(()=>{f()},[f]),_.useEffect(()=>{if(h){const x=setTimeout(()=>m(null),5e3);return()=>clearTimeout(x)}},[h]);const y=async x=>{if(m(null),c(null),window.confirm("Are you sure you want to deactivate this clinic plan? This action cannot be undone directly.")){s(!0),c(null),m(null);try{await jH(x),m({type:"success",message:"Clinic plan deactivated successfully!"}),f()}catch(S){c(S.message||"Failed to deactivate clinic plan."),m({type:"error",message:S.message||"Failed to deactivate plan."})}finally{s(!1)}}};return r.jsxs("div",{className:"subscription-page-container",children:[h&&r.jsxs("div",{className:`${h.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"} 
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[h.type==="success"?r.jsx(Xa,{size:18,className:"mr-2 text-green-500"}):r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:h.message})]}),r.jsx("button",{onClick:()=>m(null),className:`${h.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-md hover:bg-gray-200",children:r.jsx(en,{size:20})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Manage Clinic Subscription Plans"})]}),r.jsxs("button",{onClick:()=>t("/dashboard/clinic-subscriptions/add"),className:"subscription-btn",children:[r.jsx(vx,{size:16,className:"mr-1 inline-block"})," Add New Clinic Plan"]})]}),i&&n.length===0&&r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"loading-animation-container",style:{height:"auto",margin:"20px 0"},children:r.jsx("div",{className:"breathing-ball",style:{width:"25px",height:"25px"}})}),r.jsx("div",{className:"mt-2 text-gray-600 text-md font-medium",children:"Loading clinic plans..."})]})}),!i&&l&&n.length===0&&r.jsx("p",{className:"text-center text-red-500",children:l}),n.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"subscription-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Price"}),r.jsx("th",{children:"Billing Cycle"}),r.jsx("th",{children:"Status"}),r.jsx("th",{className:"text-right",children:"Actions"})]})}),r.jsx("tbody",{children:n.map(x=>r.jsxs("tr",{children:[r.jsx("td",{children:x.name}),r.jsxs("td",{children:["₹",Number(x.price).toFixed(2)]}),r.jsxs("td",{children:["Every ",x.interval>1?x.interval:""," ",x.period,x.interval>1?"s":""]}),r.jsx("td",{children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${x.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status})}),r.jsxs("td",{className:"actions-cell text-right",children:[r.jsx("button",{onClick:()=>t(`/dashboard/clinic-subscriptions/edit/${x.id}`),className:"subscription-btn subscription-btn-secondary",title:"Edit Plan",children:r.jsx(qf,{size:16,className:"inline-block"})}),x.status==="active"&&r.jsx("button",{onClick:()=>y(x.id),className:"subscription-btn subscription-btn-danger",title:"Deactivate Plan",disabled:i,children:r.jsx(Co,{size:16,className:"inline-block"})})]})]},x.id))})]})}),!i&&n.length===0&&!l&&r.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No clinic subscription plans found. Add one to get started!"})]})]})},DH=()=>{const t=Tt(),[n,e]=_.useState({name:"",description:"",price:0,period:"monthly",interval:1,razorpay_plan_id:"",status:"active"}),[i,s]=_.useState(!1),[l,c]=_.useState(null),[h,m]=_.useState(null);_.useEffect(()=>{if(h){const S=setTimeout(()=>m(null),5e3);return()=>clearTimeout(S)}},[h]);const f=S=>{const{name:w,value:j,type:E}=S.target;e(A=>({...A,[w]:E==="number"?parseFloat(j):j}))},y=async S=>{if(S.preventDefault(),s(!0),c(null),m(null),!n.name||!n.price||!n.period||n.interval===void 0||n.interval<=0){c("Please fill in all required fields (Name, Price, Period, Interval > 0)."),s(!1);return}try{await CH(n),m({type:"success",message:"Clinic plan created successfully! Redirecting..."}),setTimeout(()=>{t("/dashboard/clinic-subscriptions")},2e3)}catch(w){const j=w.message||"Failed to create clinic plan.";c(j),m({type:"error",message:j})}finally{s(!1)}},x=()=>{t(-1)};return r.jsxs("div",{className:"subscription-page-container",children:[h&&r.jsxs("div",{className:`${h.type==="success"?"bg-green-50 border-green-400 text-green-700":"bg-red-50 border-red-400 text-red-700"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[h.type==="success"?r.jsx(Xa,{size:18,className:"mr-2 text-green-500"}):r.jsx(wi,{size:18,className:"mr-2 text-red-500"}),r.jsx("span",{children:h.message})]}),r.jsx("button",{onClick:()=>m(null),className:`${h.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"} ml-4`,children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Add New Clinic Subscription Plan"}),l&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:l}),r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:n.name||"",onChange:f,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:n.description||"",onChange:f})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:n.price||"",onChange:f,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:n.period||"monthly",onChange:f,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:n.interval||1,onChange:f,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:n.razorpay_plan_id||"",onChange:f})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:x,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:i,className:"subscription-btn",children:[i?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,i?"Creating...":"Create Plan"]})]})]})]})]})},PH=()=>{const{id:t}=Ar(),n=Tt(),[e,i]=_.useState(null),[s,l]=_.useState({}),[c,h]=_.useState(!1),[m,f]=_.useState(!0),[y,x]=_.useState(null),[S,w]=_.useState(null),j=_.useCallback(async()=>{if(!t){x("Plan ID is missing."),f(!1);return}f(!0),x(null);try{const P=await NH(t);i(P),l({name:P.name,description:P.description||"",price:Number(P.price),period:P.period,interval:Number(P.interval),razorpay_plan_id:P.razorpay_plan_id||"",status:P.status})}catch(P){x(P.message||"Failed to fetch clinic plan details."),w({type:"error",message:P.message||"Failed to fetch plan details."})}finally{f(!1)}},[t]);_.useEffect(()=>{j()},[j]),_.useEffect(()=>{if(S){const P=setTimeout(()=>w(null),5e3);return()=>clearTimeout(P)}},[S]);const E=P=>{const{name:R,value:Y,type:F}=P.target;l(q=>({...q,[R]:F==="number"?parseFloat(Y):Y}))},A=async P=>{if(P.preventDefault(),!t){x("Plan ID is missing.");return}if(h(!0),x(null),w(null),!s.name||!s.price||!s.period||s.interval===void 0||s.interval<=0){x("Please fill in all required fields (Name, Price, Period, Interval > 0)."),h(!1);return}try{await _H(t,s),w({type:"success",message:"Clinic plan updated successfully! Redirecting..."}),setTimeout(()=>{n(-1)},2e3)}catch(R){const Y=R.message||"Failed to update clinic plan.";x(Y),w({type:"error",message:Y})}finally{h(!1)}},k=()=>{n(-1)};return m?r.jsx("div",{className:"p-6 text-center",children:"Loading clinic plan details..."}):y&&!e?r.jsx("div",{className:"p-6 text-center text-red-500",children:y}):e?r.jsxs("div",{className:"subscription-page-container",children:[S&&r.jsxs("div",{className:`${S.type==="success"?"bg-green-100 border-green-400 text-green-800":"bg-red-100 border-red-400 text-red-800"}
                  px-4 py-3 rounded-md border mb-4 flex items-center justify-between shadow-sm fixed top-20 right-4 z-[100]`,role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[S.type==="success"?r.jsx(Xa,{size:18,className:"mr-2"}):r.jsx(wi,{size:18,className:"mr-2"}),r.jsx("span",{children:S.message})]}),r.jsx("button",{onClick:()=>w(null),className:"ml-4",children:r.jsx(Vi,{size:16})})]}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h1",{children:"Edit Clinic Subscription Plan"}),y&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-md mb-4 text-sm",role:"alert",children:y}),r.jsxs("form",{onSubmit:A,children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"name",children:["Plan Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"name",name:"name",value:s.name||"",onChange:E,required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"description",children:"Description"}),r.jsx("textarea",{id:"description",name:"description",rows:3,value:s.description||"",onChange:E})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"price",children:["Price (INR) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"price",name:"price",step:"0.01",min:"0",value:s.price!==void 0?s.price:"",onChange:E,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"period",children:["Billing Period ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"period",name:"period",value:s.period||"monthly",onChange:E,required:!0,children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{htmlFor:"interval",children:["Interval ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"interval",name:"interval",min:"1",value:s.interval!==void 0?s.interval:"",onChange:E,required:!0})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"razorpay_plan_id",children:"Razorpay Plan ID (Optional)"}),r.jsx("input",{type:"text",id:"razorpay_plan_id",name:"razorpay_plan_id",value:s.razorpay_plan_id||"",onChange:E})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"status",children:"Status"}),r.jsxs("select",{id:"status",name:"status",value:s.status||"active",onChange:E,children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:k,className:"subscription-btn subscription-btn-secondary",children:"Back"}),r.jsxs("button",{type:"submit",disabled:c,className:"subscription-btn",children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}):null,c?"Saving...":"Save Changes"]})]})]})]})]}):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Clinic plan not found."})},RH=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState(""),[l,c]=_.useState(!0),[h,m]=_.useState(null),[f,y]=_.useState(!1),[x,S]=_.useState(null),w=_.useCallback(async()=>{m(null);try{const A=(await c1()).filter(k=>k.status==="active");e(A),A.length>0&&!i&&s(A[0].id)}catch(E){console.error("Error fetching plans:",E),m(`Failed to load subscription plans: ${E.message}`)}},[]);_.useEffect(()=>{(async()=>{c(!0);try{const A=await EH();if(A&&A.short_url){window.location.href=A.short_url,m("You have a pending subscription. Redirecting to payment...");return}await w()}catch(A){console.error("Error during initial page load:",A),m(`An unexpected error occurred: ${A.message}`)}finally{c(!1)}})()},[w]);const j=async()=>{if(!i){S("Please select a clinic subscription plan.");return}const E=n.find(A=>A.id===i);if(!E){S("Selected plan details not found.");return}y(!0),S(null);try{console.log("Initiating Razorpay clinic subscription for plan:",E);const A=await TH(i);if(A&&A.short_url)window.location.href=A.short_url;else throw new Error("Failed to get Razorpay clinic subscription link from backend.")}catch(A){console.error("Error starting clinic subscription:",A),S(`Failed to start clinic subscription: ${A.message}`),y(!1)}};return l?r.jsx("div",{className:"loading-state-subscription",children:"Loading clinic plans..."}):h?r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("div",{className:"error-alert-subscription",role:"alert",children:[r.jsx("strong",{children:"Error: "}),r.jsx("span",{children:h})]}),r.jsxs("button",{onClick:()=>t(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16}),"Back"]})]}):r.jsxs("div",{className:"subscription-page-container",children:[r.jsxs("button",{onClick:()=>t(-1),className:"all-patients-back-button",children:[r.jsx(en,{size:16}),"Back"]}),r.jsxs("h1",{children:[r.jsx(YE,{size:28}),"Buy Pro Plan for Clinic"]}),x&&r.jsx("div",{className:"error-alert-subscription",role:"alert",children:r.jsx("span",{children:x})}),r.jsxs("div",{className:"subscription-form",children:[r.jsx("h2",{children:"Available Pro Plans"}),n.length===0?r.jsx("p",{className:"empty-state",children:"No active clinic subscription plans found."}):r.jsx("div",{className:"subscription-plan-list",children:n.map(E=>r.jsxs("div",{className:`subscription-plan-card ${i===E.id?"selected-plan":""}`,onClick:()=>s(E.id),children:[r.jsx("h3",{children:E.name}),r.jsxs("p",{className:"price",children:["₹",Number(E.price).toFixed(2)]}),r.jsxs("p",{className:"duration",children:["Every ",E.interval," ",E.period,E.interval>1?"s":""]}),E.description&&r.jsx("p",{children:E.description})]},E.id))})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:j,disabled:!i||f||n.length===0,className:"subscription-btn",children:[f&&r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2 inline-block"}),f?"Initiating Payment...":"Buy Pro Plan"]})})]})},MH=()=>{const t=Tt(),[n,e]=_.useState([]),[i,s]=_.useState(!0),[l,c]=_.useState(null),[h,m]=_.useState(!1),[f,y]=_.useState(!1),[x,S]=_.useState(null),[w,j]=_.useState({name:"",email:"",password:"",role:"user"}),[E,A]=_.useState({name:"",email:"",role:""}),[k,P]=_.useState(""),[R,Y]=_.useState(""),[F,q]=_.useState({}),[z,L]=_.useState(!1),[V,M]=_.useState(null),[B,ee]=_.useState([]),[ie,te]=_.useState(""),[se,X]=_.useState(!1),[K,re]=_.useState(null);_.useEffect(()=>{const ge=setTimeout(()=>{Y(k)},500);return()=>{clearTimeout(ge)}},[k]),_.useEffect(()=>{ve(R)},[R]);const ve=async(ge="")=>{s(!0);try{const Ge=ge?`/api/users?search=${encodeURIComponent(ge)}`:"/api/users",Ne=await(await pe(Ge)).json();if(e(Ne),Ne.length>0){const Be=[...new Set(Ne.map($e=>$e.clinic_id).filter($e=>!!$e))],Qe={};await Promise.all(Be.map(async $e=>{try{const ht=await SH($e);Qe[$e]=ht}catch(ht){console.error(`Failed to fetch subscription status for clinic ${$e}`,ht),Qe[$e]={hasProPlan:!1}}})),q(Qe)}c(null)}catch(Ge){c("Failed to fetch users."),console.error(Ge)}finally{s(!1)}},I=async ge=>{ge.preventDefault();try{await pe("/users",{method:"POST",body:JSON.stringify(w)}),m(!1),j({name:"",email:"",password:"",role:"user"}),ve()}catch(Ge){c("Failed to add user."),console.error(Ge)}},de=async ge=>{if(ge.preventDefault(),!!x)try{await pe(`/users/${x.id}`,{method:"PUT",body:JSON.stringify(E)}),y(!1),S(null),ve()}catch(Ge){c("Failed to update user."),console.error(Ge)}},ae=async ge=>{if(window.confirm("Are you sure you want to delete this user?"))try{await pe(`/users/${ge}`,{method:"DELETE"}),ve()}catch(Ge){c("Failed to delete user."),console.error(Ge)}},H=ge=>{S(ge),A({name:ge.name,email:ge.email,role:ge.role}),y(!0)},ne=async()=>{X(!0);try{const ge=await c1();ee(ge),ge.length>0&&te(ge[0].id),re(null)}catch(ge){re("Failed to fetch subscription plans."),console.error(ge)}finally{X(!1)}},me=ge=>{M(ge),L(!0),ne()},ue=async ge=>{if(ge.preventDefault(),!V||!ie){c("Please select a clinic and a plan.");return}try{await pe("/clinic-subscriptions/manual-activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clinicId:V,planId:ie})}),L(!1),M(null),te(""),ve(),c(null)}catch(Ge){c("Failed to manually activate clinic subscription."),console.error(Ge)}},je=async ge=>{if(window.confirm("Are you sure you want to cancel this clinic's subscription? This action cannot be undone."))try{await wH(ge),ve(),c(null)}catch(Ge){c("Failed to cancel subscription."),console.error(Ge)}};return i?r.jsx("div",{children:"Loading users..."}):l?r.jsx("div",{className:"error-message",children:l}):r.jsxs("div",{className:"user-management-page",children:[r.jsxs("div",{className:"user-management-header",children:[r.jsxs("button",{onClick:()=>t(-1),className:"back-button",children:[r.jsx(en,{size:16}),"Back"]}),r.jsx("h1",{children:"User Management"})]}),r.jsxs("div",{className:"controls-container",children:[r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:k,onChange:ge=>P(ge.target.value),className:"search-input"}),r.jsx("button",{onClick:()=>m(!0),className:"add-user-button",children:"Add New User"})]}),h&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>m(!1),children:"×"}),r.jsx("h2",{children:"Add New User"}),r.jsxs("form",{onSubmit:I,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:w.name,onChange:ge=>j({...w,name:ge.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:w.email,onChange:ge=>j({...w,email:ge.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Password:"}),r.jsx("input",{type:"password",value:w.password,onChange:ge=>j({...w,password:ge.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:w.role,onChange:ge=>j({...w,role:ge.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Add User"})]})]})}),f&&x&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>y(!1),children:"×"}),r.jsx("h2",{children:"Edit User"}),r.jsxs("form",{onSubmit:de,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name:"}),r.jsx("input",{type:"text",value:E.name,onChange:ge=>A({...E,name:ge.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Email:"}),r.jsx("input",{type:"email",value:E.email,onChange:ge=>A({...E,email:ge.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Role:"}),r.jsxs("select",{value:E.role,onChange:ge=>A({...E,role:ge.target.value}),children:[r.jsx("option",{value:"user",children:"User"}),r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),r.jsx("button",{type:"submit",children:"Update User"})]})]})}),z&&r.jsx("div",{className:"modal",children:r.jsxs("div",{className:"modal-content",children:[r.jsx("span",{className:"close-button",onClick:()=>L(!1),children:"×"}),r.jsx("h2",{children:"Select Subscription Plan for Clinic"}),se&&r.jsx("div",{children:"Loading plans..."}),K&&r.jsx("div",{className:"error-message",children:K}),!se&&!K&&B.length===0&&r.jsx("div",{children:"No active subscription plans available."}),!se&&!K&&B.length>0&&r.jsxs("form",{onSubmit:ue,children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Plan:"}),r.jsx("select",{value:ie,onChange:ge=>te(ge.target.value),required:!0,children:B.map(ge=>r.jsxs("option",{value:ge.id,children:[ge.name," - $",ge.price,"/",ge.interval," ",ge.period]},ge.id))})]}),r.jsx("button",{type:"submit",children:"Activate Selected Plan"})]})]})}),r.jsxs("table",{className:"user-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Name"}),r.jsx("th",{children:"Email"}),r.jsx("th",{children:"Role"}),r.jsx("th",{children:"Clinic ID"}),r.jsx("th",{children:"Subscription Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:n.map(ge=>{const Ge=ge.clinic_id||"N/A",Te=Ge!=="N/A"?F[Ge]:null,Ne=(Te==null?void 0:Te.hasProPlan)??!1,Be=Ne?"PRO":"Standard";return r.jsxs("tr",{children:[r.jsx("td",{children:ge.name}),r.jsx("td",{children:ge.email}),r.jsx("td",{children:ge.role}),r.jsx("td",{children:Ge}),r.jsx("td",{children:Ge!=="N/A"?r.jsx("span",{className:Ne?"pro-badge":"standard-badge",children:Be}):"N/A"}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>H(ge),className:"edit-button",children:"Edit"}),r.jsx("button",{onClick:()=>ae(ge.id),className:"delete-button",children:"Delete"}),ge.clinic_id&&!Ne&&r.jsx("button",{onClick:()=>me(ge.clinic_id),className:"start-subscription-button",children:"Start Subscription"}),ge.clinic_id&&Ne&&r.jsx("button",{onClick:()=>je(ge.clinic_id),className:"cancel-subscription-button",children:"Cancel Subscription"})]})]},ge.id)})})]})]})},IH=()=>r.jsxs("div",{className:"admin-panel-container",children:[r.jsxs("h1",{className:"admin-panel-title",children:[r.jsx(dp,{size:32,className:"icon-margin"}),"Super Admin Dashboard"]}),r.jsxs("div",{className:"admin-panel-grid",children:[r.jsxs(ks,{to:"/dashboard/clinic-subscriptions",className:"admin-panel-card",children:[r.jsx(Ku,{size:48,className:"card-icon"}),r.jsx("h2",{children:"Manage Clinic Subscription Plans"}),r.jsx("p",{children:"Add, edit, and view clinic subscription plans."})]}),r.jsxs(ks,{to:"/dashboard/users",className:"admin-panel-card",children:[r.jsx(Zm,{size:48,className:"card-icon"}),r.jsx("h2",{children:"User Management"}),r.jsx("p",{children:"Add, edit, and delete users; manage user roles."})]})]})]}),qm="tutorialCurrentStep",mT=({onActionComplete:t,onStaffAdded:n,requiredRole:e})=>{const[i,s]=_.useState(""),[l,c]=_.useState(""),[h,m]=_.useState(""),[f,y]=_.useState(!1),x=e||"receptionist";_.useEffect(()=>{s(e==="lab"?"Lab":e==="pharmacy"?"Pharmacy":"")},[e]);const S=async()=>{if(!i||!l||!h){t(!1,"Please fill all fields.");return}y(!0);try{const w=await pe("/api/staff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:l,role:x,password:h})});if(w.ok)t(!0,`Successfully added "${i}" as a ${x}!`),s(""),c(""),m(""),n&&n(x);else{const j=await w.json();t(!1,`Failed to add staff: ${j.message||w.statusText}`)}}catch(w){console.error("Error adding staff:",w),t(!1,`Error adding staff: ${w instanceof Error?w.message:String(w)}`)}finally{y(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Add a New Staff Member"}),r.jsx("input",{type:"text",placeholder:"Staff Name",value:i,onChange:w=>s(w.target.value),className:"tutorial-input",disabled:f}),r.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:w=>c(w.target.value),className:"tutorial-input",disabled:f}),r.jsx("input",{type:"password",placeholder:"Password",value:h,onChange:w=>m(w.target.value),className:"tutorial-input",disabled:f}),r.jsx("input",{type:"text",placeholder:"Role",value:x==="lab"?"Lab Technician":x==="pharmacy"?"Pharmacist":"Receptionist",className:"tutorial-input",disabled:!0}),r.jsx("button",{onClick:S,className:"tutorial-button primary",disabled:f,children:f?"Adding...":"Add Staff"})]})},OH=({onActionComplete:t})=>{const[n,e]=_.useState(!1),[i,s]=_.useState([]),[l,c]=_.useState(!1),h=async()=>{e(!0);try{const m=await pe("/api/drugs/import-defaults",{method:"POST"});if(m.ok){const f=await m.json(),y=f.drugs?f.drugs.map(x=>x.name):[];s(y),c(!0),t(!0,`Default medications imported: Added ${f.details.added}, Updated ${f.details.updated}.`,"pharmacyImport")}else{const f=await m.json();t(!1,`Failed to import default medications: ${f.message||m.statusText}`)}}catch(m){console.error("Error importing default medications:",m),t(!1,`Error importing default medications: ${m instanceof Error?m.message:String(m)}`)}finally{e(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Import Default Medications"}),r.jsx("p",{children:"Click the button below to populate your pharmacy inventory with a list of common medications."}),r.jsx("button",{onClick:h,className:"tutorial-button primary",disabled:n,children:n?"Importing...":r.jsxs(r.Fragment,{children:[" ",r.jsx("i",{className:"fas fa-pills"})," Import Default Drugs"]})}),l&&i.length>0&&r.jsxs("div",{className:"imported-drugs-list",children:[r.jsx("h4",{children:"Medications Imported:"}),r.jsx("ul",{children:i.map((m,f)=>r.jsx("li",{children:m},f))})]})]})},LH=({onActionComplete:t})=>{const[n,e]=_.useState(!1),[i,s]=_.useState([]),[l,c]=_.useState(!1),h=async()=>{e(!0);try{const m=await pe("/api/lab-tests/import-defaults",{method:"POST"});if(m.ok){const f=await m.json(),y=f.tests?f.tests.map(x=>x.name):[];s(y),c(!0),t(!0,`Default lab tests imported: Added ${f.details.added}, Updated ${f.details.updated}.`,"labImport")}else{const f=await m.json();t(!1,`Failed to import default lab tests: ${f.message||m.statusText}`)}}catch(m){console.error("Error importing default lab tests:",m),t(!1,`Error importing default lab tests: ${m instanceof Error?m.message:String(m)}`)}finally{e(!1)}};return r.jsxs("div",{className:"tutorial-interactive-component",children:[r.jsx("h3",{children:"Import Default Lab Tests"}),r.jsx("p",{children:"Click the button below to populate your lab test inventory with a list of common tests."}),r.jsx("button",{onClick:h,className:"tutorial-button primary",disabled:n,children:n?"Importing...":r.jsxs(r.Fragment,{children:[" ",r.jsx("i",{className:"fas fa-flask"})," Import Default Lab Tests"]})}),l&&i.length>0&&r.jsxs("div",{className:"imported-drugs-list",children:[r.jsx("h4",{children:"Tests Imported:"}),r.jsx("ul",{children:i.map((m,f)=>r.jsx("li",{children:m},f))})]})]})},Vm=[{title:"Welcome to Your Admin Dashboard!",description:"This quick tour will guide you through essential features to get your clinic set up.",actionText:"Let's Start!",actionPath:null,component:null},{title:"Step 1: Manage Pharmacy Inventory",description:"Set up your pharmacy by adding drugs, managing stock levels, and importing default drug lists. This ensures smooth prescription fulfillment. Import default medications now!",actionText:"Go to Pharmacy Inventory",actionPath:"/dashboard/inventory",component:OH},{title:"Step 2: Manage Lab Test Inventory",description:"Configure your laboratory by adding available lab tests and importing default test lists. This is crucial for accurate diagnostics. Import default lab tests now!",actionText:"Go to Lab Test Inventory",actionPath:"/lab-inventory",component:LH},{title:"Step 3: Add Staff Members (Optional)",description:"You can add your clinic's staff, including doctors, receptionists, lab technicians, and pharmacists. Each role has specific permissions. You can skip this step for now.",actionText:"Go to Staff Management",actionPath:null,component:mT},{title:"You're All Set!",description:"You've completed the basic setup tour. Now, try out the AI-powered complaint analysis feature!",actionText:"Try the AI!",actionPath:"/edit-complaints",component:null}],FH=({onClose:t,onMarkAsSeen:n})=>{const[e,i]=_.useState(()=>{const F=localStorage.getItem(qm);return F?parseInt(F,10):0}),[s,l]=_.useState(null),[c,h]=_.useState(null),[m,f]=_.useState(!1),[y,x]=_.useState(null),[S,w]=_.useState(4),j=Tt();_.useEffect(()=>{if(localStorage.setItem(qm,e.toString()),l(null),h(null),e===0){w(4);const F=setTimeout(()=>{i(z=>z+1)},4e3),q=setInterval(()=>{w(z=>z-1)},1e3);return()=>{clearTimeout(F),clearInterval(q)}}},[e]);const E=(F,q,z)=>{h(F),l(q),F&&(z==="pharmacyImport"||z==="labImport")&&i(L=>L+1)},A=()=>{},k=()=>{n(),t(),localStorage.removeItem(qm)},P=async()=>{const F=Vm[e];if(Y&&F.actionPath==="/edit-complaints"){f(!0),x(null);try{const q=await pe("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"New Patient - AI Entry",age:null,gender:null,phone:null,address:null})});if(!q.ok){const ee=await q.text();throw new Error(`Failed to create patient: ${ee||q.statusText} (${q.status})`)}const z=await q.json();if(!z||!z.id)throw new Error("Failed to create new patient or retrieve patient ID.");const L=z.id,V=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:L,complaint:""})});if(!V.ok){const ee=await V.text();throw new Error(`Failed to create queue entry: ${ee||V.statusText} (${V.status})`)}const M=await V.json();if(!M||!M.id)throw new Error("Failed to create new complaint record or retrieve record ID.");const B=M.id;j(`/dashboard/edit-complaint/${B}`),t(),n(),localStorage.removeItem(qm)}catch(q){console.error("Error starting new AI complaint:",q);const z=`Error: ${q.message||"Failed to start new AI complaint process."}`;x(z)}finally{f(!1)}}else F.actionPath&&(j(F.actionPath),t(),e===Vm.length-1&&(n(),localStorage.removeItem(qm)))},R=Vm[e],Y=e===Vm.length-1;return r.jsx("div",{className:"tutorial-modal-overlay",children:r.jsxs("div",{className:"tutorial-modal-content",children:[r.jsx("h2",{children:R.title}),r.jsx("p",{children:R.description}),R.component&&r.jsxs("div",{className:"tutorial-interactive-area",children:[e===3?r.jsx(mT,{onActionComplete:E,onStaffAdded:A,requiredRole:null}):r.jsx(R.component,{onActionComplete:E}),s&&r.jsx("p",{className:`tutorial-message ${c?"success":"error"}`,children:s})]}),y&&r.jsx("p",{className:"tutorial-message error",children:y})," ",r.jsxs("div",{className:"tutorial-modal-actions",children:[R.actionPath&&r.jsx("button",{onClick:P,className:"tutorial-button action",disabled:m,children:m?"Creating AI Patient...":R.actionText}),e===3&&r.jsx("button",{onClick:()=>i(e+1),className:"tutorial-button secondary",children:"Next Step"}),r.jsx("button",{onClick:k,className:"tutorial-button secondary",disabled:m,children:"Skip Tutorial"})]}),e===0&&r.jsxs("div",{className:"tutorial-countdown-indicator",children:["Next step in ",S," seconds..."]}),r.jsxs("div",{className:"tutorial-step-indicator",children:["Step ",e+1," of ",Vm.length]})]})})},zH=(t,n,e)=>{const i=Math.abs(t.getTime()-n.getTime());return Math.ceil(i/(1e3*60*60*24))<=e},$H=()=>{const[t,n]=_.useState([]),[e,i]=_.useState(!0),[s,l]=_.useState(null),[c,h]=_.useState(""),[m,f]=_.useState(""),[y,x]=_.useState(1),[S]=_.useState(10),w=new Date,j=Tt();_.useEffect(()=>{(async()=>{i(!0);try{const B=await pe("/api/pharmacy-orders/refill-reminders");if(B.ok){const ee=await B.json();n(ee)}else l("Failed to fetch refill reminders.")}catch{l("An error occurred while fetching data.")}finally{i(!1)}})()},[]);const E=V=>{h(V.target.value),x(1)},A=V=>{f(V.target.value),x(1)},k=V=>{const M=new Date(V.updatedAt);return V.items.filter(B=>typeof B.numberOfDays=="number").map(B=>{const ee=new Date(M);return ee.setDate(M.getDate()+(B.numberOfDays||0)),{name:B.name,refillDate:ee}})},P=t.filter(V=>{const M=k(V),B=c?M.some(ie=>ie.refillDate.toLocaleDateString()===new Date(c).toLocaleDateString()):!0,ee=m?V.patientName.toLowerCase().includes(m.toLowerCase())||V.patientPhoneNumber.includes(m)||V.items.some(ie=>ie.name.toLowerCase().includes(m.toLowerCase())):!0;return B&&ee}),R=y*S,Y=R-S,F=P.slice(Y,R),q=Math.ceil(P.length/S),z=V=>x(V),L=async V=>{try{const M=await pe(`/api/queue/patient/${V}/latest`);if(M.ok){const B=await M.json();if(B!=null&&B._id)j(`/dashboard/edit-complaint/${B._id}`);else{const ee=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:V})});if(ee.ok){const ie=await ee.json();ie!=null&&ie.id&&j(`/dashboard/edit-complaint/${ie.id}`)}}}}catch(M){console.error("Error handling row click:",M),l("Failed to navigate to patient complaint.")}};return e?r.jsx("div",{children:"Loading..."}):s?r.jsx("div",{children:s}):r.jsxs("div",{className:"refill-reminders-container",children:[r.jsx("h1",{children:"Refill Reminders"}),r.jsxs("div",{className:"controls-container",children:[r.jsxs("div",{className:"filter-container",children:[r.jsx("label",{htmlFor:"refillDate",children:"Filter by Refill Date: "}),r.jsx("input",{type:"date",id:"refillDate",value:c,onChange:E})]}),r.jsxs("div",{className:"search-container",children:[r.jsx("label",{htmlFor:"search",children:"Search: "}),r.jsx("input",{type:"text",id:"search",placeholder:"Search by patient name, phone, or medication",value:m,onChange:A})]})]}),r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Patient Name"}),r.jsx("th",{children:"Patient Phone Number"}),r.jsx("th",{children:"Medications"}),r.jsx("th",{children:"Refill Dates"})]})}),r.jsx("tbody",{children:F.length>0?F.map(V=>r.jsxs("tr",{onClick:()=>L(V.patientId),style:{cursor:"pointer"},children:[r.jsx("td",{children:V.patientName}),r.jsx("td",{children:V.patientPhoneNumber}),r.jsxs("td",{children:[r.jsx("ul",{children:V.items.map((M,B)=>r.jsxs("li",{children:[M.name," (Qty: ",M.quantity,")",M.tabletsPerDay&&r.jsxs("span",{children:[" - ",M.tabletsPerDay," / day"]}),M.numberOfDays&&r.jsxs("span",{children:[" for ",M.numberOfDays," days"]})]},B))}),r.jsxs("div",{children:["Last Updated: ",new Date(V.updatedAt).toLocaleDateString()]}),V.prescription_for_unavailable_drugs&&r.jsxs("div",{className:"unavailable-prescription",children:[r.jsx("strong",{children:"Unavailable:"})," ",V.prescription_for_unavailable_drugs]})]}),r.jsx("td",{children:r.jsx("ul",{children:k(V).map((M,B)=>{const ee=zH(M.refillDate,w,2);return r.jsxs("li",{className:ee?"highlight-refill-date":"",children:[M.name,": ",M.refillDate.toLocaleDateString()]},B)})})})]},V.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:4,children:"No refill reminders found."})})})]}),r.jsxs("div",{className:"pagination-container",children:[r.jsx("button",{onClick:()=>z(y-1),disabled:y===1,children:"Previous"}),Array.from({length:q},(V,M)=>r.jsx("button",{onClick:()=>z(M+1),className:y===M+1?"active":"",children:M+1},M+1)),r.jsx("button",{onClick:()=>z(y+1),disabled:y===q,children:"Next"})]})]})},UH=()=>{const t=Tt(),n=Kr();return _.useEffect(()=>{const e=new URLSearchParams(n.search),i=e.get("token"),s=e.get("caseDetails");i?(async()=>{try{const c=await pe(`/api/patients?search=${i}&limit=1`);if(!c.ok)throw new Error("Failed to fetch patient by token");const m=(await c.json()).patients[0];if(!m)throw new Error("Patient with the given token not found");const f=await pe(`/api/queue/patient/${m.id}/latest`);if(f.ok){const S=await f.json();if(S!=null&&S._id){t(`/dashboard/edit-complaint/${S._id}`,{state:{initialComplaint:s}});return}}const y=await pe("/api/queue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patientId:m.id,complaint:s})});if(!y.ok)throw new Error("Failed to create queue entry");const x=await y.json();if(x!=null&&x.id)t(`/dashboard/edit-complaint/${x.id}`,{state:{initialComplaint:s}});else throw new Error("Failed to get ID from new queue entry.")}catch(c){console.error("Error handling complaint URL:",c),t("/dashboard/search-patient")}})():t("/dashboard/search-patient")},[n,t]),r.jsx("div",{children:"Loading..."})},BH=()=>{const[t,n]=_.useState(""),[e,i]=_.useState(!1),[s,l]=_.useState(""),[c,h]=_.useState("");_.useEffect(()=>{(async()=>{i(!0);try{const y=localStorage.getItem("token"),x=await Wn.get("/api/clinics/settings",{headers:{Authorization:`Bearer ${y}`}});n(x.data.gemini_api_key||"")}catch{l("Failed to fetch API key.")}finally{i(!1)}})()},[]);const m=async f=>{f.preventDefault(),i(!0),l(""),h("");try{const y=localStorage.getItem("token");await Wn.put("/api/clinics/settings",{gemini_api_key:t},{headers:{Authorization:`Bearer ${y}`}}),h("API key updated successfully.")}catch{l("Failed to update API key.")}finally{i(!1)}};return r.jsxs("div",{children:[r.jsx("h2",{children:"Gemini API Key Settings"}),r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"apiKey",children:"Gemini API Key"}),r.jsx("input",{id:"apiKey",type:"text",value:t,onChange:f=>n(f.target.value),disabled:e})]}),r.jsx("button",{type:"submit",disabled:e,children:e?"Saving...":"Save"})]}),s&&r.jsx("p",{style:{color:"red"},children:s}),c&&r.jsx("p",{style:{color:"green"},children:c})]})},qH=()=>{const[t,n]=_.useState([]),[e,i]=_.useState(!0),[s,l]=_.useState(null),c=_.useCallback(async()=>{i(!0),l(null);try{const f=await pe("/api/notifications?all=true");if(f.ok){const x=(await f.json()).sort((S,w)=>{const j={expired_drug:1,near_expiry_drug:2,low_stock:3},E=j[S.type]||99,A=j[w.type]||99;return E!==A?E-A:new Date(w.created_at).getTime()-new Date(S.created_at).getTime()});n(x)}else l("Failed to fetch notifications."),console.error("Failed to fetch notifications:",f.statusText)}catch(f){l("Error fetching notifications."),console.error("Error fetching notifications:",f)}finally{i(!1)}},[]);_.useEffect(()=>{c()},[c]);const h=async f=>{try{const y=await pe(`/api/notifications/${f}/read`,{method:"PUT"});y.ok?n(x=>x.map(S=>S.id===f?{...S,is_read:!0}:S)):console.error("Failed to mark notification as read:",y.statusText)}catch(y){console.error("Error marking notification as read:",y)}},m=async()=>{try{const f=t.filter(x=>!x.is_read).map(x=>x.id);if(f.length===0)return;const y=await pe("/api/notifications/mark-all-read",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:f})});y.ok?n(x=>x.map(S=>({...S,is_read:!0}))):console.error("Failed to mark all notifications as read:",y.statusText)}catch(f){console.error("Error marking all notifications as read:",f)}};return e?r.jsx("div",{className:"notifications-page-container",children:"Loading notifications..."}):s?r.jsx("div",{className:"notifications-page-container error-message",children:s}):r.jsxs("div",{className:"notifications-page-container",children:[r.jsx("h2",{className:"notifications-page-title",children:"All Notifications"}),r.jsx("div",{className:"notifications-actions",children:r.jsx("button",{onClick:m,disabled:t.every(f=>f.is_read),className:"mark-all-read-button",children:"Mark All As Read"})}),t.length===0?r.jsx("p",{className:"no-notifications-message",children:"No notifications to display."}):r.jsx("ul",{className:"notifications-list",children:t.map(f=>r.jsxs("li",{className:`notification-item ${f.is_read?"read":"unread"}`,children:[r.jsxs("div",{className:"notification-content",children:[r.jsxs("span",{className:"notification-type",children:[f.type.replace(/_/g," "),": "]}),f.message]}),r.jsxs("div",{className:"notification-meta",children:[r.jsx("span",{className:"notification-timestamp",children:new Date(f.created_at).toLocaleString()}),!f.is_read&&r.jsx("button",{onClick:()=>h(f.id),className:"mark-read-button",children:"Mark as Read"})]})]},f.id))})]})};function VH(){const[t,n]=_.useState(!1),[e,i]=_.useState(null),[s,l]=_.useState(!0),[c,h]=_.useState(null),[m,f]=_.useState(!1),y=P=>{i(P),n(!0),P.role==="admin"&&!P.has_seen_tutorial&&f(!0)},x=()=>{n(!1),i(null),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")};_.useEffect(()=>{const P=localStorage.getItem("authToken"),R=localStorage.getItem("currentUser");if(P&&R)try{const Y=JSON.parse(R);i(Y),n(!0),Y.role==="admin"&&!Y.has_seen_tutorial&&f(!0)}catch(Y){console.error("Error parsing stored user data:",Y),localStorage.removeItem("authToken"),localStorage.removeItem("currentUser")}l(!1)},[]),_.useEffect(()=>{(async()=>{if(t&&e)try{const R=await AH();h(R)}catch(R){console.error("Error fetching clinic pro plan status:",R),h({hasProPlan:!1})}else h(null)})()},[t,e]);const[S,w]=_.useState(null),[j,E]=_.useState(!1);_.useEffect(()=>{const P=R=>{R.preventDefault(),w(R),E(!0),console.log("beforeinstallprompt event fired")};return window.addEventListener("beforeinstallprompt",P),(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)&&(console.log("App is already installed (standalone)."),E(!1)),()=>{window.removeEventListener("beforeinstallprompt",P)}},[]),_.useEffect(()=>{const P=window.matchMedia("(prefers-color-scheme: dark)"),R=()=>{P.matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return R(),P.addEventListener("change",R),()=>{P.removeEventListener("change",R),document.body.classList.remove("dark-mode")}},[]);const A=_.useCallback(async()=>{if(!S){console.log("Install prompt event not available.");return}const P=S;P.prompt();const{outcome:R}=await P.userChoice;console.log(`User response to the install prompt: ${R}`),w(null),E(!1)},[S]),k=async()=>{if(e)try{(await pe(`/api/users/${e.id}/tutorial-seen`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({has_seen_tutorial:!0})})).ok?(i(R=>R?{...R,has_seen_tutorial:!0}:null),localStorage.setItem("currentUser",JSON.stringify({...e,has_seen_tutorial:!0})),f(!1)):console.error("Failed to update tutorial status on backend.")}catch(P){console.error("Error marking tutorial as seen:",P)}};return s?r.jsx("div",{children:"Loading..."}):r.jsxs(lE,{children:[r.jsxs(Of,{children:[r.jsx(Xe,{path:"/login",element:t?r.jsx(Tn,{to:"/dashboard"}):r.jsx(wE,{onLoginSuccess:y})}),r.jsx(Xe,{path:"/register",element:t?r.jsx(Tn,{to:"/dashboard"}):r.jsx(SE,{})}),r.jsx(Xe,{path:"/handle-complaint-url",element:t?r.jsx(UH,{}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/live-api",element:t?r.jsx(H$,{}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/create-lab-order",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(fU,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/manage-admission",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(aj,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/lab/report/:orderId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(qN,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/lab/enter-report/:orderId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(qN,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/dashboard/add-patient",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(r0,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/billing",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(HV,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/dashboard/edit-complaint/:recordId",element:t&&e?r.jsx(BV,{}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/dashboard/edit-pharmacy-order/:orderId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(fT,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/dashboard/*",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:HH(e.role,e,pe)}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/lab/view-report/:orderId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(nH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/lab/search-report",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(iH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/patient/:patientId/lab-reports",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(rH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/patient/:patientId/pharmacy-orders",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(GV,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/inventory",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(hT,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/lab-inventory",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(j0,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/patient/:patientId/complaints",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(qV,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/patient/:patientId/admission-bill/:billId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(lH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/start-subscription/:patientId",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(bH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/start-clinic-subscription",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(RH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/refill-reminders",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx($H,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"/dashboard/notifications",element:t&&e?r.jsx(gi,{user:e,onLogout:x,showInstallPrompt:j,onInstallClick:A,clinicProPlanStatus:c,children:r.jsx(qH,{})}):r.jsx(Tn,{to:"/login"})}),r.jsx(Xe,{path:"*",element:r.jsx(Tn,{to:t?"/dashboard":"/login"})})]}),m&&r.jsx(FH,{onClose:()=>f(!1),onMarkAsSeen:k})]})}const HH=(t,n,e)=>{switch(t){case"superadmin":return r.jsxs(Of,{children:[r.jsx(Xe,{index:!0,element:r.jsx(IH,{})}),r.jsx(Xe,{path:"clinic-subscriptions",element:r.jsx(kH,{})}),r.jsx(Xe,{path:"clinic-subscriptions/add",element:r.jsx(DH,{})}),r.jsx(Xe,{path:"clinic-subscriptions/edit/:id",element:r.jsx(PH,{})}),r.jsx(Xe,{path:"users",element:r.jsx(MH,{})})," ",r.jsx(Xe,{path:"*",element:r.jsx("div",{children:"Unknown Super Admin Section"})})]});case"admin":return r.jsxs(Of,{children:[r.jsx(Xe,{index:!0,element:r.jsx(nU,{fetchWithAuth:e})}),r.jsx(Xe,{path:"staff",element:r.jsx(oH,{fetchWithAuth:e})}),r.jsx(Xe,{path:"staff/add",element:r.jsx(uU,{clinicId:n==null?void 0:n.clinic_id})}),r.jsx(Xe,{path:"staff/edit/:id",element:r.jsx(dU,{})}),r.jsx(Xe,{path:"patients/add",element:r.jsx(r0,{})}),r.jsx(Xe,{path:"search-patient",element:r.jsx($f,{})}),r.jsx(Xe,{path:"patients",element:r.jsx(i0,{})}),r.jsx(Xe,{path:"analysis",element:r.jsx(Pb,{})}),r.jsx(Xe,{path:"inventory/add",element:r.jsx(JS,{})}),r.jsx(Xe,{path:"inventory",element:r.jsx(wC,{})}),r.jsx(Xe,{path:"inventory/edit/:id",element:r.jsx(QS,{})}),r.jsx(Xe,{path:"queue",element:r.jsx(sb,{})}),r.jsx(Xe,{path:"subscriptions",element:r.jsx(yH,{})}),r.jsx(Xe,{path:"subscriptions/add",element:r.jsx(xH,{})}),r.jsx(Xe,{path:"subscriptions/edit/:id",element:r.jsx(vH,{})}),r.jsx(Xe,{path:"gemini-api-key-settings",element:r.jsx(BH,{})}),r.jsx(Xe,{path:"*",element:r.jsx("div",{children:"Unknown Admin Section"})})," "]});case"doctor":return r.jsxs(Of,{children:[r.jsx(Xe,{index:!0,element:r.jsx(Tn,{to:"search-patient",replace:!0})}),r.jsx(Xe,{path:"search-patient",element:r.jsx($f,{})}),r.jsx(Xe,{path:"queue",element:r.jsx(sb,{})}),r.jsx(Xe,{path:":patientId",element:r.jsx(sb,{})}),r.jsx(Xe,{path:"add-patient",element:r.jsx(r0,{})}),r.jsx(Xe,{path:"*",element:r.jsx("div",{children:"Unknown Doctor Section"})})]});case"receptionist":return r.jsxs(Of,{children:[r.jsx(Xe,{index:!0,element:r.jsx(rU,{})}),r.jsx(Xe,{path:"all-patients",element:r.jsx(i0,{})}),r.jsx(Xe,{path:"search-patient",element:r.jsx($f,{})}),r.jsx(Xe,{path:"*",element:r.jsx("div",{children:"Unknown Reception Section"})})," "]});case"lab":return r.jsx(oU,{});case"pharmacy":return r.jsxs(Of,{children:[r.jsx(Xe,{index:!0,element:r.jsx(lU,{})}),r.jsx(Xe,{path:"inventory",element:r.jsx(hT,{})}),r.jsx(Xe,{path:"inventory/add",element:r.jsx(JS,{})}),r.jsx(Xe,{path:"inventory/edit/:id",element:r.jsx(QS,{})}),r.jsx(Xe,{path:"settings",element:r.jsx(cU,{})}),r.jsx(Xe,{path:"add-order",element:r.jsx(YV,{})}),r.jsx(Xe,{path:"edit-pharmacy-order/:orderId",element:r.jsx(fT,{})}),r.jsx(Xe,{path:"analysis",element:r.jsx(Pb,{})}),r.jsx(Xe,{path:"orders/:orderId",element:r.jsx(uH,{})}),r.jsx(Xe,{path:"search-patient-records",element:r.jsx($f,{})}),r.jsx(Xe,{path:"*",element:r.jsx(Tn,{to:"/dashboard",replace:!0})})]});default:return r.jsxs("div",{children:["Unknown role (",t,") or dashboard not implemented."]},t)}},gi=({user:t,onLogout:n,children:e,showInstallPrompt:i,onInstallClick:s,clinicProPlanStatus:l})=>{const c=Tt(),[h,m]=_.useState(!1),[f,y]=_.useState(!1),[x,S]=_.useState([]),[w,j]=_.useState(0),[E,A]=_.useState(!1),k=_.useRef(null),P=_.useCallback(async()=>{try{const z=await pe("/api/notifications");if(z.ok){const M=(await z.json()).reduce((B,ee)=>{const ie=B.find(te=>te.message===ee.message);return ie?new Date(ee.created_at)>new Date(ie.created_at)?B.map(te=>te.message===ee.message?ee:te):B:[...B,ee]},[]).sort((B,ee)=>{const ie={expired_drug:1,near_expiry_drug:2,low_stock:3},te=ie[B.type]||99,se=ie[ee.type]||99;return te!==se?te-se:new Date(ee.created_at).getTime()-new Date(B.created_at).getTime()});S(M),j(M.filter(B=>!B.is_read).length)}else console.error("Failed to fetch notifications:",z.statusText)}catch(z){console.error("Error fetching notifications:",z)}},[]);_.useEffect(()=>{if(t!=null&&t.clinic_id){P();const z=setInterval(P,5*60*1e3);return()=>clearInterval(z)}},[t==null?void 0:t.clinic_id,P]);const R=()=>{m(!h),h||y(!1)},Y=()=>{y(!f),f||m(!1)};_.useEffect(()=>{const z=L=>{k.current&&!k.current.contains(L.target)&&f&&y(!1)};return f&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[f]);const F=async z=>{try{const L=await pe(`/api/notifications/${z}/read`,{method:"PUT"});L.ok?P():console.error("Failed to mark notification as read:",L.statusText)}catch(L){console.error("Error marking notification as read:",L)}},q=async()=>{A(!0);try{const z=await pe("/api/notifications/trigger-all",{method:"POST"});z.ok?(console.log("Notification checks triggered successfully."),await P()):console.error("Failed to trigger notification checks:",z.statusText)}catch(z){console.error("Error triggering notification checks:",z)}finally{A(!1)}};return r.jsxs("div",{className:"dashboard-layout",children:[" ",r.jsxs("nav",{className:"app-header no-print",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("a",{href:"#",onClick:z=>{z.preventDefault(),c("/dashboard")},className:"logo-container",children:r.jsx("img",{src:"/logo.png",alt:"App Logo",className:"logo-image"})}),r.jsxs("div",{className:"title-section",children:[r.jsx("a",{href:"https://dr.newtons.in",target:"_blank",rel:"noopener noreferrer",className:"app-title-link",children:"Newtons Ai"}),r.jsxs("span",{className:"user-role-panel",children:["(",t.role.charAt(0).toUpperCase()+t.role.slice(1)," Panel)"]})]})]}),r.jsxs("div",{className:"header-right",children:[i&&r.jsxs("button",{onClick:s,className:"install-button",title:"Install App",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),r.jsx("span",{children:"Install"})]}),l&&(l.hasProPlan?r.jsx("span",{className:"pro-badge",children:"PRO"}):r.jsx("button",{onClick:()=>c("/start-clinic-subscription"),className:"go-pro-button",children:"GoPro"})),r.jsxs("div",{className:"notifications-section",ref:k,children:[" ",r.jsxs("button",{className:"notification-icon","aria-label":"Notifications",onClick:Y,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),w>0&&r.jsx("span",{className:"notification-count",children:w})]}),f&&r.jsxs("div",{className:"notifications-dropdown",children:[r.jsx("div",{className:"dropdown-header",children:"Notifications"}),r.jsx("ul",{className:"dropdown-list",children:x.length>0?x.map(z=>r.jsxs("li",{className:`dropdown-item ${z.is_read?"read":"unread"}`,onClick:()=>F(z.id),children:[z.message,r.jsx("span",{className:"notification-timestamp",children:new Date(z.created_at).toLocaleString()})]},z.id)):r.jsx("li",{className:"dropdown-item",children:"No new notifications"})}),r.jsxs("div",{className:"dropdown-footer",children:[r.jsx("button",{onClick:()=>c("/dashboard/notifications"),children:"View All"}),(t.role==="admin"||t.role==="superadmin")&&r.jsx("button",{onClick:q,className:"fetch-all-button",disabled:E,children:E?"Fetching...":"Fetch All"})]})]})]}),r.jsx("button",{className:"hamburger-icon",onClick:R,"aria-label":"Open navigation",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r.jsx("main",{className:"main-content",children:e}),r.jsx(PE,{user:t,onLogout:n,userRole:t.role,isOpen:h,onClose:R}),h&&r.jsx("div",{className:"side-panel-overlay",onClick:R})]})};WT.createRoot(document.getElementById("root")).render(r.jsx(_.StrictMode,{children:r.jsx(VH,{})}));
